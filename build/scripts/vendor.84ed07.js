/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	var parentJsonpFunction = window["webpackJsonp"];
/******/ 	window["webpackJsonp"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [], result;
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId])
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);
/******/ 		while(resolves.length)
/******/ 			resolves.shift()();
/******/ 		if(executeModules) {
/******/ 			for(i=0; i < executeModules.length; i++) {
/******/ 				result = __webpack_require__(__webpack_require__.s = executeModules[i]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	};
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// objects to store loaded and loading chunks
/******/ 	var installedChunks = {
/******/ 		1: 0
/******/ 	};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		if(installedChunks[chunkId] === 0)
/******/ 			return Promise.resolve();
/******/
/******/ 		// a Promise means "currently loading".
/******/ 		if(installedChunks[chunkId]) {
/******/ 			return installedChunks[chunkId][2];
/******/ 		}
/******/
/******/ 		// setup Promise in chunk cache
/******/ 		var promise = new Promise(function(resolve, reject) {
/******/ 			installedChunks[chunkId] = [resolve, reject];
/******/ 		});
/******/ 		installedChunks[chunkId][2] = promise;
/******/
/******/ 		// start chunk loading
/******/ 		var head = document.getElementsByTagName('head')[0];
/******/ 		var script = document.createElement('script');
/******/ 		script.type = 'text/javascript';
/******/ 		script.charset = 'utf-8';
/******/ 		script.async = true;
/******/ 		script.timeout = 120000;
/******/
/******/ 		if (__webpack_require__.nc) {
/******/ 			script.setAttribute("nonce", __webpack_require__.nc);
/******/ 		}
/******/ 		script.src = __webpack_require__.p + "scripts/" + chunkId + "." + {"0":"30e257"}[chunkId] + ".js";
/******/ 		var timeout = setTimeout(onScriptComplete, 120000);
/******/ 		script.onerror = script.onload = onScriptComplete;
/******/ 		function onScriptComplete() {
/******/ 			// avoid mem leaks in IE.
/******/ 			script.onerror = script.onload = null;
/******/ 			clearTimeout(timeout);
/******/ 			var chunk = installedChunks[chunkId];
/******/ 			if(chunk !== 0) {
/******/ 				if(chunk) chunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));
/******/ 				installedChunks[chunkId] = undefined;
/******/ 			}
/******/ 		};
/******/ 		head.appendChild(script);
/******/
/******/ 		return promise;
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/mifanBlog/build";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ({

/***/ 0:
/* unknown exports provided */
/* all exports used */
/*!**************************!*\
  !*** external "angular" ***!
  \**************************/
/***/ (function(module, exports) {

eval("module.exports = angular;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImFuZ3VsYXJcIj8xMWQyIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYW5ndWxhcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImFuZ3VsYXJcIlxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 1:
/* unknown exports provided */
/* all exports used */
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/***/ (function(module, exports) {

eval("module.exports = jQuery;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImpRdWVyeVwiPzBjYjgiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBqUXVlcnk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJqUXVlcnlcIlxuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ "1Ufw":
/* unknown exports provided */
/* all exports used */
/*!*************************************************!*\
  !*** ./app/commons/wangEditor/js/wangEditor.js ***!
  \*************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(module) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function (factory) {\n    if (typeof window.define === 'function') {\n        if (window.define.amd) {\n            // AMD模式\n            window.define('wangEditor', [\"jquery\"], factory);\n        } else if (window.define.cmd) {\n            // CMD模式\n            window.define(function (require, exports, module) {\n                return factory;\n            });\n        } else {\n            // 全局模式\n            factory(window.jQuery);\n        }\n    } else if (( false ? 'undefined' : _typeof(module)) === \"object\" && _typeof(module.exports) === \"object\") {\n        // commonjs\n\n        // 引用 css —— webapck\n        __webpack_require__(/*! ../css/wangEditor.less */ \"FFq0\");\n\n        module.exports = factory(\n        // 传入 jquery ，支持使用 npm 方式或者自己定义jquery的路径\n        __webpack_require__(/*! jquery */ 1));\n    } else {\n        // 全局模式\n        factory(window.jQuery);\n    }\n})(function ($) {\n\n    // 验证是否引用jquery\n    if (!$ || !$.fn || !$.fn.jquery) {\n        alert('在引用wangEditor.js之前，先引用jQuery，否则无法使用 wangEditor');\n        return;\n    }\n\n    // 定义扩展函数\n    var _e = function _e(fn) {\n        var E = window.wangEditor;\n        if (E) {\n            // 执行传入的函数\n            fn(E, $);\n        }\n    };\n    // 定义构造函数\n    (function (window, $) {\n        if (window.wangEditor) {\n            // 重复引用\n            alert('一个页面不能重复引用 wangEditor.js 或 wangEditor.min.js ！！！');\n            return;\n        }\n\n        // 编辑器（整体）构造函数\n        var E = function E(elem) {\n            // 支持 id 和 element 两种形式\n            if (typeof elem === 'string') {\n                elem = '#' + elem;\n            }\n\n            // ---------------获取基本节点------------------\n            var $elem = $(elem);\n            if ($elem.length !== 1) {\n                return;\n            }\n            var nodeName = $elem[0].nodeName;\n            if (nodeName !== 'TEXTAREA' && nodeName !== 'DIV') {\n                // 只能是 textarea 和 div ，其他类型的元素不行\n                return;\n            }\n            this.valueNodeName = nodeName.toLowerCase();\n            this.$valueContainer = $elem;\n\n            // 记录 elem 的 prev 和 parent（最后渲染 editor 要用到）\n            this.$prev = $elem.prev();\n            this.$parent = $elem.parent();\n\n            // ------------------初始化------------------\n            this.init();\n        };\n\n        E.fn = E.prototype;\n\n        E.$body = $('body');\n        E.$document = $(document);\n        E.$window = $(window);\n        E.userAgent = navigator.userAgent;\n        E.getComputedStyle = window.getComputedStyle;\n        E.w3cRange = typeof document.createRange === 'function';\n        E.hostname = location.hostname.toLowerCase();\n        E.websiteHost = 'wangeditor.github.io|www.wangeditor.com|wangeditor.coding.me';\n        E.isOnWebsite = E.websiteHost.indexOf(E.hostname) >= 0;\n        E.docsite = 'http://www.kancloud.cn/wangfupeng/wangeditor2/113961';\n\n        // 暴露给全局对象\n        window.wangEditor = E;\n\n        // 注册 plugin 事件，用于用户自定义插件\n        // 用户在引用 wangEditor.js 之后，还可以通过 E.plugin() 注入自定义函数，\n        // 该函数将会在 editor.create() 方法的最后一步执行\n        E.plugin = function (fn) {\n            if (!E._plugins) {\n                E._plugins = [];\n            }\n\n            if (typeof fn === 'function') {\n                E._plugins.push(fn);\n            }\n        };\n    })(window, $);\n    // editor 绑定事件\n    _e(function (E, $) {\n\n        E.fn.init = function () {\n\n            // 初始化 editor 默认配置\n            this.initDefaultConfig();\n\n            // 增加container\n            this.addEditorContainer();\n\n            // 增加编辑区域\n            this.addTxt();\n\n            // 增加menuContainer\n            this.addMenuContainer();\n\n            // 初始化菜单集合\n            this.menus = {};\n\n            // 初始化commandHooks\n            this.commandHooks();\n        };\n    });\n    // editor api\n    _e(function (E, $) {\n\n        // 预定义 ready 事件\n        E.fn.ready = function (fn) {\n\n            if (!this.readyFns) {\n                this.readyFns = [];\n            }\n\n            this.readyFns.push(fn);\n        };\n\n        // 处理ready事件\n        E.fn.readyHeadler = function () {\n            var fns = this.readyFns;\n\n            while (fns.length) {\n                fns.shift().call(this);\n            }\n        };\n\n        // 更新内容到 $valueContainer\n        E.fn.updateValue = function () {\n            var editor = this;\n            var $valueContainer = editor.$valueContainer;\n            var $txt = editor.txt.$txt;\n\n            if ($valueContainer === $txt) {\n                // 传入生成编辑器的div，即是编辑区域\n                return;\n            }\n\n            var value = $txt.html();\n            $valueContainer.val(value);\n        };\n\n        // 获取初始化的内容\n        E.fn.getInitValue = function () {\n            var editor = this;\n            var $valueContainer = editor.$valueContainer;\n            var currentValue = '';\n            var nodeName = editor.valueNodeName;\n            if (nodeName === 'div') {\n                currentValue = $valueContainer.html();\n            } else if (nodeName === 'textarea') {\n                currentValue = $valueContainer.val();\n            }\n\n            return currentValue;\n        };\n\n        // 触发菜单updatestyle\n        E.fn.updateMenuStyle = function () {\n            var menus = this.menus;\n\n            $.each(menus, function (k, menu) {\n                menu.updateSelected();\n            });\n        };\n\n        // 除了传入的 menuIds，其他全部启用\n        E.fn.enableMenusExcept = function (menuIds) {\n            if (this._disabled) {\n                // 编辑器处于禁用状态，则不执行改操作\n                return;\n            }\n            // menuIds参数：支持数组和字符串\n            menuIds = menuIds || [];\n            if (typeof menuIds === 'string') {\n                menuIds = [menuIds];\n            }\n\n            $.each(this.menus, function (k, menu) {\n                if (menuIds.indexOf(k) >= 0) {\n                    return;\n                }\n                menu.disabled(false);\n            });\n        };\n\n        // 除了传入的 menuIds，其他全部禁用\n        E.fn.disableMenusExcept = function (menuIds) {\n            if (this._disabled) {\n                // 编辑器处于禁用状态，则不执行改操作\n                return;\n            }\n            // menuIds参数：支持数组和字符串\n            menuIds = menuIds || [];\n            if (typeof menuIds === 'string') {\n                menuIds = [menuIds];\n            }\n\n            $.each(this.menus, function (k, menu) {\n                if (menuIds.indexOf(k) >= 0) {\n                    return;\n                }\n                menu.disabled(true);\n            });\n        };\n\n        // 隐藏所有 dropPanel droplist modal\n        E.fn.hideDropPanelAndModal = function () {\n            var menus = this.menus;\n\n            $.each(menus, function (k, menu) {\n                var m = menu.dropPanel || menu.dropList || menu.modal;\n                if (m && m.hide) {\n                    m.hide();\n                }\n            });\n        };\n    });\n    // selection range API\n    _e(function (E, $) {\n\n        // 用到 w3c range 的函数，如果检测到浏览器不支持 w3c range，则赋值为空函数\n        var ieRange = !E.w3cRange;\n        function emptyFn() {}\n\n        // 设置或读取当前的range\n        E.fn.currentRange = function (cr) {\n            if (cr) {\n                this._rangeData = cr;\n            } else {\n                return this._rangeData;\n            }\n        };\n\n        // 将当前选区折叠\n        E.fn.collapseRange = function (range, opt) {\n            // opt 参数说明：'start'-折叠到开始; 'end'-折叠到结束\n            opt = opt || 'end';\n            opt = opt === 'start' ? true : false;\n\n            range = range || this.currentRange();\n\n            if (range) {\n                // 合并，保存\n                range.collapse(opt);\n                this.currentRange(range);\n            }\n        };\n\n        // 获取选区的文字\n        E.fn.getRangeText = ieRange ? emptyFn : function (range) {\n            range = range || this.currentRange();\n            if (!range) {\n                return;\n            }\n            return range.toString();\n        };\n\n        // 获取选区对应的DOM对象\n        E.fn.getRangeElem = ieRange ? emptyFn : function (range) {\n            range = range || this.currentRange();\n            var dom = range.commonAncestorContainer;\n\n            if (dom.nodeType === 1) {\n                return dom;\n            } else {\n                return dom.parentNode;\n            }\n        };\n\n        // 选区内容是否为空？\n        E.fn.isRangeEmpty = ieRange ? emptyFn : function (range) {\n            range = range || this.currentRange();\n\n            if (range && range.startContainer) {\n                if (range.startContainer === range.endContainer) {\n                    if (range.startOffset === range.endOffset) {\n                        return true;\n                    }\n                }\n            }\n\n            return false;\n        };\n\n        // 保存选区数据\n        E.fn.saveSelection = ieRange ? emptyFn : function (range) {\n            var self = this,\n                _parentElem,\n                selection,\n                txt = self.txt.$txt.get(0);\n\n            if (range) {\n                _parentElem = range.commonAncestorContainer;\n            } else {\n                selection = document.getSelection();\n                if (selection.getRangeAt && selection.rangeCount) {\n                    range = document.getSelection().getRangeAt(0);\n                    _parentElem = range.commonAncestorContainer;\n                }\n            }\n            // 确定父元素一定要包含在编辑器区域内\n            if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem)) {\n                // 保存选择区域\n                self.currentRange(range);\n            }\n        };\n\n        // 恢复选中区域\n        E.fn.restoreSelection = ieRange ? emptyFn : function (range) {\n            var selection;\n\n            range = range || this.currentRange();\n\n            if (!range) {\n                return;\n            }\n\n            // 使用 try catch 来防止 IE 某些情况报错\n            try {\n                selection = document.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n            } catch (ex) {\n                E.error('执行 editor.restoreSelection 时，IE可能会有异常，不影响使用');\n            }\n        };\n\n        // 根据elem恢复选区\n        E.fn.restoreSelectionByElem = ieRange ? emptyFn : function (elem, opt) {\n            // opt参数说明：'start'-折叠到开始，'end'-折叠到结束，'all'-全部选中\n            if (!elem) {\n                return;\n            }\n            opt = opt || 'end'; // 默认为折叠到结束\n\n            // 根据elem获取选区\n            this.setRangeByElem(elem);\n\n            // 根据 opt 折叠选区\n            if (opt === 'start') {\n                this.collapseRange(this.currentRange(), 'start');\n            }\n            if (opt === 'end') {\n                this.collapseRange(this.currentRange(), 'end');\n            }\n\n            // 恢复选区\n            this.restoreSelection();\n        };\n\n        // 初始化选区\n        E.fn.initSelection = ieRange ? emptyFn : function () {\n            var editor = this;\n            if (editor.currentRange()) {\n                //如果currentRange有值，则不用再初始化\n                return;\n            }\n\n            var range;\n            var $txt = editor.txt.$txt;\n            var $firstChild = $txt.children().first();\n\n            if ($firstChild.length) {\n                editor.restoreSelectionByElem($firstChild.get(0));\n            }\n        };\n\n        // 根据元素创建选区\n        E.fn.setRangeByElem = ieRange ? emptyFn : function (elem) {\n            var editor = this;\n            var txtElem = editor.txt.$txt.get(0);\n            if (!elem || !$.contains(txtElem, elem)) {\n                return;\n            }\n\n            // 找到elem的第一个 textNode 和 最后一个 textNode\n            var firstTextNode = elem.firstChild;\n            while (firstTextNode) {\n                if (firstTextNode.nodeType === 3) {\n                    break;\n                }\n                // 继续向下\n                firstTextNode = firstTextNode.firstChild;\n            }\n            var lastTextNode = elem.lastChild;\n            while (lastTextNode) {\n                if (lastTextNode.nodeType === 3) {\n                    break;\n                }\n                // 继续向下\n                lastTextNode = lastTextNode.lastChild;\n            }\n\n            var range = document.createRange();\n            if (firstTextNode && lastTextNode) {\n                // 说明 elem 有内容，能取到子元素\n                range.setStart(firstTextNode, 0);\n                range.setEnd(lastTextNode, lastTextNode.textContent.length);\n            } else {\n                // 说明 elem 无内容\n                range.setStart(elem, 0);\n                range.setEnd(elem, 0);\n            }\n\n            // 保存选区\n            editor.saveSelection(range);\n        };\n    });\n    // selection range API - IE8及以下\n    _e(function (E, $) {\n\n        if (E.w3cRange) {\n            // 说明支持 W3C 的range方法\n            return;\n        }\n\n        // -----------------IE8时，需要重写以下方法-------------------\n\n        // 获取选区的文字\n        E.fn.getRangeText = function (range) {\n            range = range || this.currentRange();\n            if (!range) {\n                return;\n            }\n            return range.text;\n        };\n\n        // 获取选区对应的DOM对象\n        E.fn.getRangeElem = function (range) {\n            range = range || this.currentRange();\n            if (!range) {\n                return;\n            }\n            var dom = range.parentElement();\n\n            if (dom.nodeType === 1) {\n                return dom;\n            } else {\n                return dom.parentNode;\n            }\n        };\n\n        // 选区内容是否为空？\n        E.fn.isRangeEmpty = function (range) {\n            range = range || this.currentRange();\n\n            if (range && range.text) {\n                return false;\n            }\n\n            return true;\n        };\n\n        // 保存选区数据\n        E.fn.saveSelection = function (range) {\n            var self = this,\n                _parentElem,\n                selection,\n                txt = self.txt.$txt.get(0);\n\n            if (range) {\n                _parentElem = range.parentElement();\n            } else {\n                range = document.selection.createRange();\n                if (typeof range.parentElement === 'undefined') {\n                    //IE6、7中，insertImage后会执行此处\n                    //由于找不到range.parentElement，所以干脆将_parentElem赋值为null\n                    _parentElem = null;\n                } else {\n                    _parentElem = range.parentElement();\n                }\n            }\n\n            // 确定父元素一定要包含在编辑器区域内\n            if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem)) {\n                // 保存选择区域\n                self.currentRange(range);\n            }\n        };\n\n        // 恢复选中区域\n        E.fn.restoreSelection = function (currentRange) {\n            var editor = this,\n                selection,\n                range;\n\n            currentRange = currentRange || editor.currentRange();\n            if (!currentRange) {\n                return;\n            }\n\n            range = document.selection.createRange();\n            try {\n                // 此处，plupload上传上传图片时，IE8-会报一个『参数无效』的错误\n                range.setEndPoint('EndToEnd', currentRange);\n            } catch (ex) {}\n\n            if (currentRange.text.length === 0) {\n                try {\n                    // IE8 插入表情会报错\n                    range.collapse(false);\n                } catch (ex) {}\n            } else {\n                range.setEndPoint('StartToStart', currentRange);\n            }\n            range.select();\n        };\n    });\n    // editor command hooks\n    _e(function (E, $) {\n\n        E.fn.commandHooks = function () {\n            var editor = this;\n            var commandHooks = {};\n\n            // insertHtml\n            commandHooks.insertHtml = function (html) {\n                var $elem = $(html);\n                var rangeElem = editor.getRangeElem();\n                var targetElem;\n\n                targetElem = editor.getLegalTags(rangeElem);\n                if (!targetElem) {\n                    return;\n                }\n\n                $(targetElem).after($elem);\n            };\n\n            // 保存到对象\n            editor.commandHooks = commandHooks;\n        };\n    });\n    // editor command API\n    _e(function (E, $) {\n\n        // 基本命令\n        E.fn.command = function (e, commandName, commandValue, callback) {\n            var editor = this;\n            var hooks;\n\n            function commandFn() {\n                if (!commandName) {\n                    return;\n                }\n                if (editor.queryCommandSupported(commandName)) {\n                    // 默认命令\n                    document.execCommand(commandName, false, commandValue);\n                } else {\n                    // hooks 命令\n                    hooks = editor.commandHooks;\n                    if (commandName in hooks) {\n                        hooks[commandName](commandValue);\n                    }\n                }\n            }\n\n            this.customCommand(e, commandFn, callback);\n        };\n\n        // 针对一个elem对象执行基础命令\n        E.fn.commandForElem = function (elemOpt, e, commandName, commandValue, callback) {\n            // 取得查询elem的查询条件和验证函数\n            var selector;\n            var check;\n            if (typeof elemOpt === 'string') {\n                selector = elemOpt;\n            } else {\n                selector = elemOpt.selector;\n                check = elemOpt.check;\n            }\n\n            // 查询elem\n            var rangeElem = this.getRangeElem();\n            rangeElem = this.getSelfOrParentByName(rangeElem, selector, check);\n\n            // 根据elem设置range\n            if (rangeElem) {\n                this.setRangeByElem(rangeElem);\n            }\n\n            // 然后执行基础命令\n            this.command(e, commandName, commandValue, callback);\n        };\n\n        // 自定义命令\n        E.fn.customCommand = function (e, commandFn, callback) {\n            var editor = this;\n            var range = editor.currentRange();\n\n            if (!range) {\n                // 目前没有选区，则无法执行命令\n                e && e.preventDefault();\n                return;\n            }\n            // 记录内容，以便撤销（执行命令之前就要记录）\n            editor.undoRecord();\n\n            // 恢复选区（有 range 参数）\n            this.restoreSelection(range);\n\n            // 执行命令事件\n            commandFn.call(editor);\n\n            // 保存选区（无参数，要从浏览器直接获取range信息）\n            this.saveSelection();\n            // 重新恢复选区（无参数，要取得刚刚从浏览器得到的range信息）\n            this.restoreSelection();\n\n            // 执行 callback\n            if (callback && typeof callback === 'function') {\n                callback.call(editor);\n            }\n\n            // 最后插入空行\n            editor.txt.insertEmptyP();\n\n            // 包裹暴露的img和text\n            editor.txt.wrapImgAndText();\n\n            // 更新内容\n            editor.updateValue();\n\n            // 更新菜单样式\n            editor.updateMenuStyle();\n\n            // 隐藏 dropPanel dropList modal  设置 200ms 间隔\n            function hidePanelAndModal() {\n                editor.hideDropPanelAndModal();\n            }\n            setTimeout(hidePanelAndModal, 200);\n\n            if (e) {\n                e.preventDefault();\n            }\n        };\n\n        // 封装 document.queryCommandValue 函数\n        // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n        E.fn.queryCommandValue = function (commandName) {\n            var result = '';\n            try {\n                result = document.queryCommandValue(commandName);\n            } catch (ex) {}\n            return result;\n        };\n\n        // 封装 document.queryCommandState 函数\n        // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n        E.fn.queryCommandState = function (commandName) {\n            var result = false;\n            try {\n                result = document.queryCommandState(commandName);\n            } catch (ex) {}\n            return result;\n        };\n\n        // 封装 document.queryCommandSupported 函数\n        E.fn.queryCommandSupported = function (commandName) {\n            var result = false;\n            try {\n                result = document.queryCommandSupported(commandName);\n            } catch (ex) {}\n            return result;\n        };\n    });\n    // dom selector\n    _e(function (E, $) {\n\n        var matchesSelector;\n\n        // matchesSelector hook\n        function _matchesSelectorForIE(selector) {\n            var elem = this;\n            var $elems = $(selector);\n            var result = false;\n\n            // 用jquery查找 selector 所有对象，如果其中有一个和传入 elem 相同，则证明 elem 符合 selector\n            $elems.each(function () {\n                if (this === elem) {\n                    result = true;\n                    return false;\n                }\n            });\n\n            return result;\n        }\n\n        // 从当前的elem，往上去查找合法标签 如 p head table blockquote ul ol 等\n        E.fn.getLegalTags = function (elem) {\n            var legalTags = this.config.legalTags;\n            if (!legalTags) {\n                E.error('配置项中缺少 legalTags 的配置');\n                return;\n            }\n            return this.getSelfOrParentByName(elem, legalTags);\n        };\n\n        // 根据条件，查询自身或者父元素，符合即返回\n        E.fn.getSelfOrParentByName = function (elem, selector, check) {\n\n            if (!elem || !selector) {\n                return;\n            }\n\n            if (!matchesSelector) {\n                // 定义 matchesSelector 函数\n                matchesSelector = elem.webkitMatchesSelector || elem.mozMatchesSelector || elem.oMatchesSelector || elem.matchesSelector;\n            }\n            if (!matchesSelector) {\n                // 如果浏览器本身不支持 matchesSelector 则使用自定义的hook\n                matchesSelector = _matchesSelectorForIE;\n            }\n\n            var txt = this.txt.$txt.get(0);\n\n            while (elem && txt !== elem && $.contains(txt, elem)) {\n                if (matchesSelector.call(elem, selector)) {\n                    // 符合 selector 查询条件\n\n                    if (!check) {\n                        // 没有 check 验证函数，直接返回即可\n                        return elem;\n                    }\n\n                    if (check(elem)) {\n                        // 如果有 check 验证函数，还需 check 函数的确认\n                        return elem;\n                    }\n                }\n\n                // 如果上一步没经过验证，则将跳转到父元素\n                elem = elem.parentNode;\n            }\n\n            return;\n        };\n    });\n    // undo redo\n    _e(function (E, $) {\n\n        var length = 20; // 缓存的最大长度\n        function _getRedoList(editor) {\n            if (editor._redoList == null) {\n                editor._redoList = [];\n            }\n            return editor._redoList;\n        }\n        function _getUndoList(editor) {\n            if (editor._undoList == null) {\n                editor._undoList = [];\n            }\n            return editor._undoList;\n        }\n\n        // 数据处理\n        function _handle(editor, data, type) {\n            // var range = data.range;\n            // var range2 = range.cloneRange && range.cloneRange();\n            var val = data.val;\n            var html = editor.txt.$txt.html();\n\n            if (val == null) {\n                return;\n            }\n\n            if (val === html) {\n                if (type === 'redo') {\n                    editor.redo();\n                    return;\n                } else if (type === 'undo') {\n                    editor.undo();\n                    return;\n                } else {\n                    return;\n                }\n            }\n\n            // 保存数据\n            editor.txt.$txt.html(val);\n            // 更新数据到textarea（有必要的话）\n            editor.updateValue();\n\n            // onchange 事件\n            if (editor.onchange && typeof editor.onchange === 'function') {\n                editor.onchange.call(editor);\n            }\n\n            // ?????\n            // 注释：$txt 被重新赋值之后，range会被重置，cloneRange() 也不好使\n            // // 重置选区\n            // if (range2) {\n            //     editor.restoreSelection(range2);\n            // }\n        }\n\n        // 记录\n        E.fn.undoRecord = function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var val = $txt.html();\n            var undoList = _getUndoList(editor);\n            var redoList = _getRedoList(editor);\n            var currentVal = undoList.length ? undoList[0] : '';\n\n            if (val === currentVal.val) {\n                return;\n            }\n\n            // 清空 redolist\n            if (redoList.length) {\n                redoList = [];\n            }\n\n            // 添加数据到 undoList\n            undoList.unshift({\n                range: editor.currentRange(), // 将当前的range也记录下\n                val: val\n            });\n\n            // 限制 undoList 长度\n            if (undoList.length > length) {\n                undoList.pop();\n            }\n        };\n\n        // undo 操作\n        E.fn.undo = function () {\n            var editor = this;\n            var undoList = _getUndoList(editor);\n            var redoList = _getRedoList(editor);\n\n            if (!undoList.length) {\n                return;\n            }\n\n            // 取出 undolist 第一个值，加入 redolist\n            var data = undoList.shift();\n            redoList.unshift(data);\n\n            // 并修改编辑器的内容\n            _handle(this, data, 'undo');\n        };\n\n        // redo 操作\n        E.fn.redo = function () {\n            var editor = this;\n            var undoList = _getUndoList(editor);\n            var redoList = _getRedoList(editor);\n            if (!redoList.length) {\n                return;\n            }\n\n            // 取出 redolist 第一个值，加入 undolist\n            var data = redoList.shift();\n            undoList.unshift(data);\n\n            // 并修改编辑器的内容\n            _handle(this, data, 'redo');\n        };\n    });\n    // 暴露给用户的 API\n    _e(function (E, $) {\n\n        // 创建编辑器\n        E.fn.create = function () {\n            var editor = this;\n\n            // 检查 E.$body 是否有值\n            // 如果在 body 之前引用了 js 文件，body 尚未加载，可能没有值\n            if (!E.$body || E.$body.length === 0) {\n                E.$body = $('body');\n                E.$document = $(document);\n                E.$window = $(window);\n            }\n\n            // 执行 addMenus 之前：\n            // 1. 允许用户修改 editor.UI 自定义配置UI\n            // 2. 允许用户通过修改 editor.menus 来自定义配置菜单\n            // 因此要在 create 时执行，而不是 init           \n            editor.addMenus();\n\n            // 渲染\n            editor.renderMenus();\n            editor.renderMenuContainer();\n            editor.renderTxt();\n            editor.renderEditorContainer();\n\n            // 绑定事件\n            editor.eventMenus();\n            editor.eventMenuContainer();\n            editor.eventTxt();\n\n            // 处理ready事件\n            editor.readyHeadler();\n\n            // 初始化选区\n            editor.initSelection();\n\n            // $txt 快捷方式\n            editor.$txt = editor.txt.$txt;\n\n            // 执行用户自定义事件，通过 E.ready() 添加\n            var _plugins = E._plugins;\n            if (_plugins && _plugins.length) {\n                $.each(_plugins, function (k, val) {\n                    val.call(editor);\n                });\n            }\n        };\n\n        // 禁用编辑器\n        E.fn.disable = function () {\n            this.txt.$txt.removeAttr('contenteditable');\n            this.disableMenusExcept();\n\n            // 先禁用，再记录状态\n            this._disabled = true;\n        };\n        // 启用编辑器\n        E.fn.enable = function () {\n            // 先解除状态记录，再启用\n            this._disabled = false;\n            this.txt.$txt.attr('contenteditable', 'true');\n            this.enableMenusExcept();\n        };\n\n        // 销毁编辑器\n        E.fn.destroy = function () {\n            var self = this;\n            var $valueContainer = self.$valueContainer;\n            var $editorContainer = self.$editorContainer;\n            var valueNodeName = self.valueNodeName;\n\n            if (valueNodeName === 'div') {\n                // div 生成的编辑器\n                $valueContainer.removeAttr('contenteditable');\n                $editorContainer.after($valueContainer);\n                $editorContainer.hide();\n            } else {\n                // textarea 生成的编辑器\n                $valueContainer.show();\n                $editorContainer.hide();\n            }\n        };\n\n        // 撤销 销毁编辑器\n        E.fn.undestroy = function () {\n            var self = this;\n            var $valueContainer = self.$valueContainer;\n            var $editorContainer = self.$editorContainer;\n            var $menuContainer = self.menuContainer.$menuContainer;\n            var valueNodeName = self.valueNodeName;\n\n            if (valueNodeName === 'div') {\n                // div 生成的编辑器\n                $valueContainer.attr('contenteditable', 'true');\n                $menuContainer.after($valueContainer);\n                $editorContainer.show();\n            } else {\n                // textarea 生成的编辑器\n                $valueContainer.hide();\n                $editorContainer.show();\n            }\n        };\n\n        // 清空内容的快捷方式\n        E.fn.clear = function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            $txt.html('<p><br></p>');\n            editor.restoreSelectionByElem($txt.find('p').get(0));\n        };\n    });\n    // menuContainer 构造函数\n    _e(function (E, $) {\n\n        // 定义构造函数\n        var MenuContainer = function MenuContainer(editor) {\n            this.editor = editor;\n            this.init();\n        };\n\n        MenuContainer.fn = MenuContainer.prototype;\n\n        // 暴露给 E 即 window.wangEditor\n        E.MenuContainer = MenuContainer;\n    });\n    // MenuContainer.fn bind fn\n    _e(function (E, $) {\n\n        var MenuContainer = E.MenuContainer;\n\n        // 初始化\n        MenuContainer.fn.init = function () {\n            var self = this;\n            var $menuContainer = $('<div class=\"wangEditor-menu-container clearfix\"></div>');\n\n            self.$menuContainer = $menuContainer;\n\n            // change shadow\n            self.changeShadow();\n        };\n\n        // 编辑区域滚动时，增加shadow\n        MenuContainer.fn.changeShadow = function () {\n            var $menuContainer = this.$menuContainer;\n            var editor = this.editor;\n            var $txt = editor.txt.$txt;\n\n            $txt.on('scroll', function () {\n                if ($txt.scrollTop() > 10) {\n                    $menuContainer.addClass('wangEditor-menu-shadow');\n                } else {\n                    $menuContainer.removeClass('wangEditor-menu-shadow');\n                }\n            });\n        };\n    });\n    // MenuContainer.fn API\n    _e(function (E, $) {\n\n        var MenuContainer = E.MenuContainer;\n\n        MenuContainer.fn.render = function () {\n            var $menuContainer = this.$menuContainer;\n            var $editorContainer = this.editor.$editorContainer;\n\n            $editorContainer.append($menuContainer);\n        };\n\n        // 获取菜单栏的高度\n        MenuContainer.fn.height = function () {\n            var $menuContainer = this.$menuContainer;\n            return $menuContainer.height();\n        };\n\n        // 添加菜单\n        MenuContainer.fn.appendMenu = function (groupIdx, menu) {\n            // 判断是否需要新增一个菜单组\n            this._addGroup(groupIdx);\n            // 增加菜单（返回 $menuItem）\n            return this._addOneMenu(menu);\n        };\n        MenuContainer.fn._addGroup = function (groupIdx) {\n            var $menuContainer = this.$menuContainer;\n            var $menuGroup;\n            if (!this.$currentGroup || this.currentGroupIdx !== groupIdx) {\n                $menuGroup = $('<div class=\"menu-group clearfix\"></div>');\n                $menuContainer.append($menuGroup);\n\n                this.$currentGroup = $menuGroup;\n                this.currentGroupIdx = groupIdx;\n            }\n        };\n        MenuContainer.fn._addOneMenu = function (menu) {\n            var $menuNormal = menu.$domNormal;\n            var $menuSelected = menu.$domSelected;\n\n            var $menuGroup = this.$currentGroup;\n            var $item = $('<div class=\"menu-item clearfix\"></div>');\n            $menuSelected.hide();\n            $item.append($menuNormal).append($menuSelected);\n            $menuGroup.append($item);\n\n            return $item;\n        };\n    });\n    // menu 构造函数\n    _e(function (E, $) {\n\n        // 定义构造函数\n        var Menu = function Menu(opt) {\n            this.editor = opt.editor;\n            this.id = opt.id;\n            this.title = opt.title;\n            this.$domNormal = opt.$domNormal;\n            this.$domSelected = opt.$domSelected || opt.$domNormal;\n\n            // document.execCommand 的参数\n            this.commandName = opt.commandName;\n            this.commandValue = opt.commandValue;\n            this.commandNameSelected = opt.commandNameSelected || opt.commandName;\n            this.commandValueSelected = opt.commandValueSelected || opt.commandValue;\n        };\n\n        Menu.fn = Menu.prototype;\n\n        // 暴露给 E 即 window.wangEditor\n        E.Menu = Menu;\n    });\n    // Menu.fn 初始化绑定的事件\n    _e(function (E, $) {\n\n        var Menu = E.Menu;\n\n        // 初始化UI\n        Menu.fn.initUI = function () {\n            var editor = this.editor;\n            var uiConfig = editor.UI.menus;\n            var menuId = this.id;\n            var menuUI = uiConfig[menuId];\n\n            if (this.$domNormal && this.$domSelected) {\n                // 自定义的菜单中，已经传入了 $dom 无需从配置文件中查找生成\n                return;\n            }\n\n            if (menuUI == null) {\n                E.warn('editor.UI配置中，没有菜单 \"' + menuId + '\" 的UI配置，只能取默认值');\n\n                // 必须写成 uiConfig['default'];\n                // 写成 uiConfig.default IE8会报错\n                menuUI = uiConfig['default'];\n            }\n\n            // 正常状态\n            this.$domNormal = $(menuUI.normal);\n\n            // 选中状态\n            if (/^\\./.test(menuUI.selected)) {\n                // 增加一个样式\n                this.$domSelected = this.$domNormal.clone().addClass(menuUI.selected.slice(1));\n            } else {\n                // 一个新的dom对象\n                this.$domSelected = $(menuUI.selected);\n            }\n        };\n    });\n    // Menu.fn API\n    _e(function (E, $) {\n\n        var Menu = E.Menu;\n\n        // 渲染菜单\n        Menu.fn.render = function (groupIdx) {\n            // 渲染UI\n            this.initUI();\n\n            var editor = this.editor;\n            var menuContainer = editor.menuContainer;\n            var $menuItem = menuContainer.appendMenu(groupIdx, this);\n            var onRender = this.onRender;\n\n            // 渲染tip\n            this._renderTip($menuItem);\n\n            // 执行 onRender 函数\n            if (onRender && typeof onRender === 'function') {\n                onRender.call(this);\n            }\n        };\n        Menu.fn._renderTip = function ($menuItem) {\n            var self = this;\n            var editor = self.editor;\n            var title = self.title;\n            var $tip = $('<div class=\"menu-tip\"></div>');\n            // var $triangle = $('<i class=\"tip-triangle\"></i>'); // 小三角\n\n            // 计算 tip 宽度\n            var $tempDiv;\n            if (!self.tipWidth) {\n                // 设置一个纯透明的 p（absolute;top:-10000px;不会显示在内容区域）\n                // 内容赋值为 title ，为了计算tip宽度\n                $tempDiv = $('<p style=\"opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;\">' + title + '</p>');\n                // 先添加到body，计算完再 remove\n                E.$body.append($tempDiv);\n                editor.ready(function () {\n                    var editor = this;\n                    var titleWidth = $tempDiv.outerWidth() + 5; // 多出 5px 的冗余\n                    var currentWidth = $tip.outerWidth();\n                    var currentMarginLeft = parseFloat($tip.css('margin-left'), 10);\n                    // 计算完，拿到数据，则弃用\n                    $tempDiv.remove();\n                    $tempDiv = null;\n\n                    // 重新设置样式\n                    $tip.css({\n                        width: titleWidth,\n                        'margin-left': currentMarginLeft + (currentWidth - titleWidth) / 2\n                    });\n\n                    // 存储\n                    self.tipWidth = titleWidth;\n                });\n            }\n\n            // $tip.append($triangle);\n            $tip.append(title);\n            $menuItem.append($tip);\n\n            function show() {\n                $tip.show();\n            }\n            function hide() {\n                $tip.hide();\n            }\n\n            var timeoutId;\n            $menuItem.find('a').on('mouseenter', function (e) {\n                if (!self.active() && !self.disabled()) {\n                    timeoutId = setTimeout(show, 200);\n                }\n            }).on('mouseleave', function (e) {\n                timeoutId && clearTimeout(timeoutId);\n                hide();\n            }).on('click', hide);\n        };\n\n        // 绑定事件\n        Menu.fn.bindEvent = function () {\n            var self = this;\n\n            var $domNormal = self.$domNormal;\n            var $domSelected = self.$domSelected;\n\n            // 试图获取该菜单定义的事件（未selected），没有则自己定义\n            var clickEvent = self.clickEvent;\n            if (!clickEvent) {\n                clickEvent = function clickEvent(e) {\n                    // -----------dropPanel dropList modal-----------\n                    var dropObj = self.dropPanel || self.dropList || self.modal;\n                    if (dropObj && dropObj.show) {\n                        if (dropObj.isShowing) {\n                            dropObj.hide();\n                        } else {\n                            dropObj.show();\n                        }\n                        return;\n                    }\n\n                    // -----------command-----------\n                    var editor = self.editor;\n                    var commandName;\n                    var commandValue;\n\n                    var selected = self.selected;\n                    if (selected) {\n                        commandName = self.commandNameSelected;\n                        commandValue = self.commandValueSelected;\n                    } else {\n                        commandName = self.commandName;\n                        commandValue = self.commandValue;\n                    }\n\n                    if (commandName) {\n                        // 执行命令\n                        editor.command(e, commandName, commandValue);\n                    } else {\n                        // 提示\n                        E.warn('菜单 \"' + self.id + '\" 未定义click事件');\n                        e.preventDefault();\n                    }\n                };\n            }\n            // 获取菜单定义的selected情况下的点击事件\n            var clickEventSelected = self.clickEventSelected || clickEvent;\n\n            // 将事件绑定到菜单dom上\n            $domNormal.click(function (e) {\n                if (!self.disabled()) {\n                    clickEvent.call(self, e);\n                    self.updateSelected();\n                }\n                e.preventDefault();\n            });\n            $domSelected.click(function (e) {\n                if (!self.disabled()) {\n                    clickEventSelected.call(self, e);\n                    self.updateSelected();\n                }\n                e.preventDefault();\n            });\n        };\n\n        // 更新选中状态\n        Menu.fn.updateSelected = function () {\n            var self = this;\n            var editor = self.editor;\n\n            // 试图获取用户自定义的判断事件\n            var updateSelectedEvent = self.updateSelectedEvent;\n            if (!updateSelectedEvent) {\n                // 用户未自定义，则设置默认值\n                updateSelectedEvent = function updateSelectedEvent() {\n                    var self = this;\n                    var editor = self.editor;\n                    var commandName = self.commandName;\n                    var commandValue = self.commandValue;\n\n                    if (commandValue) {\n                        if (editor.queryCommandValue(commandName).toLowerCase() === commandValue.toLowerCase()) {\n                            return true;\n                        }\n                    } else if (editor.queryCommandState(commandName)) {\n                        return true;\n                    }\n\n                    return false;\n                };\n            }\n\n            // 获取结果\n            var result = updateSelectedEvent.call(self);\n            result = !!result;\n\n            // 存储结果、显示效果\n            self.changeSelectedState(result);\n        };\n\n        // 切换选中状态、显示效果\n        Menu.fn.changeSelectedState = function (state) {\n            var self = this;\n            var selected = self.selected;\n\n            if (state != null && typeof state === 'boolean') {\n                if (selected === state) {\n                    // 计算结果和当前的状态一样\n                    return;\n                }\n                // 存储结果\n                self.selected = state;\n\n                // 切换菜单的显示\n                if (state) {\n                    // 选中\n                    self.$domNormal.hide();\n                    self.$domSelected.show();\n                } else {\n                    // 未选中\n                    self.$domNormal.show();\n                    self.$domSelected.hide();\n                }\n            } // if\n        };\n\n        // 点击菜单，显示了 dropPanel modal 时，菜单的状态 \n        Menu.fn.active = function (active) {\n            if (active == null) {\n                return this._activeState;\n            }\n            this._activeState = active;\n        };\n        Menu.fn.activeStyle = function (active) {\n            var selected = this.selected;\n            var $dom = this.$domNormal;\n            var $domSelected = this.$domSelected;\n\n            if (active) {\n                $dom.addClass('active');\n                $domSelected.addClass('active');\n            } else {\n                $dom.removeClass('active');\n                $domSelected.removeClass('active');\n            }\n\n            // 记录状态 （ menu hover 时会取状态用 ）\n            this.active(active);\n        };\n\n        // 菜单的启用和禁用\n        Menu.fn.disabled = function (opt) {\n            // 参数为空，取值\n            if (opt == null) {\n                return !!this._disabled;\n            }\n\n            if (this._disabled === opt) {\n                // 要设置的参数值和当前参数只一样，无需再次设置\n                return;\n            }\n\n            var $dom = this.$domNormal;\n            var $domSelected = this.$domSelected;\n\n            // 设置样式\n            if (opt) {\n                $dom.addClass('disable');\n                $domSelected.addClass('disable');\n            } else {\n                $dom.removeClass('disable');\n                $domSelected.removeClass('disable');\n            }\n\n            // 存储\n            this._disabled = opt;\n        };\n    });\n    // dropList 构造函数\n    _e(function (E, $) {\n\n        // 定义构造函数\n        var DropList = function DropList(editor, menu, opt) {\n            this.editor = editor;\n            this.menu = menu;\n\n            // list 的数据源，格式 {'commandValue': 'title', ...}\n            this.data = opt.data;\n            // 要为每个item自定义的模板\n            this.tpl = opt.tpl;\n            // 为了执行 editor.commandForElem 而传入的elem查询方式\n            this.selectorForELemCommand = opt.selectorForELemCommand;\n\n            // 执行事件前后的钩子\n            this.beforeEvent = opt.beforeEvent;\n            this.afterEvent = opt.afterEvent;\n\n            // 初始化\n            this.init();\n        };\n\n        DropList.fn = DropList.prototype;\n\n        // 暴露给 E 即 window.wangEditor\n        E.DropList = DropList;\n    });\n    // dropList fn bind\n    _e(function (E, $) {\n\n        var DropList = E.DropList;\n\n        // init\n        DropList.fn.init = function () {\n            var self = this;\n\n            // 生成dom对象\n            self.initDOM();\n\n            // 绑定command事件\n            self.bindEvent();\n\n            // 声明隐藏的事件\n            self.initHideEvent();\n        };\n\n        // 初始化dom结构\n        DropList.fn.initDOM = function () {\n            var self = this;\n            var data = self.data;\n            var tpl = self.tpl || '<span>{#title}</span>';\n            var $list = $('<div class=\"wangEditor-drop-list clearfix\"></div>');\n\n            var itemContent;\n            var $item;\n            $.each(data, function (commandValue, title) {\n                itemContent = tpl.replace(/{#commandValue}/ig, commandValue).replace(/{#title}/ig, title);\n                $item = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n                $item.append(itemContent);\n                $list.append($item);\n            });\n\n            self.$list = $list;\n        };\n\n        // 绑定事件\n        DropList.fn.bindEvent = function () {\n            var self = this;\n            var editor = self.editor;\n            var menu = self.menu;\n            var commandName = menu.commandName;\n            var selectorForELemCommand = self.selectorForELemCommand;\n            var $list = self.$list;\n\n            // 执行事件前后的钩子函数\n            var beforeEvent = self.beforeEvent;\n            var afterEvent = self.afterEvent;\n\n            $list.on('click', 'a[commandValue]', function (e) {\n                // 正式命令执行之前\n                if (beforeEvent && typeof beforeEvent === 'function') {\n                    beforeEvent.call(e);\n                }\n\n                // 执行命令\n                var commandValue = $(e.currentTarget).attr('commandValue');\n                if (menu.selected && editor.isRangeEmpty() && selectorForELemCommand) {\n                    // 当前处于选中状态，并且选中内容为空\n                    editor.commandForElem(selectorForELemCommand, e, commandName, commandValue);\n                } else {\n                    // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                    editor.command(e, commandName, commandValue);\n                }\n\n                // 正式命令之后的钩子\n                if (afterEvent && typeof afterEvent === 'function') {\n                    afterEvent.call(e);\n                }\n            });\n        };\n\n        // 点击其他地方，立即隐藏 droplist\n        DropList.fn.initHideEvent = function () {\n            var self = this;\n\n            // 获取 list elem\n            var thisList = self.$list.get(0);\n\n            E.$body.on('click', function (e) {\n                if (!self.isShowing) {\n                    return;\n                }\n                var trigger = e.target;\n\n                // 获取菜单elem\n                var menu = self.menu;\n                var menuDom;\n                if (menu.selected) {\n                    menuDom = menu.$domSelected.get(0);\n                } else {\n                    menuDom = menu.$domNormal.get(0);\n                }\n\n                if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                    // 说明由本菜单点击触发的\n                    return;\n                }\n\n                if (thisList === trigger || $.contains(thisList, trigger)) {\n                    // 说明由本list点击触发的\n                    return;\n                }\n\n                // 其他情况，隐藏 list\n                self.hide();\n            });\n\n            E.$window.scroll(function () {\n                self.hide();\n            });\n\n            E.$window.on('resize', function () {\n                self.hide();\n            });\n        };\n    });\n    // dropListfn api\n    _e(function (E, $) {\n\n        var DropList = E.DropList;\n\n        // 渲染\n        DropList.fn._render = function () {\n            var self = this;\n            var editor = self.editor;\n            var $list = self.$list;\n\n            // 渲染到页面\n            editor.$editorContainer.append($list);\n\n            // 记录状态\n            self.rendered = true;\n        };\n\n        // 定位\n        DropList.fn._position = function () {\n            var self = this;\n            var $list = self.$list;\n            var editor = self.editor;\n            var menu = self.menu;\n            var $menuContainer = editor.menuContainer.$menuContainer;\n            var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n            // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n            // 因为 .menu-item 是 position:relative\n            var menuPosition = $menuDom.offsetParent().position();\n\n            // 取得 menu 的位置、尺寸属性\n            var menuTop = menuPosition.top;\n            var menuLeft = menuPosition.left;\n            var menuHeight = $menuDom.offsetParent().height();\n            var menuWidth = $menuDom.offsetParent().width();\n\n            // 取得 list 的尺寸属性\n            var listWidth = $list.outerWidth();\n            // var listHeight = $list.outerHeight();\n\n            // 取得 $txt 的尺寸\n            var txtWidth = editor.txt.$txt.outerWidth();\n\n            // ------------开始计算-------------\n\n            // 初步计算 list 位置属性\n            var top = menuTop + menuHeight;\n            var left = menuLeft + menuWidth / 2;\n            var marginLeft = 0 - menuWidth / 2;\n\n            // 如果超出了有边界，则要左移（且和右侧有间隙）\n            var valWithTxt = left + listWidth - txtWidth;\n            if (valWithTxt > -10) {\n                marginLeft = marginLeft - valWithTxt - 10;\n            }\n            // 设置样式\n            $list.css({\n                top: top,\n                left: left,\n                'margin-left': marginLeft\n            });\n\n            // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n            if (editor._isMenufixed) {\n                top = top + ($menuContainer.offset().top + $menuContainer.outerHeight() - $list.offset().top);\n\n                // 重新设置top\n                $list.css({\n                    top: top\n                });\n            }\n        };\n\n        // 显示\n        DropList.fn.show = function () {\n            var self = this;\n            var menu = self.menu;\n            if (!self.rendered) {\n                // 第一次show之前，先渲染\n                self._render();\n            }\n\n            if (self.isShowing) {\n                return;\n            }\n\n            var $list = self.$list;\n            $list.show();\n\n            // 定位\n            self._position();\n\n            // 记录状态\n            self.isShowing = true;\n\n            // 菜单状态\n            menu.activeStyle(true);\n        };\n\n        // 隐藏\n        DropList.fn.hide = function () {\n            var self = this;\n            var menu = self.menu;\n            if (!self.isShowing) {\n                return;\n            }\n\n            var $list = self.$list;\n            $list.hide();\n\n            // 记录状态\n            self.isShowing = false;\n\n            // 菜单状态\n            menu.activeStyle(false);\n        };\n    });\n    // dropPanel 构造函数\n    _e(function (E, $) {\n\n        // 定义构造函数\n        var DropPanel = function DropPanel(editor, menu, opt) {\n            this.editor = editor;\n            this.menu = menu;\n            this.$content = opt.$content;\n            this.width = opt.width || 200;\n            this.height = opt.height;\n            this.onRender = opt.onRender;\n\n            // init\n            this.init();\n        };\n\n        DropPanel.fn = DropPanel.prototype;\n\n        // 暴露给 E 即 window.wangEditor\n        E.DropPanel = DropPanel;\n    });\n    // dropPanel fn bind\n    _e(function (E, $) {\n\n        var DropPanel = E.DropPanel;\n\n        // init\n        DropPanel.fn.init = function () {\n            var self = this;\n\n            // 生成dom对象\n            self.initDOM();\n\n            // 声明隐藏的事件\n            self.initHideEvent();\n        };\n\n        // init DOM\n        DropPanel.fn.initDOM = function () {\n            var self = this;\n            var $content = self.$content;\n            var width = self.width;\n            var height = self.height;\n            var $panel = $('<div class=\"wangEditor-drop-panel clearfix\"></div>');\n            var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n            $panel.css({\n                width: width,\n                height: height ? height : 'auto'\n            });\n            $panel.append($triangle);\n            $panel.append($content);\n\n            // 添加对象数据\n            self.$panel = $panel;\n            self.$triangle = $triangle;\n        };\n\n        // 点击其他地方，立即隐藏 dropPanel\n        DropPanel.fn.initHideEvent = function () {\n            var self = this;\n\n            // 获取 panel elem\n            var thisPanle = self.$panel.get(0);\n\n            E.$body.on('click', function (e) {\n                if (!self.isShowing) {\n                    return;\n                }\n                var trigger = e.target;\n\n                // 获取菜单elem\n                var menu = self.menu;\n                var menuDom;\n                if (menu.selected) {\n                    menuDom = menu.$domSelected.get(0);\n                } else {\n                    menuDom = menu.$domNormal.get(0);\n                }\n\n                if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                    // 说明由本菜单点击触发的\n                    return;\n                }\n\n                if (thisPanle === trigger || $.contains(thisPanle, trigger)) {\n                    // 说明由本panel点击触发的\n                    return;\n                }\n\n                // 其他情况，隐藏 panel\n                self.hide();\n            });\n\n            E.$window.scroll(function (e) {\n                self.hide();\n            });\n\n            E.$window.on('resize', function () {\n                self.hide();\n            });\n        };\n    });\n    // dropPanel fn api\n    _e(function (E, $) {\n\n        var DropPanel = E.DropPanel;\n\n        // 渲染\n        DropPanel.fn._render = function () {\n            var self = this;\n            var onRender = self.onRender;\n            var editor = self.editor;\n            var $panel = self.$panel;\n\n            // 渲染到页面\n            editor.$editorContainer.append($panel);\n\n            // 渲染后的回调事件\n            onRender && onRender.call(self);\n\n            // 记录状态\n            self.rendered = true;\n        };\n\n        // 定位\n        DropPanel.fn._position = function () {\n            var self = this;\n            var $panel = self.$panel;\n            var $triangle = self.$triangle;\n            var editor = self.editor;\n            var $menuContainer = editor.menuContainer.$menuContainer;\n            var menu = self.menu;\n            var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n            // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n            // 因为 .menu-item 是 position:relative\n            var menuPosition = $menuDom.offsetParent().position();\n\n            // 取得 menu 的位置、尺寸属性\n            var menuTop = menuPosition.top;\n            var menuLeft = menuPosition.left;\n            var menuHeight = $menuDom.offsetParent().height();\n            var menuWidth = $menuDom.offsetParent().width();\n\n            // 取得 panel 的尺寸属性\n            var panelWidth = $panel.outerWidth();\n            // var panelHeight = $panel.outerHeight();\n\n            // 取得 $txt 的尺寸\n            var txtWidth = editor.txt.$txt.outerWidth();\n\n            // ------------开始计算-------------\n\n            // 初步计算 panel 位置属性\n            var top = menuTop + menuHeight;\n            var left = menuLeft + menuWidth / 2;\n            var marginLeft = 0 - panelWidth / 2;\n            var marginLeft2 = marginLeft; // 下文用于和 marginLeft 比较，来设置三角形tip的位置\n\n            // 如果超出了左边界，则移动回来（要和左侧有10px间隙）\n            if (0 - marginLeft > left - 10) {\n                marginLeft = 0 - (left - 10);\n            }\n\n            // 如果超出了有边界，则要左移（且和右侧有10px间隙）\n            var valWithTxt = left + panelWidth + marginLeft - txtWidth;\n            if (valWithTxt > -10) {\n                marginLeft = marginLeft - valWithTxt - 10;\n            }\n\n            // 设置样式\n            $panel.css({\n                top: top,\n                left: left,\n                'margin-left': marginLeft\n            });\n\n            // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n            if (editor._isMenufixed) {\n                top = top + ($menuContainer.offset().top + $menuContainer.outerHeight() - $panel.offset().top);\n\n                // 重新设置top\n                $panel.css({\n                    top: top\n                });\n            }\n\n            // 设置三角形 tip 的位置\n            $triangle.css({\n                'margin-left': marginLeft2 - marginLeft - 5\n            });\n        };\n\n        // focus 第一个 input\n        DropPanel.fn.focusFirstInput = function () {\n            var self = this;\n            var $panel = self.$panel;\n            $panel.find('input[type=text],textarea').each(function () {\n                var $input = $(this);\n                if ($input.attr('disabled') == null) {\n                    $input.focus();\n                    return false;\n                }\n            });\n        };\n\n        // 显示\n        DropPanel.fn.show = function () {\n            var self = this;\n            var menu = self.menu;\n            if (!self.rendered) {\n                // 第一次show之前，先渲染\n                self._render();\n            }\n\n            if (self.isShowing) {\n                return;\n            }\n\n            var $panel = self.$panel;\n            $panel.show();\n\n            // 定位\n            self._position();\n\n            // 记录状态\n            self.isShowing = true;\n\n            // 菜单状态\n            menu.activeStyle(true);\n\n            if (E.w3cRange) {\n                // 高级浏览器\n                self.focusFirstInput();\n            } else {\n                // 兼容 IE8 input placeholder\n                E.placeholderForIE8($panel);\n            }\n        };\n\n        // 隐藏\n        DropPanel.fn.hide = function () {\n            var self = this;\n            var menu = self.menu;\n            if (!self.isShowing) {\n                return;\n            }\n\n            var $panel = self.$panel;\n            $panel.hide();\n\n            // 记录状态\n            self.isShowing = false;\n\n            // 菜单状态\n            menu.activeStyle(false);\n        };\n    });\n    // modal 构造函数\n    _e(function (E, $) {\n\n        // 定义构造函数\n        var Modal = function Modal(editor, menu, opt) {\n            this.editor = editor;\n            this.menu = menu;\n            this.$content = opt.$content;\n\n            this.init();\n        };\n\n        Modal.fn = Modal.prototype;\n\n        // 暴露给 E 即 window.wangEditor\n        E.Modal = Modal;\n    });\n    // modal fn bind\n    _e(function (E, $) {\n\n        var Modal = E.Modal;\n\n        Modal.fn.init = function () {\n            var self = this;\n\n            // 初始化dom\n            self.initDom();\n\n            // 初始化隐藏事件\n            self.initHideEvent();\n        };\n\n        // 初始化dom\n        Modal.fn.initDom = function () {\n            var self = this;\n            var $content = self.$content;\n            var $modal = $('<div class=\"wangEditor-modal\"></div>');\n            var $close = $('<div class=\"wangEditor-modal-close\"><i class=\"wangeditor-menu-img-cancel-circle\"></i></div>');\n\n            $modal.append($close);\n            $modal.append($content);\n\n            // 记录数据\n            self.$modal = $modal;\n            self.$close = $close;\n        };\n\n        // 初始化隐藏事件\n        Modal.fn.initHideEvent = function () {\n            var self = this;\n            var $close = self.$close;\n            var modal = self.$modal.get(0);\n\n            // 点击 $close 按钮，隐藏\n            $close.click(function () {\n                self.hide();\n            });\n\n            // 点击其他部分，隐藏\n            E.$body.on('click', function (e) {\n                if (!self.isShowing) {\n                    return;\n                }\n                var trigger = e.target;\n\n                // 获取菜单elem\n                var menu = self.menu;\n                var menuDom;\n                if (menu) {\n                    if (menu.selected) {\n                        menuDom = menu.$domSelected.get(0);\n                    } else {\n                        menuDom = menu.$domNormal.get(0);\n                    }\n\n                    if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                        // 说明由本菜单点击触发的\n                        return;\n                    }\n                }\n\n                if (modal === trigger || $.contains(modal, trigger)) {\n                    // 说明由本panel点击触发的\n                    return;\n                }\n\n                // 其他情况，隐藏 panel\n                self.hide();\n            });\n        };\n    });\n    // modal fn api\n    _e(function (E, $) {\n\n        var Modal = E.Modal;\n\n        // 渲染\n        Modal.fn._render = function () {\n            var self = this;\n            var editor = self.editor;\n            var $modal = self.$modal;\n\n            // $modal的z-index，在配置的z-index基础上再 +10\n            $modal.css('z-index', editor.config.zindex + 10 + '');\n\n            // 渲染到body最后面\n            E.$body.append($modal);\n\n            // 记录状态\n            self.rendered = true;\n        };\n\n        // 定位\n        Modal.fn._position = function () {\n            var self = this;\n            var $modal = self.$modal;\n            var top = $modal.offset().top;\n            var width = $modal.outerWidth();\n            var height = $modal.outerHeight();\n            var marginLeft = 0 - width / 2;\n            var marginTop = 0 - height / 2;\n            var sTop = E.$window.scrollTop();\n\n            // 保证modal最顶部，不超过浏览器上边框\n            if (height / 2 > top) {\n                marginTop = 0 - top;\n            }\n\n            $modal.css({\n                'margin-left': marginLeft + 'px',\n                'margin-top': marginTop + sTop + 'px'\n            });\n        };\n\n        // 显示\n        Modal.fn.show = function () {\n            var self = this;\n            var menu = self.menu;\n            if (!self.rendered) {\n                // 第一次show之前，先渲染\n                self._render();\n            }\n\n            if (self.isShowing) {\n                return;\n            }\n            // 记录状态\n            self.isShowing = true;\n\n            var $modal = self.$modal;\n            $modal.show();\n\n            // 定位\n            self._position();\n\n            // 激活菜单状态\n            menu && menu.activeStyle(true);\n        };\n\n        // 隐藏\n        Modal.fn.hide = function () {\n            var self = this;\n            var menu = self.menu;\n            if (!self.isShowing) {\n                return;\n            }\n            // 记录状态\n            self.isShowing = false;\n\n            // 隐藏\n            var $modal = self.$modal;\n            $modal.hide();\n\n            // 菜单状态\n            menu && menu.activeStyle(false);\n        };\n    });\n    // txt 构造函数\n    _e(function (E, $) {\n\n        // 定义构造函数\n        var Txt = function Txt(editor) {\n            this.editor = editor;\n\n            // 初始化\n            this.init();\n        };\n\n        Txt.fn = Txt.prototype;\n\n        // 暴露给 E 即 window.wangEditor\n        E.Txt = Txt;\n    });\n    // Txt.fn bind fn\n    _e(function (E, $) {\n\n        var Txt = E.Txt;\n\n        // 初始化\n        Txt.fn.init = function () {\n            var self = this;\n            var editor = self.editor;\n            var $valueContainer = editor.$valueContainer;\n            var currentValue = editor.getInitValue();\n            var $txt;\n\n            if ($valueContainer.get(0).nodeName === 'DIV') {\n                // 如果传入生成编辑器的元素就是div，则直接使用\n                $txt = $valueContainer;\n                $txt.addClass(\"wangEditor-txt\");\n                $txt.attr('contentEditable', 'true');\n            } else {\n                // 如果不是div（是textarea），则创建一个div\n                $txt = $('<div class=\"wangEditor-txt\" contentEditable=\"true\">' + currentValue + '</div>');\n            }\n\n            // 试图最后插入一个空行，ready之后才行\n            editor.ready(function () {\n                self.insertEmptyP();\n            });\n\n            self.$txt = $txt;\n\n            // 删除时，如果没有内容了，就添加一个 <p><br></p>\n            self.contentEmptyHandle();\n\n            // enter时，不能使用 div 换行\n            self.bindEnterForDiv();\n\n            // enter时，用 p 包裹 text\n            self.bindEnterForText();\n\n            // tab 插入4个空格\n            self.bindTabEvent();\n\n            // 处理粘贴内容\n            self.bindPasteFilter();\n\n            // $txt.formatText() 方法\n            self.bindFormatText();\n\n            // 定义 $txt.html() 方法\n            self.bindHtml();\n        };\n\n        // 删除时，如果没有内容了，就添加一个 <p><br></p>\n        Txt.fn.contentEmptyHandle = function () {\n            var self = this;\n            var editor = self.editor;\n            var $txt = self.$txt;\n            var $p;\n\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 8) {\n                    return;\n                }\n                var txtHtml = $.trim($txt.html().toLowerCase());\n                if (txtHtml === '<p><br></p>') {\n                    // 如果最后还剩余一个空行，就不再继续删除了\n                    e.preventDefault();\n                    return;\n                }\n            });\n\n            $txt.on('keyup', function (e) {\n                if (e.keyCode !== 8) {\n                    return;\n                }\n                var txtHtml = $.trim($txt.html().toLowerCase());\n                // ff时用 txtHtml === '<br>' 判断，其他用 !txtHtml 判断\n                if (!txtHtml || txtHtml === '<br>') {\n                    // 内容空了\n                    $p = $('<p><br/></p>');\n                    $txt.html(''); // 一定要先清空，否则在 ff 下有问题\n                    $txt.append($p);\n                    editor.restoreSelectionByElem($p.get(0));\n                }\n            });\n        };\n\n        // enter时，不能使用 div 换行\n        Txt.fn.bindEnterForDiv = function () {\n            var tags = E.config.legalTags; // 配置中编辑器要求的合法标签，如 p head table blockquote ul ol 等\n            var self = this;\n            var editor = self.editor;\n            var $txt = self.$txt;\n\n            var $keydownDivElem;\n            function divHandler() {\n                if (!$keydownDivElem) {\n                    return;\n                }\n\n                var $pElem = $('<p>' + $keydownDivElem.html() + '</p>');\n                $keydownDivElem.after($pElem);\n                $keydownDivElem.remove();\n            }\n\n            $txt.on('keydown keyup', function (e) {\n                if (e.keyCode !== 13) {\n                    return;\n                }\n                // 查找合法标签\n                var rangeElem = editor.getRangeElem();\n                var targetElem = editor.getLegalTags(rangeElem);\n                var $targetElem;\n                var $pElem;\n\n                if (!targetElem) {\n                    // 没找到合法标签，就去查找 div\n                    targetElem = editor.getSelfOrParentByName(rangeElem, 'div');\n                    if (!targetElem) {\n                        return;\n                    }\n                    $targetElem = $(targetElem);\n\n                    if (e.type === 'keydown') {\n                        // 异步执行（同步执行会出现问题）\n                        $keydownDivElem = $targetElem;\n                        setTimeout(divHandler, 0);\n                    }\n\n                    if (e.type === 'keyup') {\n                        // 将 div 的内容移动到 p 里面，并移除 div\n                        $pElem = $('<p>' + $targetElem.html() + '</p>');\n                        $targetElem.after($pElem);\n                        $targetElem.remove();\n\n                        // 如果是回车结束，将选区定位到行首\n                        editor.restoreSelectionByElem($pElem.get(0), 'start');\n                    }\n                }\n            });\n        };\n\n        // enter时，用 p 包裹 text\n        Txt.fn.bindEnterForText = function () {\n            var self = this;\n            var $txt = self.$txt;\n            var handle;\n            $txt.on('keyup', function (e) {\n                if (e.keyCode !== 13) {\n                    return;\n                }\n                if (!handle) {\n                    handle = function handle() {\n                        self.wrapImgAndText();\n                    };\n                }\n                setTimeout(handle);\n            });\n        };\n\n        // tab 时，插入4个空格\n        Txt.fn.bindTabEvent = function () {\n            var self = this;\n            var editor = self.editor;\n            var $txt = self.$txt;\n\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 9) {\n                    // 只监听 tab 按钮\n                    return;\n                }\n                // 如果浏览器支持 insertHtml 则插入4个空格。如果不支持，就不管了\n                if (editor.queryCommandSupported('insertHtml')) {\n                    editor.command(e, 'insertHtml', '&nbsp;&nbsp;&nbsp;&nbsp;');\n                }\n            });\n        };\n\n        // 处理粘贴内容\n        Txt.fn.bindPasteFilter = function () {\n            var self = this;\n            var editor = self.editor;\n            var resultHtml = ''; //存储最终的结果\n            var $txt = self.$txt;\n            var legalTags = editor.config.legalTags;\n            var legalTagArr = legalTags.split(',');\n\n            $txt.on('paste', function (e) {\n                if (!editor.config.pasteFilter) {\n                    // 配置中取消了粘贴过滤\n                    return;\n                }\n\n                var currentNodeName = editor.getRangeElem().nodeName;\n                if (currentNodeName === 'TD' || currentNodeName === 'TH') {\n                    // 在表格的单元格中粘贴，忽略所有内容。否则会出现异常情况\n                    return;\n                }\n\n                resultHtml = ''; // 先清空 resultHtml\n\n                var pasteHtml, $paste, docSplitHtml;\n                var data = e.clipboardData || e.originalEvent.clipboardData;\n                var ieData = window.clipboardData;\n\n                if (editor.config.pasteText) {\n                    // 只粘贴纯文本\n\n                    if (data && data.getData) {\n                        // w3c\n                        pasteHtml = data.getData('text/plain');\n                    } else if (ieData && ieData.getData) {\n                        // IE\n                        pasteHtml = ieData.getData('text');\n                    } else {\n                        // 其他情况\n                        return;\n                    }\n\n                    // 拼接为 <p> 标签\n                    if (pasteHtml) {\n                        resultHtml = '<p>' + pasteHtml + '</p>';\n                    }\n                } else {\n                    // 粘贴过滤了样式的、只有标签的 html\n\n                    if (data && data.getData) {\n                        // w3c\n\n                        // 获取粘贴过来的html\n                        pasteHtml = data.getData('text/html');\n\n                        // 过滤从 word excel 粘贴过来的乱码\n                        docSplitHtml = pasteHtml.split('</html>');\n                        if (docSplitHtml.length === 2) {\n                            pasteHtml = docSplitHtml[0];\n                        }\n\n                        if (pasteHtml) {\n                            // 创建dom\n                            $paste = $('<div>' + pasteHtml + '</div>');\n                            // 处理，并将结果存储到 resultHtml 『全局』变量\n                            handle($paste.get(0));\n                        } else {\n                            // 得不到html，试图获取text\n                            pasteHtml = data.getData('text/plain');\n                            if (pasteHtml) {\n                                // 替换特殊字符\n                                pasteHtml = pasteHtml.replace(/[ ]/g, '&nbsp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n/g, '</p><p>');\n                                // 拼接\n                                resultHtml = '<p>' + pasteHtml + '</p>';\n\n                                // 查询链接\n                                resultHtml = resultHtml.replace(/<p>(https?:\\/\\/.*?)<\\/p>/ig, function (match, link) {\n                                    return '<p><a href=\"' + link + '\" target=\"_blank\">' + link + '</p>';\n                                });\n                            }\n                        }\n                    } else if (ieData && ieData.getData) {\n                        // IE 直接从剪切板中取出纯文本格式\n                        resultHtml = ieData.getData('text');\n                        if (!resultHtml) {\n                            return;\n                        }\n                        // 拼接为 <p> 标签\n                        resultHtml = '<p>' + resultHtml + '</p>';\n                        resultHtml = resultHtml.replace(new RegExp('\\n', 'g'), '</p><p>');\n                    } else {\n                        // 其他情况\n                        return;\n                    }\n                }\n\n                // 执行命令\n                if (resultHtml) {\n                    editor.command(e, 'insertHtml', resultHtml);\n\n                    // 删除内容为空的 p 和嵌套的 p\n                    self.clearEmptyOrNestP();\n                }\n            });\n\n            // 处理粘贴的内容\n            function handle(elem) {\n                if (!elem || !elem.nodeType || !elem.nodeName) {\n                    return;\n                }\n                var $elem;\n                var nodeName = elem.nodeName.toLowerCase();\n                var nodeType = elem.nodeType;\n                var childNodesClone;\n\n                // 只处理文本和普通node标签\n                if (nodeType !== 3 && nodeType !== 1) {\n                    return;\n                }\n\n                $elem = $(elem);\n\n                // 如果是容器，则继续深度遍历\n                if (nodeName === 'div') {\n                    childNodesClone = [];\n                    $.each(elem.childNodes, function (index, item) {\n                        // elem.childNodes 可获取TEXT节点，而 $elem.children() 就获取不到\n                        // 先将 elem.childNodes 拷贝一份，一面在循环递归过程中 elem 发生变化\n                        childNodesClone.push(item);\n                    });\n                    // 遍历子元素，执行操作\n                    $.each(childNodesClone, function () {\n                        handle(this);\n                    });\n                    return;\n                }\n\n                if (legalTagArr.indexOf(nodeName) >= 0) {\n                    // 如果是合法标签之内的，则根据元素类型，获取值\n                    resultHtml += getResult(elem);\n                } else if (nodeType === 3) {\n                    // 如果是文本，则直接插入 p 标签\n                    resultHtml += '<p>' + elem.textContent + '</p>';\n                } else if (nodeName === 'br') {\n                    // <br>保留\n                    resultHtml += '<br/>';\n                } else {\n                    // 忽略的标签\n                    if (['meta', 'style', 'script', 'object', 'form', 'iframe', 'hr'].indexOf(nodeName) >= 0) {\n                        return;\n                    }\n                    // 其他标签，移除属性，插入 p 标签\n                    $elem = $(removeAttrs(elem));\n                    // 注意，这里的 clone() 是必须的，否则会出错\n                    resultHtml += $('<div>').append($elem.clone()).html();\n                }\n            }\n\n            // 获取元素的结果\n            function getResult(elem) {\n                var nodeName = elem.nodeName.toLowerCase();\n                var $elem;\n                var htmlForP = '';\n                var htmlForLi = '';\n\n                if (['blockquote'].indexOf(nodeName) >= 0) {\n\n                    // 直接取出元素text即可\n                    $elem = $(elem);\n                    return '<' + nodeName + '>' + $elem.text() + '</' + nodeName + '>';\n                } else if (['p', 'h1', 'h2', 'h3', 'h4', 'h5'].indexOf(nodeName) >= 0) {\n\n                    //p head 取出 text 和链接\n                    elem = removeAttrs(elem);\n                    $elem = $(elem);\n                    htmlForP = $elem.html();\n\n                    // 剔除 a img 之外的元素\n                    htmlForP = htmlForP.replace(/<.*?>/ig, function (tag) {\n                        if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                            return tag;\n                        } else {\n                            return '';\n                        }\n                    });\n\n                    return '<' + nodeName + '>' + htmlForP + '</' + nodeName + '>';\n                } else if (['ul', 'ol'].indexOf(nodeName) >= 0) {\n\n                    // ul ol元素，获取子元素（li元素）的text link img，再拼接\n                    $elem = $(elem);\n                    $elem.children().each(function () {\n                        var $li = $(removeAttrs(this));\n                        var html = $li.html();\n\n                        html = html.replace(/<.*?>/ig, function (tag) {\n                            if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                                return tag;\n                            } else {\n                                return '';\n                            }\n                        });\n\n                        htmlForLi += '<li>' + html + '</li>';\n                    });\n                    return '<' + nodeName + '>' + htmlForLi + '</' + nodeName + '>';\n                } else {\n\n                    // 其他元素，移除元素属性\n                    $elem = $(removeAttrs(elem));\n                    return $('<div>').append($elem).html();\n                }\n            }\n\n            // 移除一个元素（子元素）的attr\n            function removeAttrs(elem) {\n                var attrs = elem.attributes || [];\n                var attrNames = [];\n                var exception = ['href', 'target', 'src', 'alt', 'rowspan', 'colspan']; //例外情况\n\n                // 先存储下elem中所有 attr 的名称\n                $.each(attrs, function (key, attr) {\n                    if (attr && attr.nodeType === 2) {\n                        attrNames.push(attr.nodeName);\n                    }\n                });\n                // 再根据名称删除所有attr\n                $.each(attrNames, function (key, attr) {\n                    if (exception.indexOf(attr) < 0) {\n                        // 除了 exception 规定的例外情况，删除其他属性\n                        elem.removeAttribute(attr);\n                    }\n                });\n\n                // 递归子节点\n                var children = elem.childNodes;\n                if (children.length) {\n                    $.each(children, function (key, value) {\n                        removeAttrs(value);\n                    });\n                }\n\n                return elem;\n            }\n        };\n\n        // 绑定 $txt.formatText() 方法\n        Txt.fn.bindFormatText = function () {\n            var self = this;\n            var editor = self.editor;\n            var $txt = self.$txt;\n            var legalTags = E.config.legalTags;\n            var legalTagArr = legalTags.split(',');\n            var length = legalTagArr.length;\n            var regArr = [];\n\n            // 将 E.config.legalTags 配置的有效字符，生成正则表达式\n            $.each(legalTagArr, function (k, tag) {\n                var reg = '\\>\\\\s*\\<(' + tag + ')\\>';\n                regArr.push(new RegExp(reg, 'ig'));\n            });\n\n            // 增加 li \n            regArr.push(new RegExp('\\>\\\\s*\\<(li)\\>', 'ig'));\n\n            // 增加 tr\n            regArr.push(new RegExp('\\>\\\\s*\\<(tr)\\>', 'ig'));\n\n            // 增加 code\n            regArr.push(new RegExp('\\>\\\\s*\\<(code)\\>', 'ig'));\n\n            // 生成 formatText 方法\n            $txt.formatText = function () {\n                var $temp = $('<div>');\n                var html = $txt.html();\n\n                // 去除空格\n                html = html.replace(/\\s*</ig, '<');\n\n                // 段落、表格之间换行\n                $.each(regArr, function (k, reg) {\n                    if (!reg.test(html)) {\n                        return;\n                    }\n                    html = html.replace(reg, function (matchStr, tag) {\n                        return '>\\n<' + tag + '>';\n                    });\n                });\n\n                $temp.html(html);\n                return $temp.text();\n            };\n        };\n\n        // 定制 $txt.html 方法\n        Txt.fn.bindHtml = function () {\n            var self = this;\n            var editor = self.editor;\n            var $txt = self.$txt;\n            var $valueContainer = editor.$valueContainer;\n            var valueNodeName = editor.valueNodeName;\n\n            $txt.html = function (html) {\n                var result;\n\n                if (valueNodeName === 'div') {\n                    // div 生成的编辑器，取值、赋值，都直接触发jquery的html方法\n                    result = $.fn.html.call($txt, html);\n                }\n\n                // textarea 生成的编辑器，则需要考虑赋值时，也给textarea赋值\n\n                if (html === undefined) {\n                    // 取值，直接触发jquery原生html方法\n                    result = $.fn.html.call($txt);\n\n                    // 替换 html 中，src和href属性中的 & 字符。\n                    // 因为 .html() 或者 .innerHTML 会把所有的 & 字符都改成 &amp; 但是 src 和 href 中的要保持 &\n                    result = result.replace(/(href|src)\\=\\\"(.*)\\\"/igm, function (a, b, c) {\n                        return b + '=\"' + c.replace('&amp;', '&') + '\"';\n                    });\n                } else {\n                    // 赋值，需要同时给 textarea 赋值\n                    result = $.fn.html.call($txt, html);\n                    $valueContainer.val(html);\n                }\n\n                if (html === undefined) {\n                    return result;\n                } else {\n                    // 手动触发 change 事件，因为 $txt 监控了 change 事件来判断是否需要执行 editor.onchange \n                    $txt.change();\n                }\n            };\n        };\n    });\n    // Txt.fn api\n    _e(function (E, $) {\n\n        var Txt = E.Txt;\n\n        var txtChangeEventNames = 'propertychange change click keyup input paste';\n\n        // 渲染\n        Txt.fn.render = function () {\n            var $txt = this.$txt;\n            var $editorContainer = this.editor.$editorContainer;\n            $editorContainer.append($txt);\n        };\n\n        // 计算高度\n        Txt.fn.initHeight = function () {\n            var editor = this.editor;\n            var $txt = this.$txt;\n            var valueContainerHeight = editor.$valueContainer.height();\n            var menuHeight = editor.menuContainer.height();\n            var txtHeight = valueContainerHeight - menuHeight;\n\n            // 限制最小为 50px\n            txtHeight = txtHeight < 50 ? 50 : txtHeight;\n\n            $txt.height(txtHeight);\n\n            // 记录原始高度\n            editor.valueContainerHeight = valueContainerHeight;\n\n            // 设置 max-height\n            this.initMaxHeight(txtHeight, menuHeight);\n        };\n\n        // 计算最大高度\n        Txt.fn.initMaxHeight = function (txtHeight, menuHeight) {\n            var editor = this.editor;\n            var $menuContainer = editor.menuContainer.$menuContainer;\n            var $txt = this.$txt;\n            var $wrap = $('<div>');\n\n            // 需要浏览器支持 max-height，否则不管\n            if (window.getComputedStyle && 'max-height' in window.getComputedStyle($txt.get(0))) {\n                // 获取 max-height 并判断是否有值\n                var maxHeight = parseInt(editor.$valueContainer.css('max-height'));\n                if (isNaN(maxHeight)) {\n                    return;\n                }\n\n                // max-height 和『全屏』暂时有冲突\n                if (editor.menus.fullscreen) {\n                    E.warn('max-height和『全屏』菜单一起使用时，会有一些问题尚未解决，请暂时不要两个同时使用');\n                    return;\n                }\n\n                // 标记\n                editor.useMaxHeight = true;\n\n                // 设置maxheight\n                $wrap.css({\n                    'max-height': maxHeight - menuHeight + 'px',\n                    'overflow-y': 'auto'\n                });\n                $txt.css({\n                    'height': 'auto',\n                    'overflow-y': 'visible',\n                    'min-height': txtHeight + 'px'\n                });\n\n                // 滚动式，菜单阴影\n                $wrap.on('scroll', function () {\n                    if ($txt.parent().scrollTop() > 10) {\n                        $menuContainer.addClass('wangEditor-menu-shadow');\n                    } else {\n                        $menuContainer.removeClass('wangEditor-menu-shadow');\n                    }\n                });\n\n                // 需在编辑器区域外面再包裹一层\n                $txt.wrap($wrap);\n            }\n        };\n\n        // 保存选区\n        Txt.fn.saveSelectionEvent = function () {\n            var $txt = this.$txt;\n            var editor = this.editor;\n            var timeoutId;\n            var dt = Date.now();\n\n            function save() {\n                editor.saveSelection();\n            }\n\n            // 同步保存选区\n            function saveSync() {\n                // 100ms之内，不重复保存\n                if (Date.now() - dt < 100) {\n                    return;\n                }\n\n                dt = Date.now();\n                save();\n            }\n\n            // 异步保存选区\n            function saveAync() {\n                // 节流，防止高频率重复操作\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                timeoutId = setTimeout(save, 300);\n            }\n\n            // txt change 、focus、blur 时随时保存选区\n            $txt.on(txtChangeEventNames + ' focus blur', function (e) {\n                // 先同步保存选区，为了让接下来就马上要执行 editor.getRangeElem() 的程序\n                // 能够获取到正确的 rangeElem\n                saveSync();\n\n                // 再异步保存选区，为了确定更加准确的选区，为后续的操作做准备\n                saveAync();\n            });\n\n            // 鼠标拖拽选择时，可能会拖拽到编辑器区域外面再松手，此时 $txt 就监听不到 click事件了\n            $txt.on('mousedown', function () {\n                $txt.on('mouseleave.saveSelection', function (e) {\n                    // 先同步后异步，如上述注释\n                    saveSync();\n                    saveAync();\n\n                    // 顺道吧菜单状态也更新了\n                    editor.updateMenuStyle();\n                });\n            }).on('mouseup', function () {\n                $txt.off('mouseleave.saveSelection');\n            });\n        };\n\n        // 随时更新 value\n        Txt.fn.updateValueEvent = function () {\n            var $txt = this.$txt;\n            var editor = this.editor;\n            var timeoutId, oldValue;\n\n            // 触发 onchange 事件\n            function doOnchange() {\n                var val = $txt.html();\n                if (oldValue === val) {\n                    // 无变化\n                    return;\n                }\n\n                // 触发 onchange 事件\n                if (editor.onchange && typeof editor.onchange === 'function') {\n                    editor.onchange.call(editor);\n                }\n\n                // 更新内容\n                editor.updateValue();\n\n                // 记录最新内容\n                oldValue = val;\n            }\n\n            // txt change 时随时更新内容\n            $txt.on(txtChangeEventNames, function (e) {\n                // 初始化\n                if (oldValue == null) {\n                    oldValue = $txt.html();\n                }\n\n                // 监控内容变化（停止操作 100ms 之后立即执行）\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                timeoutId = setTimeout(doOnchange, 100);\n            });\n        };\n\n        // 随时更新 menustyle\n        Txt.fn.updateMenuStyleEvent = function () {\n            var $txt = this.$txt;\n            var editor = this.editor;\n\n            // txt change 时随时更新内容\n            $txt.on(txtChangeEventNames, function (e) {\n                editor.updateMenuStyle();\n            });\n        };\n\n        // 最后插入试图插入 <p><br><p>\n        Txt.fn.insertEmptyP = function () {\n            var $txt = this.$txt;\n            var $children = $txt.children();\n\n            if ($children.length === 0) {\n                $txt.append($('<p><br></p>'));\n                return;\n            }\n\n            if ($.trim($children.last().html()).toLowerCase() !== '<br>') {\n                $txt.append($('<p><br></p>'));\n            }\n        };\n\n        // 将编辑器暴露出来的文字和图片，都用 p 来包裹\n        Txt.fn.wrapImgAndText = function () {\n            var $txt = this.$txt;\n            var $imgs = $txt.children('img');\n            var txt = $txt[0];\n            var childNodes = txt.childNodes;\n            var childrenLength = childNodes.length;\n            var i, childNode, p;\n\n            // 处理图片\n            $imgs.length && $imgs.each(function () {\n                $(this).wrap('<p>');\n            });\n\n            // 处理文字\n            for (i = 0; i < childrenLength; i++) {\n                childNode = childNodes[i];\n                if (childNode.nodeType === 3 && childNode.textContent && $.trim(childNode.textContent)) {\n                    $(childNode).wrap('<p>');\n                }\n            }\n        };\n\n        // 清空内容为空的<p>，以及重复包裹的<p>（在windows下的chrome粘贴文字之后，会出现上述情况）\n        Txt.fn.clearEmptyOrNestP = function () {\n            var $txt = this.$txt;\n            var $pList = $txt.find('p');\n\n            $pList.each(function () {\n                var $p = $(this);\n                var $children = $p.children();\n                var childrenLength = $children.length;\n                var $firstChild;\n                var content = $.trim($p.html());\n\n                // 内容为空的p\n                if (!content) {\n                    $p.remove();\n                    return;\n                }\n\n                // 嵌套的p\n                if (childrenLength === 1) {\n                    $firstChild = $children.first();\n                    if ($firstChild.get(0) && $firstChild.get(0).nodeName === 'P') {\n                        $p.html($firstChild.html());\n                    }\n                }\n            });\n        };\n\n        // 获取 scrollTop\n        Txt.fn.scrollTop = function (val) {\n            var self = this;\n            var editor = self.editor;\n            var $txt = self.$txt;\n\n            if (editor.useMaxHeight) {\n                return $txt.parent().scrollTop(val);\n            } else {\n                return $txt.scrollTop(val);\n            }\n        };\n\n        // 鼠标hover时候，显示p、head的高度\n        Txt.fn.showHeightOnHover = function () {\n            var editor = this.editor;\n            var $editorContainer = editor.$editorContainer;\n            var menuContainer = editor.menuContainer;\n            var $txt = this.$txt;\n            var $tip = $('<i class=\"height-tip\"><i>');\n            var isTipInTxt = false;\n\n            function addAndShowTip($target) {\n                if (!isTipInTxt) {\n                    $editorContainer.append($tip);\n                    isTipInTxt = true;\n                }\n\n                var txtTop = $txt.position().top;\n                var txtHeight = $txt.outerHeight();\n\n                var height = $target.height();\n                var top = $target.position().top;\n                var marginTop = parseInt($target.css('margin-top'), 10);\n                var paddingTop = parseInt($target.css('padding-top'), 10);\n                var marginBottom = parseInt($target.css('margin-bottom'), 10);\n                var paddingBottom = parseInt($target.css('padding-bottom'), 10);\n\n                // 计算初步的结果\n                var resultHeight = height + paddingTop + marginTop + paddingBottom + marginBottom;\n                var resultTop = top + menuContainer.height();\n\n                // var spaceValue;\n\n                // // 判断是否超出下边界\n                // spaceValue = (resultTop + resultHeight) - (txtTop + txtHeight);\n                // if (spaceValue > 0) {\n                //     resultHeight = resultHeight - spaceValue;\n                // }\n\n                // // 判断是否超出了下边界\n                // spaceValue = txtTop > resultTop;\n                // if (spaceValue) {\n                //     resultHeight = resultHeight - spaceValue;\n                //     top = top + spaceValue;\n                // }\n\n                // 按照最终结果渲染\n                $tip.css({\n                    height: height + paddingTop + marginTop + paddingBottom + marginBottom,\n                    top: top + menuContainer.height()\n                });\n            }\n            function removeTip() {\n                if (!isTipInTxt) {\n                    return;\n                }\n                $tip.remove();\n                isTipInTxt = false;\n            }\n\n            $txt.on('mouseenter', 'ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre', function (e) {\n                addAndShowTip($(e.currentTarget));\n            }).on('mouseleave', function () {\n                removeTip();\n            });\n        };\n    });\n    // 工具函数\n    _e(function (E, $) {\n\n        // IE8 [].indexOf()\n        if (!Array.prototype.indexOf) {\n            //IE低版本不支持 arr.indexOf \n            Array.prototype.indexOf = function (elem) {\n                var i = 0,\n                    length = this.length;\n                for (; i < length; i++) {\n                    if (this[i] === elem) {\n                        return i;\n                    }\n                }\n                return -1;\n            };\n            //IE低版本不支持 arr.lastIndexOf\n            Array.prototype.lastIndexOf = function (elem) {\n                var length = this.length;\n                for (length = length - 1; length >= 0; length--) {\n                    if (this[length] === elem) {\n                        return length;\n                    }\n                }\n                return -1;\n            };\n        }\n\n        // IE8 Date.now()\n        if (!Date.now) {\n            Date.now = function () {\n                return new Date().valueOf();\n            };\n        }\n\n        // console.log && console.warn && console.error\n        var console = window.console;\n        var emptyFn = function emptyFn() {};\n        $.each(['info', 'log', 'warn', 'error'], function (key, value) {\n            if (console == null) {\n                E[value] = emptyFn;\n            } else {\n                E[value] = function (info) {\n                    // 通过配置来控制打印输出\n                    if (E.config && E.config.printLog) {\n                        console[value]('wangEditor提示: ' + info);\n                    }\n                };\n            }\n        });\n\n        // 获取随机数\n        E.random = function () {\n            return Math.random().toString().slice(2);\n        };\n\n        // 浏览器是否支持 placeholder\n        E.placeholder = 'placeholder' in document.createElement('input');\n\n        // 兼容IE8的 input placeholder\n        E.placeholderForIE8 = function ($container) {\n            if (E.placeholder) {\n                return;\n            }\n            $container.find('input[placeholder]').each(function () {\n                var $input = $(this);\n                var placeholder = $input.attr('placeholder');\n\n                if ($input.val() === '') {\n                    $input.css('color', '#666');\n                    $input.val(placeholder);\n\n                    $input.on('focus.placeholder click.placeholder', function () {\n                        $input.val('');\n                        $input.css('color', '#333');\n                        $input.off('focus.placeholder click.placeholder');\n                    });\n                }\n            });\n        };\n    });\n    // 语言包\n    _e(function (E, $) {\n        E.langs = {};\n\n        // 中文\n        E.langs['zh-cn'] = {\n            bold: '粗体',\n            underline: '下划线',\n            italic: '斜体',\n            forecolor: '文字颜色',\n            bgcolor: '背景色',\n            strikethrough: '删除线',\n            eraser: '清空格式',\n            source: '源码',\n            quote: '引用',\n            fontfamily: '字体',\n            fontsize: '字号',\n            head: '标题',\n            orderlist: '有序列表',\n            unorderlist: '无序列表',\n            alignleft: '左对齐',\n            aligncenter: '居中',\n            alignright: '右对齐',\n            link: '链接',\n            text: '文本',\n            submit: '提交',\n            cancel: '取消',\n            unlink: '取消链接',\n            table: '表格',\n            emotion: '表情',\n            img: '图片',\n            uploadImg: '上传图片',\n            linkImg: '网络图片',\n            video: '视频',\n            'width': '宽',\n            'height': '高',\n            location: '位置',\n            loading: '加载中',\n            searchlocation: '搜索位置',\n            dynamicMap: '动态地图',\n            clearLocation: '清除位置',\n            langDynamicOneLocation: '动态地图只能显示一个位置',\n            insertcode: '插入代码',\n            undo: '撤销',\n            redo: '重复',\n            fullscreen: '全屏',\n            openLink: '打开链接'\n        };\n\n        // 英文\n        E.langs.en = {\n            bold: 'Bold',\n            underline: 'Underline',\n            italic: 'Italic',\n            forecolor: 'Color',\n            bgcolor: 'Backcolor',\n            strikethrough: 'Strikethrough',\n            eraser: 'Eraser',\n            source: 'Codeview',\n            quote: 'Quote',\n            fontfamily: 'Font family',\n            fontsize: 'Font size',\n            head: 'Head',\n            orderlist: 'Ordered list',\n            unorderlist: 'Unordered list',\n            alignleft: 'Align left',\n            aligncenter: 'Align center',\n            alignright: 'Align right',\n            link: 'Insert link',\n            text: 'Text',\n            submit: 'Submit',\n            cancel: 'Cancel',\n            unlink: 'Unlink',\n            table: 'Table',\n            emotion: 'Emotions',\n            img: 'Image',\n            uploadImg: 'Upload',\n            linkImg: 'Link',\n            video: 'Video',\n            'width': 'width',\n            'height': 'height',\n            location: 'Location',\n            loading: 'Loading',\n            searchlocation: 'search',\n            dynamicMap: 'Dynamic',\n            clearLocation: 'Clear',\n            langDynamicOneLocation: 'Only one location in dynamic map',\n            insertcode: 'Insert Code',\n            undo: 'Undo',\n            redo: 'Redo',\n            fullscreen: 'Full screnn',\n            openLink: 'open link'\n        };\n    });\n    // 全局配置\n    _e(function (E, $) {\n\n        E.config = {};\n\n        // 全屏时的 z-index\n        E.config.zindex = 10000;\n\n        // 是否打印log\n        E.config.printLog = true;\n\n        // 菜单吸顶：false - 不吸顶；number - 吸顶，值为top值\n        E.config.menuFixed = 0;\n\n        // 编辑源码时，过滤 javascript\n        E.config.jsFilter = true;\n\n        // 编辑器允许的标签\n        E.config.legalTags = 'p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre';\n\n        // 语言包\n        E.config.lang = E.langs['zh-cn'];\n\n        // 菜单配置\n        E.config.menus = ['source', '|', 'bold', 'underline', 'italic', 'strikethrough', 'eraser', 'forecolor', 'bgcolor', '|', 'quote', 'fontfamily', 'fontsize', 'head', 'unorderlist', 'orderlist', 'alignleft', 'aligncenter', 'alignright', '|', 'link', 'unlink', 'table', 'emotion', '|', 'img', 'video', 'location', 'insertcode', '|', 'undo', 'redo', 'fullscreen'];\n\n        // 颜色配置\n        E.config.colors = {\n            // 'value': 'title'\n            '#880000': '暗红色',\n            '#800080': '紫色',\n            '#ff0000': '红色',\n            '#ff00ff': '鲜粉色',\n            '#000080': '深蓝色',\n            '#0000ff': '蓝色',\n            '#00ffff': '湖蓝色',\n            '#008080': '蓝绿色',\n            '#008000': '绿色',\n            '#808000': '橄榄色',\n            '#00ff00': '浅绿色',\n            '#ffcc00': '橙黄色',\n            '#808080': '灰色',\n            '#c0c0c0': '银色',\n            '#000000': '黑色',\n            '#ffffff': '白色'\n        };\n\n        // 字体\n        E.config.familys = ['宋体', '黑体', '楷体', '微软雅黑', 'Arial', 'Verdana', 'Georgia', 'Times New Roman', 'Microsoft JhengHei', 'Trebuchet MS', 'Courier New', 'Impact', 'Comic Sans MS', 'Consolas'];\n\n        // 字号\n        E.config.fontsizes = {\n            // 格式：'value': 'title'\n            1: '12px',\n            2: '13px',\n            3: '16px',\n            4: '18px',\n            5: '24px',\n            6: '32px',\n            7: '48px'\n        };\n\n        // 表情包\n        E.config.emotionsShow = 'icon'; // 显示项，默认为'icon'，也可以配置成'value'\n        E.config.emotions = {\n            // 'default': {\n            //     title: '默认',\n            //     data: './emotions.data'\n            // },\n            'weibo': {\n                title: '微博表情',\n                data: [{\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif',\n                    value: '[草泥马]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif',\n                    value: '[神马]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif',\n                    value: '[浮云]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif',\n                    value: '[给力]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif',\n                    value: '[围观]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif',\n                    value: '[威武]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif',\n                    value: '[熊猫]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif',\n                    value: '[兔子]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif',\n                    value: '[奥特曼]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif',\n                    value: '[囧]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif',\n                    value: '[互粉]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif',\n                    value: '[礼物]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif',\n                    value: '[呵呵]'\n                }, {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif',\n                    value: '[哈哈]'\n                }]\n            }\n        };\n\n        // 百度地图的key\n        E.config.mapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n        // 上传图片的配置\n        // server地址\n        E.config.uploadImgUrl = '';\n        // 超时时间\n        E.config.uploadTimeout = 20 * 1000;\n        // 用于存储上传回调事件\n        E.config.uploadImgFns = {};\n        // 自定义上传图片的filename\n        // E.config.uploadImgFileName = 'customFileName';\n\n        // 自定义上传，设置为 true 之后，显示上传图标\n        E.config.customUpload = false;\n        // 自定义上传的init事件\n        // E.config.customUploadInit = function () {....};\n\n        // 自定义上传时传递的参数（如 token）\n        E.config.uploadParams = {\n            /* token: 'abcdef12345' */\n        };\n\n        // 自定义上传是的header参数\n        E.config.uploadHeaders = {\n            /* 'Accept' : 'text/x-json' */\n        };\n\n        // 跨域上传时传递 cookie，默认为 true\n        E.config.withCredentials = true;\n\n        // 隐藏网络图片，默认为 false\n        E.config.hideLinkImg = false;\n\n        // 是否过滤粘贴内容\n        E.config.pasteFilter = true;\n\n        // 是否粘贴纯文本，当 editor.config.pasteFilter === false 时候，此配置将失效\n        E.config.pasteText = false;\n\n        // 插入代码时，默认的语言\n        E.config.codeDefaultLang = 'javascript';\n    });\n    // 全局UI\n    _e(function (E, $) {\n\n        E.UI = {};\n\n        // 为菜单自定义配置的UI\n        E.UI.menus = {\n            // 这个 default 不加引号，在 IE8 会报错\n            'default': {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-command\"></i></a>',\n                selected: '.selected'\n            },\n            bold: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-bold\"></i></a>',\n                selected: '.selected'\n            },\n            underline: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-underline\"></i></a>',\n                selected: '.selected'\n            },\n            italic: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-italic\"></i></a>',\n                selected: '.selected'\n            },\n            forecolor: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-pencil\"></i></a>',\n                selected: '.selected'\n            },\n            bgcolor: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-brush\"></i></a>',\n                selected: '.selected'\n            },\n            strikethrough: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-strikethrough\"></i></a>',\n                selected: '.selected'\n            },\n            eraser: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-eraser\"></i></a>',\n                selected: '.selected'\n            },\n            quote: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-quotes-left\"></i></a>',\n                selected: '.selected'\n            },\n            source: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-code\"></i></a>',\n                selected: '.selected'\n            },\n            fontfamily: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-font2\"></i></a>',\n                selected: '.selected'\n            },\n            fontsize: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-text-height\"></i></a>',\n                selected: '.selected'\n            },\n            head: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-header\"></i></a>',\n                selected: '.selected'\n            },\n            orderlist: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-numbered\"></i></a>',\n                selected: '.selected'\n            },\n            unorderlist: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-bullet\"></i></a>',\n                selected: '.selected'\n            },\n            alignleft: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-left\"></i></a>',\n                selected: '.selected'\n            },\n            aligncenter: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-center\"></i></a>',\n                selected: '.selected'\n            },\n            alignright: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-right\"></i></a>',\n                selected: '.selected'\n            },\n            link: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-link\"></i></a>',\n                selected: '.selected'\n            },\n            unlink: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-unlink\"></i></a>',\n                selected: '.selected'\n            },\n            table: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-table\"></i></a>',\n                selected: '.selected'\n            },\n            emotion: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-happy\"></i></a>',\n                selected: '.selected'\n            },\n            img: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-picture\"></i></a>',\n                selected: '.selected'\n            },\n            video: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-play\"></i></a>',\n                selected: '.selected'\n            },\n            location: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-location\"></i></a>',\n                selected: '.selected'\n            },\n            insertcode: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-terminal\"></i></a>',\n                selected: '.selected'\n            },\n            undo: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-ccw\"></i></a>',\n                selected: '.selected'\n            },\n            redo: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-cw\"></i></a>',\n                selected: '.selected'\n            },\n            fullscreen: {\n                normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-enlarge2\"></i></a>',\n                selected: '<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-shrink2\"></i></a>'\n            }\n        };\n    });\n    // 对象配置\n    _e(function (E, $) {\n\n        E.fn.initDefaultConfig = function () {\n            var editor = this;\n            editor.config = $.extend({}, E.config);\n            editor.UI = $.extend({}, E.UI);\n        };\n    });\n    // 增加 container\n    _e(function (E, $) {\n\n        E.fn.addEditorContainer = function () {\n            this.$editorContainer = $('<div class=\"wangEditor-container\"></div>');\n        };\n    });\n    // 增加编辑区域对象\n    _e(function (E, $) {\n\n        E.fn.addTxt = function () {\n            var editor = this;\n            var txt = new E.Txt(editor);\n\n            editor.txt = txt;\n        };\n    });\n    // 增加menuContainer对象\n    _e(function (E, $) {\n\n        E.fn.addMenuContainer = function () {\n            var editor = this;\n            editor.menuContainer = new E.MenuContainer(editor);\n        };\n    });\n    // 增加menus\n    _e(function (E, $) {\n\n        // 存储创建菜单的函数\n        E.createMenuFns = [];\n        E.createMenu = function (fn) {\n            E.createMenuFns.push(fn);\n        };\n\n        // 创建所有菜单\n        E.fn.addMenus = function () {\n            var editor = this;\n            var menuIds = editor.config.menus;\n\n            // 检验 menuId 是否在配置中存在\n            function check(menuId) {\n                if (menuIds.indexOf(menuId) >= 0) {\n                    return true;\n                }\n                return false;\n            }\n\n            // 遍历所有的菜单创建函数，并执行\n            $.each(E.createMenuFns, function (k, createMenuFn) {\n                createMenuFn.call(editor, check);\n            });\n        };\n    });\n    // bold菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'bold';\n            if (!check(menuId)) {\n                return;\n            }\n\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.bold,\n                commandName: 'Bold'\n            });\n\n            // 定义选中状态下的click事件\n            menu.clickEventSelected = function (e) {\n                var isRangeEmpty = editor.isRangeEmpty();\n                if (!isRangeEmpty) {\n                    // 如果选区有内容，则执行基础命令\n                    editor.command(e, 'Bold');\n                } else {\n                    // 如果选区没有内容\n                    editor.commandForElem('b,strong,h1,h2,h3,h4,h5', e, 'Bold');\n                }\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // underline菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'underline';\n            if (!check(menuId)) {\n                return;\n            }\n\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.underline,\n                commandName: 'Underline'\n            });\n\n            // 定义选中状态下的click事件\n            menu.clickEventSelected = function (e) {\n                var isRangeEmpty = editor.isRangeEmpty();\n                if (!isRangeEmpty) {\n                    // 如果选区有内容，则执行基础命令\n                    editor.command(e, 'Underline');\n                } else {\n                    // 如果选区没有内容\n                    editor.commandForElem('u,a', e, 'Underline');\n                }\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // italic 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'italic';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.italic,\n                commandName: 'Italic'\n            });\n\n            // 定义选中状态下的click事件\n            menu.clickEventSelected = function (e) {\n                var isRangeEmpty = editor.isRangeEmpty();\n                if (!isRangeEmpty) {\n                    // 如果选区有内容，则执行基础命令\n                    editor.command(e, 'Italic');\n                } else {\n                    // 如果选区没有内容\n                    editor.commandForElem('i', e, 'Italic');\n                }\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // forecolor 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'forecolor';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n            var configColors = editor.config.colors;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.forecolor\n            });\n\n            // 创建 dropPanel\n            var $content = $('<div></div>');\n            $.each(configColors, function (k, v) {\n                $content.append(['<a href=\"#\" class=\"color-item\"', '    title=\"' + v + '\" commandValue=\"' + k + '\" ', '    style=\"color: ' + k + '\" ', '><i class=\"wangeditor-menu-img-pencil\"></i></a>'].join(''));\n            });\n            $content.on('click', 'a[commandValue]', function (e) {\n                // 执行命令\n                var $elem = $(this);\n                var commandValue = $elem.attr('commandValue');\n\n                if (menu.selected && editor.isRangeEmpty()) {\n                    // 当前处于选中状态，并且选中内容为空\n                    editor.commandForElem('font[color]', e, 'forecolor', commandValue);\n                } else {\n                    // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                    editor.command(e, 'forecolor', commandValue);\n                }\n            });\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $content,\n                width: 125\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[color]');\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // bgcolor 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'bgcolor';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n            var configColors = editor.config.colors;\n\n            // 检查元素是否有 background-color: 内联样式\n            function checkElemFn(elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && cssText.indexOf('background-color:') >= 0) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.bgcolor\n            });\n\n            // 创建 dropPanel\n            var $content = $('<div></div>');\n            $.each(configColors, function (k, v) {\n                $content.append(['<a href=\"#\" class=\"color-item\"', '    title=\"' + v + '\" commandValue=\"' + k + '\" ', '    style=\"color: ' + k + '\" ', '><i class=\"wangeditor-menu-img-brush\"></i></a>'].join(''));\n            });\n            $content.on('click', 'a[commandValue]', function (e) {\n                // 执行命令\n\n                var $elem = $(this);\n                var commandValue = $elem.attr('commandValue');\n\n                if (menu.selected && editor.isRangeEmpty()) {\n                    // 当前处于选中状态，并且选中内容为空。使用 commandForElem 执行命令\n                    editor.commandForElem({\n                        selector: 'span,font',\n                        check: checkElemFn\n                    }, e, 'BackColor', commandValue);\n                } else {\n                    // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                    editor.command(e, 'BackColor', commandValue);\n                }\n            });\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $content,\n                width: 125\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'span,font', checkElemFn);\n\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // strikethrough 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'strikethrough';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.strikethrough,\n                commandName: 'StrikeThrough'\n            });\n\n            // 定义选中状态下的click事件\n            menu.clickEventSelected = function (e) {\n                var isRangeEmpty = editor.isRangeEmpty();\n                if (!isRangeEmpty) {\n                    // 如果选区有内容，则执行基础命令\n                    editor.command(e, 'StrikeThrough');\n                } else {\n                    // 如果选区没有内容\n                    editor.commandForElem('strike', e, 'StrikeThrough');\n                }\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // eraser 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'eraser';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.eraser,\n                commandName: 'RemoveFormat'\n            });\n\n            // 定义点击事件\n            menu.clickEvent = function (e) {\n                var isRangeEmpty = editor.isRangeEmpty();\n\n                if (!isRangeEmpty) {\n                    // 选区不是空的，则执行默认命令\n                    editor.command(e, 'RemoveFormat');\n                    return;\n                }\n\n                var $clearElem;\n\n                // 自定义的命令函数\n                function commandFn() {\n                    var editor = this;\n                    var rangeElem;\n                    var pElem, $pElem;\n                    var quoteElem, $quoteElem;\n                    var listElem, $listElem;\n\n                    // 获取选区 elem\n                    rangeElem = editor.getRangeElem();\n                    // 第一步，获取 quote 父元素\n                    quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                    if (quoteElem) {\n                        $quoteElem = $(quoteElem);\n                        $clearElem = $('<p>' + $quoteElem.text() + '</p>');\n                        $quoteElem.after($clearElem).remove();\n                    }\n                    // 第二步，获取 p h 父元素\n                    pElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5');\n                    if (pElem) {\n                        $pElem = $(pElem);\n                        $clearElem = $('<p>' + $pElem.text() + '</p>');\n                        $pElem.after($clearElem).remove();\n                    }\n                    // 第三步，获取list\n                    listElem = editor.getSelfOrParentByName(rangeElem, 'ul,ol');\n                    if (listElem) {\n                        $listElem = $(listElem);\n                        $clearElem = $('<p>' + $listElem.text() + '</p>');\n                        $listElem.after($clearElem).remove();\n                    }\n                }\n\n                // 自定义 callback 事件\n                function callback() {\n                    // callback中，设置range为clearElem\n                    var editor = this;\n                    if ($clearElem) {\n                        editor.restoreSelectionByElem($clearElem.get(0));\n                    }\n                }\n\n                // 执行自定义命令\n                editor.customCommand(e, commandFn, callback);\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // source 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'source';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n            var txtHtml;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.source\n            });\n\n            menu.isShowCode = false;\n\n            // 更新内容\n            function updateValue() {\n                var $code = menu.$codeTextarea;\n                var $txt = editor.txt.$txt;\n                var value = $.trim($code.val()); // 取值\n\n                if (!value) {\n                    value = '<p><br></p>';\n                }\n\n                // 过滤js代码\n                if (editor.config.jsFilter) {\n\n                    value = value.replace(/<script[\\s\\S]*?<\\/script>/ig, '');\n                }\n                // 赋值\n                try {\n                    $txt.html(value);\n                } catch (ex) {\n                    // 更新 html 源码出错，一般都是取消了 js 过滤之后，js报错导致的\n                }\n            }\n\n            // 定义click事件\n            menu.clickEvent = function (e) {\n                var self = this;\n                var editor = self.editor;\n                var $txt = editor.txt.$txt;\n                var txtOuterHeight = $txt.outerHeight();\n                var txtHeight = $txt.height();\n\n                if (!self.$codeTextarea) {\n                    self.$codeTextarea = $('<textarea class=\"code-textarea\"></textarea>');\n                }\n                var $code = self.$codeTextarea;\n                $code.css({\n                    height: txtHeight,\n                    'margin-top': txtOuterHeight - txtHeight\n                });\n\n                // 赋值\n                $code.val($txt.html());\n\n                // 监控变化\n                $code.on('change', function (e) {\n                    updateValue();\n                });\n\n                // 渲染\n                $txt.after($code).hide();\n                $code.show();\n\n                // 更新状态\n                menu.isShowCode = true;\n\n                // 执行 updateSelected 事件\n                this.updateSelected();\n\n                // 禁用其他菜单\n                editor.disableMenusExcept('source');\n\n                // 记录当前html值\n                txtHtml = $txt.html();\n            };\n\n            // 定义选中状态下的click事件\n            menu.clickEventSelected = function (e) {\n                var self = this;\n                var editor = self.editor;\n                var $txt = editor.txt.$txt;\n                var $code = self.$codeTextarea;\n                var value;\n\n                if (!$code) {\n                    return;\n                }\n\n                // 更新内容\n                updateValue();\n\n                // 渲染\n                $code.after($txt).hide();\n                $txt.show();\n\n                // 更新状态\n                menu.isShowCode = false;\n\n                // 执行 updateSelected 事件\n                this.updateSelected();\n\n                // 启用其他菜单\n                editor.enableMenusExcept('source');\n\n                // 判断是否执行 onchange 事件\n                if ($txt.html() !== txtHtml) {\n                    if (editor.onchange && typeof editor.onchange === 'function') {\n                        editor.onchange.call(editor);\n                    }\n                }\n            };\n\n            // 定义切换选中状态事件\n            menu.updateSelectedEvent = function () {\n                return this.isShowCode;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // quote 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'quote';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.quote,\n                commandName: 'formatBlock',\n                commandValue: 'blockquote'\n            });\n\n            // 定义click事件\n            menu.clickEvent = function (e) {\n                var rangeElem = editor.getRangeElem();\n                var $rangeElem;\n                if (!rangeElem) {\n                    e.preventDefault();\n                    return;\n                }\n                var currentQuote = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                var $quote;\n\n                if (currentQuote) {\n                    // 说明当前在quote之内，不做任何处理\n                    e.preventDefault();\n                    return;\n                }\n\n                rangeElem = editor.getLegalTags(rangeElem);\n                $rangeElem = $(rangeElem);\n\n                // 无文字，则不允许执行引用\n                if (!$rangeElem.text()) {\n                    return;\n                }\n\n                if (!rangeElem) {\n                    // 执行默认命令\n                    // IE8 下执行此处（不过，经测试代码无效，也不报错）\n                    editor.command(e, 'formatBlock', 'blockquote');\n                    return;\n                }\n\n                // 自定义command事件\n                function commandFn() {\n                    $quote = $('<p>' + $rangeElem.text() + '</p>');\n                    $rangeElem.after($quote).remove();\n                    $quote.wrap('<blockquote>');\n                }\n\n                // 自定义 callback 事件\n                function callback() {\n                    // callback中，设置range为quote\n                    var editor = this;\n                    if ($quote) {\n                        editor.restoreSelectionByElem($quote.get(0));\n                    }\n                }\n\n                // 执行自定义命令\n                editor.customCommand(e, commandFn, callback);\n            };\n\n            // 定义选中状态下的click事件\n            menu.clickEventSelected = function (e) {\n                var rangeElem;\n                var quoteElem;\n                var $lastChild;\n\n                // 获取当前选区的elem，并试图往上找 quote 元素\n                rangeElem = editor.getRangeElem();\n                quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (!quoteElem) {\n                    // 没找到，则返回\n                    e.preventDefault();\n                    return;\n                }\n\n                // 自定义的command事件\n                function commandFn() {\n                    var $quoteElem;\n                    var $children;\n\n                    $quoteElem = $(quoteElem);\n                    $children = $quoteElem.children();\n                    if ($children.length) {\n                        $children.each(function (k) {\n                            var $item = $(this);\n                            if ($item.get(0).nodeName === 'P') {\n                                $quoteElem.after($item);\n                            } else {\n                                $quoteElem.after('<p>' + $item.text() + '</p>');\n                            }\n                            $lastChild = $item; // 记录最后一个子元素，用于callback中的range定位\n                        });\n                        $quoteElem.remove();\n                        return;\n                    }\n                }\n\n                // 自定义的callback函数\n                function callback() {\n                    // callback中，设置range为lastChild\n                    var editor = this;\n                    if ($lastChild) {\n                        editor.restoreSelectionByElem($lastChild.get(0));\n                    }\n                }\n\n                // 执行自定义命令\n                editor.customCommand(e, commandFn, callback);\n            };\n\n            // 定义更新选中状态的事件\n            menu.updateSelectedEvent = function () {\n                var self = this; //菜单对象\n                var editor = self.editor;\n                var rangeElem;\n\n                rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\n                if (rangeElem) {\n                    return true;\n                }\n\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n\n            // --------------- 两次点击 enter 跳出引用 ---------------\n            editor.ready(function () {\n                var editor = this;\n                var $txt = editor.txt.$txt;\n                var isPrevEnter = false; // 是不是刚刚在quote中按了 enter 键\n                $txt.on('keydown', function (e) {\n                    if (e.keyCode !== 13) {\n                        // 不是 enter 键\n                        isPrevEnter = false;\n                        return;\n                    }\n\n                    var rangeElem = editor.getRangeElem();\n                    rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                    if (!rangeElem) {\n                        // 选区不是 quote\n                        isPrevEnter = false;\n                        return;\n                    }\n\n                    if (!isPrevEnter) {\n                        // 最近没有在qote中按enter键\n                        isPrevEnter = true;\n                        return;\n                    }\n\n                    var currentRangeElem = editor.getRangeElem();\n                    var $currentRangeElem = $(currentRangeElem);\n                    if ($currentRangeElem.length) {\n                        $currentRangeElem.parent().after($currentRangeElem);\n                    }\n\n                    // 设置选区\n                    editor.restoreSelectionByElem(currentRangeElem, 'start');\n\n                    isPrevEnter = false;\n                    // 阻止默认行文\n                    e.preventDefault();\n                });\n            }); // editor.ready(\n\n            // --------------- 处理quote中无内容时不能删除的问题 ---------------\n            editor.ready(function () {\n                var editor = this;\n                var $txt = editor.txt.$txt;\n                var $rangeElem;\n\n                function commandFn() {\n                    $rangeElem && $rangeElem.remove();\n                }\n                function callback() {\n                    if (!$rangeElem) {\n                        return;\n                    }\n                    var $prev = $rangeElem.prev();\n                    if ($prev.length) {\n                        // 有 prev 则定位到 prev 最后\n                        editor.restoreSelectionByElem($prev.get(0));\n                    } else {\n                        // 无 prev 则初始化选区\n                        editor.initSelection();\n                    }\n                }\n\n                $txt.on('keydown', function (e) {\n                    if (e.keyCode !== 8) {\n                        // 不是 backspace 键\n                        return;\n                    }\n\n                    var rangeElem = editor.getRangeElem();\n                    rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                    if (!rangeElem) {\n                        // 选区不是 quote\n                        return;\n                    }\n                    $rangeElem = $(rangeElem);\n\n                    var text = $rangeElem.text();\n                    if (text) {\n                        // quote 中还有内容\n                        return;\n                    }\n                    editor.customCommand(e, commandFn, callback);\n                }); // $txt.on\n            }); // editor.ready(\n        });\n    });\n    // 字体 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'fontfamily';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n            var configFamilys = editor.config.familys;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.fontfamily,\n                commandName: 'fontName'\n            });\n\n            // 初始化数据\n            var data = {};\n            /*\n                data 需要的结构\n                {\n                    'commandValue': 'title'\n                    ...\n                }\n            */\n            $.each(configFamilys, function (k, v) {\n                // configFamilys 是数组，data 是对象\n                data[v] = v;\n            });\n\n            // 创建droplist\n            var tpl = '<span style=\"font-family:{#commandValue};\">{#title}</span>';\n            menu.dropList = new E.DropList(editor, menu, {\n                data: data,\n                tpl: tpl,\n                selectorForELemCommand: 'font[face]' // 为了执行 editor.commandForElem 而传入的elem查询方式\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[face]');\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // 字号 菜单\n    _e(function (E, $) {\n        E.createMenu(function (check) {\n            var menuId = 'fontsize';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n            var configSize = editor.config.fontsizes;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.fontsize,\n                commandName: 'fontSize'\n            });\n\n            // 初始化数据\n            var data = configSize;\n            /*\n                data 需要的结构\n                {\n                    'commandValue': 'title'\n                    ...\n                }\n            */\n\n            // 创建droplist\n            var tpl = '<span style=\"font-size:{#title};\">{#title}</span>';\n            menu.dropList = new E.DropList(editor, menu, {\n                data: data,\n                tpl: tpl,\n                selectorForELemCommand: 'font[size]' // 为了执行 editor.commandForElem 而传入的elem查询方式\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[size]');\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // head 菜单\n    _e(function (E, $) {\n        E.createMenu(function (check) {\n            var menuId = 'head';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.head,\n                commandName: 'formatBlock'\n            });\n\n            // 初始化数据\n            var data = {\n                '<h1>': '标题1',\n                '<h2>': '标题2',\n                '<h3>': '标题3',\n                '<h4>': '标题4',\n                '<h5>': '标题5'\n            };\n            /*\n                data 需要的结构\n                {\n                    'commandValue': 'title'\n                    ...\n                }\n            */\n\n            var isOrderedList;\n            function beforeEvent(e) {\n                if (editor.queryCommandState('InsertOrderedList')) {\n                    isOrderedList = true;\n\n                    // 先取消有序列表\n                    editor.command(e, 'InsertOrderedList');\n                } else {\n                    isOrderedList = false;\n                }\n            }\n\n            function afterEvent(e) {\n                if (isOrderedList) {\n                    // 再设置有序列表\n                    editor.command(e, 'InsertOrderedList');\n                }\n            }\n\n            // 创建droplist\n            var tpl = '{#commandValue}{#title}';\n            menu.dropList = new E.DropList(editor, menu, {\n                data: data,\n                tpl: tpl,\n                // 对 ol 直接设置 head，会出现每个 li 的 index 都变成 1 的问题，因此要先取消 ol，然后设置 head，最后再增加上 ol\n                beforeEvent: beforeEvent,\n                afterEvent: afterEvent\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'h1,h2,h3,h4,h5');\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // unorderlist 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'unorderlist';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.unorderlist,\n                commandName: 'InsertUnorderedList'\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // orderlist 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'orderlist';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.orderlist,\n                commandName: 'InsertOrderedList'\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // alignleft 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'alignleft';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.alignleft,\n                commandName: 'JustifyLeft'\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                    var cssText;\n                    if (elem && elem.style && elem.style.cssText != null) {\n                        cssText = elem.style.cssText;\n                        if (cssText && /text-align:\\s*left;/.test(cssText)) {\n                            return true;\n                        }\n                    }\n                    if ($(elem).attr('align') === 'left') {\n                        // ff 中，设置align-left之后，会是 <p align=\"left\">xxx</p>\n                        return true;\n                    }\n                    return false;\n                });\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // aligncenter 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'aligncenter';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.aligncenter,\n                commandName: 'JustifyCenter'\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                    var cssText;\n                    if (elem && elem.style && elem.style.cssText != null) {\n                        cssText = elem.style.cssText;\n                        if (cssText && /text-align:\\s*center;/.test(cssText)) {\n                            return true;\n                        }\n                    }\n                    if ($(elem).attr('align') === 'center') {\n                        // ff 中，设置align-center之后，会是 <p align=\"center\">xxx</p>\n                        return true;\n                    }\n                    return false;\n                });\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // alignright 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'alignright';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.alignright,\n                commandName: 'JustifyRight'\n            });\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                    var cssText;\n                    if (elem && elem.style && elem.style.cssText != null) {\n                        cssText = elem.style.cssText;\n                        if (cssText && /text-align:\\s*right;/.test(cssText)) {\n                            return true;\n                        }\n                    }\n                    if ($(elem).attr('align') === 'right') {\n                        // ff 中，设置align-right之后，会是 <p align=\"right\">xxx</p>\n                        return true;\n                    }\n                    return false;\n                });\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // link 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'link';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.link\n            });\n\n            // 创建 dropPanel\n            var $content = $('<div></div>');\n            var $div1 = $('<div style=\"margin:20px 10px;\" class=\"clearfix\"></div>');\n            var $div2 = $div1.clone();\n            var $div3 = $div1.clone().css('margin', '0 10px');\n            var $textInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.text + '\"/>');\n            var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.link + '\"/>');\n            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n            $div1.append($textInput);\n            $div2.append($urlInput);\n            $div3.append($btnSubmit).append($btnCancel);\n            $content.append($div1).append($div2).append($div3);\n\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $content,\n                width: 300\n            });\n\n            // 定义click事件\n            menu.clickEvent = function (e) {\n                var menu = this;\n                var dropPanel = menu.dropPanel;\n\n                // -------------隐藏----------------\n                if (dropPanel.isShowing) {\n                    dropPanel.hide();\n                    return;\n                }\n\n                // -------------显示----------------\n\n                // 重置 input\n                $textInput.val('');\n                $urlInput.val('http://');\n\n                // 获取url\n                var url = '';\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n                if (rangeElem) {\n                    url = rangeElem.href || '';\n                }\n\n                // 获取 text\n                var text = '';\n                var isRangeEmpty = editor.isRangeEmpty();\n                if (!isRangeEmpty) {\n                    // 选区不是空\n                    text = editor.getRangeText() || '';\n                } else if (rangeElem) {\n                    // 如果选区空，并且在 a 标签之内\n                    text = rangeElem.textContent || rangeElem.innerHTML;\n                }\n\n                // 设置 url 和 text\n                url && $urlInput.val(url);\n                text && $textInput.val(text);\n\n                // 如果有选区内容，textinput 不能修改\n                if (!isRangeEmpty) {\n                    $textInput.attr('disabled', true);\n                } else {\n                    $textInput.removeAttr('disabled');\n                }\n\n                // 显示（要设置好了所有input的值和属性之后再显示）\n                dropPanel.show();\n            };\n\n            // 定义 update selected 事件\n            menu.updateSelectedEvent = function () {\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n                if (rangeElem) {\n                    return true;\n                }\n                return false;\n            };\n\n            // 『取消』 按钮\n            $btnCancel.click(function (e) {\n                e.preventDefault();\n                menu.dropPanel.hide();\n            });\n\n            // 『确定』按钮\n            $btnSubmit.click(function (e) {\n                e.preventDefault();\n                var rangeElem = editor.getRangeElem();\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'a');\n                var isRangeEmpty = editor.isRangeEmpty();\n\n                var $linkElem, linkHtml;\n                var commandFn, callback;\n                var $txt = editor.txt.$txt;\n                var $oldLinks, $newLinks;\n                var uniqId = 'link' + E.random();\n\n                // 获取数据\n                var url = $.trim($urlInput.val());\n                var text = $.trim($textInput.val());\n\n                if (!url) {\n                    menu.dropPanel.focusFirstInput();\n                    return;\n                }\n                if (!text) {\n                    text = url;\n                }\n\n                if (!isRangeEmpty) {\n                    // 选中区域有内容，则执行默认命令\n\n                    // 获取目前 txt 内所有链接，并为当前链接做一个标记\n                    $oldLinks = $txt.find('a');\n                    $oldLinks.attr(uniqId, '1');\n\n                    // 执行命令 \n                    editor.command(e, 'createLink', url);\n\n                    // 去的没有标记的链接，即刚刚插入的链接\n                    $newLinks = $txt.find('a').not('[' + uniqId + ']');\n                    $newLinks.attr('target', '_blank'); // 增加 _blank\n\n                    // 去掉之前做的标记\n                    $oldLinks.removeAttr(uniqId);\n                } else if (targetElem) {\n                    // 无选中区域，在 a 标签之内，修改该 a 标签的内容和链接\n                    $linkElem = $(targetElem);\n                    commandFn = function commandFn() {\n                        $linkElem.attr('href', url);\n                        $linkElem.text(text);\n                    };\n                    callback = function callback() {\n                        var editor = this;\n                        editor.restoreSelectionByElem(targetElem);\n                    };\n                    // 执行命令\n                    editor.customCommand(e, commandFn, callback);\n                } else {\n                    // 无选中区域，不在 a 标签之内，插入新的链接\n\n                    linkHtml = '<a href=\"' + url + '\" target=\"_blank\">' + text + '</a>';\n                    if (E.userAgent.indexOf('Firefox') > 0) {\n                        linkHtml += '<span>&nbsp;</span>';\n                    }\n                    editor.command(e, 'insertHtml', linkHtml);\n                }\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // unlink 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'unlink';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.unlink,\n                commandName: 'unLink'\n            });\n\n            // click 事件\n            menu.clickEvent = function (e) {\n                var isRangeEmpty = editor.isRangeEmpty();\n                if (!isRangeEmpty) {\n                    // 有选中区域，或者IE8，执行默认命令\n                    editor.command(e, 'unLink');\n                    return;\n                }\n\n                // 无选中区域...\n\n                var rangeElem = editor.getRangeElem();\n                var aElem = editor.getSelfOrParentByName(rangeElem, 'a');\n                if (!aElem) {\n                    // 不在 a 之内，返回\n                    e.preventDefault();\n                    return;\n                }\n\n                // 在 a 之内\n                var $a = $(aElem);\n                var $span = $('<span>' + $a.text() + '</span>');\n                function commandFn() {\n                    $a.after($span).remove();\n                }\n                function callback() {\n                    editor.restoreSelectionByElem($span.get(0));\n                }\n                editor.customCommand(e, commandFn, callback);\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // table 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'table';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.table\n            });\n\n            // dropPanel 内容\n            var $content = $('<div style=\"font-size: 14px; color: #666; text-align:right;\"></div>');\n            var $table = $('<table class=\"choose-table\" style=\"margin-bottom:10px;margin-top:5px;\">');\n            var $row = $('<span>0</span>');\n            var $rowspan = $('<span> 行 </span>');\n            var $col = $('<span>0</span>');\n            var $colspan = $('<span> 列</span>');\n            var $tr;\n            var i, j;\n\n            // 创建一个n行n列的表格\n            for (i = 0; i < 15; i++) {\n                $tr = $('<tr index=\"' + (i + 1) + '\">');\n                for (j = 0; j < 20; j++) {\n                    $tr.append($('<td index=\"' + (j + 1) + '\">'));\n                }\n                $table.append($tr);\n            }\n            $content.append($table);\n            $content.append($row).append($rowspan).append($col).append($colspan);\n\n            // 定义table事件\n            $table.on('mouseenter', 'td', function (e) {\n                var $currentTd = $(e.currentTarget);\n                var currentTdIndex = $currentTd.attr('index');\n                var $currentTr = $currentTd.parent();\n                var currentTrIndex = $currentTr.attr('index');\n\n                // 显示\n                $row.text(currentTrIndex);\n                $col.text(currentTdIndex);\n\n                // 遍历设置背景颜色\n                $table.find('tr').each(function () {\n                    var $tr = $(this);\n                    var trIndex = $tr.attr('index');\n                    if (parseInt(trIndex, 10) <= parseInt(currentTrIndex, 10)) {\n                        // 该行需要可能需要设置背景色\n                        $tr.find('td').each(function () {\n                            var $td = $(this);\n                            var tdIndex = $td.attr('index');\n                            if (parseInt(tdIndex, 10) <= parseInt(currentTdIndex, 10)) {\n                                // 需要设置背景色\n                                $td.addClass('active');\n                            } else {\n                                // 需要移除背景色\n                                $td.removeClass('active');\n                            }\n                        });\n                    } else {\n                        // 改行不需要设置背景色\n                        $tr.find('td').removeClass('active');\n                    }\n                });\n            }).on('mouseleave', function (e) {\n                // mouseleave 删除背景色\n                $table.find('td').removeClass('active');\n\n                $row.text(0);\n                $col.text(0);\n            });\n\n            // 插入表格\n            $table.on('click', 'td', function (e) {\n                var $currentTd = $(e.currentTarget);\n                var currentTdIndex = $currentTd.attr('index');\n                var $currentTr = $currentTd.parent();\n                var currentTrIndex = $currentTr.attr('index');\n\n                var rownum = parseInt(currentTrIndex, 10);\n                var colnum = parseInt(currentTdIndex, 10);\n\n                // -------- 拼接tabel html --------\n\n                var i, j;\n                var tableHtml = '<table>';\n                for (i = 0; i < rownum; i++) {\n                    tableHtml += '<tr>';\n\n                    for (j = 0; j < colnum; j++) {\n                        tableHtml += '<td><span>&nbsp;</span></td>';\n                    }\n                    tableHtml += '</tr>';\n                }\n                tableHtml += '</table>';\n\n                // -------- 执行命令 --------\n                editor.command(e, 'insertHtml', tableHtml);\n            });\n\n            // 创建 panel\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $content,\n                width: 262\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // emotion 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'emotion';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var config = editor.config;\n            var lang = config.lang;\n            var configEmotions = config.emotions;\n            var emotionsShow = config.emotionsShow;\n\n            // 记录每一个表情图片的地址\n            editor.emotionUrls = [];\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.emotion\n            });\n\n            // 添加表情图片的函数\n            function insertEmotionImgs(data, $tabContent) {\n                // 添加表情图片\n                $.each(data, function (k, emotion) {\n                    var src = emotion.icon || emotion.url;\n                    var value = emotion.value || emotion.title;\n                    // 通过配置 editor.config.emotionsShow 的值来修改插入到编辑器的内容（图片/value）\n                    var commandValue = emotionsShow === 'icon' ? src : value;\n                    var $command = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n                    var $img = $('<img>');\n                    $img.attr('_src', src); // 先将 src 复制到 '_src' 属性，先不加载\n\n                    $command.append($img);\n                    $tabContent.append($command);\n\n                    // 记录下每一个表情图片的地址\n                    editor.emotionUrls.push(src);\n                });\n            }\n\n            // 拼接 dropPanel 内容\n            var $panelContent = $('<div class=\"panel-tab\"></div>');\n            var $tabContainer = $('<div class=\"tab-container\"></div>');\n            var $contentContainer = $('<div class=\"content-container emotion-content-container\"></div>');\n            $.each(configEmotions, function (k, emotion) {\n                var title = emotion.title;\n                var data = emotion.data;\n\n                E.log('正在处理 ' + title + ' 表情的数据...');\n\n                // 增加该组表情的tab和content\n                var $tab = $('<a href=\"#\">' + title + ' </a>');\n                $tabContainer.append($tab);\n                var $tabContent = $('<div class=\"content\"></div>');\n                $contentContainer.append($tabContent);\n\n                // tab 切换事件\n                $tab.click(function (e) {\n                    $tabContainer.children().removeClass('selected');\n                    $contentContainer.children().removeClass('selected');\n                    $tabContent.addClass('selected');\n                    $tab.addClass('selected');\n                    e.preventDefault();\n                });\n\n                // 处理data\n                if (typeof data === 'string') {\n                    // url 形式，需要通过ajax从该url获取数据\n                    E.log('将通过 ' + data + ' 地址ajax下载表情包');\n                    $.get(data, function (result) {\n                        result = $.parseJSON(result);\n                        E.log('下载完毕，得到 ' + result.length + ' 个表情');\n                        insertEmotionImgs(result, $tabContent);\n                    });\n                } else if (Object.prototype.toString.call(data).toLowerCase().indexOf('array') > 0) {\n                    // 数组，即 data 直接就是表情包数据\n                    insertEmotionImgs(data, $tabContent);\n                } else {\n                    // 其他情况，data格式不对\n                    E.error('data 数据格式错误，请修改为正确格式，参考文档：' + E.docsite);\n                    return;\n                }\n            });\n            $panelContent.append($tabContainer).append($contentContainer);\n\n            // 默认显示第一个tab\n            $tabContainer.children().first().addClass('selected');\n            $contentContainer.children().first().addClass('selected');\n\n            // 插入表情command事件\n            $contentContainer.on('click', 'a[commandValue]', function (e) {\n                var $a = $(e.currentTarget);\n                var commandValue = $a.attr('commandValue');\n                var img;\n\n                // commandValue 有可能是图片url，也有可能是表情的 value，需要区别对待\n\n                if (emotionsShow === 'icon') {\n                    // 插入图片\n                    editor.command(e, 'InsertImage', commandValue);\n                } else {\n                    // 插入value\n                    editor.command(e, 'insertHtml', '<span>' + commandValue + '</span>');\n                }\n\n                e.preventDefault();\n            });\n\n            // 添加panel\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $panelContent,\n                width: 350\n            });\n\n            // 定义click事件（异步加载表情图片）\n            menu.clickEvent = function (e) {\n                var menu = this;\n                var dropPanel = menu.dropPanel;\n\n                // -------------隐藏-------------\n                if (dropPanel.isShowing) {\n                    dropPanel.hide();\n                    return;\n                }\n\n                // -------------显示-------------\n                dropPanel.show();\n\n                // 异步加载图片\n                if (menu.imgLoaded) {\n                    return;\n                }\n                $contentContainer.find('img').each(function () {\n                    var $img = $(this);\n                    var _src = $img.attr('_src');\n                    $img.on('error', function () {\n                        E.error('加载不出表情图片 ' + _src);\n                    });\n                    $img.attr('src', _src);\n                    $img.removeAttr('_src');\n                });\n                menu.imgLoaded = true;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // img 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'img';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.img\n            });\n\n            // 创建 panel content\n            var $panelContent = $('<div class=\"panel-tab\"></div>');\n            var $tabContainer = $('<div class=\"tab-container\"></div>');\n            var $contentContainer = $('<div class=\"content-container\"></div>');\n            $panelContent.append($tabContainer).append($contentContainer);\n\n            // tab\n            var $uploadTab = $('<a href=\"#\">' + lang.uploadImg + '</a>');\n            var $linkTab = $('<a href=\"#\">' + lang.linkImg + '</a>');\n            $tabContainer.append($uploadTab).append($linkTab);\n\n            // 上传图片 content\n            var $uploadContent = $('<div class=\"content\"></div>');\n            $contentContainer.append($uploadContent);\n\n            // 网络图片 content\n            var $linkContent = $('<div class=\"content\"></div>');\n            $contentContainer.append($linkContent);\n            linkContentHandler(editor, menu, $linkContent);\n\n            // 添加panel\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $panelContent,\n                width: 400,\n                onRender: function onRender() {\n                    // 渲染后的回调事件，用于执行自定义上传的init\n                    // 因为渲染之后，上传面板的dom才会被渲染到页面，才能让第三方空间获取到\n                    var init = editor.config.customUploadInit;\n                    init && init.call(editor);\n                }\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n\n            // tab 切换事件\n            function tabToggle() {\n                $uploadTab.click(function (e) {\n                    $tabContainer.children().removeClass('selected');\n                    $contentContainer.children().removeClass('selected');\n                    $uploadContent.addClass('selected');\n                    $uploadTab.addClass('selected');\n                    e.preventDefault();\n                });\n                $linkTab.click(function (e) {\n                    $tabContainer.children().removeClass('selected');\n                    $contentContainer.children().removeClass('selected');\n                    $linkContent.addClass('selected');\n                    $linkTab.addClass('selected');\n                    e.preventDefault();\n\n                    // focus input\n                    if (E.placeholder) {\n                        $linkContent.find('input[type=text]').focus();\n                    }\n                });\n\n                // 默认情况\n                // $uploadTab.addClass('selected');\n                // $uploadContent.addClass('selected');\n                $uploadTab.click();\n            }\n\n            // 隐藏上传图片\n            function hideUploadImg() {\n                $tabContainer.remove();\n                $uploadContent.remove();\n                $linkContent.addClass('selected');\n            }\n\n            // 隐藏网络图片\n            function hideLinkImg() {\n                $tabContainer.remove();\n                $linkContent.remove();\n                $uploadContent.addClass('selected');\n            }\n\n            // 判断用户是否配置了上传图片\n            editor.ready(function () {\n                var editor = this;\n                var config = editor.config;\n                var uploadImgUrl = config.uploadImgUrl;\n                var customUpload = config.customUpload;\n                var linkImg = config.hideLinkImg;\n                var $uploadImgPanel;\n\n                if (uploadImgUrl || customUpload) {\n                    // 第一，暴露出 $uploadContent 以便用户自定义 ！！！重要\n                    editor.$uploadContent = $uploadContent;\n\n                    // 第二，绑定tab切换事件\n                    tabToggle();\n\n                    if (linkImg) {\n                        // 隐藏网络图片\n                        hideLinkImg();\n                    }\n                } else {\n                    // 未配置上传图片功能\n                    hideUploadImg();\n                }\n\n                // 点击 $uploadContent 立即隐藏 dropPanel\n                // 为了兼容IE8、9的上传，因为IE8、9使用 modal 上传\n                // 这里使用异步，为了不妨碍高级浏览器通过点击 $uploadContent 选择文件\n                function hidePanel() {\n                    menu.dropPanel.hide();\n                }\n                $uploadContent.click(function () {\n                    setTimeout(hidePanel);\n                });\n            });\n        });\n\n        // --------------- 处理网络图片content ---------------\n        function linkContentHandler(editor, menu, $linkContent) {\n            var lang = editor.config.lang;\n            var $urlContainer = $('<div style=\"margin:20px 10px 10px 10px;\"></div>');\n            var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"http://\"/>');\n            $urlContainer.append($urlInput);\n            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n            $linkContent.append($urlContainer).append($btnSubmit).append($btnCancel);\n\n            // 取消\n            $btnCancel.click(function (e) {\n                e.preventDefault();\n                menu.dropPanel.hide();\n            });\n\n            // callback \n            function callback() {\n                $urlInput.val('');\n            }\n\n            // 确定\n            $btnSubmit.click(function (e) {\n                e.preventDefault();\n                var url = $.trim($urlInput.val());\n                if (!url) {\n                    // 无内容\n                    $urlInput.focus();\n                    return;\n                }\n\n                var imgHtml = '<img style=\"max-width:100%;\" src=\"' + url + '\"/>';\n                editor.command(e, 'insertHtml', imgHtml, callback);\n            });\n        }\n    });\n    // video 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'video';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n            var reg = /^<(iframe)|(embed)/i; // <iframe... 或者 <embed... 格式\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.video\n            });\n\n            // 创建 panel 内容\n            var $content = $('<div></div>');\n            var $linkInputContainer = $('<div style=\"margin:20px 10px;\"></div>');\n            var $linkInput = $('<input type=\"text\" class=\"block\" placeholder=\\'格式如：<iframe src=\"...\" frameborder=0 allowfullscreen></iframe>\\'/>');\n            $linkInputContainer.append($linkInput);\n            var $sizeContainer = $('<div style=\"margin:20px 10px;\"></div>');\n            var $widthInput = $('<input type=\"text\" value=\"640\" style=\"width:50px;text-align:center;\"/>');\n            var $heightInput = $('<input type=\"text\" value=\"498\" style=\"width:50px;text-align:center;\"/>');\n            $sizeContainer.append('<span> ' + lang.width + ' </span>').append($widthInput).append('<span> px &nbsp;&nbsp;&nbsp;</span>').append('<span> ' + lang.height + ' </span>').append($heightInput).append('<span> px </span>');\n            var $btnContainer = $('<div></div>');\n            var $howToCopy = $('<a href=\"http://www.kancloud.cn/wangfupeng/wangeditor2/134973\" target=\"_blank\" style=\"display:inline-block;margin-top:10px;margin-left:10px;color:#999;\">如何复制视频链接？</a>');\n            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n            $btnContainer.append($howToCopy).append($btnSubmit).append($btnCancel);\n            $content.append($linkInputContainer).append($sizeContainer).append($btnContainer);\n\n            // 取消按钮\n            $btnCancel.click(function (e) {\n                e.preventDefault();\n                $linkInput.val('');\n                menu.dropPanel.hide();\n            });\n\n            // 确定按钮\n            $btnSubmit.click(function (e) {\n                e.preventDefault();\n                var link = $.trim($linkInput.val());\n                var $link;\n                var width = parseInt($widthInput.val());\n                var height = parseInt($heightInput.val());\n                var $div = $('<div>');\n                var html = '<p>{content}</p>';\n\n                // 验证数据\n                if (!link) {\n                    menu.dropPanel.focusFirstInput();\n                    return;\n                }\n\n                if (!reg.test(link)) {\n                    alert('视频链接格式错误！');\n                    menu.dropPanel.focusFirstInput();\n                    return;\n                }\n\n                if (isNaN(width) || isNaN(height)) {\n                    alert('宽度或高度不是数字！');\n                    return;\n                }\n\n                $link = $(link);\n\n                // 设置高度和宽度\n                $link.attr('width', width).attr('height', height);\n\n                // 拼接字符串\n                html = html.replace('{content}', $div.append($link).html());\n\n                // 执行命令\n                editor.command(e, 'insertHtml', html);\n                $linkInput.val('');\n            });\n\n            // 创建panel\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $content,\n                width: 400\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // location 菜单\n    _e(function (E, $) {\n\n        // 判断浏览器的 input 是否支持 keyup\n        var inputKeyup = function (input) {\n            return 'onkeyup' in input;\n        }(document.createElement('input'));\n\n        // 百度地图的key\n        E.baiduMapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n        // 一个页面中，如果有多个编辑器，地图会出现问题。这个参数记录一下，如果超过 1 就提示\n        E.numberOfLocation = 0;\n\n        E.createMenu(function (check) {\n            var menuId = 'location';\n            if (!check(menuId)) {\n                return;\n            }\n\n            if (++E.numberOfLocation > 1) {\n                E.error('目前不支持在一个页面多个编辑器上同时使用地图，可通过自定义菜单配置去掉地图菜单');\n                return;\n            }\n\n            var editor = this;\n            var config = editor.config;\n            var lang = config.lang;\n            var ak = config.mapAk;\n\n            // 地图的变量存储到这个地方\n            editor.mapData = {};\n            var mapData = editor.mapData;\n\n            // ---------- 地图事件 ----------\n            mapData.markers = [];\n            mapData.mapContainerId = 'map' + E.random();\n\n            mapData.clearLocations = function () {\n                var map = mapData.map;\n                if (!map) {\n                    return;\n                }\n                map.clearOverlays();\n\n                //同时，清空marker数组\n                mapData.markers = [];\n            };\n\n            mapData.searchMap = function () {\n                var map = mapData.map;\n                if (!map) {\n                    return;\n                }\n\n                var BMap = window.BMap;\n                var cityName = $cityInput.val();\n                var locationName = $searchInput.val();\n                var myGeo, marker;\n\n                if (cityName !== '') {\n                    if (!locationName || locationName === '') {\n                        map.centerAndZoom(cityName, 11);\n                    }\n\n                    //地址解析\n                    if (locationName && locationName !== '') {\n                        myGeo = new BMap.Geocoder();\n                        // 将地址解析结果显示在地图上,并调整地图视野\n                        myGeo.getPoint(locationName, function (point) {\n                            if (point) {\n                                map.centerAndZoom(point, 13);\n                                marker = new BMap.Marker(point);\n                                map.addOverlay(marker);\n                                marker.enableDragging(); //允许拖拽\n                                mapData.markers.push(marker); //将marker加入到数组中\n                            } else {\n                                // alert('未找到');\n                                map.centerAndZoom(cityName, 11); //找不到则重新定位到城市\n                            }\n                        }, cityName);\n                    }\n                } // if(cityName !== '')\n            };\n\n            // load script 之后的 callback\n            var hasCallback = false;\n            window.baiduMapCallBack = function () {\n                // 避免重复加载\n                if (hasCallback) {\n                    return;\n                } else {\n                    hasCallback = true;\n                }\n\n                var BMap = window.BMap;\n                if (!mapData.map) {\n                    // 创建Map实例\n                    mapData.map = new BMap.Map(mapData.mapContainerId);\n                }\n                var map = mapData.map;\n\n                map.centerAndZoom(new BMap.Point(116.404, 39.915), 11); // 初始化地图,设置中心点坐标和地图级别\n                map.addControl(new BMap.MapTypeControl()); //添加地图类型控件\n                map.setCurrentCity(\"北京\"); // 设置地图显示的城市 此项是必须设置的\n                map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放\n\n                //根据IP定位\n                function locationFun(result) {\n                    var cityName = result.name;\n                    map.setCenter(cityName);\n\n                    // 设置城市名称\n                    $cityInput.val(cityName);\n                    if (E.placeholder) {\n                        $searchInput.focus();\n                    }\n                    var timeoutId, _searchFn;\n                    if (inputKeyup) {\n                        // 并绑定搜索事件 - input 支持 keyup\n                        _searchFn = function searchFn(e) {\n                            if (e.type === 'keyup' && e.keyCode === 13) {\n                                e.preventDefault();\n                            }\n                            if (timeoutId) {\n                                clearTimeout(timeoutId);\n                            }\n                            timeoutId = setTimeout(mapData.searchMap, 500);\n                        };\n                        $cityInput.on('keyup change paste', _searchFn);\n                        $searchInput.on('keyup change paste', _searchFn);\n                    } else {\n                        // 并绑定搜索事件 - input 不支持 keyup\n                        _searchFn = function searchFn() {\n                            if (!$content.is(':visible')) {\n                                // panel 不显示了，就不用再监控了\n                                clearTimeout(timeoutId);\n                                return;\n                            }\n\n                            var currentCity = '';\n                            var currentSearch = '';\n                            var city = $cityInput.val();\n                            var search = $searchInput.val();\n\n                            if (city !== currentCity || search !== currentSearch) {\n                                // 刚获取的数据和之前的数据不一致，执行查询\n                                mapData.searchMap();\n                                // 更新数据\n                                currentCity = city;\n                                currentSearch = search;\n                            }\n\n                            // 继续监控\n                            if (timeoutId) {\n                                clearTimeout(timeoutId);\n                            }\n                            timeoutId = setTimeout(_searchFn, 1000);\n                        };\n                        // 开始监控\n                        timeoutId = setTimeout(_searchFn, 1000);\n                    }\n                }\n                var myCity = new BMap.LocalCity();\n                myCity.get(locationFun);\n\n                //鼠标点击，创建位置\n                map.addEventListener(\"click\", function (e) {\n                    var marker = new BMap.Marker(new BMap.Point(e.point.lng, e.point.lat));\n                    map.addOverlay(marker);\n                    marker.enableDragging();\n                    mapData.markers.push(marker); //加入到数组中\n                }, false);\n            };\n\n            mapData.loadMapScript = function () {\n                var script = document.createElement(\"script\");\n                script.type = \"text/javascript\";\n                script.src = \"https://api.map.baidu.com/api?v=2.0&ak=\" + ak + \"&s=1&callback=baiduMapCallBack\"; // baiduMapCallBack是一个本地函数\n                try {\n                    // IE10- 报错\n                    document.body.appendChild(script);\n                } catch (ex) {\n                    E.error('加载地图过程中发生错误');\n                }\n            };\n\n            // 初始化地图\n            mapData.initMap = function () {\n                if (window.BMap) {\n                    // 不是第一次，直接处理地图即可\n                    window.baiduMapCallBack();\n                } else {\n                    // 第一次，先加载地图 script，再处理地图（script加载完自动执行处理）\n                    mapData.loadMapScript();\n                }\n            };\n\n            // ---------- 创建 menu 对象 ----------\n\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.location\n            });\n\n            editor.menus[menuId] = menu;\n\n            // ---------- 构建UI ----------\n\n            // panel content \n            var $content = $('<div></div>');\n\n            // 搜索框\n            var $inputContainer = $('<div style=\"margin:10px 0;\"></div>');\n            var $cityInput = $('<input type=\"text\"/>');\n            $cityInput.css({\n                width: '80px',\n                'text-align': 'center'\n            });\n            var $searchInput = $('<input type=\"text\"/>');\n            $searchInput.css({\n                width: '300px',\n                'margin-left': '10px'\n            }).attr('placeholder', lang.searchlocation);\n            var $clearBtn = $('<button class=\"right link\">' + lang.clearLocation + '</button>');\n            $inputContainer.append($clearBtn).append($cityInput).append($searchInput);\n            $content.append($inputContainer);\n\n            // 清除位置按钮\n            $clearBtn.click(function (e) {\n                $searchInput.val('');\n                $searchInput.focus();\n                mapData.clearLocations();\n                e.preventDefault();\n            });\n\n            // 地图\n            var $map = $('<div id=\"' + mapData.mapContainerId + '\"></div>');\n            $map.css({\n                height: '260px',\n                width: '100%',\n                position: 'relative',\n                'margin-top': '10px',\n                border: '1px solid #f1f1f1'\n            });\n            var $mapLoading = $('<span>' + lang.loading + '</span>');\n            $mapLoading.css({\n                position: 'absolute',\n                width: '100px',\n                'text-align': 'center',\n                top: '45%',\n                left: '50%',\n                'margin-left': '-50px'\n            });\n            $map.append($mapLoading);\n            $content.append($map);\n\n            // 按钮\n            var $btnContainer = $('<div style=\"margin:10px 0;\"></div>');\n            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n            var $checkLabel = $('<label style=\"display:inline-block;margin-top:10px;color:#666;\"></label>');\n            var $check = $('<input type=\"checkbox\">');\n            $checkLabel.append($check).append('<span style=\"display:inline-block;margin-left:5px;\">  ' + lang.dynamicMap + '</span>');\n            $btnContainer.append($checkLabel).append($btnSubmit).append($btnCancel);\n            $content.append($btnContainer);\n\n            function callback() {\n                $searchInput.val('');\n            }\n\n            // 『取消』按钮事件\n            $btnCancel.click(function (e) {\n                e.preventDefault();\n                callback();\n                menu.dropPanel.hide();\n            });\n\n            // 『确定』按钮事件\n            $btnSubmit.click(function (e) {\n                e.preventDefault();\n                var map = mapData.map,\n                    isDynamic = $check.is(':checked'),\n                    markers = mapData.markers,\n                    center = map.getCenter(),\n                    centerLng = center.lng,\n                    centerLat = center.lat,\n                    zoom = map.getZoom(),\n                    size = map.getSize(),\n                    sizeWidth = size.width,\n                    sizeHeight = size.height,\n                    position,\n                    src,\n                    iframe;\n\n                if (isDynamic) {\n                    //动态地址\n                    src = 'http://ueditor.baidu.com/ueditor/dialogs/map/show.html#';\n                } else {\n                    //静态地址\n                    src = 'http://api.map.baidu.com/staticimage?';\n                }\n\n                //src参数\n                src = src + 'center=' + centerLng + ',' + centerLat + '&zoom=' + zoom + '&width=' + sizeWidth + '&height=' + sizeHeight;\n                if (markers.length > 0) {\n                    src = src + '&markers=';\n\n                    //添加所有的marker\n                    $.each(markers, function (key, value) {\n                        position = value.getPosition();\n                        if (key > 0) {\n                            src = src + '|';\n                        }\n                        src = src + position.lng + ',' + position.lat;\n                    });\n                }\n\n                if (isDynamic) {\n                    if (markers.length > 1) {\n                        alert(lang.langDynamicOneLocation);\n                        return;\n                    }\n\n                    src += '&markerStyles=l,A';\n\n                    //插入iframe\n                    iframe = '<iframe class=\"ueditor_baidumap\" src=\"{src}\" frameborder=\"0\" width=\"' + sizeWidth + '\" height=\"' + sizeHeight + '\"></iframe>';\n                    iframe = iframe.replace('{src}', src);\n                    editor.command(e, 'insertHtml', iframe, callback);\n                } else {\n                    //插入图片\n                    editor.command(e, 'insertHtml', '<img style=\"max-width:100%;\" src=\"' + src + '\"/>', callback);\n                }\n            });\n\n            // 根据 UI 创建菜单 panel\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $content,\n                width: 500\n            });\n\n            // ---------- 事件 ----------\n\n            // render 时执行事件\n            menu.onRender = function () {\n                if (ak === E.baiduMapAk) {\n                    E.warn('建议在配置中自定义百度地图的mapAk，否则可能影响地图功能，文档：' + E.docsite);\n                }\n            };\n\n            // click 事件\n            menu.clickEvent = function (e) {\n                var menu = this;\n                var dropPanel = menu.dropPanel;\n                var firstTime = false;\n\n                // -------------隐藏-------------\n                if (dropPanel.isShowing) {\n                    dropPanel.hide();\n                    return;\n                }\n\n                // -------------显示-------------\n                if (!mapData.map) {\n                    // 第一次，先加载地图\n                    firstTime = true;\n                }\n\n                dropPanel.show();\n                mapData.initMap();\n\n                if (!firstTime) {\n                    $searchInput.focus();\n                }\n            };\n        });\n    });\n    // insertcode 菜单\n    _e(function (E, $) {\n\n        // 加载 highlightjs 代码\n        function loadHljs() {\n            if (E.userAgent.indexOf('MSIE 8') > 0) {\n                // 不支持 IE8\n                return;\n            }\n            if (window.hljs) {\n                // 不要重复加载\n                return;\n            }\n            var script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = \"//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js\";\n            document.body.appendChild(script);\n        }\n\n        E.createMenu(function (check) {\n            var menuId = 'insertcode';\n            if (!check(menuId)) {\n                return;\n            }\n\n            // 加载 highlightjs 代码\n            setTimeout(loadHljs, 0);\n\n            var editor = this;\n            var config = editor.config;\n            var lang = config.lang;\n            var $txt = editor.txt.$txt;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.insertcode\n            });\n\n            // click 事件\n            menu.clickEvent = function (e) {\n                var menu = this;\n                var dropPanel = menu.dropPanel;\n\n                // 隐藏\n                if (dropPanel.isShowing) {\n                    dropPanel.hide();\n                    return;\n                }\n\n                // 显示\n                $textarea.val('');\n                dropPanel.show();\n\n                // highlightjs 语言列表\n                var hljs = window.hljs;\n                if (hljs && hljs.listLanguages) {\n                    if ($langSelect.children().length !== 0) {\n                        return;\n                    }\n                    $langSelect.css({\n                        'margin-top': '9px',\n                        'margin-left': '5px'\n                    });\n                    $.each(hljs.listLanguages(), function (key, lang) {\n                        if (lang === 'xml') {\n                            lang = 'html';\n                        }\n                        if (lang === config.codeDefaultLang) {\n                            $langSelect.append('<option value=\"' + lang + '\" selected=\"selected\">' + lang + '</option>');\n                        } else {\n                            $langSelect.append('<option value=\"' + lang + '\">' + lang + '</option>');\n                        }\n                    });\n                } else {\n                    $langSelect.hide();\n                }\n            };\n\n            // 选中状态下的 click 事件\n            menu.clickEventSelected = function (e) {\n                var menu = this;\n                var dropPanel = menu.dropPanel;\n\n                // 隐藏\n                if (dropPanel.isShowing) {\n                    dropPanel.hide();\n                    return;\n                }\n\n                // 显示\n                dropPanel.show();\n\n                var rangeElem = editor.getRangeElem();\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n                var $targetElem;\n                var className;\n                if (targetElem) {\n                    // 确定找到 pre 之后，再找 code\n                    targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n                }\n                if (!targetElem) {\n                    return;\n                }\n                $targetElem = $(targetElem);\n\n                // 赋值内容\n                $textarea.val($targetElem.text());\n                if ($langSelect) {\n                    // 赋值语言\n                    className = $targetElem.attr('class');\n                    if (className) {\n                        $langSelect.val(className.split(' ')[0]);\n                    }\n                }\n            };\n\n            // 定义更新选中状态的事件\n            menu.updateSelectedEvent = function () {\n                var self = this; //菜单对象\n                var editor = self.editor;\n                var rangeElem;\n\n                rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n\n                if (rangeElem) {\n                    return true;\n                }\n\n                return false;\n            };\n\n            // 创建 panel\n            var $content = $('<div></div>');\n            var $textarea = $('<textarea></textarea>');\n            var $langSelect = $('<select></select>');\n            contentHandle($content);\n            menu.dropPanel = new E.DropPanel(editor, menu, {\n                $content: $content,\n                width: 500\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n\n            // ------ 增加 content 内容 ------\n            function contentHandle($content) {\n                // textarea 区域\n                var $textareaContainer = $('<div></div>');\n                $textareaContainer.css({\n                    margin: '15px 5px 5px 5px',\n                    height: '160px',\n                    'text-align': 'center'\n                });\n                $textarea.css({\n                    width: '100%',\n                    height: '100%',\n                    padding: '10px'\n                });\n                $textarea.on('keydown', function (e) {\n                    // 取消 tab 键默认行为\n                    if (e.keyCode === 9) {\n                        e.preventDefault();\n                    }\n                });\n                $textareaContainer.append($textarea);\n                $content.append($textareaContainer);\n\n                // 按钮区域\n                var $btnContainer = $('<div></div>');\n                var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n                var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n                $btnContainer.append($btnSubmit).append($btnCancel).append($langSelect);\n                $content.append($btnContainer);\n\n                // 取消按钮\n                $btnCancel.click(function (e) {\n                    e.preventDefault();\n                    menu.dropPanel.hide();\n                });\n\n                // 确定按钮\n                var codeTpl = '<pre style=\"max-width:100%;overflow-x:auto;\"><code{#langClass}>{#content}</code></pre>';\n                $btnSubmit.click(function (e) {\n                    e.preventDefault();\n                    var val = $textarea.val();\n                    if (!val) {\n                        // 无内容\n                        $textarea.focus();\n                        return;\n                    }\n\n                    var rangeElem = editor.getRangeElem();\n                    if ($.trim($(rangeElem).text()) && codeTpl.indexOf('<p><br></p>') !== 0) {\n                        codeTpl = '<p><br></p>' + codeTpl;\n                    }\n\n                    var lang = $langSelect ? $langSelect.val() : ''; // 获取高亮语言\n                    var langClass = '';\n                    var doHightlight = function doHightlight() {\n                        $txt.find('pre code').each(function (i, block) {\n                            var $block = $(block);\n                            if ($block.attr('codemark')) {\n                                // 有 codemark 标记的代码块，就不再重新格式化了\n                                return;\n                            } else if (window.hljs) {\n                                // 新代码块，格式化之后，立即标记 codemark\n                                window.hljs.highlightBlock(block);\n                                $block.attr('codemark', '1');\n                            }\n                        });\n                    };\n\n                    // 语言高亮样式\n                    if (lang) {\n                        langClass = ' class=\"' + lang + ' hljs\"';\n                    }\n\n                    // 替换标签\n                    val = val.replace(/&/gm, '&amp;').replace(/</gm, '&lt;').replace(/>/gm, '&gt;');\n\n                    // ---- menu 未选中状态 ----\n                    if (!menu.selected) {\n                        // 拼接html\n                        var html = codeTpl.replace('{#langClass}', langClass).replace('{#content}', val);\n                        editor.command(e, 'insertHtml', html, doHightlight);\n                        return;\n                    }\n\n                    // ---- menu 选中状态 ----\n                    var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n                    var $targetElem;\n                    if (targetElem) {\n                        // 确定找到 pre 之后，再找 code\n                        targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n                    }\n                    if (!targetElem) {\n                        return;\n                    }\n                    $targetElem = $(targetElem);\n\n                    function commandFn() {\n                        var className;\n                        if (lang) {\n                            className = $targetElem.attr('class');\n                            if (className !== lang + ' hljs') {\n                                $targetElem.attr('class', lang + ' hljs');\n                            }\n                        }\n                        $targetElem.html(val);\n                    }\n                    function callback() {\n                        editor.restoreSelectionByElem(targetElem);\n                        doHightlight();\n                    }\n                    editor.customCommand(e, commandFn, callback);\n                });\n            }\n\n            // ------ enter 时，不另起标签，只换行 ------\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 13) {\n                    return;\n                }\n                var rangeElem = editor.getRangeElem();\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n                if (!targetElem) {\n                    return;\n                }\n\n                editor.command(e, 'insertHtml', '\\n');\n            });\n\n            // ------ 点击时，禁用其他标签 ------\n            function updateMenu() {\n                var rangeElem = editor.getRangeElem();\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n                if (targetElem) {\n                    // 在 code 之内，禁用其他菜单\n                    editor.disableMenusExcept('insertcode');\n                } else {\n                    // 不是在 code 之内，启用其他菜单\n                    editor.enableMenusExcept('insertcode');\n                }\n            }\n            $txt.on('keydown click', function (e) {\n                // 此处必须使用 setTimeout 异步处理，否则不对\n                setTimeout(updateMenu);\n            });\n        });\n    });\n    // undo 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'undo';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.undo\n            });\n\n            // click 事件\n            menu.clickEvent = function (e) {\n                editor.undo();\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n\n            // ------------ 初始化时、enter 时、打字中断时，做记录 ------------\n            // ------------ ctrl + z 是调用记录撤销，而不是使用浏览器默认的撤销 ------------\n            editor.ready(function () {\n                var editor = this;\n                var $txt = editor.txt.$txt;\n                var timeoutId;\n\n                // 执行undo记录\n                function undo() {\n                    editor.undoRecord();\n                }\n\n                $txt.on('keydown', function (e) {\n                    var keyCode = e.keyCode;\n\n                    // 撤销 ctrl + z\n                    if (e.ctrlKey && keyCode === 90) {\n                        editor.undo();\n                        return;\n                    }\n\n                    if (keyCode === 13) {\n                        // enter 做记录\n                        undo();\n                    } else {\n                        // keyup 之后 1s 之内不操作，则做一次记录\n                        if (timeoutId) {\n                            clearTimeout(timeoutId);\n                        }\n                        timeoutId = setTimeout(undo, 1000);\n                    }\n                });\n\n                // 初始化做记录\n                editor.undoRecord();\n            });\n        });\n    });\n    // redo 菜单\n    _e(function (E, $) {\n\n        E.createMenu(function (check) {\n            var menuId = 'redo';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var lang = editor.config.lang;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.redo\n            });\n\n            // click 事件\n            menu.clickEvent = function (e) {\n                editor.redo();\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // 全屏 菜单\n    _e(function (E, $) {\n\n        // 记录全屏时的scrollTop\n        var scrollTopWhenFullScreen;\n\n        E.createMenu(function (check) {\n            var menuId = 'fullscreen';\n            if (!check(menuId)) {\n                return;\n            }\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var config = editor.config;\n            var zIndexConfig = config.zindex || 10000;\n            var lang = config.lang;\n\n            var isSelected = false;\n            var zIndex;\n\n            var maxHeight;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor,\n                id: menuId,\n                title: lang.fullscreen\n            });\n\n            // 定义click事件\n            menu.clickEvent = function (e) {\n                // 增加样式\n                var $editorContainer = editor.$editorContainer;\n                $editorContainer.addClass('wangEditor-fullscreen');\n\n                // （先保存当前的）再设置z-index\n                zIndex = $editorContainer.css('z-index');\n                $editorContainer.css('z-index', zIndexConfig);\n\n                var $wrapper;\n                var txtHeight = $txt.height();\n                var txtOuterHeight = $txt.outerHeight();\n\n                if (editor.useMaxHeight) {\n                    // 记录 max-height，并暂时去掉maxheight\n                    maxHeight = $txt.css('max-height');\n                    $txt.css('max-height', 'none');\n\n                    // 如果使用了maxHeight， 将$txt从它的父元素中移出来\n                    $wrapper = $txt.parent();\n                    $wrapper.after($txt);\n                    $wrapper.remove();\n                    $txt.css('overflow-y', 'auto');\n                }\n\n                // 设置高度到全屏\n                var menuContainer = editor.menuContainer;\n                $txt.height(E.$window.height() - menuContainer.height() - (txtOuterHeight - txtHeight) // 去掉内边距和外边距\n                );\n\n                // 取消menuContainer的内联样式（menu吸顶时，会为 menuContainer 设置一些内联样式）\n                editor.menuContainer.$menuContainer.attr('style', '');\n\n                // 保存状态\n                isSelected = true;\n\n                // 记录编辑器是否全屏\n                editor.isFullScreen = true;\n\n                // 记录设置全屏时的高度\n                scrollTopWhenFullScreen = E.$window.scrollTop();\n            };\n\n            // 定义选中状态的 click 事件\n            menu.clickEventSelected = function (e) {\n                // 取消样式\n                var $editorContainer = editor.$editorContainer;\n                $editorContainer.removeClass('wangEditor-fullscreen');\n                $editorContainer.css('z-index', zIndex);\n\n                // 还原height\n                if (editor.useMaxHeight) {\n                    $txt.css('max-height', maxHeight);\n                } else {\n                    // editor.valueContainerHeight 在 editor.txt.initHeight() 中事先保存了\n                    editor.$valueContainer.css('height', editor.valueContainerHeight);\n                }\n\n                // 重新计算高度\n                editor.txt.initHeight();\n\n                // 保存状态\n                isSelected = false;\n\n                // 记录编辑器是否全屏\n                editor.isFullScreen = false;\n\n                // 还原scrollTop\n                if (scrollTopWhenFullScreen != null) {\n                    E.$window.scrollTop(scrollTopWhenFullScreen);\n                }\n            };\n\n            // 定义选中事件\n            menu.updateSelectedEvent = function (e) {\n                return isSelected;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // 渲染menus\n    _e(function (E, $) {\n\n        E.fn.renderMenus = function () {\n\n            var editor = this;\n            var menus = editor.menus;\n            var menuIds = editor.config.menus;\n            var menuContainer = editor.menuContainer;\n\n            var menu;\n            var groupIdx = 0;\n            $.each(menuIds, function (k, v) {\n                if (v === '|') {\n                    groupIdx++;\n                    return;\n                }\n\n                menu = menus[v];\n                if (menu) {\n                    menu.render(groupIdx);\n                }\n            });\n        };\n    });\n    // 渲染menus\n    _e(function (E, $) {\n\n        E.fn.renderMenuContainer = function () {\n\n            var editor = this;\n            var menuContainer = editor.menuContainer;\n            var $editorContainer = editor.$editorContainer;\n\n            menuContainer.render();\n        };\n    });\n    // 渲染 txt\n    _e(function (E, $) {\n\n        E.fn.renderTxt = function () {\n\n            var editor = this;\n            var txt = editor.txt;\n\n            txt.render();\n\n            // ready 时候，计算txt的高度\n            editor.ready(function () {\n                txt.initHeight();\n            });\n        };\n    });\n    // 渲染 container\n    _e(function (E, $) {\n\n        E.fn.renderEditorContainer = function () {\n\n            var editor = this;\n            var $valueContainer = editor.$valueContainer;\n            var $editorContainer = editor.$editorContainer;\n            var $txt = editor.txt.$txt;\n            var $prev, $parent;\n\n            // 将编辑器渲染到页面中\n            if ($valueContainer === $txt) {\n                $prev = editor.$prev;\n                $parent = editor.$parent;\n\n                if ($prev && $prev.length) {\n                    // 有前置节点，就插入到前置节点的后面\n                    $prev.after($editorContainer);\n                } else {\n                    // 没有前置节点，就直接插入到父元素\n                    $parent.prepend($editorContainer);\n                }\n            } else {\n                $valueContainer.after($editorContainer);\n                $valueContainer.hide();\n            }\n\n            // 设置宽度（这样设置宽度有问题）\n            // $editorContainer.css('width', $valueContainer.css('width'));\n        };\n    });\n    // 菜单事件\n    _e(function (E, $) {\n\n        // 绑定每个菜单的click事件\n        E.fn.eventMenus = function () {\n\n            var menus = this.menus;\n\n            // 绑定菜单的点击事件\n            $.each(menus, function (k, v) {\n                v.bindEvent();\n            });\n        };\n    });\n    // 菜单container事件\n    _e(function (E, $) {\n\n        E.fn.eventMenuContainer = function () {};\n    });\n    // 编辑区域事件\n    _e(function (E, $) {\n\n        E.fn.eventTxt = function () {\n\n            var txt = this.txt;\n\n            // txt内容变化时，保存选区\n            txt.saveSelectionEvent();\n\n            // txt内容变化时，随时更新 value\n            txt.updateValueEvent();\n\n            // txt内容变化时，随时更新 menu style\n            txt.updateMenuStyleEvent();\n\n            // // 鼠标hover时，显示 p head 高度（暂时关闭这个功能）\n            // if (!/ie/i.test(E.userAgent)) {\n            //     // 暂时不支持IE\n            //     txt.showHeightOnHover();\n            // }\n        };\n    });\n    // 上传图片事件\n    _e(function (E, $) {\n\n        E.plugin(function () {\n            var editor = this;\n            var fns = editor.config.uploadImgFns; // editor.config.uploadImgFns = {} 在config文件中定义了\n\n            // -------- 定义load函数 --------\n            fns.onload || (fns.onload = function (resultText, xhr) {\n                E.log('上传结束，返回结果为 ' + resultText);\n\n                var editor = this;\n                var originalName = editor.uploadImgOriginalName || ''; // 上传图片时，已经将图片的名字存在 editor.uploadImgOriginalName\n                var img;\n                if (resultText.indexOf('error|') === 0) {\n                    // 提示错误\n                    E.warn('上传失败：' + resultText.split('|')[1]);\n                    alert(resultText.split('|')[1]);\n                } else {\n                    E.log('上传成功，即将插入编辑区域，结果为：' + resultText);\n\n                    // 将结果插入编辑器\n                    img = document.createElement('img');\n                    img.onload = function () {\n                        var html = '<img src=\"' + resultText + '\" alt=\"' + originalName + '\" style=\"max-width:100%;\"/>';\n                        editor.command(null, 'insertHtml', html);\n\n                        E.log('已插入图片，地址 ' + resultText);\n                        img = null;\n                    };\n                    img.onerror = function () {\n                        E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + resultText);\n                        img = null;\n                    };\n                    img.src = resultText;\n                }\n            });\n\n            // -------- 定义tiemout函数 --------\n            fns.ontimeout || (fns.ontimeout = function (xhr) {\n                E.error('上传图片超时');\n                alert('上传图片超时');\n            });\n\n            // -------- 定义error函数 --------\n            fns.onerror || (fns.onerror = function (xhr) {\n                E.error('上传上图片发生错误');\n                alert('上传上图片发生错误');\n            });\n        });\n    });\n    // xhr 上传图片\n    _e(function (E, $) {\n\n        if (!window.FileReader || !window.FormData) {\n            // 如果不支持html5的文档操作，直接返回\n            return;\n        }\n\n        E.plugin(function () {\n\n            var editor = this;\n            var config = editor.config;\n            var uploadImgUrl = config.uploadImgUrl;\n            var uploadTimeout = config.uploadTimeout;\n\n            // 获取配置中的上传事件\n            var uploadImgFns = config.uploadImgFns;\n            var onload = uploadImgFns.onload;\n            var ontimeout = uploadImgFns.ontimeout;\n            var onerror = uploadImgFns.onerror;\n\n            if (!uploadImgUrl) {\n                return;\n            }\n\n            // -------- 将以base64的图片url数据转换为Blob --------\n            function convertBase64UrlToBlob(urlData, filetype) {\n                //去掉url的头，并转换为byte\n                var bytes = window.atob(urlData.split(',')[1]);\n\n                //处理异常,将ascii码小于0的转换为大于0\n                var ab = new ArrayBuffer(bytes.length);\n                var ia = new Uint8Array(ab);\n                var i;\n                for (i = 0; i < bytes.length; i++) {\n                    ia[i] = bytes.charCodeAt(i);\n                }\n\n                return new Blob([ab], { type: filetype });\n            }\n\n            // -------- 插入图片的方法 --------\n            function insertImg(src, event) {\n                var img = document.createElement('img');\n                img.onload = function () {\n                    var html = '<img src=\"' + src + '\" style=\"max-width:100%;\"/>';\n                    editor.command(event, 'insertHtml', html);\n\n                    E.log('已插入图片，地址 ' + src);\n                    img = null;\n                };\n                img.onerror = function () {\n                    E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + src);\n                    img = null;\n                };\n                img.src = src;\n            }\n\n            // -------- onprogress 事件 --------\n            function updateProgress(e) {\n                if (e.lengthComputable) {\n                    var percentComplete = e.loaded / e.total;\n                    editor.showUploadProgress(percentComplete * 100);\n                }\n            }\n\n            // -------- xhr 上传图片 --------\n            editor.xhrUploadImg = function (opt) {\n                // opt 数据\n                var event = opt.event;\n                var fileName = opt.filename || '';\n                var base64 = opt.base64;\n                var fileType = opt.fileType || 'image/png'; // 无扩展名则默认使用 png\n                var name = opt.name || 'wangEditor_upload_file';\n                var loadfn = opt.loadfn || onload;\n                var errorfn = opt.errorfn || onerror;\n                var timeoutfn = opt.timeoutfn || ontimeout;\n\n                // 上传参数（如 token）\n                var params = editor.config.uploadParams || {};\n\n                // headers\n                var headers = editor.config.uploadHeaders || {};\n\n                // 获取文件扩展名\n                var fileExt = 'png'; // 默认为 png\n                if (fileName.indexOf('.') > 0) {\n                    // 原来的文件名有扩展名\n                    fileExt = fileName.slice(fileName.lastIndexOf('.') - fileName.length + 1);\n                } else if (fileType.indexOf('/') > 0 && fileType.split('/')[1]) {\n                    // 文件名没有扩展名，通过类型获取，如从 'image/png' 取 'png'\n                    fileExt = fileType.split('/')[1];\n                }\n\n                // ------------ begin 预览模拟上传 ------------\n                if (E.isOnWebsite) {\n                    E.log('预览模拟上传');\n                    insertImg(base64, event);\n                    return;\n                }\n                // ------------ end 预览模拟上传 ------------\n\n                // 变量声明\n                var xhr = new XMLHttpRequest();\n                var timeoutId;\n                var src;\n                var formData = new FormData();\n\n                // 超时处理\n                function timeoutCallback() {\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                    }\n                    if (xhr && xhr.abort) {\n                        xhr.abort();\n                    }\n\n                    // 超时了就阻止默认行为\n                    event.preventDefault();\n\n                    // 执行回调函数，提示什么内容，都应该在回调函数中定义\n                    timeoutfn && timeoutfn.call(editor, xhr);\n\n                    // 隐藏进度条\n                    editor.hideUploadProgress();\n                }\n\n                xhr.onload = function () {\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                    }\n\n                    // 记录文件名到 editor.uploadImgOriginalName ，插入图片时，可做 alt 属性用\n                    editor.uploadImgOriginalName = fileName;\n                    if (fileName.indexOf('.') > 0) {\n                        editor.uploadImgOriginalName = fileName.split('.')[0];\n                    }\n\n                    // 执行load函数，任何操作，都应该在load函数中定义\n                    loadfn && loadfn.call(editor, xhr.responseText, xhr);\n\n                    // 隐藏进度条\n                    editor.hideUploadProgress();\n                };\n                xhr.onerror = function () {\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                    }\n\n                    // 超时了就阻止默认行为\n                    event.preventDefault();\n\n                    // 执行error函数，错误提示，应该在error函数中定义\n                    errorfn && errorfn.call(editor, xhr);\n\n                    // 隐藏进度条\n                    editor.hideUploadProgress();\n                };\n                // xhr.onprogress = updateProgress;\n                xhr.upload.onprogress = updateProgress;\n\n                // 填充数据\n                formData.append(name, convertBase64UrlToBlob(base64, fileType), E.random() + '.' + fileExt);\n\n                // 添加参数\n                $.each(params, function (key, value) {\n                    formData.append(key, value);\n                });\n\n                // 开始上传\n                xhr.open('POST', uploadImgUrl, true);\n                // xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");  // 将参数解析成传统form的方式上传\n\n                // 修改自定义配置的headers\n                $.each(headers, function (key, value) {\n                    xhr.setRequestHeader(key, value);\n                });\n\n                // 跨域上传时，传cookie\n                xhr.withCredentials = editor.config.withCredentials || true;\n\n                // 发送数据\n                xhr.send(formData);\n                timeoutId = setTimeout(timeoutCallback, uploadTimeout);\n\n                E.log('开始上传...并开始超时计算');\n            };\n        });\n    });\n    // 进度条\n    _e(function (E, $) {\n\n        E.plugin(function () {\n\n            var editor = this;\n            var menuContainer = editor.menuContainer;\n            var menuHeight = menuContainer.height();\n            var $editorContainer = editor.$editorContainer;\n            var width = $editorContainer.width();\n            var $progress = $('<div class=\"wangEditor-upload-progress\"></div>');\n\n            // 渲染事件\n            var isRender = false;\n            function render() {\n                if (isRender) {\n                    return;\n                }\n                isRender = true;\n\n                $progress.css({\n                    top: menuHeight + 'px'\n                });\n                $editorContainer.append($progress);\n            }\n\n            // ------ 显示进度 ------\n            editor.showUploadProgress = function (progress) {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n\n                // 显示之前，先判断是否渲染\n                render();\n\n                $progress.show();\n                $progress.width(progress * width / 100);\n            };\n\n            // ------ 隐藏进度条 ------\n            var timeoutId;\n            function hideProgress() {\n                $progress.hide();\n                timeoutId = null;\n            }\n            editor.hideUploadProgress = function (time) {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                time = time || 750;\n                timeoutId = setTimeout(hideProgress, time);\n            };\n        });\n    });\n    // upload img 插件\n    _e(function (E, $) {\n\n        E.plugin(function () {\n            var editor = this;\n            var config = editor.config;\n            var uploadImgUrl = config.uploadImgUrl;\n            var uploadTimeout = config.uploadTimeout;\n            var event;\n\n            if (!uploadImgUrl) {\n                return;\n            }\n\n            // 获取editor的上传dom\n            var $uploadContent = editor.$uploadContent;\n            if (!$uploadContent) {\n                return;\n            }\n\n            // 自定义UI，并添加到上传dom节点上\n            var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n            $uploadContent.append($uploadIcon);\n\n            // ---------- 构建上传对象 ----------\n            var upfile = new E.UploadFile({\n                editor: editor,\n                uploadUrl: uploadImgUrl,\n                timeout: uploadTimeout,\n                fileAccept: 'image/jpg,image/jpeg,image/png,image/gif,image/bmp' // 只允许选择图片 \n            });\n\n            // 选择本地文件，上传\n            $uploadIcon.click(function (e) {\n                event = e;\n                upfile.selectFiles();\n            });\n        });\n    });\n    // h5 方式上传图片\n    _e(function (E, $) {\n\n        if (!window.FileReader || !window.FormData) {\n            // 如果不支持html5的文档操作，直接返回\n            return;\n        }\n\n        // 构造函数\n        var UploadFile = function UploadFile(opt) {\n            this.editor = opt.editor;\n            this.uploadUrl = opt.uploadUrl;\n            this.timeout = opt.timeout;\n            this.fileAccept = opt.fileAccept;\n            this.multiple = true;\n        };\n\n        UploadFile.fn = UploadFile.prototype;\n\n        // clear\n        UploadFile.fn.clear = function () {\n            this.$input.val('');\n            E.log('input value 已清空');\n        };\n\n        // 渲染\n        UploadFile.fn.render = function () {\n            var self = this;\n            if (self._hasRender) {\n                // 不要重复渲染\n                return;\n            }\n\n            E.log('渲染dom');\n\n            var fileAccept = self.fileAccept;\n            var acceptTpl = fileAccept ? 'accept=\"' + fileAccept + '\"' : '';\n            var multiple = self.multiple;\n            var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n            var $input = $('<input type=\"file\" ' + acceptTpl + ' ' + multipleTpl + '/>');\n            var $container = $('<div style=\"display:none;\"></div>');\n\n            $container.append($input);\n            E.$body.append($container);\n\n            // onchange 事件\n            $input.on('change', function (e) {\n                self.selected(e, $input.get(0));\n            });\n\n            // 记录对象数据\n            self.$input = $input;\n\n            // 记录\n            self._hasRender = true;\n        };\n\n        // 选择\n        UploadFile.fn.selectFiles = function () {\n            var self = this;\n\n            E.log('使用 html5 方式上传');\n\n            // 先渲染\n            self.render();\n\n            // 选择\n            E.log('选择文件');\n            self.$input.click();\n        };\n\n        // 选中文件之后\n        UploadFile.fn.selected = function (e, input) {\n            var self = this;\n            var files = input.files || [];\n            if (files.length === 0) {\n                return;\n            }\n\n            E.log('选中 ' + files.length + ' 个文件');\n\n            // 遍历选中的文件，预览、上传\n            $.each(files, function (key, value) {\n                self.upload(value);\n            });\n        };\n\n        // 上传单个文件\n        UploadFile.fn.upload = function (file) {\n            var self = this;\n            var editor = self.editor;\n            var filename = file.name || '';\n            var fileType = file.type || '';\n            var uploadImgFns = editor.config.uploadImgFns;\n            var uploadFileName = editor.config.uploadImgFileName || 'wangEditorH5File';\n            var onload = uploadImgFns.onload;\n            var ontimeout = uploadImgFns.ontimeout;\n            var onerror = uploadImgFns.onerror;\n            var reader = new FileReader();\n\n            if (!onload || !ontimeout || !onerror) {\n                E.error('请为编辑器配置上传图片的 onload ontimeout onerror 回调事件');\n                return;\n            }\n\n            E.log('开始执行 ' + filename + ' 文件的上传');\n\n            // 清空 input 数据\n            function clearInput() {\n                self.clear();\n            }\n\n            // onload事件\n            reader.onload = function (e) {\n                E.log('已读取' + filename + '文件');\n\n                var base64 = e.target.result || this.result;\n                editor.xhrUploadImg({\n                    event: e,\n                    filename: filename,\n                    base64: base64,\n                    fileType: fileType,\n                    name: uploadFileName,\n                    loadfn: function loadfn(resultText, xhr) {\n                        clearInput();\n                        // 执行配置中的方法\n                        var editor = this;\n                        onload.call(editor, resultText, xhr);\n                    },\n                    errorfn: function errorfn(xhr) {\n                        clearInput();\n                        if (E.isOnWebsite) {\n                            alert('wangEditor官网暂时没有服务端，因此报错。实际项目中不会发生');\n                        }\n                        // 执行配置中的方法\n                        var editor = this;\n                        onerror.call(editor, xhr);\n                    },\n                    timeoutfn: function timeoutfn(xhr) {\n                        clearInput();\n                        if (E.isOnWebsite) {\n                            alert('wangEditor官网暂时没有服务端，因此超时。实际项目中不会发生');\n                        }\n                        // 执行配置中的方法\n                        var editor = this;\n                        ontimeout(editor, xhr);\n                    }\n                });\n            };\n\n            // 开始取文件\n            reader.readAsDataURL(file);\n        };\n\n        // 暴露给 E\n        E.UploadFile = UploadFile;\n    });\n    // form方式上传图片\n    _e(function (E, $) {\n\n        if (window.FileReader && window.FormData) {\n            // 如果支持 html5 上传，则返回\n            return;\n        }\n\n        // 构造函数\n        var UploadFile = function UploadFile(opt) {\n            this.editor = opt.editor;\n            this.uploadUrl = opt.uploadUrl;\n            this.timeout = opt.timeout;\n            this.fileAccept = opt.fileAccept;\n            this.multiple = false;\n        };\n\n        UploadFile.fn = UploadFile.prototype;\n\n        // clear\n        UploadFile.fn.clear = function () {\n            this.$input.val('');\n            E.log('input value 已清空');\n        };\n\n        // 隐藏modal\n        UploadFile.fn.hideModal = function () {\n            this.modal.hide();\n        };\n\n        // 渲染\n        UploadFile.fn.render = function () {\n            var self = this;\n            var editor = self.editor;\n            var uploadFileName = editor.config.uploadImgFileName || 'wangEditorFormFile';\n            if (self._hasRender) {\n                // 不要重复渲染\n                return;\n            }\n\n            // 服务器端路径\n            var uploadUrl = self.uploadUrl;\n\n            E.log('渲染dom');\n\n            // 创建 form 和 iframe\n            var iframeId = 'iframe' + E.random();\n            var $iframe = $('<iframe name=\"' + iframeId + '\" id=\"' + iframeId + '\" frameborder=\"0\" width=\"0\" height=\"0\"></iframe>');\n            var multiple = self.multiple;\n            var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n            var $p = $('<p>选择图片并上传</p>');\n            var $input = $('<input type=\"file\" ' + multipleTpl + ' name=\"' + uploadFileName + '\"/>');\n            var $btn = $('<input type=\"submit\" value=\"上传\"/>');\n            var $form = $('<form enctype=\"multipart/form-data\" method=\"post\" action=\"' + uploadUrl + '\" target=\"' + iframeId + '\"></form>');\n            var $container = $('<div style=\"margin:10px 20px;\"></div>');\n\n            $form.append($p).append($input).append($btn);\n\n            // 增加用户配置的参数，如 token\n            $.each(editor.config.uploadParams, function (key, value) {\n                $form.append($('<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\"/>'));\n            });\n\n            $container.append($form);\n            $container.append($iframe);\n\n            self.$input = $input;\n            self.$iframe = $iframe;\n\n            // 生成 modal\n            var modal = new E.Modal(editor, undefined, {\n                $content: $container\n            });\n            self.modal = modal;\n\n            // 记录\n            self._hasRender = true;\n        };\n\n        // 绑定 iframe load 事件\n        UploadFile.fn.bindLoadEvent = function () {\n            var self = this;\n            if (self._hasBindLoad) {\n                // 不要重复绑定\n                return;\n            }\n\n            var editor = self.editor;\n            var $iframe = self.$iframe;\n            var iframe = $iframe.get(0);\n            var iframeWindow = iframe.contentWindow;\n            var onload = editor.config.uploadImgFns.onload;\n\n            // 定义load事件\n            function onloadFn() {\n                var resultText = $.trim(iframeWindow.document.body.innerHTML);\n                if (!resultText) {\n                    return;\n                }\n\n                // 获取文件名\n                var fileFullName = self.$input.val(); // 结果如 C:\\folder\\abc.png 格式\n                var fileOriginalName = fileFullName;\n                if (fileFullName.lastIndexOf('\\\\') >= 0) {\n                    // 获取 abc.png 格式\n                    fileOriginalName = fileFullName.slice(fileFullName.lastIndexOf('\\\\') + 1);\n                    if (fileOriginalName.indexOf('.') > 0) {\n                        // 获取 abc （即不带扩展名的文件名）\n                        fileOriginalName = fileOriginalName.split('.')[0];\n                    }\n                }\n\n                // 将文件名暂存到 editor.uploadImgOriginalName ，插入图片时，可作为 alt 属性来用\n                editor.uploadImgOriginalName = fileOriginalName;\n\n                // 执行load函数，插入图片的操作，应该在load函数中执行\n                onload.call(editor, resultText);\n\n                // 清空 input 数据\n                self.clear();\n\n                // 隐藏modal\n                self.hideModal();\n            }\n\n            // 绑定 load 事件\n            if (iframe.attachEvent) {\n                iframe.attachEvent('onload', onloadFn);\n            } else {\n                iframe.onload = onloadFn;\n            }\n\n            // 记录\n            self._hasBindLoad = true;\n        };\n\n        UploadFile.fn.show = function () {\n            var self = this;\n            var modal = self.modal;\n\n            function show() {\n                modal.show();\n                self.bindLoadEvent();\n            }\n            setTimeout(show);\n        };\n\n        // 选择\n        UploadFile.fn.selectFiles = function () {\n            var self = this;\n\n            E.log('使用 form 方式上传');\n\n            // 先渲染\n            self.render();\n\n            // 先清空\n            self.clear();\n\n            // 显示\n            self.show();\n        };\n\n        // 暴露给 E\n        E.UploadFile = UploadFile;\n    });\n    // upload img 插件 粘贴图片\n    _e(function (E, $) {\n\n        E.plugin(function () {\n            var editor = this;\n            var txt = editor.txt;\n            var $txt = txt.$txt;\n            var config = editor.config;\n            var uploadImgUrl = config.uploadImgUrl;\n            var uploadFileName = config.uploadImgFileName || 'wangEditorPasteFile';\n            var pasteEvent;\n            var $imgsBeforePaste;\n\n            // 未配置上传图片url，则忽略\n            if (!uploadImgUrl) {\n                return;\n            }\n\n            // -------- 非 chrome 下，通过查找粘贴的图片的方式上传 --------\n            function findPasteImgAndUpload() {\n                var reg = /^data:(image\\/\\w+);base64/;\n                var $imgs = $txt.find('img');\n\n                E.log('粘贴后，检查到编辑器有' + $imgs.length + '个图片。开始遍历图片，试图找到刚刚粘贴过来的图片');\n\n                $.each($imgs, function () {\n                    var img = this;\n                    var $img = $(img);\n                    var flag;\n                    var base64 = $img.attr('src');\n                    var type;\n\n                    // 判断当前图片是否是粘贴之前的\n                    $imgsBeforePaste.each(function () {\n                        if (img === this) {\n                            // 当前图片是粘贴之前的\n                            flag = true;\n                            return false;\n                        }\n                    });\n\n                    // 当前图片是粘贴之前的，则忽略\n                    if (flag) {\n                        return;\n                    }\n\n                    E.log('找到一个粘贴过来的图片');\n\n                    if (reg.test(base64)) {\n                        // 得到的粘贴的图片是 base64 格式，符合要求\n                        E.log('src 是 base64 格式，可以上传');\n                        type = base64.match(reg)[1];\n                        editor.xhrUploadImg({\n                            event: pasteEvent,\n                            base64: base64,\n                            fileType: type,\n                            name: uploadFileName\n                        });\n                    } else {\n                        E.log('src 为 ' + base64 + ' ，不是 base64 格式，暂时不支持上传');\n                    }\n\n                    // 最终移除原图片\n                    $img.remove();\n                });\n\n                E.log('遍历结束');\n            }\n\n            // 开始监控粘贴事件\n            $txt.on('paste', function (e) {\n                pasteEvent = e;\n                var data = pasteEvent.clipboardData || pasteEvent.originalEvent.clipboardData;\n                var text;\n                var items;\n\n                // -------- 试图获取剪切板中的文字，有文字的情况下，就不处理图片粘贴 --------\n                if (data == null) {\n                    text = window.clipboardData && window.clipboardData.getData('text');\n                } else {\n                    text = data.getData('text/plain') || data.getData('text/html');\n                }\n                if (text) {\n                    return;\n                }\n\n                items = data && data.items;\n                if (items) {\n                    // -------- chrome 可以用 data.items 取出图片 -----\n                    E.log('通过 data.items 得到了数据');\n\n                    $.each(items, function (key, value) {\n                        var fileType = value.type || '';\n                        if (fileType.indexOf('image') < 0) {\n                            // 不是图片\n                            return;\n                        }\n\n                        var file = value.getAsFile();\n                        var reader = new FileReader();\n\n                        E.log('得到一个粘贴图片');\n\n                        reader.onload = function (e) {\n                            E.log('读取到粘贴的图片');\n\n                            // 执行上传\n                            var base64 = e.target.result || this.result;\n                            editor.xhrUploadImg({\n                                event: pasteEvent,\n                                base64: base64,\n                                fileType: fileType,\n                                name: uploadFileName\n                            });\n                        };\n\n                        //读取粘贴的文件\n                        reader.readAsDataURL(file);\n                    });\n                } else {\n                    // -------- 非 chrome 不能用 data.items 取图片 -----\n\n                    E.log('未从 data.items 得到数据，使用检测粘贴图片的方式');\n\n                    // 获取\n                    $imgsBeforePaste = $txt.find('img');\n                    E.log('粘贴前，检查到编辑器有' + $imgsBeforePaste.length + '个图片');\n\n                    // 异步上传找到的图片\n                    setTimeout(findPasteImgAndUpload, 0);\n                }\n            });\n        });\n    });\n    // 拖拽上传图片 插件 \n    _e(function (E, $) {\n\n        E.plugin(function () {\n\n            var editor = this;\n            var txt = editor.txt;\n            var $txt = txt.$txt;\n            var config = editor.config;\n            var uploadImgUrl = config.uploadImgUrl;\n            var uploadFileName = config.uploadImgFileName || 'wangEditorDragFile';\n\n            // 未配置上传图片url，则忽略\n            if (!uploadImgUrl) {\n                return;\n            }\n\n            // 阻止浏览器默认行为\n            E.$document.on('dragleave drop dragenter dragover', function (e) {\n                e.preventDefault();\n            });\n\n            // 监控 $txt drop 事件\n            $txt.on('drop', function (dragEvent) {\n                dragEvent.preventDefault();\n\n                var originalEvent = dragEvent.originalEvent;\n                var files = originalEvent.dataTransfer && originalEvent.dataTransfer.files;\n\n                if (!files || !files.length) {\n                    return;\n                }\n\n                $.each(files, function (k, file) {\n                    var type = file.type;\n                    var name = file.name;\n\n                    if (type.indexOf('image/') < 0) {\n                        // 只接收图片\n                        return;\n                    }\n\n                    E.log('得到图片 ' + name);\n\n                    var reader = new FileReader();\n                    reader.onload = function (e) {\n                        E.log('读取到图片 ' + name);\n\n                        // 执行上传\n                        var base64 = e.target.result || this.result;\n                        editor.xhrUploadImg({\n                            event: dragEvent,\n                            base64: base64,\n                            fileType: type,\n                            name: uploadFileName\n                        });\n                    };\n\n                    //读取粘贴的文件\n                    reader.readAsDataURL(file);\n                });\n            });\n        });\n    });\n    // 编辑器区域 table toolbar\n    _e(function (E, $) {\n\n        E.plugin(function () {\n            var editor = this;\n            var txt = editor.txt;\n            var $txt = txt.$txt;\n            var html = '';\n            // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n            var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n            var $currentTable;\n\n            // 用到的dom节点\n            var isRendered = false;\n            var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n            var $triangle = $('<div class=\"tip-triangle\"></div>');\n            var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n            var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n            var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n\n            // 渲染到页面\n            function render() {\n                if (isRendered) {\n                    return;\n                }\n\n                // 绑定事件\n                bindEvent();\n\n                // 拼接 渲染到页面上\n                $toolbar.append($triangle).append($delete).append($zoomSmall).append($zoomBig);\n                editor.$editorContainer.append($toolbar);\n                isRendered = true;\n            }\n\n            // 绑定事件\n            function bindEvent() {\n                // 统一执行命令的方法\n                var commandFn;\n                function command(e, callback) {\n                    // 执行命令之前，先存储html内容\n                    html = $txt.html();\n                    // 监控内容变化\n                    var cb = function cb() {\n                        if (callback) {\n                            callback();\n                        }\n                        if (html !== $txt.html()) {\n                            $txt.change();\n                        }\n                    };\n                    // 执行命令\n                    if (commandFn) {\n                        editor.customCommand(e, commandFn, cb);\n                    }\n                }\n\n                // 删除\n                $delete.click(function (e) {\n                    commandFn = function commandFn() {\n                        $currentTable.remove();\n                    };\n                    command(e, function () {\n                        setTimeout(hide, 100);\n                    });\n                });\n\n                // 放大\n                $zoomBig.click(function (e) {\n                    commandFn = function commandFn() {\n                        $currentTable.css({\n                            width: '100%'\n                        });\n                    };\n                    command(e, function () {\n                        setTimeout(show);\n                    });\n                });\n\n                // 缩小\n                $zoomSmall.click(function (e) {\n                    commandFn = function commandFn() {\n                        $currentTable.css({\n                            width: 'auto'\n                        });\n                    };\n                    command(e, function () {\n                        setTimeout(show);\n                    });\n                });\n            }\n\n            // 显示 toolbar\n            function show() {\n                if (editor._disabled) {\n                    // 编辑器已经被禁用，则不让显示\n                    return;\n                }\n                if ($currentTable == null) {\n                    return;\n                }\n                $currentTable.addClass('clicked');\n                var tablePosition = $currentTable.position();\n                var tableTop = tablePosition.top;\n                var tableLeft = tablePosition.left;\n                var tableHeight = $currentTable.outerHeight();\n                var tableWidth = $currentTable.outerWidth();\n\n                // --- 定位 toolbar ---\n\n                // 计算初步结果\n                var top = tableTop + tableHeight;\n                var left = tableLeft;\n                var marginLeft = 0;\n\n                var txtTop = $currentTxt.position().top;\n                var txtHeight = $currentTxt.outerHeight();\n                if (top > txtTop + txtHeight) {\n                    // top 不得超出编辑范围\n                    top = txtTop + txtHeight;\n                }\n\n                // 显示（方便计算 margin）\n                $toolbar.show();\n\n                // 计算 margin\n                var width = $toolbar.outerWidth();\n                marginLeft = tableWidth / 2 - width / 2;\n\n                // 定位\n                $toolbar.css({\n                    top: top + 5,\n                    left: left,\n                    'margin-left': marginLeft\n                });\n                // 如果定位太靠左了\n                if (marginLeft < 0) {\n                    // 得到三角形的margin-left\n                    $toolbar.css('margin-left', '0');\n                    $triangle.hide();\n                } else {\n                    $triangle.show();\n                }\n            }\n\n            // 隐藏 toolbar\n            function hide() {\n                if ($currentTable == null) {\n                    return;\n                }\n                $currentTable.removeClass('clicked');\n                $currentTable = null;\n                $toolbar.hide();\n            }\n\n            // click table 事件\n            $currentTxt.on('click', 'table', function (e) {\n                var $table = $(e.currentTarget);\n\n                // 渲染\n                render();\n\n                if ($currentTable && $currentTable.get(0) === $table.get(0)) {\n                    setTimeout(hide, 100);\n                    return;\n                }\n\n                // 显示 toolbar\n                $currentTable = $table;\n                show();\n\n                // 阻止冒泡\n                e.preventDefault();\n                e.stopPropagation();\n            }).on('click keydown scroll', function (e) {\n                setTimeout(hide, 100);\n            });\n            E.$body.on('click keydown scroll', function (e) {\n                setTimeout(hide, 100);\n            });\n        });\n    });\n    // 编辑器区域 img toolbar\n    _e(function (E, $) {\n\n        if (E.userAgent.indexOf('MSIE 8') > 0) {\n            return;\n        }\n\n        E.plugin(function () {\n            var editor = this;\n            var lang = editor.config.lang;\n            var txt = editor.txt;\n            var $txt = txt.$txt;\n            var html = '';\n            // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n            var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n            var $editorContainer = editor.$editorContainer;\n            var $currentImg;\n            var currentLink = '';\n\n            // 用到的dom节点\n            var isRendered = false;\n            var $dragPoint = $('<div class=\"img-drag-point\"></div>');\n\n            var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n            var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n            var $menuContainer = $('<div></div>');\n            var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n            var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n            var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n            // var $floatLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n            // var $noFloat = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-justify\"></i></a>');\n            // var $floatRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n            var $alignLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n            var $alignCenter = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-center\"></i></a>');\n            var $alignRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n            var $link = $('<a href=\"#\"><i class=\"wangeditor-menu-img-link\"></i></a>');\n            var $unLink = $('<a href=\"#\"><i class=\"wangeditor-menu-img-unlink\"></i></a>');\n\n            var $linkInputContainer = $('<div style=\"display:none;\"></div>');\n            var $linkInput = $('<input type=\"text\" style=\"height:26px; margin-left:10px; width:200px;\"/>');\n            var $linkBtnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $linkBtnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n            // 记录是否正在拖拽\n            var isOnDrag = false;\n\n            // 获取 / 设置 链接\n            function imgLink(e, url) {\n                if (!$currentImg) {\n                    return;\n                }\n                var commandFn;\n                var callback = function callback() {\n                    // 及时保存currentLink\n                    if (url != null) {\n                        currentLink = url;\n                    }\n                    if (html !== $txt.html()) {\n                        $txt.change();\n                    }\n                };\n                var $link;\n                var inLink = false;\n                var $parent = $currentImg.parent();\n                if ($parent.get(0).nodeName.toLowerCase() === 'a') {\n                    // 父元素就是图片链接\n                    $link = $parent;\n                    inLink = true;\n                } else {\n                    // 父元素不是图片链接，则重新创建一个链接\n                    $link = $('<a target=\"_blank\"></a>');\n                }\n\n                if (url == null) {\n                    // url 无值，是获取链接\n                    return $link.attr('href') || '';\n                } else if (url === '') {\n                    // url 是空字符串，是取消链接\n                    if (inLink) {\n                        commandFn = function commandFn() {\n                            $currentImg.unwrap();\n                        };\n                    }\n                } else {\n                    // url 有值，是设置链接\n                    if (url === currentLink) {\n                        return;\n                    }\n                    commandFn = function commandFn() {\n                        $link.attr('href', url);\n\n                        if (!inLink) {\n                            // 当前图片未包含在链接中，则包含进来\n                            $currentImg.wrap($link);\n                        }\n                    };\n                }\n\n                // 执行命令\n                if (commandFn) {\n                    // 记录下执行命令之前的html内容\n                    html = $txt.html();\n                    // 执行命令\n                    editor.customCommand(e, commandFn, callback);\n                }\n            }\n\n            // 渲染到页面\n            function render() {\n                if (isRendered) {\n                    return;\n                }\n\n                // 绑定事件\n                bindToolbarEvent();\n                bindDragEvent();\n\n                // 菜单放入 container\n                $menuContainer.append($delete).append($zoomSmall).append($zoomBig)\n                // .append($floatLeft)\n                // .append($noFloat)\n                // .append($floatRight);\n                .append($alignLeft).append($alignCenter).append($alignRight).append($link).append($unLink);\n\n                // 链接input放入container\n                $linkInputContainer.append($linkInput).append($linkBtnCancel).append($linkBtnSubmit);\n\n                // 拼接 渲染到页面上\n                $toolbar.append($triangle).append($menuContainer).append($linkInputContainer);\n\n                editor.$editorContainer.append($toolbar).append($dragPoint);\n                isRendered = true;\n            }\n\n            // 绑定toolbar事件\n            function bindToolbarEvent() {\n                // 统一执行命令的方法\n                var commandFn;\n                function customCommand(e, callback) {\n                    var cb;\n                    // 记录下执行命令之前的html内容\n                    html = $txt.html();\n                    cb = function cb() {\n                        if (callback) {\n                            callback();\n                        }\n                        if (html !== $txt.html()) {\n                            $txt.change();\n                        }\n                    };\n                    // 执行命令\n                    if (commandFn) {\n                        editor.customCommand(e, commandFn, cb);\n                    }\n                }\n\n                // 删除\n                $delete.click(function (e) {\n                    // 删除之前先unlink\n                    imgLink(e, '');\n\n                    // 删除图片\n                    commandFn = function commandFn() {\n                        $currentImg.remove();\n                    };\n                    customCommand(e, function () {\n                        setTimeout(hide, 100);\n                    });\n                });\n\n                // 放大\n                $zoomBig.click(function (e) {\n                    commandFn = function commandFn() {\n                        var img = $currentImg.get(0);\n                        var width = img.width;\n                        var height = img.height;\n                        width = width * 1.1;\n                        height = height * 1.1;\n\n                        $currentImg.css({\n                            width: width + 'px',\n                            height: height + 'px'\n                        });\n                    };\n                    customCommand(e, function () {\n                        setTimeout(show);\n                    });\n                });\n\n                // 缩小\n                $zoomSmall.click(function (e) {\n                    commandFn = function commandFn() {\n                        var img = $currentImg.get(0);\n                        var width = img.width;\n                        var height = img.height;\n                        width = width * 0.9;\n                        height = height * 0.9;\n\n                        $currentImg.css({\n                            width: width + 'px',\n                            height: height + 'px'\n                        });\n                    };\n                    customCommand(e, function () {\n                        setTimeout(show);\n                    });\n                });\n\n                // // 左浮动\n                // $floatLeft.click(function (e) {\n                //     commandFn = function () {\n                //         $currentImg.css({\n                //             float: 'left'\n                //         });\n                //     };\n                //     customCommand(e, function () {\n                //         setTimeout(hide, 100);\n                //     });\n                // });\n\n                // alignLeft\n                $alignLeft.click(function (e) {\n                    commandFn = function commandFn() {\n                        // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                        $currentImg.parents('p').css({\n                            'text-align': 'left'\n                        }).attr('align', 'left');\n                    };\n                    customCommand(e, function () {\n                        setTimeout(hide, 100);\n                    });\n                });\n\n                // // 右浮动\n                // $floatRight.click(function (e) {\n                //     commandFn = function () {\n                //         $currentImg.css({\n                //             float: 'right'\n                //         });\n                //     };\n                //     customCommand(e, function () {\n                //         setTimeout(hide, 100);\n                //     });\n                // });\n\n                // alignRight\n                $alignRight.click(function (e) {\n                    commandFn = function commandFn() {\n                        // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                        $currentImg.parents('p').css({\n                            'text-align': 'right'\n                        }).attr('align', 'right');\n                    };\n                    customCommand(e, function () {\n                        setTimeout(hide, 100);\n                    });\n                });\n\n                // // 无浮动\n                // $noFloat.click(function (e) {\n                //     commandFn = function () {\n                //         $currentImg.css({\n                //             float: 'none'\n                //         });\n                //     };\n                //     customCommand(e, function () {\n                //         setTimeout(hide, 100);\n                //     });\n                // });\n\n                // alignCenter\n                $alignCenter.click(function (e) {\n                    commandFn = function commandFn() {\n                        // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                        $currentImg.parents('p').css({\n                            'text-align': 'center'\n                        }).attr('align', 'center');\n                    };\n                    customCommand(e, function () {\n                        setTimeout(hide, 100);\n                    });\n                });\n\n                // link\n                // 显示链接input\n                $link.click(function (e) {\n                    e.preventDefault();\n\n                    // 获取当前链接，并显示\n                    currentLink = imgLink(e);\n                    $linkInput.val(currentLink);\n\n                    $menuContainer.hide();\n                    $linkInputContainer.show();\n                });\n                // 设置链接\n                $linkBtnSubmit.click(function (e) {\n                    e.preventDefault();\n\n                    var url = $.trim($linkInput.val());\n                    if (url) {\n                        // 设置链接，同时会自动更新 currentLink 的值\n                        imgLink(e, url);\n                    }\n\n                    // 隐藏 toolbar\n                    setTimeout(hide);\n                });\n                // 取消设置链接\n                $linkBtnCancel.click(function (e) {\n                    e.preventDefault();\n\n                    // 重置链接 input\n                    $linkInput.val(currentLink);\n\n                    $menuContainer.show();\n                    $linkInputContainer.hide();\n                });\n\n                // unlink\n                $unLink.click(function (e) {\n                    e.preventDefault();\n\n                    // 执行 unlink\n                    imgLink(e, '');\n\n                    // 隐藏 toolbar\n                    setTimeout(hide);\n                });\n            }\n\n            // 绑定drag事件\n            function bindDragEvent() {\n                var _x, _y;\n                var dragMarginLeft, dragMarginTop;\n                var imgWidth, imgHeight;\n\n                function mousemove(e) {\n                    var diffX, diffY;\n\n                    // 计算差额\n                    diffX = e.pageX - _x;\n                    diffY = e.pageY - _y;\n\n                    // --------- 计算拖拽点的位置 ---------\n                    var currentDragMarginLeft = dragMarginLeft + diffX;\n                    var currentDragMarginTop = dragMarginTop + diffY;\n                    $dragPoint.css({\n                        'margin-left': currentDragMarginLeft,\n                        'margin-top': currentDragMarginTop\n                    });\n\n                    // --------- 计算图片的大小 ---------\n                    var currentImgWidth = imgWidth + diffX;\n                    var currentImggHeight = imgHeight + diffY;\n                    $currentImg && $currentImg.css({\n                        width: currentImgWidth,\n                        height: currentImggHeight\n                    });\n                }\n\n                $dragPoint.on('mousedown', function (e) {\n                    if (!$currentImg) {\n                        return;\n                    }\n                    // 当前鼠标位置\n                    _x = e.pageX;\n                    _y = e.pageY;\n\n                    // 当前拖拽点的位置\n                    dragMarginLeft = parseFloat($dragPoint.css('margin-left'), 10);\n                    dragMarginTop = parseFloat($dragPoint.css('margin-top'), 10);\n\n                    // 当前图片的大小\n                    imgWidth = $currentImg.width();\n                    imgHeight = $currentImg.height();\n\n                    // 隐藏 $toolbar\n                    $toolbar.hide();\n\n                    // 绑定计算事件\n                    E.$document.on('mousemove._dragResizeImg', mousemove);\n                    E.$document.on('mouseup._dragResizeImg', function (e) {\n                        // 取消绑定\n                        E.$document.off('mousemove._dragResizeImg');\n                        E.$document.off('mouseup._dragResizeImg');\n\n                        // 隐藏，并还原拖拽点的位置\n                        hide();\n                        $dragPoint.css({\n                            'margin-left': dragMarginLeft,\n                            'margin-top': dragMarginTop\n                        });\n\n                        // 记录\n                        isOnDrag = false;\n                    });\n\n                    // 记录\n                    isOnDrag = true;\n                });\n            }\n\n            // 显示 toolbar\n            function show() {\n                if (editor._disabled) {\n                    // 编辑器已经被禁用，则不让显示\n                    return;\n                }\n                if ($currentImg == null) {\n                    return;\n                }\n                $currentImg.addClass('clicked');\n                var imgPosition = $currentImg.position();\n                var imgTop = imgPosition.top;\n                var imgLeft = imgPosition.left;\n                var imgHeight = $currentImg.outerHeight();\n                var imgWidth = $currentImg.outerWidth();\n\n                // --- 定位 dragpoint ---\n                $dragPoint.css({\n                    top: imgTop + imgHeight,\n                    left: imgLeft + imgWidth\n                });\n\n                // --- 定位 toolbar ---\n\n                // 计算初步结果\n                var top = imgTop + imgHeight;\n                var left = imgLeft;\n                var marginLeft = 0;\n\n                var txtTop = $currentTxt.position().top;\n                var txtHeight = $currentTxt.outerHeight();\n                if (top > txtTop + txtHeight) {\n                    // top 不得超出编辑范围\n                    top = txtTop + txtHeight;\n                } else {\n                    // top 超出编辑范围，dragPoint就不显示了\n                    $dragPoint.show();\n                }\n\n                // 显示（方便计算 margin）\n                $toolbar.show();\n\n                // 计算 margin\n                var width = $toolbar.outerWidth();\n                marginLeft = imgWidth / 2 - width / 2;\n\n                // 定位\n                $toolbar.css({\n                    top: top + 5,\n                    left: left,\n                    'margin-left': marginLeft\n                });\n                // 如果定位太靠左了\n                if (marginLeft < 0) {\n                    // 得到三角形的margin-left\n                    $toolbar.css('margin-left', '0');\n                    $triangle.hide();\n                } else {\n                    $triangle.show();\n                }\n\n                // disable 菜单\n                editor.disableMenusExcept();\n            }\n\n            // 隐藏 toolbar\n            function hide() {\n                if ($currentImg == null) {\n                    return;\n                }\n                $currentImg.removeClass('clicked');\n                $currentImg = null;\n\n                $toolbar.hide();\n                $dragPoint.hide();\n\n                // enable 菜单\n                editor.enableMenusExcept();\n            }\n\n            // 判断img是否是一个表情\n            function isEmotion(imgSrc) {\n                var result = false;\n                if (!editor.emotionUrls) {\n                    return result;\n                }\n                $.each(editor.emotionUrls, function (index, url) {\n                    var flag = false;\n                    if (imgSrc === url) {\n                        result = true;\n                        flag = true;\n                    }\n                    if (flag) {\n                        return false; // break 循环\n                    }\n                });\n                return result;\n            }\n\n            // click img 事件\n            $currentTxt.on('mousedown', 'img', function (e) {\n                e.preventDefault();\n            }).on('click', 'img', function (e) {\n                var $img = $(e.currentTarget);\n                var src = $img.attr('src');\n\n                if (!src || isEmotion(src)) {\n                    // 是一个表情图标\n                    return;\n                }\n\n                // ---------- 不是表情图标 ---------- \n\n                // 渲染\n                render();\n\n                if ($currentImg && $currentImg.get(0) === $img.get(0)) {\n                    setTimeout(hide, 100);\n                    return;\n                }\n\n                // 显示 toolbar\n                $currentImg = $img;\n                show();\n\n                // 默认显示menuContainer，其他默认隐藏\n                $menuContainer.show();\n                $linkInputContainer.hide();\n\n                // 阻止冒泡\n                e.preventDefault();\n                e.stopPropagation();\n            }).on('click keydown scroll', function (e) {\n                if (!isOnDrag) {\n                    setTimeout(hide, 100);\n                }\n            });\n        });\n    });\n    // 编辑区域 link toolbar\n    _e(function (E, $) {\n        E.plugin(function () {\n            var editor = this;\n            var lang = editor.config.lang;\n            var $txt = editor.txt.$txt;\n\n            // 当前命中的链接\n            var $currentLink;\n\n            var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n            var $triangle = $('<div class=\"tip-triangle\"></div>');\n            var $triggerLink = $('<a href=\"#\" target=\"_blank\"><i class=\"wangeditor-menu-img-link\"></i> ' + lang.openLink + '</a>');\n            var isRendered;\n\n            // 记录当前的显示/隐藏状态\n            var isShow = false;\n\n            var showTimeoutId, hideTimeoutId;\n            var showTimeoutIdByToolbar, hideTimeoutIdByToolbar;\n\n            // 渲染 dom\n            function render() {\n                if (isRendered) {\n                    return;\n                }\n\n                $toolbar.append($triangle).append($triggerLink);\n\n                editor.$editorContainer.append($toolbar);\n\n                isRendered = true;\n            }\n\n            // 定位\n            function setPosition() {\n                if (!$currentLink) {\n                    return;\n                }\n\n                var position = $currentLink.position();\n                var left = position.left;\n                var top = position.top;\n                var height = $currentLink.height();\n\n                // 初步计算top值\n                var topResult = top + height + 5;\n\n                // 判断 toolbar 是否超过了编辑器区域的下边界\n                var menuHeight = editor.menuContainer.height();\n                var txtHeight = editor.txt.$txt.outerHeight();\n                if (topResult > menuHeight + txtHeight) {\n                    topResult = menuHeight + txtHeight + 5;\n                }\n\n                // 最终设置\n                $toolbar.css({\n                    top: topResult,\n                    left: left\n                });\n            }\n\n            // 显示 toolbar\n            function show() {\n                if (isShow) {\n                    return;\n                }\n\n                if (!$currentLink) {\n                    return;\n                }\n\n                render();\n\n                $toolbar.show();\n\n                // 设置链接\n                var href = $currentLink.attr('href');\n                $triggerLink.attr('href', href);\n\n                // 定位\n                setPosition();\n\n                isShow = true;\n            }\n\n            // 隐藏 toolbar\n            function hide() {\n                if (!isShow) {\n                    return;\n                }\n\n                if (!$currentLink) {\n                    return;\n                }\n\n                $toolbar.hide();\n                isShow = false;\n            }\n\n            // $txt 绑定事件\n            $txt.on('mouseenter', 'a', function (e) {\n                // 延时 500ms 显示toolbar\n                if (showTimeoutId) {\n                    clearTimeout(showTimeoutId);\n                }\n                showTimeoutId = setTimeout(function () {\n                    var a = e.currentTarget;\n                    var $a = $(a);\n                    $currentLink = $a;\n\n                    var $img = $a.children('img');\n                    if ($img.length) {\n                        // 该链接下包含一个图片\n\n                        // 图片点击时，隐藏toolbar\n                        $img.click(function (e) {\n                            hide();\n                        });\n\n                        if ($img.hasClass('clicked')) {\n                            // 图片还处于clicked状态，则不显示toolbar\n                            return;\n                        }\n                    }\n\n                    // 显示toolbar\n                    show();\n                }, 500);\n            }).on('mouseleave', 'a', function (e) {\n                // 延时 500ms 隐藏toolbar\n                if (hideTimeoutId) {\n                    clearTimeout(hideTimeoutId);\n                }\n                hideTimeoutId = setTimeout(hide, 500);\n            }).on('click keydown scroll', function (e) {\n                setTimeout(hide, 100);\n            });\n            // $toolbar 绑定事件\n            $toolbar.on('mouseenter', function (e) {\n                // 先中断掉 $txt.mouseleave 导致的隐藏\n                if (hideTimeoutId) {\n                    clearTimeout(hideTimeoutId);\n                }\n            }).on('mouseleave', function (e) {\n                // 延时 500ms 显示toolbar\n                if (showTimeoutIdByToolbar) {\n                    clearTimeout(showTimeoutIdByToolbar);\n                }\n                showTimeoutIdByToolbar = setTimeout(hide, 500);\n            });\n        });\n    });\n    // menu吸顶\n    _e(function (E, $) {\n\n        E.plugin(function () {\n            var editor = this;\n            var menuFixed = editor.config.menuFixed;\n            if (menuFixed === false || typeof menuFixed !== 'number') {\n                // 没有配置菜单吸顶\n                return;\n            }\n            var bodyMarginTop = parseFloat(E.$body.css('margin-top'), 10);\n            if (isNaN(bodyMarginTop)) {\n                bodyMarginTop = 0;\n            }\n\n            var $editorContainer = editor.$editorContainer;\n            var editorTop = $editorContainer.offset().top;\n            var editorHeight = $editorContainer.outerHeight();\n\n            var $menuContainer = editor.menuContainer.$menuContainer;\n            var menuCssPosition = $menuContainer.css('position');\n            var menuCssTop = $menuContainer.css('top');\n            var menuTop = $menuContainer.offset().top;\n            var menuHeight = $menuContainer.outerHeight();\n            var menuWidth = $menuContainer.width();\n\n            //重新计算宽度\n            E.$window.resize(function () {\n                menuWidth = $menuContainer.width();\n            });\n            //编辑区高度变化\n            editor.onchange = function () {\n                editorHeight = $editorContainer.outerHeight();\n                menuWidth = $menuContainer.width(); //可能出现滚动条\n                menuFixedFunc();\n            };\n\n            //这个变量未使用？\n            //var $txt = editor.txt.$txt;\n\n            E.$window.scroll(menuFixedFunc);\n\n            function menuFixedFunc() {\n                //全屏模式不支持\n                if (editor.isFullScreen) {\n                    return;\n                }\n\n                var sTop = E.$window.scrollTop();\n\n                // 如果 menuTop === 0 说明此前编辑器一直隐藏，后来显示出来了，要重新计算相关数据\n                if (menuTop === 0) {\n                    menuTop = $menuContainer.offset().top;\n                    editorTop = $editorContainer.offset().top;\n                    editorHeight = $editorContainer.outerHeight();\n                    menuHeight = $menuContainer.outerHeight();\n                }\n\n                //菜单fixed条件由离开屏幕后（sTop >= menuTop）触发改为达到menuFixed高度时（sTop + menuFixed >= menuTop）触发\n                if (sTop + menuFixed >= menuTop && sTop + menuFixed + menuHeight + 30 < editorTop + editorHeight) {\n                    // 吸顶\n                    $menuContainer.css({\n                        position: 'fixed',\n                        top: menuFixed\n                    });\n\n                    // 固定宽度\n                    $menuContainer.width(menuWidth);\n\n                    // 增加body margin-top\n                    E.$body.css({\n                        'margin-top': bodyMarginTop + menuHeight\n                    });\n\n                    // 记录\n                    if (!editor._isMenufixed) {\n                        editor._isMenufixed = true;\n                    }\n                } else {\n                    // 取消吸顶\n                    $menuContainer.css({\n                        position: menuCssPosition,\n                        top: menuCssTop\n                    });\n\n                    // 取消宽度固定\n                    $menuContainer.css('width', '100%');\n\n                    // 还原 body margin-top\n                    E.$body.css({\n                        'margin-top': bodyMarginTop\n                    });\n\n                    // 撤销记录\n                    if (editor._isMenufixed) {\n                        editor._isMenufixed = false;\n                    }\n                }\n            }\n        });\n    });\n    // 缩进 菜单插件\n    _e(function (E, $) {\n\n        // 用 createMenu 方法创建菜单\n        E.createMenu(function (check) {\n\n            // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n            var menuId = 'indent';\n\n            // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n            if (!check(menuId)) {\n                return;\n            }\n\n            // this 指向 editor 对象自身\n            var editor = this;\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor, // 编辑器对象\n                id: menuId, // 菜单id\n                title: '缩进', // 菜单标题\n\n                // 正常状态和选中装下的dom对象，样式需要自定义\n                $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>'),\n                $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>')\n            });\n\n            // 菜单正常状态下，点击将触发该事件\n            menu.clickEvent = function (e) {\n                var elem = editor.getRangeElem();\n                var p = editor.getSelfOrParentByName(elem, 'p');\n                var $p;\n\n                if (!p) {\n                    // 未找到 p 元素，则忽略\n                    return e.preventDefault();\n                }\n                $p = $(p);\n\n                // 使用自定义命令\n                function commandFn() {\n                    $p.css('text-indent', '2em');\n                }\n                editor.customCommand(e, commandFn);\n            };\n\n            // 菜单选中状态下，点击将触发该事件\n            menu.clickEventSelected = function (e) {\n                var elem = editor.getRangeElem();\n                var p = editor.getSelfOrParentByName(elem, 'p');\n                var $p;\n\n                if (!p) {\n                    // 未找到 p 元素，则忽略\n                    return e.preventDefault();\n                }\n                $p = $(p);\n\n                // 使用自定义命令\n                function commandFn() {\n                    $p.css('text-indent', '0');\n                }\n                editor.customCommand(e, commandFn);\n            };\n\n            // 根据当前选区，自定义更新菜单的选中状态或者正常状态\n            menu.updateSelectedEvent = function () {\n                // 获取当前选区所在的父元素\n                var elem = editor.getRangeElem();\n                var p = editor.getSelfOrParentByName(elem, 'p');\n                var $p;\n                var indent;\n\n                if (!p) {\n                    // 未找到 p 元素，则标记为未处于选中状态\n                    return false;\n                }\n                $p = $(p);\n                indent = $p.css('text-indent');\n\n                if (!indent || indent === '0px') {\n                    // 得到的p，text-indent 属性是 0，则标记为未处于选中状态\n                    return false;\n                }\n\n                // 找到 p 元素，并且 text-indent 不是 0，则标记为选中状态\n                return true;\n            };\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // 行高 菜单插件\n    _e(function (E, $) {\n\n        // 用 createMenu 方法创建菜单\n        E.createMenu(function (check) {\n\n            // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n            var menuId = 'lineheight';\n\n            // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n            if (!check(menuId)) {\n                return;\n            }\n\n            // this 指向 editor 对象自身\n            var editor = this;\n\n            // 由于浏览器自身不支持 lineHeight 命令，因此要做一个hook\n            editor.commandHooks.lineHeight = function (value) {\n                var rangeElem = editor.getRangeElem();\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,pre');\n                if (!targetElem) {\n                    return;\n                }\n                $(targetElem).css('line-height', value + '');\n            };\n\n            // 创建 menu 对象\n            var menu = new E.Menu({\n                editor: editor, // 编辑器对象\n                id: menuId, // 菜单id\n                title: '行高', // 菜单标题\n                commandName: 'lineHeight', // 命令名称\n\n                // 正常状态和选中装下的dom对象，样式需要自定义\n                $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>'),\n                $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>')\n            });\n\n            // 数据源\n            var data = {\n                // 格式： 'value' : 'title'\n                '1.0': '1.0倍',\n                '1.5': '1.5倍',\n                '1.8': '1.8倍',\n                '2.0': '2.0倍',\n                '2.5': '2.5倍',\n                '3.0': '3.0倍'\n            };\n\n            // 为menu创建droplist对象\n            var tpl = '<span style=\"line-height:{#commandValue}\">{#title}</span>';\n            menu.dropList = new E.DropList(editor, menu, {\n                data: data, // 传入数据源\n                tpl: tpl // 传入模板\n            });\n\n            // 增加到editor对象中\n            editor.menus[menuId] = menu;\n        });\n    });\n    // 自定义上传\n    _e(function (E, $) {\n\n        E.plugin(function () {\n\n            var editor = this;\n            var customUpload = editor.config.customUpload;\n            if (!customUpload) {\n                return;\n            } else if (editor.config.uploadImgUrl) {\n                alert('自定义上传无效，详看浏览器日志console.log');\n                E.error('已经配置了 uploadImgUrl ，就不能再配置 customUpload ，两者冲突。将导致自定义上传无效。');\n                return;\n            }\n\n            var $uploadContent = editor.$uploadContent;\n            if (!$uploadContent) {\n                E.error('自定义上传，无法获取 editor.$uploadContent');\n            }\n\n            // UI\n            var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n            $uploadContent.append($uploadIcon);\n\n            // 设置id，并暴露\n            var btnId = 'upload' + E.random();\n            var containerId = 'upload' + E.random();\n            $uploadIcon.attr('id', btnId);\n            $uploadContent.attr('id', containerId);\n\n            editor.customUploadBtnId = btnId;\n            editor.customUploadContainerId = containerId;\n        });\n    });\n    // 版权提示\n    _e(function (E, $) {\n        E.info('本页面富文本编辑器由 wangEditor 提供 http://wangeditor.github.io/ ');\n    });\n\n    // 最终返回wangEditor构造函数\n    return window.wangEditor;\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../../../../~/webpack/buildin/module.js */ \"3IRH\")(module)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMVVmdy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29tbW9ucy93YW5nRWRpdG9yL2pzL3dhbmdFZGl0b3IuanM/Y2Y5NSJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5kZWZpbmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5kZWZpbmUuYW1kKSB7XG4gICAgICAgICAgICAvLyBBTUTmqKHlvI9cbiAgICAgICAgICAgIHdpbmRvdy5kZWZpbmUoJ3dhbmdFZGl0b3InLCBbXCJqcXVlcnlcIl0sIGZhY3RvcnkpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5kZWZpbmUuY21kKSB7XG4gICAgICAgICAgICAvLyBDTUTmqKHlvI9cbiAgICAgICAgICAgIHdpbmRvdy5kZWZpbmUoZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWN0b3J5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDlhajlsYDmqKHlvI9cbiAgICAgICAgICAgIGZhY3Rvcnkod2luZG93LmpRdWVyeSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIC8vIGNvbW1vbmpzXG5cbiAgICAgICAgLy8g5byV55SoIGNzcyDigJTigJQgd2ViYXBja1xuICAgICAgICByZXF1aXJlKCcuLi9jc3Mvd2FuZ0VkaXRvci5sZXNzJyk7XG5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgICAgICAgLy8g5Lyg5YWlIGpxdWVyeSDvvIzmlK/mjIHkvb/nlKggbnBtIOaWueW8j+aIluiAheiHquW3seWumuS5iWpxdWVyeeeahOi3r+W+hFxuICAgICAgICAgICAgcmVxdWlyZSgnanF1ZXJ5JylcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyDlhajlsYDmqKHlvI9cbiAgICAgICAgZmFjdG9yeSh3aW5kb3cualF1ZXJ5KTtcbiAgICB9XG59KShmdW5jdGlvbigkKXtcbiAgICBcbiAgICAvLyDpqozor4HmmK/lkKblvJXnlKhqcXVlcnlcbiAgICBpZiAoISQgfHwgISQuZm4gfHwgISQuZm4uanF1ZXJ5KSB7XG4gICAgICAgIGFsZXJ0KCflnKjlvJXnlKh3YW5nRWRpdG9yLmpz5LmL5YmN77yM5YWI5byV55SoalF1ZXJ577yM5ZCm5YiZ5peg5rOV5L2/55SoIHdhbmdFZGl0b3InKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOWumuS5ieaJqeWxleWHveaVsFxuICAgIHZhciBfZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB2YXIgRSA9IHdpbmRvdy53YW5nRWRpdG9yO1xuICAgICAgICBpZiAoRSkge1xuICAgICAgICAgICAgLy8g5omn6KGM5Lyg5YWl55qE5Ye95pWwXG4gICAgICAgICAgICBmbihFLCAkKTtcbiAgICAgICAgfVxuICAgIH07XG4vLyDlrprkuYnmnoTpgKDlh73mlbBcbihmdW5jdGlvbiAod2luZG93LCAkKSB7XG4gICAgaWYgKHdpbmRvdy53YW5nRWRpdG9yKSB7XG4gICAgICAgIC8vIOmHjeWkjeW8leeUqFxuICAgICAgICBhbGVydCgn5LiA5Liq6aG16Z2i5LiN6IO96YeN5aSN5byV55SoIHdhbmdFZGl0b3IuanMg5oiWIHdhbmdFZGl0b3IubWluLmpzIO+8ge+8ge+8gScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g57yW6L6R5Zmo77yI5pW05L2T77yJ5p6E6YCg5Ye95pWwXG4gICAgdmFyIEUgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAvLyDmlK/mjIEgaWQg5ZKMIGVsZW1lbnQg5Lik56eN5b2i5byPXG4gICAgICAgIGlmICh0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGVsZW0gPSAnIycgKyBlbGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0t6I635Y+W5Z+65pys6IqC54K5LS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIHZhciAkZWxlbSA9ICQoZWxlbSk7XG4gICAgICAgIGlmICgkZWxlbS5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm9kZU5hbWUgPSAkZWxlbVswXS5ub2RlTmFtZTtcbiAgICAgICAgaWYgKG5vZGVOYW1lICE9PSAnVEVYVEFSRUEnICYmIG5vZGVOYW1lICE9PSAnRElWJykge1xuICAgICAgICAgICAgLy8g5Y+q6IO95pivIHRleHRhcmVhIOWSjCBkaXYg77yM5YW25LuW57G75Z6L55qE5YWD57Sg5LiN6KGMXG4gICAgICAgICAgICByZXR1cm47ICAgXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZU5vZGVOYW1lID0gbm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdGhpcy4kdmFsdWVDb250YWluZXIgPSAkZWxlbTtcblxuICAgICAgICAvLyDorrDlvZUgZWxlbSDnmoQgcHJldiDlkowgcGFyZW5077yI5pyA5ZCO5riy5p+TIGVkaXRvciDopoHnlKjliLDvvIlcbiAgICAgICAgdGhpcy4kcHJldiA9ICRlbGVtLnByZXYoKTtcbiAgICAgICAgdGhpcy4kcGFyZW50ID0gJGVsZW0ucGFyZW50KCk7XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0t5Yid5aeL5YyWLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH07XG5cbiAgICBFLmZuID0gRS5wcm90b3R5cGU7XG5cbiAgICBFLiRib2R5ID0gJCgnYm9keScpO1xuICAgIEUuJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG4gICAgRS4kd2luZG93ID0gJCh3aW5kb3cpO1xuICAgIEUudXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICBFLmdldENvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZTtcbiAgICBFLnczY1JhbmdlID0gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZVJhbmdlID09PSAnZnVuY3Rpb24nO1xuICAgIEUuaG9zdG5hbWUgPSBsb2NhdGlvbi5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIEUud2Vic2l0ZUhvc3QgPSAnd2FuZ2VkaXRvci5naXRodWIuaW98d3d3LndhbmdlZGl0b3IuY29tfHdhbmdlZGl0b3IuY29kaW5nLm1lJztcbiAgICBFLmlzT25XZWJzaXRlID0gRS53ZWJzaXRlSG9zdC5pbmRleE9mKEUuaG9zdG5hbWUpID49IDA7XG4gICAgRS5kb2NzaXRlID0gJ2h0dHA6Ly93d3cua2FuY2xvdWQuY24vd2FuZ2Z1cGVuZy93YW5nZWRpdG9yMi8xMTM5NjEnO1xuXG4gICAgLy8g5pq06Zyy57uZ5YWo5bGA5a+56LGhXG4gICAgd2luZG93LndhbmdFZGl0b3IgPSBFO1xuXG4gICAgLy8g5rOo5YaMIHBsdWdpbiDkuovku7bvvIznlKjkuo7nlKjmiLfoh6rlrprkuYnmj5Lku7ZcbiAgICAvLyDnlKjmiLflnKjlvJXnlKggd2FuZ0VkaXRvci5qcyDkuYvlkI7vvIzov5jlj6/ku6XpgJrov4cgRS5wbHVnaW4oKSDms6jlhaXoh6rlrprkuYnlh73mlbDvvIxcbiAgICAvLyDor6Xlh73mlbDlsIbkvJrlnKggZWRpdG9yLmNyZWF0ZSgpIOaWueazleeahOacgOWQjuS4gOatpeaJp+ihjFxuICAgIEUucGx1Z2luID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlmICghRS5fcGx1Z2lucykge1xuICAgICAgICAgICAgRS5fcGx1Z2lucyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRS5fcGx1Z2lucy5wdXNoKGZuKTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pKHdpbmRvdywgJCk7XG4vLyBlZGl0b3Ig57uR5a6a5LqL5Lu2XG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5mbi5pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIOWIneWni+WMliBlZGl0b3Ig6buY6K6k6YWN572uXG4gICAgICAgIHRoaXMuaW5pdERlZmF1bHRDb25maWcoKTtcblxuICAgICAgICAvLyDlop7liqBjb250YWluZXJcbiAgICAgICAgdGhpcy5hZGRFZGl0b3JDb250YWluZXIoKTtcblxuICAgICAgICAvLyDlop7liqDnvJbovpHljLrln59cbiAgICAgICAgdGhpcy5hZGRUeHQoKTtcblxuICAgICAgICAvLyDlop7liqBtZW51Q29udGFpbmVyXG4gICAgICAgIHRoaXMuYWRkTWVudUNvbnRhaW5lcigpO1xuXG4gICAgICAgIC8vIOWIneWni+WMluiPnOWNlembhuWQiFxuICAgICAgICB0aGlzLm1lbnVzID0ge307XG5cbiAgICAgICAgLy8g5Yid5aeL5YyWY29tbWFuZEhvb2tzXG4gICAgICAgIHRoaXMuY29tbWFuZEhvb2tzKCk7XG5cbiAgICB9O1xuXG59KTtcbi8vIGVkaXRvciBhcGlcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICAvLyDpooTlrprkuYkgcmVhZHkg5LqL5Lu2XG4gICAgRS5mbi5yZWFkeSA9IGZ1bmN0aW9uIChmbikge1xuXG4gICAgICAgIGlmICghdGhpcy5yZWFkeUZucykge1xuICAgICAgICAgICAgdGhpcy5yZWFkeUZucyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWFkeUZucy5wdXNoKGZuKTtcbiAgICB9O1xuXG4gICAgLy8g5aSE55CGcmVhZHnkuovku7ZcbiAgICBFLmZuLnJlYWR5SGVhZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZucyA9IHRoaXMucmVhZHlGbnM7XG5cbiAgICAgICAgd2hpbGUgKGZucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZucy5zaGlmdCgpLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g5pu05paw5YaF5a655YiwICR2YWx1ZUNvbnRhaW5lclxuICAgIEUuZm4udXBkYXRlVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgJHZhbHVlQ29udGFpbmVyID0gZWRpdG9yLiR2YWx1ZUNvbnRhaW5lcjtcbiAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG5cbiAgICAgICAgaWYgKCR2YWx1ZUNvbnRhaW5lciA9PT0gJHR4dCkge1xuICAgICAgICAgICAgLy8g5Lyg5YWl55Sf5oiQ57yW6L6R5Zmo55qEZGl277yM5Y2z5piv57yW6L6R5Yy65Z+fXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmFsdWUgPSAkdHh0Lmh0bWwoKTtcbiAgICAgICAgJHZhbHVlQ29udGFpbmVyLnZhbCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIC8vIOiOt+WPluWIneWni+WMlueahOWGheWuuVxuICAgIEUuZm4uZ2V0SW5pdFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyICR2YWx1ZUNvbnRhaW5lciA9IGVkaXRvci4kdmFsdWVDb250YWluZXI7XG4gICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSAnJztcbiAgICAgICAgdmFyIG5vZGVOYW1lID0gZWRpdG9yLnZhbHVlTm9kZU5hbWU7XG4gICAgICAgIGlmIChub2RlTmFtZSA9PT0gJ2RpdicpIHtcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9ICR2YWx1ZUNvbnRhaW5lci5odG1sKCk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZU5hbWUgPT09ICd0ZXh0YXJlYScpIHtcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9ICR2YWx1ZUNvbnRhaW5lci52YWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjdXJyZW50VmFsdWU7XG4gICAgfTtcblxuICAgIC8vIOinpuWPkeiPnOWNlXVwZGF0ZXN0eWxlXG4gICAgRS5mbi51cGRhdGVNZW51U3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtZW51cyA9IHRoaXMubWVudXM7XG5cbiAgICAgICAgJC5lYWNoKG1lbnVzLCBmdW5jdGlvbiAoaywgbWVudSkge1xuICAgICAgICAgICAgbWVudS51cGRhdGVTZWxlY3RlZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8g6Zmk5LqG5Lyg5YWl55qEIG1lbnVJZHPvvIzlhbbku5blhajpg6jlkK/nlKhcbiAgICBFLmZuLmVuYWJsZU1lbnVzRXhjZXB0ID0gZnVuY3Rpb24gKG1lbnVJZHMpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Rpc2FibGVkKSB7XG4gICAgICAgICAgICAvLyDnvJbovpHlmajlpITkuo7npoHnlKjnirbmgIHvvIzliJnkuI3miafooYzmlLnmk43kvZxcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBtZW51SWRz5Y+C5pWw77ya5pSv5oyB5pWw57uE5ZKM5a2X56ym5LiyXG4gICAgICAgIG1lbnVJZHMgPSBtZW51SWRzIHx8IFtdO1xuICAgICAgICBpZiAodHlwZW9mIG1lbnVJZHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBtZW51SWRzID0gW21lbnVJZHNdO1xuICAgICAgICB9XG5cbiAgICAgICAgJC5lYWNoKHRoaXMubWVudXMsIGZ1bmN0aW9uIChrLCBtZW51KSB7XG4gICAgICAgICAgICBpZiAobWVudUlkcy5pbmRleE9mKGspID49IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZW51LmRpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIOmZpOS6huS8oOWFpeeahCBtZW51SWRz77yM5YW25LuW5YWo6YOo56aB55SoXG4gICAgRS5mbi5kaXNhYmxlTWVudXNFeGNlcHQgPSBmdW5jdGlvbiAobWVudUlkcykge1xuICAgICAgICBpZiAodGhpcy5fZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIOe8lui+keWZqOWkhOS6juemgeeUqOeKtuaAge+8jOWImeS4jeaJp+ihjOaUueaTjeS9nFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1lbnVJZHPlj4LmlbDvvJrmlK/mjIHmlbDnu4TlkozlrZfnrKbkuLJcbiAgICAgICAgbWVudUlkcyA9IG1lbnVJZHMgfHwgW107XG4gICAgICAgIGlmICh0eXBlb2YgbWVudUlkcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG1lbnVJZHMgPSBbbWVudUlkc107XG4gICAgICAgIH1cblxuICAgICAgICAkLmVhY2godGhpcy5tZW51cywgZnVuY3Rpb24gKGssIG1lbnUpIHtcbiAgICAgICAgICAgIGlmIChtZW51SWRzLmluZGV4T2YoaykgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lbnUuZGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyDpmpDol4/miYDmnIkgZHJvcFBhbmVsIGRyb3BsaXN0IG1vZGFsXG4gICAgRS5mbi5oaWRlRHJvcFBhbmVsQW5kTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtZW51cyA9IHRoaXMubWVudXM7XG5cbiAgICAgICAgJC5lYWNoKG1lbnVzLCBmdW5jdGlvbiAoaywgbWVudSkge1xuICAgICAgICAgICAgdmFyIG0gPSBtZW51LmRyb3BQYW5lbCB8fCBtZW51LmRyb3BMaXN0IHx8IG1lbnUubW9kYWw7XG4gICAgICAgICAgICBpZiAobSAmJiBtLmhpZGUpIHtcbiAgICAgICAgICAgICAgICBtLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7XG4vLyBzZWxlY3Rpb24gcmFuZ2UgQVBJXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8g55So5YiwIHczYyByYW5nZSDnmoTlh73mlbDvvIzlpoLmnpzmo4DmtYvliLDmtY/op4jlmajkuI3mlK/mjIEgdzNjIHJhbmdl77yM5YiZ6LWL5YC85Li656m65Ye95pWwXG4gICAgdmFyIGllUmFuZ2UgPSAhRS53M2NSYW5nZTtcbiAgICBmdW5jdGlvbiBlbXB0eUZuKCkge31cblxuICAgIC8vIOiuvue9ruaIluivu+WPluW9k+WJjeeahHJhbmdlXG4gICAgRS5mbi5jdXJyZW50UmFuZ2UgPSBmdW5jdGlvbiAoY3Ipe1xuICAgICAgICBpZiAoY3IpIHtcbiAgICAgICAgICAgIHRoaXMuX3JhbmdlRGF0YSA9IGNyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JhbmdlRGF0YTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDlsIblvZPliY3pgInljLrmipjlj6BcbiAgICBFLmZuLmNvbGxhcHNlUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UsIG9wdCkge1xuICAgICAgICAvLyBvcHQg5Y+C5pWw6K+05piO77yaJ3N0YXJ0Jy3mipjlj6DliLDlvIDlp4s7ICdlbmQnLeaKmOWPoOWIsOe7k+adn1xuICAgICAgICBvcHQgPSBvcHQgfHwgJ2VuZCc7XG4gICAgICAgIG9wdCA9IG9wdCA9PT0gJ3N0YXJ0JyA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICByYW5nZSA9IHJhbmdlIHx8IHRoaXMuY3VycmVudFJhbmdlKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgIC8vIOWQiOW5tu+8jOS/neWtmFxuICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2Uob3B0KTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJhbmdlKHJhbmdlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDojrflj5bpgInljLrnmoTmloflrZdcbiAgICBFLmZuLmdldFJhbmdlVGV4dCA9IGllUmFuZ2UgPyBlbXB0eUZuIDogZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgIHJhbmdlID0gcmFuZ2UgfHwgdGhpcy5jdXJyZW50UmFuZ2UoKTtcbiAgICAgICAgaWYgKCFyYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByYW5nZS50b1N0cmluZygpO1xuICAgIH07XG5cbiAgICAvLyDojrflj5bpgInljLrlr7nlupTnmoRET03lr7nosaFcbiAgICBFLmZuLmdldFJhbmdlRWxlbSA9IGllUmFuZ2UgPyBlbXB0eUZuIDogZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgIHJhbmdlID0gcmFuZ2UgfHwgdGhpcy5jdXJyZW50UmFuZ2UoKTtcbiAgICAgICAgdmFyIGRvbSA9IHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyO1xuXG4gICAgICAgIGlmIChkb20ubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBkb207XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZG9tLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g6YCJ5Yy65YaF5a655piv5ZCm5Li656m677yfXG4gICAgRS5mbi5pc1JhbmdlRW1wdHkgPSBpZVJhbmdlID8gZW1wdHlGbiA6IGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgICByYW5nZSA9IHJhbmdlIHx8IHRoaXMuY3VycmVudFJhbmdlKCk7XG5cbiAgICAgICAgaWYgKHJhbmdlICYmIHJhbmdlLnN0YXJ0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICBpZiAocmFuZ2Uuc3RhcnRDb250YWluZXIgPT09IHJhbmdlLmVuZENvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydE9mZnNldCA9PT0gcmFuZ2UuZW5kT2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLy8g5L+d5a2Y6YCJ5Yy65pWw5o2uXG4gICAgRS5mbi5zYXZlU2VsZWN0aW9uID0gaWVSYW5nZSA/IGVtcHR5Rm4gOiBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3BhcmVudEVsZW0sXG4gICAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgICB0eHQgPSBzZWxmLnR4dC4kdHh0LmdldCgwKTtcblxuICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgIF9wYXJlbnRFbGVtID0gcmFuZ2UuY29tbW9uQW5jZXN0b3JDb250YWluZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uZ2V0UmFuZ2VBdCAmJiBzZWxlY3Rpb24ucmFuZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgICAgICAgICBfcGFyZW50RWxlbSA9IHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIOehruWumueItuWFg+e0oOS4gOWumuimgeWMheWQq+WcqOe8lui+keWZqOWMuuWfn+WGhVxuICAgICAgICBpZiAoX3BhcmVudEVsZW0gJiYgKCQuY29udGFpbnModHh0LCBfcGFyZW50RWxlbSkgfHwgdHh0ID09PSBfcGFyZW50RWxlbSkgKSB7XG4gICAgICAgICAgICAvLyDkv53lrZjpgInmi6nljLrln59cbiAgICAgICAgICAgIHNlbGYuY3VycmVudFJhbmdlKHJhbmdlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDmgaLlpI3pgInkuK3ljLrln59cbiAgICBFLmZuLnJlc3RvcmVTZWxlY3Rpb24gPSBpZVJhbmdlID8gZW1wdHlGbiA6IGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgICB2YXIgc2VsZWN0aW9uO1xuXG4gICAgICAgIHJhbmdlID0gcmFuZ2UgfHwgdGhpcy5jdXJyZW50UmFuZ2UoKTtcblxuICAgICAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDkvb/nlKggdHJ5IGNhdGNoIOadpemYsuatoiBJRSDmn5Dkupvmg4XlhrXmiqXplJlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIEUuZXJyb3IoJ+aJp+ihjCBlZGl0b3IucmVzdG9yZVNlbGVjdGlvbiDml7bvvIxJReWPr+iDveS8muacieW8guW4uO+8jOS4jeW9seWTjeS9v+eUqCcpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOagueaNrmVsZW3mgaLlpI3pgInljLpcbiAgICBFLmZuLnJlc3RvcmVTZWxlY3Rpb25CeUVsZW0gPSBpZVJhbmdlID8gZW1wdHlGbiA6IGZ1bmN0aW9uIChlbGVtLCBvcHQpIHtcbiAgICAgICAgLy8gb3B05Y+C5pWw6K+05piO77yaJ3N0YXJ0Jy3mipjlj6DliLDlvIDlp4vvvIwnZW5kJy3mipjlj6DliLDnu5PmnZ/vvIwnYWxsJy3lhajpg6jpgInkuK1cbiAgICAgICAgaWYgKCFlbGVtKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgb3B0ID0gb3B0IHx8ICdlbmQnOyAvLyDpu5jorqTkuLrmipjlj6DliLDnu5PmnZ9cblxuICAgICAgICAvLyDmoLnmja5lbGVt6I635Y+W6YCJ5Yy6XG4gICAgICAgIHRoaXMuc2V0UmFuZ2VCeUVsZW0oZWxlbSk7XG5cbiAgICAgICAgLy8g5qC55o2uIG9wdCDmipjlj6DpgInljLpcbiAgICAgICAgaWYgKG9wdCA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZVJhbmdlKHRoaXMuY3VycmVudFJhbmdlKCksICdzdGFydCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHQgPT09ICdlbmQnKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlUmFuZ2UodGhpcy5jdXJyZW50UmFuZ2UoKSwgJ2VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDmgaLlpI3pgInljLpcbiAgICAgICAgdGhpcy5yZXN0b3JlU2VsZWN0aW9uKCk7XG4gICAgfTtcblxuICAgIC8vIOWIneWni+WMlumAieWMulxuICAgIEUuZm4uaW5pdFNlbGVjdGlvbiA9IGllUmFuZ2UgPyBlbXB0eUZuIDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgaWYoIGVkaXRvci5jdXJyZW50UmFuZ2UoKSApe1xuICAgICAgICAgICAgLy/lpoLmnpxjdXJyZW50UmFuZ2XmnInlgLzvvIzliJnkuI3nlKjlho3liJ3lp4vljJZcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByYW5nZTtcbiAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG4gICAgICAgIHZhciAkZmlyc3RDaGlsZCA9ICR0eHQuY2hpbGRyZW4oKS5maXJzdCgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCRmaXJzdENoaWxkLmxlbmd0aCkge1xuICAgICAgICAgICAgZWRpdG9yLnJlc3RvcmVTZWxlY3Rpb25CeUVsZW0oJGZpcnN0Q2hpbGQuZ2V0KDApKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDmoLnmja7lhYPntKDliJvlu7rpgInljLpcbiAgICBFLmZuLnNldFJhbmdlQnlFbGVtID0gaWVSYW5nZSA/IGVtcHR5Rm4gOiBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIHR4dEVsZW0gPSBlZGl0b3IudHh0LiR0eHQuZ2V0KDApO1xuICAgICAgICBpZiAoIWVsZW0gfHwgISQuY29udGFpbnModHh0RWxlbSwgZWxlbSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOaJvuWIsGVsZW3nmoTnrKzkuIDkuKogdGV4dE5vZGUg5ZKMIOacgOWQjuS4gOS4qiB0ZXh0Tm9kZVxuICAgICAgICB2YXIgZmlyc3RUZXh0Tm9kZSA9IGVsZW0uZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKGZpcnN0VGV4dE5vZGUpIHtcbiAgICAgICAgICAgIGlmIChmaXJzdFRleHROb2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDnu6fnu63lkJHkuItcbiAgICAgICAgICAgIGZpcnN0VGV4dE5vZGUgPSBmaXJzdFRleHROb2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhc3RUZXh0Tm9kZSA9IGVsZW0ubGFzdENoaWxkO1xuICAgICAgICB3aGlsZSAobGFzdFRleHROb2RlKSB7XG4gICAgICAgICAgICBpZiAobGFzdFRleHROb2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDnu6fnu63lkJHkuItcbiAgICAgICAgICAgIGxhc3RUZXh0Tm9kZSA9IGxhc3RUZXh0Tm9kZS5sYXN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIGlmIChmaXJzdFRleHROb2RlICYmIGxhc3RUZXh0Tm9kZSkge1xuICAgICAgICAgICAgLy8g6K+05piOIGVsZW0g5pyJ5YaF5a6577yM6IO95Y+W5Yiw5a2Q5YWD57SgXG4gICAgICAgICAgICByYW5nZS5zZXRTdGFydChmaXJzdFRleHROb2RlLCAwKTtcbiAgICAgICAgICAgIHJhbmdlLnNldEVuZChsYXN0VGV4dE5vZGUsIGxhc3RUZXh0Tm9kZS50ZXh0Q29udGVudC5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g6K+05piOIGVsZW0g5peg5YaF5a65XG4gICAgICAgICAgICByYW5nZS5zZXRTdGFydChlbGVtLCAwKTtcbiAgICAgICAgICAgIHJhbmdlLnNldEVuZChlbGVtLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOS/neWtmOmAieWMulxuICAgICAgICBlZGl0b3Iuc2F2ZVNlbGVjdGlvbihyYW5nZSk7XG4gICAgfTtcblxufSk7XG4vLyBzZWxlY3Rpb24gcmFuZ2UgQVBJIC0gSUU45Y+K5Lul5LiLXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgaWYgKEUudzNjUmFuZ2UpIHtcbiAgICAgICAgLy8g6K+05piO5pSv5oyBIFczQyDnmoRyYW5nZeaWueazlVxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS1JRTjml7bvvIzpnIDopoHph43lhpnku6XkuIvmlrnms5UtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyDojrflj5bpgInljLrnmoTmloflrZdcbiAgICBFLmZuLmdldFJhbmdlVGV4dCA9IGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgICByYW5nZSA9IHJhbmdlIHx8IHRoaXMuY3VycmVudFJhbmdlKCk7XG4gICAgICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmFuZ2UudGV4dDtcbiAgICB9O1xuXG4gICAgLy8g6I635Y+W6YCJ5Yy65a+55bqU55qERE9N5a+56LGhXG4gICAgRS5mbi5nZXRSYW5nZUVsZW0gPSBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSByYW5nZSB8fCB0aGlzLmN1cnJlbnRSYW5nZSgpO1xuICAgICAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRvbSA9IHJhbmdlLnBhcmVudEVsZW1lbnQoKTtcblxuICAgICAgICBpZiAoZG9tLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9tO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGRvbS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOmAieWMuuWGheWuueaYr+WQpuS4uuepuu+8n1xuICAgIEUuZm4uaXNSYW5nZUVtcHR5ID0gZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgIHJhbmdlID0gcmFuZ2UgfHwgdGhpcy5jdXJyZW50UmFuZ2UoKTtcblxuICAgICAgICBpZiAocmFuZ2UgJiYgcmFuZ2UudGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIC8vIOS/neWtmOmAieWMuuaVsOaNrlxuICAgIEUuZm4uc2F2ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfcGFyZW50RWxlbSxcbiAgICAgICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgICAgIHR4dCA9IHNlbGYudHh0LiR0eHQuZ2V0KDApO1xuXG4gICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgX3BhcmVudEVsZW0gPSByYW5nZS5wYXJlbnRFbGVtZW50KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgICAgaWYodHlwZW9mIHJhbmdlLnBhcmVudEVsZW1lbnQgPT09ICd1bmRlZmluZWQnKXtcbiAgICAgICAgICAgICAgICAvL0lFNuOAgTfkuK3vvIxpbnNlcnRJbWFnZeWQjuS8muaJp+ihjOatpOWkhFxuICAgICAgICAgICAgICAgIC8v55Sx5LqO5om+5LiN5YiwcmFuZ2UucGFyZW50RWxlbWVudO+8jOaJgOS7peW5suiEhuWwhl9wYXJlbnRFbGVt6LWL5YC85Li6bnVsbFxuICAgICAgICAgICAgICAgIF9wYXJlbnRFbGVtID0gbnVsbDtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIF9wYXJlbnRFbGVtID0gcmFuZ2UucGFyZW50RWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g56Gu5a6a54i25YWD57Sg5LiA5a6a6KaB5YyF5ZCr5Zyo57yW6L6R5Zmo5Yy65Z+f5YaFXG4gICAgICAgIGlmIChfcGFyZW50RWxlbSAmJiAoJC5jb250YWlucyh0eHQsIF9wYXJlbnRFbGVtKSB8fCB0eHQgPT09IF9wYXJlbnRFbGVtKSApIHtcbiAgICAgICAgICAgIC8vIOS/neWtmOmAieaLqeWMuuWfn1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50UmFuZ2UocmFuZ2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOaBouWkjemAieS4reWMuuWfn1xuICAgIEUuZm4ucmVzdG9yZVNlbGVjdGlvbiA9IGZ1bmN0aW9uIChjdXJyZW50UmFuZ2Upe1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcyxcbiAgICAgICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgICAgIHJhbmdlO1xuXG4gICAgICAgIGN1cnJlbnRSYW5nZSA9IGN1cnJlbnRSYW5nZSB8fCBlZGl0b3IuY3VycmVudFJhbmdlKCk7XG4gICAgICAgIGlmKCFjdXJyZW50UmFuZ2Upe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOatpOWkhO+8jHBsdXBsb2Fk5LiK5Lyg5LiK5Lyg5Zu+54mH5pe277yMSUU4LeS8muaKpeS4gOS4quOAjuWPguaVsOaXoOaViOOAj+eahOmUmeivr1xuICAgICAgICAgICAgcmFuZ2Uuc2V0RW5kUG9pbnQoJ0VuZFRvRW5kJywgY3VycmVudFJhbmdlKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZihjdXJyZW50UmFuZ2UudGV4dC5sZW5ndGggPT09IDApe1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBJRTgg5o+S5YWl6KGo5oOF5Lya5oql6ZSZXG4gICAgICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJhbmdlLnNldEVuZFBvaW50KCdTdGFydFRvU3RhcnQnLCBjdXJyZW50UmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJhbmdlLnNlbGVjdCgpO1xuICAgIH07XG5cbn0pO1xuLy8gZWRpdG9yIGNvbW1hbmQgaG9va3Ncbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG4gICAgXG4gICAgRS5mbi5jb21tYW5kSG9va3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgY29tbWFuZEhvb2tzID0ge307XG4gICAgICAgIFxuICAgICAgICAvLyBpbnNlcnRIdG1sXG4gICAgICAgIGNvbW1hbmRIb29rcy5pbnNlcnRIdG1sID0gZnVuY3Rpb24gKGh0bWwpIHtcbiAgICAgICAgICAgIHZhciAkZWxlbSA9ICQoaHRtbCk7XG4gICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZW07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRhcmdldEVsZW0gPSBlZGl0b3IuZ2V0TGVnYWxUYWdzKHJhbmdlRWxlbSk7XG4gICAgICAgICAgICBpZiAoIXRhcmdldEVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQodGFyZ2V0RWxlbSkuYWZ0ZXIoJGVsZW0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOS/neWtmOWIsOWvueixoVxuICAgICAgICBlZGl0b3IuY29tbWFuZEhvb2tzID0gY29tbWFuZEhvb2tzO1xuICAgIH07XG5cbn0pO1xuLy8gZWRpdG9yIGNvbW1hbmQgQVBJXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8g5Z+65pys5ZG95LukXG4gICAgRS5mbi5jb21tYW5kID0gZnVuY3Rpb24gKGUsIGNvbW1hbmROYW1lLCBjb21tYW5kVmFsdWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgaG9va3M7XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBjb21tYW5kRm4oKSB7XG4gICAgICAgICAgICBpZiAoIWNvbW1hbmROYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVkaXRvci5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoY29tbWFuZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8g6buY6K6k5ZG95LukXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoY29tbWFuZE5hbWUsIGZhbHNlLCBjb21tYW5kVmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBob29rcyDlkb3ku6RcbiAgICAgICAgICAgICAgICBob29rcyA9IGVkaXRvci5jb21tYW5kSG9va3M7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmROYW1lIGluIGhvb2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2tzW2NvbW1hbmROYW1lXShjb21tYW5kVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3VzdG9tQ29tbWFuZChlLCBjb21tYW5kRm4sIGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgLy8g6ZKI5a+55LiA5LiqZWxlbeWvueixoeaJp+ihjOWfuuehgOWRveS7pFxuICAgIEUuZm4uY29tbWFuZEZvckVsZW0gPSBmdW5jdGlvbiAoZWxlbU9wdCwgZSwgY29tbWFuZE5hbWUsIGNvbW1hbmRWYWx1ZSwgY2FsbGJhY2spIHtcbiAgICAgICAgLy8g5Y+W5b6X5p+l6K+iZWxlbeeahOafpeivouadoeS7tuWSjOmqjOivgeWHveaVsFxuICAgICAgICB2YXIgc2VsZWN0b3I7XG4gICAgICAgIHZhciBjaGVjaztcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtT3B0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2VsZWN0b3IgPSBlbGVtT3B0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0b3IgPSBlbGVtT3B0LnNlbGVjdG9yO1xuICAgICAgICAgICAgY2hlY2sgPSBlbGVtT3B0LmNoZWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5p+l6K+iZWxlbVxuICAgICAgICB2YXIgcmFuZ2VFbGVtID0gdGhpcy5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgcmFuZ2VFbGVtID0gdGhpcy5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCBzZWxlY3RvciwgY2hlY2spO1xuXG4gICAgICAgIC8vIOagueaNrmVsZW3orr7nva5yYW5nZVxuICAgICAgICBpZiAocmFuZ2VFbGVtKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJhbmdlQnlFbGVtKHJhbmdlRWxlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDnhLblkI7miafooYzln7rnoYDlkb3ku6RcbiAgICAgICAgdGhpcy5jb21tYW5kKGUsIGNvbW1hbmROYW1lLCBjb21tYW5kVmFsdWUsIGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgLy8g6Ieq5a6a5LmJ5ZG95LukXG4gICAgRS5mbi5jdXN0b21Db21tYW5kID0gZnVuY3Rpb24gKGUsIGNvbW1hbmRGbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciByYW5nZSA9IGVkaXRvci5jdXJyZW50UmFuZ2UoKTtcblxuICAgICAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgICAgICAvLyDnm67liY3msqHmnInpgInljLrvvIzliJnml6Dms5XmiafooYzlkb3ku6RcbiAgICAgICAgICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIOiusOW9leWGheWuue+8jOS7peS+v+aSpOmUgO+8iOaJp+ihjOWRveS7pOS5i+WJjeWwseimgeiusOW9le+8iVxuICAgICAgICBlZGl0b3IudW5kb1JlY29yZCgpO1xuXG4gICAgICAgIC8vIOaBouWkjemAieWMuu+8iOaciSByYW5nZSDlj4LmlbDvvIlcbiAgICAgICAgdGhpcy5yZXN0b3JlU2VsZWN0aW9uKHJhbmdlKTtcblxuICAgICAgICAvLyDmiafooYzlkb3ku6Tkuovku7ZcbiAgICAgICAgY29tbWFuZEZuLmNhbGwoZWRpdG9yKTtcblxuICAgICAgICAvLyDkv53lrZjpgInljLrvvIjml6Dlj4LmlbDvvIzopoHku47mtY/op4jlmajnm7TmjqXojrflj5ZyYW5nZeS/oeaBr++8iVxuICAgICAgICB0aGlzLnNhdmVTZWxlY3Rpb24oKTtcbiAgICAgICAgLy8g6YeN5paw5oGi5aSN6YCJ5Yy677yI5peg5Y+C5pWw77yM6KaB5Y+W5b6X5Yia5Yia5LuO5rWP6KeI5Zmo5b6X5Yiw55qEcmFuZ2Xkv6Hmga/vvIlcbiAgICAgICAgdGhpcy5yZXN0b3JlU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgLy8g5omn6KGMIGNhbGxiYWNrXG4gICAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoZWRpdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOacgOWQjuaPkuWFpeepuuihjFxuICAgICAgICBlZGl0b3IudHh0Lmluc2VydEVtcHR5UCgpO1xuXG4gICAgICAgIC8vIOWMheijueaatOmcsueahGltZ+WSjHRleHRcbiAgICAgICAgZWRpdG9yLnR4dC53cmFwSW1nQW5kVGV4dCgpO1xuXG4gICAgICAgIC8vIOabtOaWsOWGheWuuVxuICAgICAgICBlZGl0b3IudXBkYXRlVmFsdWUoKTtcblxuICAgICAgICAvLyDmm7TmlrDoj5zljZXmoLflvI9cbiAgICAgICAgZWRpdG9yLnVwZGF0ZU1lbnVTdHlsZSgpO1xuXG4gICAgICAgIC8vIOmakOiXjyBkcm9wUGFuZWwgZHJvcExpc3QgbW9kYWwgIOiuvue9riAyMDBtcyDpl7TpmpRcbiAgICAgICAgZnVuY3Rpb24gaGlkZVBhbmVsQW5kTW9kYWwoKSB7XG4gICAgICAgICAgICBlZGl0b3IuaGlkZURyb3BQYW5lbEFuZE1vZGFsKCk7XG4gICAgICAgIH0gXG4gICAgICAgIHNldFRpbWVvdXQoaGlkZVBhbmVsQW5kTW9kYWwsIDIwMCk7XG5cbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDlsIHoo4UgZG9jdW1lbnQucXVlcnlDb21tYW5kVmFsdWUg5Ye95pWwXG4gICAgLy8gSUU4IOebtOaOpeaJp+ihjOWBtuWwlOS8muaKpemUme+8jOWboOatpOebtOaOpeeUqCB0cnkgY2F0Y2gg5bCB6KOF5LiA5LiLXG4gICAgRS5mbi5xdWVyeUNvbW1hbmRWYWx1ZSA9IGZ1bmN0aW9uIChjb21tYW5kTmFtZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBkb2N1bWVudC5xdWVyeUNvbW1hbmRWYWx1ZShjb21tYW5kTmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICAvLyDlsIHoo4UgZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUg5Ye95pWwXG4gICAgLy8gSUU4IOebtOaOpeaJp+ihjOWBtuWwlOS8muaKpemUme+8jOWboOatpOebtOaOpeeUqCB0cnkgY2F0Y2gg5bCB6KOF5LiA5LiLXG4gICAgRS5mbi5xdWVyeUNvbW1hbmRTdGF0ZSA9IGZ1bmN0aW9uIChjb21tYW5kTmFtZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShjb21tYW5kTmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICAvLyDlsIHoo4UgZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkIOWHveaVsFxuICAgIEUuZm4ucXVlcnlDb21tYW5kU3VwcG9ydGVkID0gZnVuY3Rpb24gKGNvbW1hbmROYW1lKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZChjb21tYW5kTmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbn0pO1xuLy8gZG9tIHNlbGVjdG9yXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgdmFyIG1hdGNoZXNTZWxlY3RvcjtcblxuICAgIC8vIG1hdGNoZXNTZWxlY3RvciBob29rXG4gICAgZnVuY3Rpb24gX21hdGNoZXNTZWxlY3RvckZvcklFKHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBlbGVtID0gdGhpcztcbiAgICAgICAgdmFyICRlbGVtcyA9ICQoc2VsZWN0b3IpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgICAgLy8g55SoanF1ZXJ55p+l5om+IHNlbGVjdG9yIOaJgOacieWvueixoe+8jOWmguaenOWFtuS4reacieS4gOS4quWSjOS8oOWFpSBlbGVtIOebuOWQjO+8jOWImeivgeaYjiBlbGVtIOespuWQiCBzZWxlY3RvclxuICAgICAgICAkZWxlbXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcyA9PT0gZWxlbSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIOS7juW9k+WJjeeahGVsZW3vvIzlvoDkuIrljrvmn6Xmib7lkIjms5XmoIfnrb4g5aaCIHAgaGVhZCB0YWJsZSBibG9ja3F1b3RlIHVsIG9sIOetiVxuICAgIEUuZm4uZ2V0TGVnYWxUYWdzID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgdmFyIGxlZ2FsVGFncyA9IHRoaXMuY29uZmlnLmxlZ2FsVGFncztcbiAgICAgICAgaWYgKCFsZWdhbFRhZ3MpIHtcbiAgICAgICAgICAgIEUuZXJyb3IoJ+mFjee9rumhueS4ree8uuWwkSBsZWdhbFRhZ3Mg55qE6YWN572uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKGVsZW0sIGxlZ2FsVGFncyk7XG4gICAgfTtcblxuICAgIC8vIOagueaNruadoeS7tu+8jOafpeivouiHqui6q+aIluiAheeItuWFg+e0oO+8jOespuWQiOWNs+i/lOWbnlxuICAgIEUuZm4uZ2V0U2VsZk9yUGFyZW50QnlOYW1lID0gZnVuY3Rpb24gKGVsZW0sIHNlbGVjdG9yLCBjaGVjaykge1xuXG4gICAgICAgIGlmICghZWxlbSB8fCAhc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbWF0Y2hlc1NlbGVjdG9yKSB7XG4gICAgICAgICAgICAvLyDlrprkuYkgbWF0Y2hlc1NlbGVjdG9yIOWHveaVsFxuICAgICAgICAgICAgbWF0Y2hlc1NlbGVjdG9yID0gZWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5tYXRjaGVzU2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtYXRjaGVzU2VsZWN0b3IpIHtcbiAgICAgICAgICAgIC8vIOWmguaenOa1j+iniOWZqOacrOi6q+S4jeaUr+aMgSBtYXRjaGVzU2VsZWN0b3Ig5YiZ5L2/55So6Ieq5a6a5LmJ55qEaG9va1xuICAgICAgICAgICAgbWF0Y2hlc1NlbGVjdG9yID0gX21hdGNoZXNTZWxlY3RvckZvcklFO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHR4dCA9IHRoaXMudHh0LiR0eHQuZ2V0KDApO1xuXG4gICAgICAgIHdoaWxlIChlbGVtICYmIHR4dCAhPT0gZWxlbSAmJiAkLmNvbnRhaW5zKHR4dCwgZWxlbSkpIHtcbiAgICAgICAgICAgIGlmIChtYXRjaGVzU2VsZWN0b3IuY2FsbChlbGVtLCBzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICAvLyDnrKblkIggc2VsZWN0b3Ig5p+l6K+i5p2h5Lu2XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOayoeaciSBjaGVjayDpqozor4Hlh73mlbDvvIznm7TmjqXov5Tlm57ljbPlj69cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrKGVsZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaciSBjaGVjayDpqozor4Hlh73mlbDvvIzov5jpnIAgY2hlY2sg5Ye95pWw55qE56Gu6K6kXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5aaC5p6c5LiK5LiA5q2l5rKh57uP6L+H6aqM6K+B77yM5YiZ5bCG6Lez6L2s5Yiw54i25YWD57SgXG4gICAgICAgICAgICBlbGVtID0gZWxlbS5wYXJlbnROb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG5cbn0pO1xuLy8gdW5kbyByZWRvXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgdmFyIGxlbmd0aCA9IDIwOyAgLy8g57yT5a2Y55qE5pyA5aSn6ZW/5bqmXG4gICAgZnVuY3Rpb24gX2dldFJlZG9MaXN0KGVkaXRvcikge1xuICAgICAgICBpZiAoZWRpdG9yLl9yZWRvTGlzdCA9PSBudWxsKSB7XG4gICAgICAgICAgICBlZGl0b3IuX3JlZG9MaXN0ID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVkaXRvci5fcmVkb0xpc3Q7XG4gICAgfVxuICAgIGZ1bmN0aW9uIF9nZXRVbmRvTGlzdChlZGl0b3IpIHtcbiAgICAgICAgaWYgKGVkaXRvci5fdW5kb0xpc3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgZWRpdG9yLl91bmRvTGlzdCA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlZGl0b3IuX3VuZG9MaXN0O1xuICAgIH1cblxuICAgIC8vIOaVsOaNruWkhOeQhlxuICAgIGZ1bmN0aW9uIF9oYW5kbGUoZWRpdG9yLCBkYXRhLCB0eXBlKSB7XG4gICAgICAgIC8vIHZhciByYW5nZSA9IGRhdGEucmFuZ2U7XG4gICAgICAgIC8vIHZhciByYW5nZTIgPSByYW5nZS5jbG9uZVJhbmdlICYmIHJhbmdlLmNsb25lUmFuZ2UoKTtcbiAgICAgICAgdmFyIHZhbCA9IGRhdGEudmFsO1xuICAgICAgICB2YXIgaHRtbCA9IGVkaXRvci50eHQuJHR4dC5odG1sKCk7XG5cbiAgICAgICAgaWYodmFsID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWwgPT09IGh0bWwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAncmVkbycpIHsgXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlZG8oKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd1bmRvJykge1xuICAgICAgICAgICAgICAgIGVkaXRvci51bmRvKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDkv53lrZjmlbDmja5cbiAgICAgICAgZWRpdG9yLnR4dC4kdHh0Lmh0bWwodmFsKTtcbiAgICAgICAgLy8g5pu05paw5pWw5o2u5YiwdGV4dGFyZWHvvIjmnInlv4XopoHnmoTor53vvIlcbiAgICAgICAgZWRpdG9yLnVwZGF0ZVZhbHVlKCk7XG5cbiAgICAgICAgLy8gb25jaGFuZ2Ug5LqL5Lu2XG4gICAgICAgIGlmIChlZGl0b3Iub25jaGFuZ2UgJiYgdHlwZW9mIGVkaXRvci5vbmNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZWRpdG9yLm9uY2hhbmdlLmNhbGwoZWRpdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vID8/Pz8/XG4gICAgICAgIC8vIOazqOmHiu+8miR0eHQg6KKr6YeN5paw6LWL5YC85LmL5ZCO77yMcmFuZ2XkvJrooqvph43nva7vvIxjbG9uZVJhbmdlKCkg5Lmf5LiN5aW95L2/XG4gICAgICAgIC8vIC8vIOmHjee9rumAieWMulxuICAgICAgICAvLyBpZiAocmFuZ2UyKSB7XG4gICAgICAgIC8vICAgICBlZGl0b3IucmVzdG9yZVNlbGVjdGlvbihyYW5nZTIpO1xuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgLy8g6K6w5b2VXG4gICAgRS5mbi51bmRvUmVjb3JkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG4gICAgICAgIHZhciB2YWwgPSAkdHh0Lmh0bWwoKTtcbiAgICAgICAgdmFyIHVuZG9MaXN0ID0gX2dldFVuZG9MaXN0KGVkaXRvcik7XG4gICAgICAgIHZhciByZWRvTGlzdCA9IF9nZXRSZWRvTGlzdChlZGl0b3IpO1xuICAgICAgICB2YXIgY3VycmVudFZhbCA9IHVuZG9MaXN0Lmxlbmd0aCA/IHVuZG9MaXN0WzBdIDogJyc7XG5cbiAgICAgICAgaWYgKHZhbCA9PT0gY3VycmVudFZhbC52YWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOa4heepuiByZWRvbGlzdFxuICAgICAgICBpZiAocmVkb0xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWRvTGlzdCA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5re75Yqg5pWw5o2u5YiwIHVuZG9MaXN0XG4gICAgICAgIHVuZG9MaXN0LnVuc2hpZnQoe1xuICAgICAgICAgICAgcmFuZ2U6IGVkaXRvci5jdXJyZW50UmFuZ2UoKSwgIC8vIOWwhuW9k+WJjeeahHJhbmdl5Lmf6K6w5b2V5LiLXG4gICAgICAgICAgICB2YWw6IHZhbFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDpmZDliLYgdW5kb0xpc3Qg6ZW/5bqmXG4gICAgICAgIGlmICh1bmRvTGlzdC5sZW5ndGggPiBsZW5ndGgpIHtcbiAgICAgICAgICAgIHVuZG9MaXN0LnBvcCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHVuZG8g5pON5L2cXG4gICAgRS5mbi51bmRvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIHVuZG9MaXN0ID0gX2dldFVuZG9MaXN0KGVkaXRvcik7XG4gICAgICAgIHZhciByZWRvTGlzdCA9IF9nZXRSZWRvTGlzdChlZGl0b3IpO1xuXG4gICAgICAgIGlmICghdW5kb0xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlj5blh7ogdW5kb2xpc3Qg56ys5LiA5Liq5YC877yM5Yqg5YWlIHJlZG9saXN0XG4gICAgICAgIHZhciBkYXRhID0gdW5kb0xpc3Quc2hpZnQoKTtcbiAgICAgICAgcmVkb0xpc3QudW5zaGlmdChkYXRhKTtcblxuICAgICAgICAvLyDlubbkv67mlLnnvJbovpHlmajnmoTlhoXlrrlcbiAgICAgICAgX2hhbmRsZSh0aGlzLCBkYXRhLCAndW5kbycpO1xuICAgIH07XG5cbiAgICAvLyByZWRvIOaTjeS9nFxuICAgIEUuZm4ucmVkbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciB1bmRvTGlzdCA9IF9nZXRVbmRvTGlzdChlZGl0b3IpO1xuICAgICAgICB2YXIgcmVkb0xpc3QgPSBfZ2V0UmVkb0xpc3QoZWRpdG9yKTtcbiAgICAgICAgaWYgKCFyZWRvTGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWPluWHuiByZWRvbGlzdCDnrKzkuIDkuKrlgLzvvIzliqDlhaUgdW5kb2xpc3RcbiAgICAgICAgdmFyIGRhdGEgPSByZWRvTGlzdC5zaGlmdCgpO1xuICAgICAgICB1bmRvTGlzdC51bnNoaWZ0KGRhdGEpO1xuXG4gICAgICAgIC8vIOW5tuS/ruaUuee8lui+keWZqOeahOWGheWuuVxuICAgICAgICBfaGFuZGxlKHRoaXMsIGRhdGEsICdyZWRvJyk7XG4gICAgfTtcbn0pO1xuLy8g5pq06Zyy57uZ55So5oi355qEIEFQSVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIC8vIOWIm+W7uue8lui+keWZqFxuICAgIEUuZm4uY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcblxuICAgICAgICAvLyDmo4Dmn6UgRS4kYm9keSDmmK/lkKbmnInlgLxcbiAgICAgICAgLy8g5aaC5p6c5ZyoIGJvZHkg5LmL5YmN5byV55So5LqGIGpzIOaWh+S7tu+8jGJvZHkg5bCa5pyq5Yqg6L2977yM5Y+v6IO95rKh5pyJ5YC8XG4gICAgICAgIGlmICghRS4kYm9keSB8fCBFLiRib2R5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgRS4kYm9keSA9ICQoJ2JvZHknKTtcbiAgICAgICAgICAgIEUuJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG4gICAgICAgICAgICBFLiR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmiafooYwgYWRkTWVudXMg5LmL5YmN77yaXG4gICAgICAgIC8vIDEuIOWFgeiuuOeUqOaIt+S/ruaUuSBlZGl0b3IuVUkg6Ieq5a6a5LmJ6YWN572uVUlcbiAgICAgICAgLy8gMi4g5YWB6K6455So5oi36YCa6L+H5L+u5pS5IGVkaXRvci5tZW51cyDmnaXoh6rlrprkuYnphY3nva7oj5zljZVcbiAgICAgICAgLy8g5Zug5q2k6KaB5ZyoIGNyZWF0ZSDml7bmiafooYzvvIzogIzkuI3mmK8gaW5pdCAgICAgICAgICAgXG4gICAgICAgIGVkaXRvci5hZGRNZW51cygpO1xuXG4gICAgICAgIC8vIOa4suafk1xuICAgICAgICBlZGl0b3IucmVuZGVyTWVudXMoKTtcbiAgICAgICAgZWRpdG9yLnJlbmRlck1lbnVDb250YWluZXIoKTtcbiAgICAgICAgZWRpdG9yLnJlbmRlclR4dCgpO1xuICAgICAgICBlZGl0b3IucmVuZGVyRWRpdG9yQ29udGFpbmVyKCk7XG5cbiAgICAgICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgICAgIGVkaXRvci5ldmVudE1lbnVzKCk7XG4gICAgICAgIGVkaXRvci5ldmVudE1lbnVDb250YWluZXIoKTtcbiAgICAgICAgZWRpdG9yLmV2ZW50VHh0KCk7XG5cbiAgICAgICAgLy8g5aSE55CGcmVhZHnkuovku7ZcbiAgICAgICAgZWRpdG9yLnJlYWR5SGVhZGxlcigpO1xuXG4gICAgICAgIC8vIOWIneWni+WMlumAieWMulxuICAgICAgICBlZGl0b3IuaW5pdFNlbGVjdGlvbigpO1xuXG4gICAgICAgIC8vICR0eHQg5b+r5o235pa55byPXG4gICAgICAgIGVkaXRvci4kdHh0ID0gZWRpdG9yLnR4dC4kdHh0O1xuXG4gICAgICAgIC8vIOaJp+ihjOeUqOaIt+iHquWumuS5ieS6i+S7tu+8jOmAmui/hyBFLnJlYWR5KCkg5re75YqgXG4gICAgICAgIHZhciBfcGx1Z2lucyA9IEUuX3BsdWdpbnM7XG4gICAgICAgIGlmIChfcGx1Z2lucyAmJiBfcGx1Z2lucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICQuZWFjaChfcGx1Z2lucywgZnVuY3Rpb24gKGssIHZhbCkge1xuICAgICAgICAgICAgICAgIHZhbC5jYWxsKGVkaXRvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDnpoHnlKjnvJbovpHlmahcbiAgICBFLmZuLmRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHh0LiR0eHQucmVtb3ZlQXR0cignY29udGVudGVkaXRhYmxlJyk7XG4gICAgICAgIHRoaXMuZGlzYWJsZU1lbnVzRXhjZXB0KCk7XG5cbiAgICAgICAgLy8g5YWI56aB55So77yM5YaN6K6w5b2V54q25oCBXG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIC8vIOWQr+eUqOe8lui+keWZqFxuICAgIEUuZm4uZW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyDlhYjop6PpmaTnirbmgIHorrDlvZXvvIzlho3lkK/nlKhcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50eHQuJHR4dC5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCAndHJ1ZScpO1xuICAgICAgICB0aGlzLmVuYWJsZU1lbnVzRXhjZXB0KCk7XG4gICAgfTtcblxuICAgIC8vIOmUgOavgee8lui+keWZqFxuICAgIEUuZm4uZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJHZhbHVlQ29udGFpbmVyID0gc2VsZi4kdmFsdWVDb250YWluZXI7XG4gICAgICAgIHZhciAkZWRpdG9yQ29udGFpbmVyID0gc2VsZi4kZWRpdG9yQ29udGFpbmVyO1xuICAgICAgICB2YXIgdmFsdWVOb2RlTmFtZSA9IHNlbGYudmFsdWVOb2RlTmFtZTtcblxuICAgICAgICBpZiAodmFsdWVOb2RlTmFtZSA9PT0gJ2RpdicpIHtcbiAgICAgICAgICAgIC8vIGRpdiDnlJ/miJDnmoTnvJbovpHlmahcbiAgICAgICAgICAgICR2YWx1ZUNvbnRhaW5lci5yZW1vdmVBdHRyKCdjb250ZW50ZWRpdGFibGUnKTtcbiAgICAgICAgICAgICRlZGl0b3JDb250YWluZXIuYWZ0ZXIoJHZhbHVlQ29udGFpbmVyKTtcbiAgICAgICAgICAgICRlZGl0b3JDb250YWluZXIuaGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdGV4dGFyZWEg55Sf5oiQ55qE57yW6L6R5ZmoXG4gICAgICAgICAgICAkdmFsdWVDb250YWluZXIuc2hvdygpO1xuICAgICAgICAgICAgJGVkaXRvckNvbnRhaW5lci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g5pKk6ZSAIOmUgOavgee8lui+keWZqFxuICAgIEUuZm4udW5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciAkdmFsdWVDb250YWluZXIgPSBzZWxmLiR2YWx1ZUNvbnRhaW5lcjtcbiAgICAgICAgdmFyICRlZGl0b3JDb250YWluZXIgPSBzZWxmLiRlZGl0b3JDb250YWluZXI7XG4gICAgICAgIHZhciAkbWVudUNvbnRhaW5lciA9IHNlbGYubWVudUNvbnRhaW5lci4kbWVudUNvbnRhaW5lcjtcbiAgICAgICAgdmFyIHZhbHVlTm9kZU5hbWUgPSBzZWxmLnZhbHVlTm9kZU5hbWU7XG5cbiAgICAgICAgaWYgKHZhbHVlTm9kZU5hbWUgPT09ICdkaXYnKSB7XG4gICAgICAgICAgICAvLyBkaXYg55Sf5oiQ55qE57yW6L6R5ZmoXG4gICAgICAgICAgICAkdmFsdWVDb250YWluZXIuYXR0cignY29udGVudGVkaXRhYmxlJywgJ3RydWUnKTtcbiAgICAgICAgICAgICRtZW51Q29udGFpbmVyLmFmdGVyKCR2YWx1ZUNvbnRhaW5lcik7XG4gICAgICAgICAgICAkZWRpdG9yQ29udGFpbmVyLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRleHRhcmVhIOeUn+aIkOeahOe8lui+keWZqFxuICAgICAgICAgICAgJHZhbHVlQ29udGFpbmVyLmhpZGUoKTtcbiAgICAgICAgICAgICRlZGl0b3JDb250YWluZXIuc2hvdygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOa4heepuuWGheWuueeahOW/q+aNt+aWueW8j1xuICAgIEUuZm4uY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgJHR4dCA9IGVkaXRvci50eHQuJHR4dDtcbiAgICAgICAgJHR4dC5odG1sKCc8cD48YnI+PC9wPicpO1xuICAgICAgICBlZGl0b3IucmVzdG9yZVNlbGVjdGlvbkJ5RWxlbSgkdHh0LmZpbmQoJ3AnKS5nZXQoMCkpO1xuICAgIH07XG5cbn0pO1xuLy8gbWVudUNvbnRhaW5lciDmnoTpgKDlh73mlbBcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICAvLyDlrprkuYnmnoTpgKDlh73mlbBcbiAgICB2YXIgTWVudUNvbnRhaW5lciA9IGZ1bmN0aW9uIChlZGl0b3IpIHtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH07XG5cbiAgICBNZW51Q29udGFpbmVyLmZuID0gTWVudUNvbnRhaW5lci5wcm90b3R5cGU7XG5cbiAgICAvLyDmmrTpnLLnu5kgRSDljbMgd2luZG93LndhbmdFZGl0b3JcbiAgICBFLk1lbnVDb250YWluZXIgPSBNZW51Q29udGFpbmVyO1xuXG59KTtcbi8vIE1lbnVDb250YWluZXIuZm4gYmluZCBmblxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIHZhciBNZW51Q29udGFpbmVyID0gRS5NZW51Q29udGFpbmVyO1xuXG4gICAgLy8g5Yid5aeL5YyWXG4gICAgTWVudUNvbnRhaW5lci5mbi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciAkbWVudUNvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJ3YW5nRWRpdG9yLW1lbnUtY29udGFpbmVyIGNsZWFyZml4XCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgc2VsZi4kbWVudUNvbnRhaW5lciA9ICRtZW51Q29udGFpbmVyO1xuXG4gICAgICAgIC8vIGNoYW5nZSBzaGFkb3dcbiAgICAgICAgc2VsZi5jaGFuZ2VTaGFkb3coKTtcbiAgICB9O1xuXG4gICAgLy8g57yW6L6R5Yy65Z+f5rua5Yqo5pe277yM5aKe5Yqgc2hhZG93XG4gICAgTWVudUNvbnRhaW5lci5mbi5jaGFuZ2VTaGFkb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkbWVudUNvbnRhaW5lciA9IHRoaXMuJG1lbnVDb250YWluZXI7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmVkaXRvcjtcbiAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG5cbiAgICAgICAgJHR4dC5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCR0eHQuc2Nyb2xsVG9wKCkgPiAxMCkge1xuICAgICAgICAgICAgICAgICRtZW51Q29udGFpbmVyLmFkZENsYXNzKCd3YW5nRWRpdG9yLW1lbnUtc2hhZG93Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRtZW51Q29udGFpbmVyLnJlbW92ZUNsYXNzKCd3YW5nRWRpdG9yLW1lbnUtc2hhZG93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn0pO1xuLy8gTWVudUNvbnRhaW5lci5mbiBBUElcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICB2YXIgTWVudUNvbnRhaW5lciA9IEUuTWVudUNvbnRhaW5lcjtcblxuICAgIE1lbnVDb250YWluZXIuZm4ucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJG1lbnVDb250YWluZXIgPSB0aGlzLiRtZW51Q29udGFpbmVyO1xuICAgICAgICB2YXIgJGVkaXRvckNvbnRhaW5lciA9IHRoaXMuZWRpdG9yLiRlZGl0b3JDb250YWluZXI7XG5cbiAgICAgICAgJGVkaXRvckNvbnRhaW5lci5hcHBlbmQoJG1lbnVDb250YWluZXIpO1xuICAgIH07XG4gICAgXG4gICAgLy8g6I635Y+W6I+c5Y2V5qCP55qE6auY5bqmXG4gICAgTWVudUNvbnRhaW5lci5mbi5oZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkbWVudUNvbnRhaW5lciA9IHRoaXMuJG1lbnVDb250YWluZXI7XG4gICAgICAgIHJldHVybiAkbWVudUNvbnRhaW5lci5oZWlnaHQoKTtcbiAgICB9O1xuXG4gICAgLy8g5re75Yqg6I+c5Y2VXG4gICAgTWVudUNvbnRhaW5lci5mbi5hcHBlbmRNZW51ID0gZnVuY3Rpb24gKGdyb3VwSWR4LCBtZW51KSB7XG4gICAgICAgIC8vIOWIpOaWreaYr+WQpumcgOimgeaWsOWinuS4gOS4quiPnOWNlee7hFxuICAgICAgICB0aGlzLl9hZGRHcm91cChncm91cElkeCk7XG4gICAgICAgIC8vIOWinuWKoOiPnOWNle+8iOi/lOWbniAkbWVudUl0ZW3vvIlcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZE9uZU1lbnUobWVudSk7XG4gICAgfTtcbiAgICBNZW51Q29udGFpbmVyLmZuLl9hZGRHcm91cCA9IGZ1bmN0aW9uIChncm91cElkeCkge1xuICAgICAgICB2YXIgJG1lbnVDb250YWluZXIgPSB0aGlzLiRtZW51Q29udGFpbmVyO1xuICAgICAgICB2YXIgJG1lbnVHcm91cDtcbiAgICAgICAgaWYgKCF0aGlzLiRjdXJyZW50R3JvdXAgfHwgdGhpcy5jdXJyZW50R3JvdXBJZHggIT09IGdyb3VwSWR4KSB7XG4gICAgICAgICAgICAkbWVudUdyb3VwID0gJCgnPGRpdiBjbGFzcz1cIm1lbnUtZ3JvdXAgY2xlYXJmaXhcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICRtZW51Q29udGFpbmVyLmFwcGVuZCgkbWVudUdyb3VwKTtcblxuICAgICAgICAgICAgdGhpcy4kY3VycmVudEdyb3VwID0gJG1lbnVHcm91cDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEdyb3VwSWR4ID0gZ3JvdXBJZHg7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lbnVDb250YWluZXIuZm4uX2FkZE9uZU1lbnUgPSBmdW5jdGlvbiAobWVudSkge1xuICAgICAgICB2YXIgJG1lbnVOb3JtYWwgPSBtZW51LiRkb21Ob3JtYWw7XG4gICAgICAgIHZhciAkbWVudVNlbGVjdGVkID0gbWVudS4kZG9tU2VsZWN0ZWQ7XG5cbiAgICAgICAgdmFyICRtZW51R3JvdXAgPSB0aGlzLiRjdXJyZW50R3JvdXA7XG4gICAgICAgIHZhciAkaXRlbSA9ICQoJzxkaXYgY2xhc3M9XCJtZW51LWl0ZW0gY2xlYXJmaXhcIj48L2Rpdj4nKTtcbiAgICAgICAgJG1lbnVTZWxlY3RlZC5oaWRlKCk7XG4gICAgICAgICRpdGVtLmFwcGVuZCgkbWVudU5vcm1hbCkuYXBwZW5kKCRtZW51U2VsZWN0ZWQpO1xuICAgICAgICAkbWVudUdyb3VwLmFwcGVuZCgkaXRlbSk7XG5cbiAgICAgICAgcmV0dXJuICRpdGVtO1xuICAgIH07XG5cbn0pO1xuLy8gbWVudSDmnoTpgKDlh73mlbBcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICAvLyDlrprkuYnmnoTpgKDlh73mlbBcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBvcHQuZWRpdG9yO1xuICAgICAgICB0aGlzLmlkID0gb3B0LmlkO1xuICAgICAgICB0aGlzLnRpdGxlID0gb3B0LnRpdGxlO1xuICAgICAgICB0aGlzLiRkb21Ob3JtYWwgPSBvcHQuJGRvbU5vcm1hbDtcbiAgICAgICAgdGhpcy4kZG9tU2VsZWN0ZWQgPSBvcHQuJGRvbVNlbGVjdGVkIHx8IG9wdC4kZG9tTm9ybWFsO1xuXG4gICAgICAgIC8vIGRvY3VtZW50LmV4ZWNDb21tYW5kIOeahOWPguaVsFxuICAgICAgICB0aGlzLmNvbW1hbmROYW1lID0gb3B0LmNvbW1hbmROYW1lO1xuICAgICAgICB0aGlzLmNvbW1hbmRWYWx1ZSA9IG9wdC5jb21tYW5kVmFsdWU7XG4gICAgICAgIHRoaXMuY29tbWFuZE5hbWVTZWxlY3RlZCA9IG9wdC5jb21tYW5kTmFtZVNlbGVjdGVkIHx8IG9wdC5jb21tYW5kTmFtZTtcbiAgICAgICAgdGhpcy5jb21tYW5kVmFsdWVTZWxlY3RlZCA9IG9wdC5jb21tYW5kVmFsdWVTZWxlY3RlZCB8fCBvcHQuY29tbWFuZFZhbHVlO1xuICAgIH07XG5cbiAgICBNZW51LmZuID0gTWVudS5wcm90b3R5cGU7XG5cbiAgICAvLyDmmrTpnLLnu5kgRSDljbMgd2luZG93LndhbmdFZGl0b3JcbiAgICBFLk1lbnUgPSBNZW51O1xufSk7XG4vLyBNZW51LmZuIOWIneWni+WMlue7keWumueahOS6i+S7tlxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIHZhciBNZW51ID0gRS5NZW51O1xuXG4gICAgLy8g5Yid5aeL5YyWVUlcbiAgICBNZW51LmZuLmluaXRVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yO1xuICAgICAgICB2YXIgdWlDb25maWcgPSBlZGl0b3IuVUkubWVudXM7XG4gICAgICAgIHZhciBtZW51SWQgPSB0aGlzLmlkO1xuICAgICAgICB2YXIgbWVudVVJID0gdWlDb25maWdbbWVudUlkXTtcblxuICAgICAgICBpZiAodGhpcy4kZG9tTm9ybWFsICYmIHRoaXMuJGRvbVNlbGVjdGVkKSB7XG4gICAgICAgICAgICAvLyDoh6rlrprkuYnnmoToj5zljZXkuK3vvIzlt7Lnu4/kvKDlhaXkuoYgJGRvbSDml6DpnIDku47phY3nva7mlofku7bkuK3mn6Xmib7nlJ/miJBcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZW51VUkgPT0gbnVsbCkge1xuICAgICAgICAgICAgRS53YXJuKCdlZGl0b3IuVUnphY3nva7kuK3vvIzmsqHmnInoj5zljZUgXCInICsgbWVudUlkICsgJ1wiIOeahFVJ6YWN572u77yM5Y+q6IO95Y+W6buY6K6k5YC8Jyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOW/hemhu+WGmeaIkCB1aUNvbmZpZ1snZGVmYXVsdCddO1xuICAgICAgICAgICAgLy8g5YaZ5oiQIHVpQ29uZmlnLmRlZmF1bHQgSUU45Lya5oql6ZSZXG4gICAgICAgICAgICBtZW51VUkgPSB1aUNvbmZpZ1snZGVmYXVsdCddO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5q2j5bi454q25oCBXG4gICAgICAgIHRoaXMuJGRvbU5vcm1hbCA9ICQobWVudVVJLm5vcm1hbCk7XG5cbiAgICAgICAgLy8g6YCJ5Lit54q25oCBXG4gICAgICAgIGlmICgvXlxcLi8udGVzdChtZW51VUkuc2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAvLyDlop7liqDkuIDkuKrmoLflvI9cbiAgICAgICAgICAgIHRoaXMuJGRvbVNlbGVjdGVkID0gdGhpcy4kZG9tTm9ybWFsLmNsb25lKCkuYWRkQ2xhc3MobWVudVVJLnNlbGVjdGVkLnNsaWNlKDEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOS4gOS4quaWsOeahGRvbeWvueixoVxuICAgICAgICAgICAgdGhpcy4kZG9tU2VsZWN0ZWQgPSAkKG1lbnVVSS5zZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG59KTtcbi8vIE1lbnUuZm4gQVBJXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgdmFyIE1lbnUgPSBFLk1lbnU7XG5cbiAgICAvLyDmuLLmn5Poj5zljZVcbiAgICBNZW51LmZuLnJlbmRlciA9IGZ1bmN0aW9uIChncm91cElkeCkge1xuICAgICAgICAvLyDmuLLmn5NVSVxuICAgICAgICB0aGlzLmluaXRVSSgpO1xuICAgICAgICBcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yO1xuICAgICAgICB2YXIgbWVudUNvbnRhaW5lciA9IGVkaXRvci5tZW51Q29udGFpbmVyO1xuICAgICAgICB2YXIgJG1lbnVJdGVtID0gbWVudUNvbnRhaW5lci5hcHBlbmRNZW51KGdyb3VwSWR4LCB0aGlzKTtcbiAgICAgICAgdmFyIG9uUmVuZGVyID0gdGhpcy5vblJlbmRlcjtcblxuICAgICAgICAvLyDmuLLmn5N0aXBcbiAgICAgICAgdGhpcy5fcmVuZGVyVGlwKCRtZW51SXRlbSk7XG5cbiAgICAgICAgLy8g5omn6KGMIG9uUmVuZGVyIOWHveaVsFxuICAgICAgICBpZiAob25SZW5kZXIgJiYgdHlwZW9mIG9uUmVuZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlci5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZW51LmZuLl9yZW5kZXJUaXAgPSBmdW5jdGlvbiAoJG1lbnVJdGVtKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGVkaXRvciA9IHNlbGYuZWRpdG9yO1xuICAgICAgICB2YXIgdGl0bGUgPSBzZWxmLnRpdGxlO1xuICAgICAgICB2YXIgJHRpcCA9ICQoJzxkaXYgY2xhc3M9XCJtZW51LXRpcFwiPjwvZGl2PicpO1xuICAgICAgICAvLyB2YXIgJHRyaWFuZ2xlID0gJCgnPGkgY2xhc3M9XCJ0aXAtdHJpYW5nbGVcIj48L2k+Jyk7IC8vIOWwj+S4ieinklxuXG4gICAgICAgIC8vIOiuoeeulyB0aXAg5a695bqmXG4gICAgICAgIHZhciAkdGVtcERpdjtcbiAgICAgICAgaWYgKCFzZWxmLnRpcFdpZHRoKSB7XG4gICAgICAgICAgICAvLyDorr7nva7kuIDkuKrnuq/pgI/mmI7nmoQgcO+8iGFic29sdXRlO3RvcDotMTAwMDBweDvkuI3kvJrmmL7npLrlnKjlhoXlrrnljLrln5/vvIlcbiAgICAgICAgICAgIC8vIOWGheWuuei1i+WAvOS4uiB0aXRsZSDvvIzkuLrkuoborqHnrpd0aXDlrr3luqZcbiAgICAgICAgICAgICR0ZW1wRGl2ID0gJCgnPHAgc3R5bGU9XCJvcGFjaXR5OjA7IGZpbHRlcjpBbHBoYShvcGFjaXR5PTApOyBwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMDAwcHg7XCI+JyArIHRpdGxlICsgJzwvcD4nKTtcbiAgICAgICAgICAgIC8vIOWFiOa3u+WKoOWIsGJvZHnvvIzorqHnrpflrozlho0gcmVtb3ZlXG4gICAgICAgICAgICBFLiRib2R5LmFwcGVuZCgkdGVtcERpdik7XG4gICAgICAgICAgICBlZGl0b3IucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZVdpZHRoID0gJHRlbXBEaXYub3V0ZXJXaWR0aCgpICsgNTsgLy8g5aSa5Ye6IDVweCDnmoTlhpfkvZlcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFdpZHRoID0gJHRpcC5vdXRlcldpZHRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNYXJnaW5MZWZ0ID0gcGFyc2VGbG9hdCgkdGlwLmNzcygnbWFyZ2luLWxlZnQnKSwgMTApO1xuICAgICAgICAgICAgICAgIC8vIOiuoeeul+WujO+8jOaLv+WIsOaVsOaNru+8jOWImeW8g+eUqFxuICAgICAgICAgICAgICAgICR0ZW1wRGl2LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICR0ZW1wRGl2ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8vIOmHjeaWsOiuvue9ruagt+W8j1xuICAgICAgICAgICAgICAgICR0aXAuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRpdGxlV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICdtYXJnaW4tbGVmdCc6IGN1cnJlbnRNYXJnaW5MZWZ0ICsgKGN1cnJlbnRXaWR0aCAtIHRpdGxlV2lkdGgpLzJcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIOWtmOWCqFxuICAgICAgICAgICAgICAgIHNlbGYudGlwV2lkdGggPSB0aXRsZVdpZHRoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAkdGlwLmFwcGVuZCgkdHJpYW5nbGUpO1xuICAgICAgICAkdGlwLmFwcGVuZCh0aXRsZSk7XG4gICAgICAgICRtZW51SXRlbS5hcHBlbmQoJHRpcCk7XG5cbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgICR0aXAuc2hvdygpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgICAgICAgICAkdGlwLmhpZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0aW1lb3V0SWQ7XG4gICAgICAgICRtZW51SXRlbS5maW5kKCdhJykub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFzZWxmLmFjdGl2ZSgpICYmICFzZWxmLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHNob3csIDIwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRpbWVvdXRJZCAmJiBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIGhpZGUoKTtcbiAgICAgICAgfSkub24oJ2NsaWNrJywgaGlkZSk7XG4gICAgfTtcblxuICAgIC8vIOe7keWumuS6i+S7tlxuICAgIE1lbnUuZm4uYmluZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdmFyICRkb21Ob3JtYWwgPSBzZWxmLiRkb21Ob3JtYWw7XG4gICAgICAgIHZhciAkZG9tU2VsZWN0ZWQgPSBzZWxmLiRkb21TZWxlY3RlZDtcblxuICAgICAgICAvLyDor5Xlm77ojrflj5bor6Xoj5zljZXlrprkuYnnmoTkuovku7bvvIjmnKpzZWxlY3RlZO+8ie+8jOayoeacieWImeiHquW3seWumuS5iVxuICAgICAgICB2YXIgY2xpY2tFdmVudCA9IHNlbGYuY2xpY2tFdmVudDtcbiAgICAgICAgaWYgKCFjbGlja0V2ZW50KSB7XG4gICAgICAgICAgICBjbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLWRyb3BQYW5lbCBkcm9wTGlzdCBtb2RhbC0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgdmFyIGRyb3BPYmogPSBzZWxmLmRyb3BQYW5lbCB8fCBzZWxmLmRyb3BMaXN0IHx8IHNlbGYubW9kYWw7XG4gICAgICAgICAgICAgICAgaWYgKGRyb3BPYmogJiYgZHJvcE9iai5zaG93KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkcm9wT2JqLmlzU2hvd2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcE9iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wT2JqLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS1jb21tYW5kLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgICAgICAgICAgdmFyIGNvbW1hbmROYW1lO1xuICAgICAgICAgICAgICAgIHZhciBjb21tYW5kVmFsdWU7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZWxmLnNlbGVjdGVkO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kTmFtZSA9IHNlbGYuY29tbWFuZE5hbWVTZWxlY3RlZDtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZFZhbHVlID0gc2VsZi5jb21tYW5kVmFsdWVTZWxlY3RlZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kTmFtZSA9IHNlbGYuY29tbWFuZE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmRWYWx1ZSA9IHNlbGYuY29tbWFuZFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyDmiafooYzlkb3ku6RcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgY29tbWFuZE5hbWUsIGNvbW1hbmRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5o+Q56S6XG4gICAgICAgICAgICAgICAgICAgIEUud2Fybign6I+c5Y2VIFwiJyArIHNlbGYuaWQgKyAnXCIg5pyq5a6a5LmJY2xpY2vkuovku7YnKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8g6I635Y+W6I+c5Y2V5a6a5LmJ55qEc2VsZWN0ZWTmg4XlhrXkuIvnmoTngrnlh7vkuovku7ZcbiAgICAgICAgdmFyIGNsaWNrRXZlbnRTZWxlY3RlZCA9IHNlbGYuY2xpY2tFdmVudFNlbGVjdGVkIHx8IGNsaWNrRXZlbnQ7XG5cbiAgICAgICAgLy8g5bCG5LqL5Lu257uR5a6a5Yiw6I+c5Y2VZG9t5LiKXG4gICAgICAgICRkb21Ob3JtYWwuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5kaXNhYmxlZCgpKSB7XG4gICAgICAgICAgICAgICAgY2xpY2tFdmVudC5jYWxsKHNlbGYsIGUpO1xuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlU2VsZWN0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgICRkb21TZWxlY3RlZC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFzZWxmLmRpc2FibGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjbGlja0V2ZW50U2VsZWN0ZWQuY2FsbChzZWxmLCBlKTtcbiAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZVNlbGVjdGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyDmm7TmlrDpgInkuK3nirbmgIFcbiAgICBNZW51LmZuLnVwZGF0ZVNlbGVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBlZGl0b3IgPSBzZWxmLmVkaXRvcjtcblxuICAgICAgICAvLyDor5Xlm77ojrflj5bnlKjmiLfoh6rlrprkuYnnmoTliKTmlq3kuovku7ZcbiAgICAgICAgdmFyIHVwZGF0ZVNlbGVjdGVkRXZlbnQgPSBzZWxmLnVwZGF0ZVNlbGVjdGVkRXZlbnQ7XG4gICAgICAgIGlmICghdXBkYXRlU2VsZWN0ZWRFdmVudCkge1xuICAgICAgICAgICAgLy8g55So5oi35pyq6Ieq5a6a5LmJ77yM5YiZ6K6+572u6buY6K6k5YC8XG4gICAgICAgICAgICB1cGRhdGVTZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgICAgICAgICAgdmFyIGNvbW1hbmROYW1lID0gc2VsZi5jb21tYW5kTmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgY29tbWFuZFZhbHVlID0gc2VsZi5jb21tYW5kVmFsdWU7XG5cbiAgICAgICAgICAgICAgICBpZiAoY29tbWFuZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGl0b3IucXVlcnlDb21tYW5kVmFsdWUoY29tbWFuZE5hbWUpLnRvTG93ZXJDYXNlKCkgPT09IGNvbW1hbmRWYWx1ZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWRpdG9yLnF1ZXJ5Q29tbWFuZFN0YXRlKGNvbW1hbmROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6I635Y+W57uT5p6cXG4gICAgICAgIHZhciByZXN1bHQgPSB1cGRhdGVTZWxlY3RlZEV2ZW50LmNhbGwoc2VsZik7XG4gICAgICAgIHJlc3VsdCA9ICEhcmVzdWx0O1xuXG4gICAgICAgIC8vIOWtmOWCqOe7k+aenOOAgeaYvuekuuaViOaenFxuICAgICAgICBzZWxmLmNoYW5nZVNlbGVjdGVkU3RhdGUocmVzdWx0KTtcbiAgICB9O1xuXG4gICAgLy8g5YiH5o2i6YCJ5Lit54q25oCB44CB5pi+56S65pWI5p6cXG4gICAgTWVudS5mbi5jaGFuZ2VTZWxlY3RlZFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gc2VsZi5zZWxlY3RlZDtcblxuICAgICAgICBpZiAoc3RhdGUgIT0gbnVsbCAmJiB0eXBlb2Ygc3RhdGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkID09PSBzdGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIOiuoeeul+e7k+aenOWSjOW9k+WJjeeahOeKtuaAgeS4gOagt1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOWtmOWCqOe7k+aenFxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IHN0YXRlO1xuXG4gICAgICAgICAgICAvLyDliIfmjaLoj5zljZXnmoTmmL7npLpcbiAgICAgICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIOmAieS4rVxuICAgICAgICAgICAgICAgIHNlbGYuJGRvbU5vcm1hbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgc2VsZi4kZG9tU2VsZWN0ZWQuc2hvdygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDmnKrpgInkuK1cbiAgICAgICAgICAgICAgICBzZWxmLiRkb21Ob3JtYWwuc2hvdygpO1xuICAgICAgICAgICAgICAgIHNlbGYuJGRvbVNlbGVjdGVkLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBpZlxuICAgIH07XG5cbiAgICAvLyDngrnlh7voj5zljZXvvIzmmL7npLrkuoYgZHJvcFBhbmVsIG1vZGFsIOaXtu+8jOiPnOWNleeahOeKtuaAgSBcbiAgICBNZW51LmZuLmFjdGl2ZSA9IGZ1bmN0aW9uIChhY3RpdmUpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlU3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYWN0aXZlU3RhdGUgPSBhY3RpdmU7XG4gICAgfTtcbiAgICBNZW51LmZuLmFjdGl2ZVN0eWxlID0gZnVuY3Rpb24gKGFjdGl2ZSkge1xuICAgICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkO1xuICAgICAgICB2YXIgJGRvbSA9IHRoaXMuJGRvbU5vcm1hbDtcbiAgICAgICAgdmFyICRkb21TZWxlY3RlZCA9IHRoaXMuJGRvbVNlbGVjdGVkO1xuXG4gICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICAgICRkb20uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJGRvbVNlbGVjdGVkLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRkb20ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJGRvbVNlbGVjdGVkLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOiusOW9leeKtuaAgSDvvIggbWVudSBob3ZlciDml7bkvJrlj5bnirbmgIHnlKgg77yJXG4gICAgICAgIHRoaXMuYWN0aXZlKGFjdGl2ZSk7XG4gICAgfTtcblxuICAgIC8vIOiPnOWNleeahOWQr+eUqOWSjOemgeeUqFxuICAgIE1lbnUuZm4uZGlzYWJsZWQgPSBmdW5jdGlvbiAob3B0KSB7XG4gICAgICAgIC8vIOWPguaVsOS4uuepuu+8jOWPluWAvFxuICAgICAgICBpZiAob3B0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuX2Rpc2FibGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2Rpc2FibGVkID09PSBvcHQpIHtcbiAgICAgICAgICAgIC8vIOimgeiuvue9rueahOWPguaVsOWAvOWSjOW9k+WJjeWPguaVsOWPquS4gOagt++8jOaXoOmcgOWGjeasoeiuvue9rlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyICRkb20gPSB0aGlzLiRkb21Ob3JtYWw7XG4gICAgICAgIHZhciAkZG9tU2VsZWN0ZWQgPSB0aGlzLiRkb21TZWxlY3RlZDtcblxuICAgICAgICAvLyDorr7nva7moLflvI9cbiAgICAgICAgaWYgKG9wdCkge1xuICAgICAgICAgICAgJGRvbS5hZGRDbGFzcygnZGlzYWJsZScpO1xuICAgICAgICAgICAgJGRvbVNlbGVjdGVkLmFkZENsYXNzKCdkaXNhYmxlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkZG9tLnJlbW92ZUNsYXNzKCdkaXNhYmxlJyk7XG4gICAgICAgICAgICAkZG9tU2VsZWN0ZWQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWtmOWCqFxuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IG9wdDtcbiAgICB9O1xuXG59KTtcbi8vIGRyb3BMaXN0IOaehOmAoOWHveaVsFxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIC8vIOWumuS5ieaehOmAoOWHveaVsFxuICAgIHZhciBEcm9wTGlzdCA9IGZ1bmN0aW9uIChlZGl0b3IsIG1lbnUsIG9wdCkge1xuICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgICAgICAgdGhpcy5tZW51ID0gbWVudTtcblxuICAgICAgICAvLyBsaXN0IOeahOaVsOaNrua6kO+8jOagvOW8jyB7J2NvbW1hbmRWYWx1ZSc6ICd0aXRsZScsIC4uLn1cbiAgICAgICAgdGhpcy5kYXRhID0gb3B0LmRhdGE7XG4gICAgICAgIC8vIOimgeS4uuavj+S4qml0ZW3oh6rlrprkuYnnmoTmqKHmnb9cbiAgICAgICAgdGhpcy50cGwgPSBvcHQudHBsO1xuICAgICAgICAvLyDkuLrkuobmiafooYwgZWRpdG9yLmNvbW1hbmRGb3JFbGVtIOiAjOS8oOWFpeeahGVsZW3mn6Xor6LmlrnlvI9cbiAgICAgICAgdGhpcy5zZWxlY3RvckZvckVMZW1Db21tYW5kID0gb3B0LnNlbGVjdG9yRm9yRUxlbUNvbW1hbmQ7XG5cbiAgICAgICAgLy8g5omn6KGM5LqL5Lu25YmN5ZCO55qE6ZKp5a2QXG4gICAgICAgIHRoaXMuYmVmb3JlRXZlbnQgPSBvcHQuYmVmb3JlRXZlbnQ7XG4gICAgICAgIHRoaXMuYWZ0ZXJFdmVudCA9IG9wdC5hZnRlckV2ZW50O1xuXG4gICAgICAgIC8vIOWIneWni+WMllxuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9O1xuXG4gICAgRHJvcExpc3QuZm4gPSBEcm9wTGlzdC5wcm90b3R5cGU7XG5cbiAgICAvLyDmmrTpnLLnu5kgRSDljbMgd2luZG93LndhbmdFZGl0b3JcbiAgICBFLkRyb3BMaXN0ID0gRHJvcExpc3Q7XG59KTtcbi8vIGRyb3BMaXN0IGZuIGJpbmRcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICB2YXIgRHJvcExpc3QgPSBFLkRyb3BMaXN0O1xuXG4gICAgLy8gaW5pdFxuICAgIERyb3BMaXN0LmZuLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAvLyDnlJ/miJBkb23lr7nosaFcbiAgICAgICAgc2VsZi5pbml0RE9NKCk7XG5cbiAgICAgICAgLy8g57uR5a6aY29tbWFuZOS6i+S7tlxuICAgICAgICBzZWxmLmJpbmRFdmVudCgpO1xuXG4gICAgICAgIC8vIOWjsOaYjumakOiXj+eahOS6i+S7tlxuICAgICAgICBzZWxmLmluaXRIaWRlRXZlbnQoKTtcbiAgICB9O1xuXG4gICAgLy8g5Yid5aeL5YyWZG9t57uT5p6EXG4gICAgRHJvcExpc3QuZm4uaW5pdERPTSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZGF0YSA9IHNlbGYuZGF0YTtcbiAgICAgICAgdmFyIHRwbCA9IHNlbGYudHBsIHx8ICc8c3Bhbj57I3RpdGxlfTwvc3Bhbj4nO1xuICAgICAgICB2YXIgJGxpc3QgPSAkKCc8ZGl2IGNsYXNzPVwid2FuZ0VkaXRvci1kcm9wLWxpc3QgY2xlYXJmaXhcIj48L2Rpdj4nKTtcblxuICAgICAgICB2YXIgaXRlbUNvbnRlbnQ7XG4gICAgICAgIHZhciAkaXRlbTtcbiAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChjb21tYW5kVmFsdWUsIHRpdGxlKSB7XG4gICAgICAgICAgICBpdGVtQ29udGVudCA9IHRwbC5yZXBsYWNlKC97I2NvbW1hbmRWYWx1ZX0vaWcsIGNvbW1hbmRWYWx1ZSkucmVwbGFjZSgveyN0aXRsZX0vaWcsIHRpdGxlKTtcbiAgICAgICAgICAgICRpdGVtID0gJCgnPGEgaHJlZj1cIiNcIiBjb21tYW5kVmFsdWU9XCInICsgY29tbWFuZFZhbHVlICsgJ1wiPjwvYT4nKTtcbiAgICAgICAgICAgICRpdGVtLmFwcGVuZChpdGVtQ29udGVudCk7XG4gICAgICAgICAgICAkbGlzdC5hcHBlbmQoJGl0ZW0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZWxmLiRsaXN0ID0gJGxpc3Q7XG4gICAgfTtcblxuICAgIC8vIOe7keWumuS6i+S7tlxuICAgIERyb3BMaXN0LmZuLmJpbmRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciBtZW51ID0gc2VsZi5tZW51O1xuICAgICAgICB2YXIgY29tbWFuZE5hbWUgPSBtZW51LmNvbW1hbmROYW1lO1xuICAgICAgICB2YXIgc2VsZWN0b3JGb3JFTGVtQ29tbWFuZCA9IHNlbGYuc2VsZWN0b3JGb3JFTGVtQ29tbWFuZDtcbiAgICAgICAgdmFyICRsaXN0ID0gc2VsZi4kbGlzdDtcblxuICAgICAgICAvLyDmiafooYzkuovku7bliY3lkI7nmoTpkqnlrZDlh73mlbBcbiAgICAgICAgdmFyIGJlZm9yZUV2ZW50ID0gc2VsZi5iZWZvcmVFdmVudDtcbiAgICAgICAgdmFyIGFmdGVyRXZlbnQgPSBzZWxmLmFmdGVyRXZlbnQ7XG5cbiAgICAgICAgJGxpc3Qub24oJ2NsaWNrJywgJ2FbY29tbWFuZFZhbHVlXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyDmraPlvI/lkb3ku6TmiafooYzkuYvliY1cbiAgICAgICAgICAgIGlmIChiZWZvcmVFdmVudCAmJiB0eXBlb2YgYmVmb3JlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBiZWZvcmVFdmVudC5jYWxsKGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDmiafooYzlkb3ku6RcbiAgICAgICAgICAgIHZhciBjb21tYW5kVmFsdWUgPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cignY29tbWFuZFZhbHVlJyk7XG4gICAgICAgICAgICBpZiAobWVudS5zZWxlY3RlZCAmJiBlZGl0b3IuaXNSYW5nZUVtcHR5KCkgJiYgc2VsZWN0b3JGb3JFTGVtQ29tbWFuZCkge1xuICAgICAgICAgICAgICAgIC8vIOW9k+WJjeWkhOS6jumAieS4reeKtuaAge+8jOW5tuS4lOmAieS4reWGheWuueS4uuepulxuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kRm9yRWxlbShzZWxlY3RvckZvckVMZW1Db21tYW5kLCBlLCBjb21tYW5kTmFtZSwgY29tbWFuZFZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g5b2T5YmN5pyq5aSE5LqO6YCJ5Lit54q25oCB77yM5oiW6ICF5pyJ6YCJ5Lit5YaF5a6544CC5YiZ5omn6KGM6buY6K6k5ZG95LukXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgY29tbWFuZE5hbWUsIGNvbW1hbmRWYWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOato+W8j+WRveS7pOS5i+WQjueahOmSqeWtkFxuICAgICAgICAgICAgaWYgKGFmdGVyRXZlbnQgJiYgdHlwZW9mIGFmdGVyRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhZnRlckV2ZW50LmNhbGwoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyDngrnlh7vlhbbku5blnLDmlrnvvIznq4vljbPpmpDol48gZHJvcGxpc3RcbiAgICBEcm9wTGlzdC5mbi5pbml0SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLy8g6I635Y+WIGxpc3QgZWxlbVxuICAgICAgICB2YXIgdGhpc0xpc3QgPSBzZWxmLiRsaXN0LmdldCgwKTtcblxuICAgICAgICBFLiRib2R5Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyaWdnZXIgPSBlLnRhcmdldDtcblxuICAgICAgICAgICAgLy8g6I635Y+W6I+c5Y2VZWxlbVxuICAgICAgICAgICAgdmFyIG1lbnUgPSBzZWxmLm1lbnU7XG4gICAgICAgICAgICB2YXIgbWVudURvbTtcbiAgICAgICAgICAgIGlmIChtZW51LnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgbWVudURvbSA9IG1lbnUuJGRvbVNlbGVjdGVkLmdldCgwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVudURvbSA9IG1lbnUuJGRvbU5vcm1hbC5nZXQoMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtZW51RG9tID09PSB0cmlnZ2VyIHx8ICQuY29udGFpbnMobWVudURvbSwgdHJpZ2dlcikpIHtcbiAgICAgICAgICAgICAgICAvLyDor7TmmI7nlLHmnKzoj5zljZXngrnlh7vop6blj5HnmoRcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzTGlzdCA9PT0gdHJpZ2dlciB8fCAkLmNvbnRhaW5zKHRoaXNMaXN0LCB0cmlnZ2VyKSkge1xuICAgICAgICAgICAgICAgIC8vIOivtOaYjueUseacrGxpc3Tngrnlh7vop6blj5HnmoRcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWFtuS7luaDheWGte+8jOmakOiXjyBsaXN0XG4gICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRS4kd2luZG93LnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRS4kd2luZG93Lm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7XG4vLyBkcm9wTGlzdGZuIGFwaVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcbiAgICBcbiAgICB2YXIgRHJvcExpc3QgPSBFLkRyb3BMaXN0O1xuXG4gICAgLy8g5riy5p+TXG4gICAgRHJvcExpc3QuZm4uX3JlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciAkbGlzdCA9IHNlbGYuJGxpc3Q7XG5cbiAgICAgICAgLy8g5riy5p+T5Yiw6aG16Z2iXG4gICAgICAgIGVkaXRvci4kZWRpdG9yQ29udGFpbmVyLmFwcGVuZCgkbGlzdCk7XG5cbiAgICAgICAgLy8g6K6w5b2V54q25oCBXG4gICAgICAgIHNlbGYucmVuZGVyZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvLyDlrprkvY1cbiAgICBEcm9wTGlzdC5mbi5fcG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyICRsaXN0ID0gc2VsZi4kbGlzdDtcbiAgICAgICAgdmFyIGVkaXRvciA9IHNlbGYuZWRpdG9yO1xuICAgICAgICB2YXIgbWVudSA9IHNlbGYubWVudTtcbiAgICAgICAgdmFyICRtZW51Q29udGFpbmVyID0gZWRpdG9yLm1lbnVDb250YWluZXIuJG1lbnVDb250YWluZXI7XG4gICAgICAgIHZhciAkbWVudURvbSA9IG1lbnUuc2VsZWN0ZWQgPyBtZW51LiRkb21TZWxlY3RlZCA6IG1lbnUuJGRvbU5vcm1hbDtcbiAgICAgICAgLy8g5rOo5oSP6L+Z6YeM55qEIG9mZnNldFBhcmVudCgpIOimgei/lOWbniAubWVudS1pdGVtIOeahCBwb3NpdGlvblxuICAgICAgICAvLyDlm6DkuLogLm1lbnUtaXRlbSDmmK8gcG9zaXRpb246cmVsYXRpdmVcbiAgICAgICAgdmFyIG1lbnVQb3NpdGlvbiA9ICRtZW51RG9tLm9mZnNldFBhcmVudCgpLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgLy8g5Y+W5b6XIG1lbnUg55qE5L2N572u44CB5bC65a+45bGe5oCnXG4gICAgICAgIHZhciBtZW51VG9wID0gbWVudVBvc2l0aW9uLnRvcDtcbiAgICAgICAgdmFyIG1lbnVMZWZ0ID0gbWVudVBvc2l0aW9uLmxlZnQ7XG4gICAgICAgIHZhciBtZW51SGVpZ2h0ID0gJG1lbnVEb20ub2Zmc2V0UGFyZW50KCkuaGVpZ2h0KCk7XG4gICAgICAgIHZhciBtZW51V2lkdGggPSAkbWVudURvbS5vZmZzZXRQYXJlbnQoKS53aWR0aCgpO1xuXG4gICAgICAgIC8vIOWPluW+lyBsaXN0IOeahOWwuuWvuOWxnuaAp1xuICAgICAgICB2YXIgbGlzdFdpZHRoID0gJGxpc3Qub3V0ZXJXaWR0aCgpO1xuICAgICAgICAvLyB2YXIgbGlzdEhlaWdodCA9ICRsaXN0Lm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgLy8g5Y+W5b6XICR0eHQg55qE5bC65a+4XG4gICAgICAgIHZhciB0eHRXaWR0aCA9IGVkaXRvci50eHQuJHR4dC5vdXRlcldpZHRoKCk7XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0t5byA5aeL6K6h566XLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vIOWIneatpeiuoeeulyBsaXN0IOS9jee9ruWxnuaAp1xuICAgICAgICB2YXIgdG9wID0gbWVudVRvcCArIG1lbnVIZWlnaHQ7XG4gICAgICAgIHZhciBsZWZ0ID0gbWVudUxlZnQgKyBtZW51V2lkdGgvMjtcbiAgICAgICAgdmFyIG1hcmdpbkxlZnQgPSAwIC0gbWVudVdpZHRoLzI7XG5cbiAgICAgICAgLy8g5aaC5p6c6LaF5Ye65LqG5pyJ6L6555WM77yM5YiZ6KaB5bem56e777yI5LiU5ZKM5Y+z5L6n5pyJ6Ze06ZqZ77yJXG4gICAgICAgIHZhciB2YWxXaXRoVHh0ID0gKGxlZnQgKyBsaXN0V2lkdGgpIC0gdHh0V2lkdGg7XG4gICAgICAgIGlmICh2YWxXaXRoVHh0ID4gLTEwKSB7XG4gICAgICAgICAgICBtYXJnaW5MZWZ0ID0gbWFyZ2luTGVmdCAtIHZhbFdpdGhUeHQgLSAxMDtcbiAgICAgICAgfVxuICAgICAgICAvLyDorr7nva7moLflvI9cbiAgICAgICAgJGxpc3QuY3NzKHtcbiAgICAgICAgICAgIHRvcDogdG9wLFxuICAgICAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgICAgICdtYXJnaW4tbGVmdCc6IG1hcmdpbkxlZnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5aaC5p6c5Zug5Li65ZCR5LiL5rua5Yqo6ICM5a+86Ie06I+c5Y2VZml4ZWTvvIzliJnlho3liqDkuIDmraXlpITnkIZcbiAgICAgICAgaWYgKGVkaXRvci5faXNNZW51Zml4ZWQpIHtcbiAgICAgICAgICAgIHRvcCA9IHRvcCArICgoJG1lbnVDb250YWluZXIub2Zmc2V0KCkudG9wICsgJG1lbnVDb250YWluZXIub3V0ZXJIZWlnaHQoKSkgLSAkbGlzdC5vZmZzZXQoKS50b3ApO1xuXG4gICAgICAgICAgICAvLyDph43mlrDorr7nva50b3BcbiAgICAgICAgICAgICRsaXN0LmNzcyh7XG4gICAgICAgICAgICAgICAgdG9wOiB0b3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOaYvuekulxuICAgIERyb3BMaXN0LmZuLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIG1lbnUgPSBzZWxmLm1lbnU7XG4gICAgICAgIGlmICghc2VsZi5yZW5kZXJlZCkge1xuICAgICAgICAgICAgLy8g56ys5LiA5qyhc2hvd+S5i+WJje+8jOWFiOa4suafk1xuICAgICAgICAgICAgc2VsZi5fcmVuZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5pc1Nob3dpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkbGlzdCA9IHNlbGYuJGxpc3Q7XG4gICAgICAgICRsaXN0LnNob3coKTtcblxuICAgICAgICAvLyDlrprkvY1cbiAgICAgICAgc2VsZi5fcG9zaXRpb24oKTtcblxuICAgICAgICAvLyDorrDlvZXnirbmgIFcbiAgICAgICAgc2VsZi5pc1Nob3dpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIOiPnOWNleeKtuaAgVxuICAgICAgICBtZW51LmFjdGl2ZVN0eWxlKHRydWUpO1xuICAgIH07XG5cbiAgICAvLyDpmpDol49cbiAgICBEcm9wTGlzdC5mbi5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51ID0gc2VsZi5tZW51O1xuICAgICAgICBpZiAoIXNlbGYuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJGxpc3QgPSBzZWxmLiRsaXN0O1xuICAgICAgICAkbGlzdC5oaWRlKCk7XG5cbiAgICAgICAgLy8g6K6w5b2V54q25oCBXG4gICAgICAgIHNlbGYuaXNTaG93aW5nID0gZmFsc2U7XG5cbiAgICAgICAgLy8g6I+c5Y2V54q25oCBXG4gICAgICAgIG1lbnUuYWN0aXZlU3R5bGUoZmFsc2UpO1xuICAgIH07XG59KTtcbi8vIGRyb3BQYW5lbCDmnoTpgKDlh73mlbBcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICAvLyDlrprkuYnmnoTpgKDlh73mlbBcbiAgICB2YXIgRHJvcFBhbmVsID0gZnVuY3Rpb24gKGVkaXRvciwgbWVudSwgb3B0KSB7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgICAgICB0aGlzLm1lbnUgPSBtZW51O1xuICAgICAgICB0aGlzLiRjb250ZW50ID0gb3B0LiRjb250ZW50O1xuICAgICAgICB0aGlzLndpZHRoID0gb3B0LndpZHRoIHx8IDIwMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBvcHQuaGVpZ2h0O1xuICAgICAgICB0aGlzLm9uUmVuZGVyID0gb3B0Lm9uUmVuZGVyO1xuXG4gICAgICAgIC8vIGluaXRcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfTtcblxuICAgIERyb3BQYW5lbC5mbiA9IERyb3BQYW5lbC5wcm90b3R5cGU7XG5cbiAgICAvLyDmmrTpnLLnu5kgRSDljbMgd2luZG93LndhbmdFZGl0b3JcbiAgICBFLkRyb3BQYW5lbCA9IERyb3BQYW5lbDtcbn0pO1xuLy8gZHJvcFBhbmVsIGZuIGJpbmRcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICB2YXIgRHJvcFBhbmVsID0gRS5Ecm9wUGFuZWw7XG5cbiAgICAvLyBpbml0XG4gICAgRHJvcFBhbmVsLmZuLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAvLyDnlJ/miJBkb23lr7nosaFcbiAgICAgICAgc2VsZi5pbml0RE9NKCk7XG5cbiAgICAgICAgLy8g5aOw5piO6ZqQ6JeP55qE5LqL5Lu2XG4gICAgICAgIHNlbGYuaW5pdEhpZGVFdmVudCgpO1xuICAgIH07XG5cbiAgICAvLyBpbml0IERPTVxuICAgIERyb3BQYW5lbC5mbi5pbml0RE9NID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciAkY29udGVudCA9IHNlbGYuJGNvbnRlbnQ7XG4gICAgICAgIHZhciB3aWR0aCA9IHNlbGYud2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQgPSBzZWxmLmhlaWdodDtcbiAgICAgICAgdmFyICRwYW5lbCA9ICQoJzxkaXYgY2xhc3M9XCJ3YW5nRWRpdG9yLWRyb3AtcGFuZWwgY2xlYXJmaXhcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICR0cmlhbmdsZSA9ICQoJzxkaXYgY2xhc3M9XCJ0aXAtdHJpYW5nbGVcIj48L2Rpdj4nKTtcblxuICAgICAgICAkcGFuZWwuY3NzKHtcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ID8gaGVpZ2h0IDogJ2F1dG8nXG4gICAgICAgIH0pO1xuICAgICAgICAkcGFuZWwuYXBwZW5kKCR0cmlhbmdsZSk7XG4gICAgICAgICRwYW5lbC5hcHBlbmQoJGNvbnRlbnQpO1xuXG4gICAgICAgIC8vIOa3u+WKoOWvueixoeaVsOaNrlxuICAgICAgICBzZWxmLiRwYW5lbCA9ICRwYW5lbDtcbiAgICAgICAgc2VsZi4kdHJpYW5nbGUgPSAkdHJpYW5nbGU7XG4gICAgfTtcblxuICAgIC8vIOeCueWHu+WFtuS7luWcsOaWue+8jOeri+WNs+makOiXjyBkcm9wUGFuZWxcbiAgICBEcm9wUGFuZWwuZm4uaW5pdEhpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8vIOiOt+WPliBwYW5lbCBlbGVtXG4gICAgICAgIHZhciB0aGlzUGFubGUgPSBzZWxmLiRwYW5lbC5nZXQoMCk7XG5cbiAgICAgICAgRS4kYm9keS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFzZWxmLmlzU2hvd2luZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmlnZ2VyID0gZS50YXJnZXQ7XG5cbiAgICAgICAgICAgIC8vIOiOt+WPluiPnOWNlWVsZW1cbiAgICAgICAgICAgIHZhciBtZW51ID0gc2VsZi5tZW51O1xuICAgICAgICAgICAgdmFyIG1lbnVEb207XG4gICAgICAgICAgICBpZiAobWVudS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIG1lbnVEb20gPSBtZW51LiRkb21TZWxlY3RlZC5nZXQoMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lbnVEb20gPSBtZW51LiRkb21Ob3JtYWwuZ2V0KDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobWVudURvbSA9PT0gdHJpZ2dlciB8fCAkLmNvbnRhaW5zKG1lbnVEb20sIHRyaWdnZXIpKSB7XG4gICAgICAgICAgICAgICAgLy8g6K+05piO55Sx5pys6I+c5Y2V54K55Ye76Kem5Y+R55qEXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpc1BhbmxlID09PSB0cmlnZ2VyIHx8ICQuY29udGFpbnModGhpc1BhbmxlLCB0cmlnZ2VyKSkge1xuICAgICAgICAgICAgICAgIC8vIOivtOaYjueUseacrHBhbmVs54K55Ye76Kem5Y+R55qEXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDlhbbku5bmg4XlhrXvvIzpmpDol48gcGFuZWxcbiAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBFLiR3aW5kb3cuc2Nyb2xsKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRS4kd2luZG93Lm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7XG4vLyBkcm9wUGFuZWwgZm4gYXBpXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuICAgXG4gICAgdmFyIERyb3BQYW5lbCA9IEUuRHJvcFBhbmVsO1xuXG4gICAgLy8g5riy5p+TXG4gICAgRHJvcFBhbmVsLmZuLl9yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIG9uUmVuZGVyID0gc2VsZi5vblJlbmRlcjtcbiAgICAgICAgdmFyIGVkaXRvciA9IHNlbGYuZWRpdG9yO1xuICAgICAgICB2YXIgJHBhbmVsID0gc2VsZi4kcGFuZWw7XG5cbiAgICAgICAgLy8g5riy5p+T5Yiw6aG16Z2iXG4gICAgICAgIGVkaXRvci4kZWRpdG9yQ29udGFpbmVyLmFwcGVuZCgkcGFuZWwpO1xuXG4gICAgICAgIC8vIOa4suafk+WQjueahOWbnuiwg+S6i+S7tlxuICAgICAgICBvblJlbmRlciAmJiBvblJlbmRlci5jYWxsKHNlbGYpO1xuXG4gICAgICAgIC8vIOiusOW9leeKtuaAgVxuICAgICAgICBzZWxmLnJlbmRlcmVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8g5a6a5L2NXG4gICAgRHJvcFBhbmVsLmZuLl9wb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJHBhbmVsID0gc2VsZi4kcGFuZWw7XG4gICAgICAgIHZhciAkdHJpYW5nbGUgPSBzZWxmLiR0cmlhbmdsZTtcbiAgICAgICAgdmFyIGVkaXRvciA9IHNlbGYuZWRpdG9yO1xuICAgICAgICB2YXIgJG1lbnVDb250YWluZXIgPSBlZGl0b3IubWVudUNvbnRhaW5lci4kbWVudUNvbnRhaW5lcjtcbiAgICAgICAgdmFyIG1lbnUgPSBzZWxmLm1lbnU7XG4gICAgICAgIHZhciAkbWVudURvbSA9IG1lbnUuc2VsZWN0ZWQgPyBtZW51LiRkb21TZWxlY3RlZCA6IG1lbnUuJGRvbU5vcm1hbDtcbiAgICAgICAgLy8g5rOo5oSP6L+Z6YeM55qEIG9mZnNldFBhcmVudCgpIOimgei/lOWbniAubWVudS1pdGVtIOeahCBwb3NpdGlvblxuICAgICAgICAvLyDlm6DkuLogLm1lbnUtaXRlbSDmmK8gcG9zaXRpb246cmVsYXRpdmVcbiAgICAgICAgdmFyIG1lbnVQb3NpdGlvbiA9ICRtZW51RG9tLm9mZnNldFBhcmVudCgpLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgLy8g5Y+W5b6XIG1lbnUg55qE5L2N572u44CB5bC65a+45bGe5oCnXG4gICAgICAgIHZhciBtZW51VG9wID0gbWVudVBvc2l0aW9uLnRvcDtcbiAgICAgICAgdmFyIG1lbnVMZWZ0ID0gbWVudVBvc2l0aW9uLmxlZnQ7XG4gICAgICAgIHZhciBtZW51SGVpZ2h0ID0gJG1lbnVEb20ub2Zmc2V0UGFyZW50KCkuaGVpZ2h0KCk7XG4gICAgICAgIHZhciBtZW51V2lkdGggPSAkbWVudURvbS5vZmZzZXRQYXJlbnQoKS53aWR0aCgpO1xuXG4gICAgICAgIC8vIOWPluW+lyBwYW5lbCDnmoTlsLrlr7jlsZ7mgKdcbiAgICAgICAgdmFyIHBhbmVsV2lkdGggPSAkcGFuZWwub3V0ZXJXaWR0aCgpO1xuICAgICAgICAvLyB2YXIgcGFuZWxIZWlnaHQgPSAkcGFuZWwub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICAvLyDlj5blvpcgJHR4dCDnmoTlsLrlr7hcbiAgICAgICAgdmFyIHR4dFdpZHRoID0gZWRpdG9yLnR4dC4kdHh0Lm91dGVyV2lkdGgoKTtcblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS3lvIDlp4vorqHnrpctLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8g5Yid5q2l6K6h566XIHBhbmVsIOS9jee9ruWxnuaAp1xuICAgICAgICB2YXIgdG9wID0gbWVudVRvcCArIG1lbnVIZWlnaHQ7XG4gICAgICAgIHZhciBsZWZ0ID0gbWVudUxlZnQgKyBtZW51V2lkdGgvMjtcbiAgICAgICAgdmFyIG1hcmdpbkxlZnQgPSAwIC0gcGFuZWxXaWR0aC8yO1xuICAgICAgICB2YXIgbWFyZ2luTGVmdDIgPSBtYXJnaW5MZWZ0OyAgLy8g5LiL5paH55So5LqO5ZKMIG1hcmdpbkxlZnQg5q+U6L6D77yM5p2l6K6+572u5LiJ6KeS5b2idGlw55qE5L2N572uXG5cbiAgICAgICAgLy8g5aaC5p6c6LaF5Ye65LqG5bem6L6555WM77yM5YiZ56e75Yqo5Zue5p2l77yI6KaB5ZKM5bem5L6n5pyJMTBweOmXtOmame+8iVxuICAgICAgICBpZiAoKDAgLSBtYXJnaW5MZWZ0KSA+IChsZWZ0IC0gMTApKSB7XG4gICAgICAgICAgICBtYXJnaW5MZWZ0ID0gMCAtIChsZWZ0IC0gMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5aaC5p6c6LaF5Ye65LqG5pyJ6L6555WM77yM5YiZ6KaB5bem56e777yI5LiU5ZKM5Y+z5L6n5pyJMTBweOmXtOmame+8iVxuICAgICAgICB2YXIgdmFsV2l0aFR4dCA9IChsZWZ0ICsgcGFuZWxXaWR0aCArIG1hcmdpbkxlZnQpIC0gdHh0V2lkdGg7XG4gICAgICAgIGlmICh2YWxXaXRoVHh0ID4gLTEwKSB7XG4gICAgICAgICAgICBtYXJnaW5MZWZ0ID0gbWFyZ2luTGVmdCAtIHZhbFdpdGhUeHQgLSAxMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOiuvue9ruagt+W8j1xuICAgICAgICAkcGFuZWwuY3NzKHtcbiAgICAgICAgICAgIHRvcDogdG9wLFxuICAgICAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgICAgICdtYXJnaW4tbGVmdCc6IG1hcmdpbkxlZnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5aaC5p6c5Zug5Li65ZCR5LiL5rua5Yqo6ICM5a+86Ie06I+c5Y2VZml4ZWTvvIzliJnlho3liqDkuIDmraXlpITnkIZcbiAgICAgICAgaWYgKGVkaXRvci5faXNNZW51Zml4ZWQpIHtcbiAgICAgICAgICAgIHRvcCA9IHRvcCArICgoJG1lbnVDb250YWluZXIub2Zmc2V0KCkudG9wICsgJG1lbnVDb250YWluZXIub3V0ZXJIZWlnaHQoKSkgLSAkcGFuZWwub2Zmc2V0KCkudG9wKTtcblxuICAgICAgICAgICAgLy8g6YeN5paw6K6+572udG9wXG4gICAgICAgICAgICAkcGFuZWwuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IHRvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDorr7nva7kuInop5LlvaIgdGlwIOeahOS9jee9rlxuICAgICAgICAkdHJpYW5nbGUuY3NzKHtcbiAgICAgICAgICAgICdtYXJnaW4tbGVmdCc6IG1hcmdpbkxlZnQyIC0gbWFyZ2luTGVmdCAtIDVcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGZvY3VzIOesrOS4gOS4qiBpbnB1dFxuICAgIERyb3BQYW5lbC5mbi5mb2N1c0ZpcnN0SW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyICRwYW5lbCA9IHNlbGYuJHBhbmVsO1xuICAgICAgICAkcGFuZWwuZmluZCgnaW5wdXRbdHlwZT10ZXh0XSx0ZXh0YXJlYScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoJGlucHV0LmF0dHIoJ2Rpc2FibGVkJykgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICRpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIOaYvuekulxuICAgIERyb3BQYW5lbC5mbi5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51ID0gc2VsZi5tZW51O1xuICAgICAgICBpZiAoIXNlbGYucmVuZGVyZWQpIHtcbiAgICAgICAgICAgIC8vIOesrOS4gOasoXNob3fkuYvliY3vvIzlhYjmuLLmn5NcbiAgICAgICAgICAgIHNlbGYuX3JlbmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJHBhbmVsID0gc2VsZi4kcGFuZWw7XG4gICAgICAgICRwYW5lbC5zaG93KCk7XG5cbiAgICAgICAgLy8g5a6a5L2NXG4gICAgICAgIHNlbGYuX3Bvc2l0aW9uKCk7XG5cbiAgICAgICAgLy8g6K6w5b2V54q25oCBXG4gICAgICAgIHNlbGYuaXNTaG93aW5nID0gdHJ1ZTtcblxuICAgICAgICAvLyDoj5zljZXnirbmgIFcbiAgICAgICAgbWVudS5hY3RpdmVTdHlsZSh0cnVlKTtcblxuICAgICAgICBpZiAoRS53M2NSYW5nZSkge1xuICAgICAgICAgICAgLy8g6auY57qn5rWP6KeI5ZmoXG4gICAgICAgICAgICBzZWxmLmZvY3VzRmlyc3RJbnB1dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g5YW85a65IElFOCBpbnB1dCBwbGFjZWhvbGRlclxuICAgICAgICAgICAgRS5wbGFjZWhvbGRlckZvcklFOCgkcGFuZWwpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOmakOiXj1xuICAgIERyb3BQYW5lbC5mbi5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51ID0gc2VsZi5tZW51O1xuICAgICAgICBpZiAoIXNlbGYuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJHBhbmVsID0gc2VsZi4kcGFuZWw7XG4gICAgICAgICRwYW5lbC5oaWRlKCk7XG5cbiAgICAgICAgLy8g6K6w5b2V54q25oCBXG4gICAgICAgIHNlbGYuaXNTaG93aW5nID0gZmFsc2U7XG5cbiAgICAgICAgLy8g6I+c5Y2V54q25oCBXG4gICAgICAgIG1lbnUuYWN0aXZlU3R5bGUoZmFsc2UpO1xuICAgIH07XG5cbn0pO1xuLy8gbW9kYWwg5p6E6YCg5Ye95pWwXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8g5a6a5LmJ5p6E6YCg5Ye95pWwXG4gICAgdmFyIE1vZGFsID0gZnVuY3Rpb24gKGVkaXRvciwgbWVudSwgb3B0KSB7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgICAgICB0aGlzLm1lbnUgPSBtZW51O1xuICAgICAgICB0aGlzLiRjb250ZW50ID0gb3B0LiRjb250ZW50O1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH07XG5cbiAgICBNb2RhbC5mbiA9IE1vZGFsLnByb3RvdHlwZTtcblxuICAgIC8vIOaatOmcsue7mSBFIOWNsyB3aW5kb3cud2FuZ0VkaXRvclxuICAgIEUuTW9kYWwgPSBNb2RhbDtcbn0pO1xuLy8gbW9kYWwgZm4gYmluZFxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIHZhciBNb2RhbCA9IEUuTW9kYWw7XG5cbiAgICBNb2RhbC5mbi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyWZG9tXG4gICAgICAgIHNlbGYuaW5pdERvbSgpO1xuXG4gICAgICAgIC8vIOWIneWni+WMlumakOiXj+S6i+S7tlxuICAgICAgICBzZWxmLmluaXRIaWRlRXZlbnQoKTtcbiAgICB9O1xuXG4gICAgLy8g5Yid5aeL5YyWZG9tXG4gICAgTW9kYWwuZm4uaW5pdERvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJGNvbnRlbnQgPSBzZWxmLiRjb250ZW50O1xuICAgICAgICB2YXIgJG1vZGFsID0gJCgnPGRpdiBjbGFzcz1cIndhbmdFZGl0b3ItbW9kYWxcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRjbG9zZSA9ICQoJzxkaXYgY2xhc3M9XCJ3YW5nRWRpdG9yLW1vZGFsLWNsb3NlXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWNhbmNlbC1jaXJjbGVcIj48L2k+PC9kaXY+Jyk7XG5cbiAgICAgICAgJG1vZGFsLmFwcGVuZCgkY2xvc2UpO1xuICAgICAgICAkbW9kYWwuYXBwZW5kKCRjb250ZW50KTtcblxuICAgICAgICAvLyDorrDlvZXmlbDmja5cbiAgICAgICAgc2VsZi4kbW9kYWwgPSAkbW9kYWw7XG4gICAgICAgIHNlbGYuJGNsb3NlID0gJGNsb3NlO1xuICAgIH07XG5cbiAgICAvLyDliJ3lp4vljJbpmpDol4/kuovku7ZcbiAgICBNb2RhbC5mbi5pbml0SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciAkY2xvc2UgPSBzZWxmLiRjbG9zZTtcbiAgICAgICAgdmFyIG1vZGFsID0gc2VsZi4kbW9kYWwuZ2V0KDApO1xuXG4gICAgICAgIC8vIOeCueWHuyAkY2xvc2Ug5oyJ6ZKu77yM6ZqQ6JePXG4gICAgICAgICRjbG9zZS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g54K55Ye75YW25LuW6YOo5YiG77yM6ZqQ6JePXG4gICAgICAgIEUuJGJvZHkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5pc1Nob3dpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJpZ2dlciA9IGUudGFyZ2V0O1xuXG4gICAgICAgICAgICAvLyDojrflj5boj5zljZVlbGVtXG4gICAgICAgICAgICB2YXIgbWVudSA9IHNlbGYubWVudTtcbiAgICAgICAgICAgIHZhciBtZW51RG9tO1xuICAgICAgICAgICAgaWYgKG1lbnUpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVudS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBtZW51RG9tID0gbWVudS4kZG9tU2VsZWN0ZWQuZ2V0KDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnVEb20gPSBtZW51LiRkb21Ob3JtYWwuZ2V0KDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChtZW51RG9tID09PSB0cmlnZ2VyIHx8ICQuY29udGFpbnMobWVudURvbSwgdHJpZ2dlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g6K+05piO55Sx5pys6I+c5Y2V54K55Ye76Kem5Y+R55qEXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtb2RhbCA9PT0gdHJpZ2dlciB8fCAkLmNvbnRhaW5zKG1vZGFsLCB0cmlnZ2VyKSkge1xuICAgICAgICAgICAgICAgIC8vIOivtOaYjueUseacrHBhbmVs54K55Ye76Kem5Y+R55qEXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDlhbbku5bmg4XlhrXvvIzpmpDol48gcGFuZWxcbiAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG4vLyBtb2RhbCBmbiBhcGlcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICB2YXIgTW9kYWwgPSBFLk1vZGFsO1xuXG4gICAgLy8g5riy5p+TXG4gICAgTW9kYWwuZm4uX3JlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciAkbW9kYWwgPSBzZWxmLiRtb2RhbDtcblxuICAgICAgICAvLyAkbW9kYWznmoR6LWluZGV477yM5Zyo6YWN572u55qEei1pbmRleOWfuuehgOS4iuWGjSArMTBcbiAgICAgICAgJG1vZGFsLmNzcygnei1pbmRleCcsIGVkaXRvci5jb25maWcuemluZGV4ICsgMTAgKyAnJyk7XG5cbiAgICAgICAgLy8g5riy5p+T5YiwYm9keeacgOWQjumdolxuICAgICAgICBFLiRib2R5LmFwcGVuZCgkbW9kYWwpO1xuXG4gICAgICAgIC8vIOiusOW9leeKtuaAgVxuICAgICAgICBzZWxmLnJlbmRlcmVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8g5a6a5L2NXG4gICAgTW9kYWwuZm4uX3Bvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciAkbW9kYWwgPSBzZWxmLiRtb2RhbDtcbiAgICAgICAgdmFyIHRvcCA9ICRtb2RhbC5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciB3aWR0aCA9ICRtb2RhbC5vdXRlcldpZHRoKCk7XG4gICAgICAgIHZhciBoZWlnaHQgPSAkbW9kYWwub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgdmFyIG1hcmdpbkxlZnQgPSAwIC0gKHdpZHRoIC8gMik7XG4gICAgICAgIHZhciBtYXJnaW5Ub3AgPSAwIC0gKGhlaWdodCAvIDIpO1xuICAgICAgICB2YXIgc1RvcCA9IEUuJHdpbmRvdy5zY3JvbGxUb3AoKTtcblxuICAgICAgICAvLyDkv53or4Ftb2RhbOacgOmhtumDqO+8jOS4jei2hei/h+a1j+iniOWZqOS4iui+ueahhlxuICAgICAgICBpZiAoKGhlaWdodCAvIDIpID4gdG9wKSB7XG4gICAgICAgICAgICBtYXJnaW5Ub3AgPSAwIC0gdG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAnbWFyZ2luLWxlZnQnOiBtYXJnaW5MZWZ0ICsgJ3B4JyxcbiAgICAgICAgICAgICdtYXJnaW4tdG9wJzogKG1hcmdpblRvcCArIHNUb3ApICsgJ3B4J1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8g5pi+56S6XG4gICAgTW9kYWwuZm4uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgbWVudSA9IHNlbGYubWVudTtcbiAgICAgICAgaWYgKCFzZWxmLnJlbmRlcmVkKSB7XG4gICAgICAgICAgICAvLyDnrKzkuIDmrKFzaG935LmL5YmN77yM5YWI5riy5p+TXG4gICAgICAgICAgICBzZWxmLl9yZW5kZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlzU2hvd2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIOiusOW9leeKtuaAgVxuICAgICAgICBzZWxmLmlzU2hvd2luZyA9IHRydWU7XG5cbiAgICAgICAgdmFyICRtb2RhbCA9IHNlbGYuJG1vZGFsO1xuICAgICAgICAkbW9kYWwuc2hvdygpO1xuXG4gICAgICAgIC8vIOWumuS9jVxuICAgICAgICBzZWxmLl9wb3NpdGlvbigpO1xuXG4gICAgICAgIC8vIOa/gOa0u+iPnOWNleeKtuaAgVxuICAgICAgICBtZW51ICYmIG1lbnUuYWN0aXZlU3R5bGUodHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIOmakOiXj1xuICAgIE1vZGFsLmZuLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIG1lbnUgPSBzZWxmLm1lbnU7XG4gICAgICAgIGlmICghc2VsZi5pc1Nob3dpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyDorrDlvZXnirbmgIFcbiAgICAgICAgc2VsZi5pc1Nob3dpbmcgPSBmYWxzZTtcblxuICAgICAgICAvLyDpmpDol49cbiAgICAgICAgdmFyICRtb2RhbCA9IHNlbGYuJG1vZGFsO1xuICAgICAgICAkbW9kYWwuaGlkZSgpO1xuXG4gICAgICAgIC8vIOiPnOWNleeKtuaAgVxuICAgICAgICBtZW51ICYmIG1lbnUuYWN0aXZlU3R5bGUoZmFsc2UpO1xuICAgIH07XG59KTtcbi8vIHR4dCDmnoTpgKDlh73mlbBcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICAvLyDlrprkuYnmnoTpgKDlh73mlbBcbiAgICB2YXIgVHh0ID0gZnVuY3Rpb24gKGVkaXRvcikge1xuICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcblxuICAgICAgICAvLyDliJ3lp4vljJZcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfTtcblxuICAgIFR4dC5mbiA9IFR4dC5wcm90b3R5cGU7XG5cbiAgICAvLyDmmrTpnLLnu5kgRSDljbMgd2luZG93LndhbmdFZGl0b3JcbiAgICBFLlR4dCA9IFR4dDtcbn0pO1xuLy8gVHh0LmZuIGJpbmQgZm5cbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICB2YXIgVHh0ID0gRS5UeHQ7XG5cbiAgICAvLyDliJ3lp4vljJZcbiAgICBUeHQuZm4uaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciAkdmFsdWVDb250YWluZXIgPSBlZGl0b3IuJHZhbHVlQ29udGFpbmVyO1xuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gZWRpdG9yLmdldEluaXRWYWx1ZSgpO1xuICAgICAgICB2YXIgJHR4dDtcblxuICAgICAgICBpZiAoJHZhbHVlQ29udGFpbmVyLmdldCgwKS5ub2RlTmFtZSA9PT0gJ0RJVicpIHtcbiAgICAgICAgICAgIC8vIOWmguaenOS8oOWFpeeUn+aIkOe8lui+keWZqOeahOWFg+e0oOWwseaYr2Rpdu+8jOWImeebtOaOpeS9v+eUqFxuICAgICAgICAgICAgJHR4dCA9ICR2YWx1ZUNvbnRhaW5lcjtcbiAgICAgICAgICAgICR0eHQuYWRkQ2xhc3MoXCJ3YW5nRWRpdG9yLXR4dFwiKTtcbiAgICAgICAgICAgICR0eHQuYXR0cignY29udGVudEVkaXRhYmxlJywgJ3RydWUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOWmguaenOS4jeaYr2Rpdu+8iOaYr3RleHRhcmVh77yJ77yM5YiZ5Yib5bu65LiA5LiqZGl2XG4gICAgICAgICAgICAkdHh0ID0gJChcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIndhbmdFZGl0b3ItdHh0XCIgY29udGVudEVkaXRhYmxlPVwidHJ1ZVwiPicgK1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6K+V5Zu+5pyA5ZCO5o+S5YWl5LiA5Liq56m66KGM77yMcmVhZHnkuYvlkI7miY3ooYxcbiAgICAgICAgZWRpdG9yLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaW5zZXJ0RW1wdHlQKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNlbGYuJHR4dCA9ICR0eHQ7XG5cbiAgICAgICAgLy8g5Yig6Zmk5pe277yM5aaC5p6c5rKh5pyJ5YaF5a655LqG77yM5bCx5re75Yqg5LiA5LiqIDxwPjxicj48L3A+XG4gICAgICAgIHNlbGYuY29udGVudEVtcHR5SGFuZGxlKCk7XG5cbiAgICAgICAgLy8gZW50ZXLml7bvvIzkuI3og73kvb/nlKggZGl2IOaNouihjFxuICAgICAgICBzZWxmLmJpbmRFbnRlckZvckRpdigpO1xuXG4gICAgICAgIC8vIGVudGVy5pe277yM55SoIHAg5YyF6KO5IHRleHRcbiAgICAgICAgc2VsZi5iaW5kRW50ZXJGb3JUZXh0KCk7XG5cbiAgICAgICAgLy8gdGFiIOaPkuWFpTTkuKrnqbrmoLxcbiAgICAgICAgc2VsZi5iaW5kVGFiRXZlbnQoKTtcblxuICAgICAgICAvLyDlpITnkIbnspjotLTlhoXlrrlcbiAgICAgICAgc2VsZi5iaW5kUGFzdGVGaWx0ZXIoKTtcblxuICAgICAgICAvLyAkdHh0LmZvcm1hdFRleHQoKSDmlrnms5VcbiAgICAgICAgc2VsZi5iaW5kRm9ybWF0VGV4dCgpO1xuXG4gICAgICAgIC8vIOWumuS5iSAkdHh0Lmh0bWwoKSDmlrnms5VcbiAgICAgICAgc2VsZi5iaW5kSHRtbCgpO1xuICAgIH07XG5cbiAgICAvLyDliKDpmaTml7bvvIzlpoLmnpzmsqHmnInlhoXlrrnkuobvvIzlsLHmt7vliqDkuIDkuKogPHA+PGJyPjwvcD5cbiAgICBUeHQuZm4uY29udGVudEVtcHR5SGFuZGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBlZGl0b3IgPSBzZWxmLmVkaXRvcjtcbiAgICAgICAgdmFyICR0eHQgPSBzZWxmLiR0eHQ7XG4gICAgICAgIHZhciAkcDtcblxuICAgICAgICAkdHh0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgIT09IDgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHh0SHRtbCA9ICQudHJpbSgkdHh0Lmh0bWwoKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIGlmICh0eHRIdG1sID09PSAnPHA+PGJyPjwvcD4nKSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5pyA5ZCO6L+Y5Ymp5L2Z5LiA5Liq56m66KGM77yM5bCx5LiN5YaN57un57ut5Yig6Zmk5LqGXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHR4dC5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSAhPT0gOCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0eHRIdG1sID0gJC50cmltKCR0eHQuaHRtbCgpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgLy8gZmbml7bnlKggdHh0SHRtbCA9PT0gJzxicj4nIOWIpOaWre+8jOWFtuS7lueUqCAhdHh0SHRtbCDliKTmlq1cbiAgICAgICAgICAgIGlmICghdHh0SHRtbCB8fCB0eHRIdG1sID09PSAnPGJyPicpIHtcbiAgICAgICAgICAgICAgICAvLyDlhoXlrrnnqbrkuoZcbiAgICAgICAgICAgICAgICAkcCA9ICQoJzxwPjxici8+PC9wPicpO1xuICAgICAgICAgICAgICAgICR0eHQuaHRtbCgnJyk7IC8vIOS4gOWumuimgeWFiOa4heepuu+8jOWQpuWImeWcqCBmZiDkuIvmnInpl67pophcbiAgICAgICAgICAgICAgICAkdHh0LmFwcGVuZCgkcCk7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlc3RvcmVTZWxlY3Rpb25CeUVsZW0oJHAuZ2V0KDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGVudGVy5pe277yM5LiN6IO95L2/55SoIGRpdiDmjaLooYxcbiAgICBUeHQuZm4uYmluZEVudGVyRm9yRGl2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFncyA9IEUuY29uZmlnLmxlZ2FsVGFnczsgLy8g6YWN572u5Lit57yW6L6R5Zmo6KaB5rGC55qE5ZCI5rOV5qCH562+77yM5aaCIHAgaGVhZCB0YWJsZSBibG9ja3F1b3RlIHVsIG9sIOetiVxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBlZGl0b3IgPSBzZWxmLmVkaXRvcjtcbiAgICAgICAgdmFyICR0eHQgPSBzZWxmLiR0eHQ7XG5cbiAgICAgICAgdmFyICRrZXlkb3duRGl2RWxlbTtcbiAgICAgICAgZnVuY3Rpb24gZGl2SGFuZGxlcigpIHtcbiAgICAgICAgICAgIGlmICghJGtleWRvd25EaXZFbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgJHBFbGVtID0gJCgnPHA+JyArICRrZXlkb3duRGl2RWxlbS5odG1sKCkgKyAnPC9wPicpO1xuICAgICAgICAgICAgJGtleWRvd25EaXZFbGVtLmFmdGVyKCRwRWxlbSk7XG4gICAgICAgICAgICAka2V5ZG93bkRpdkVsZW0ucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAkdHh0Lm9uKCdrZXlkb3duIGtleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgIT09IDEzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5p+l5om+5ZCI5rOV5qCH562+XG4gICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZW0gPSBlZGl0b3IuZ2V0TGVnYWxUYWdzKHJhbmdlRWxlbSk7XG4gICAgICAgICAgICB2YXIgJHRhcmdldEVsZW07XG4gICAgICAgICAgICB2YXIgJHBFbGVtO1xuXG4gICAgICAgICAgICBpZiAoIXRhcmdldEVsZW0pIHtcbiAgICAgICAgICAgICAgICAvLyDmsqHmib7liLDlkIjms5XmoIfnrb7vvIzlsLHljrvmn6Xmib4gZGl2XG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAnZGl2Jyk7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHRhcmdldEVsZW0gPSAkKHRhcmdldEVsZW0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2tleWRvd24nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOW8guatpeaJp+ihjO+8iOWQjOatpeaJp+ihjOS8muWHuueOsOmXrumimO+8iVxuICAgICAgICAgICAgICAgICAgICAka2V5ZG93bkRpdkVsZW0gPSAkdGFyZ2V0RWxlbTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChkaXZIYW5kbGVyLCAwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZS50eXBlID09PSAna2V5dXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWwhiBkaXYg55qE5YaF5a6556e75Yqo5YiwIHAg6YeM6Z2i77yM5bm256e76ZmkIGRpdlxuICAgICAgICAgICAgICAgICAgICAkcEVsZW0gPSAkKCc8cD4nICsgJHRhcmdldEVsZW0uaHRtbCgpICsgJzwvcD4nKTtcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldEVsZW0uYWZ0ZXIoJHBFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldEVsZW0ucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5Zue6L2m57uT5p2f77yM5bCG6YCJ5Yy65a6a5L2N5Yiw6KGM6aaWXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXN0b3JlU2VsZWN0aW9uQnlFbGVtKCRwRWxlbS5nZXQoMCksICdzdGFydCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGVudGVy5pe277yM55SoIHAg5YyF6KO5IHRleHRcbiAgICBUeHQuZm4uYmluZEVudGVyRm9yVGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJHR4dCA9IHNlbGYuJHR4dDtcbiAgICAgICAgdmFyIGhhbmRsZTtcbiAgICAgICAgJHR4dC5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSAhPT0gMTMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWhhbmRsZSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLndyYXBJbWdBbmRUZXh0KCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoaGFuZGxlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIHRhYiDml7bvvIzmj5LlhaU05Liq56m65qC8XG4gICAgVHh0LmZuLmJpbmRUYWJFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciAkdHh0ID0gc2VsZi4kdHh0O1xuXG4gICAgICAgICR0eHQub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSAhPT0gOSkge1xuICAgICAgICAgICAgICAgIC8vIOWPquebkeWQrCB0YWIg5oyJ6ZKuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5aaC5p6c5rWP6KeI5Zmo5pSv5oyBIGluc2VydEh0bWwg5YiZ5o+S5YWlNOS4quepuuagvOOAguWmguaenOS4jeaUr+aMge+8jOWwseS4jeeuoeS6hlxuICAgICAgICAgICAgaWYgKGVkaXRvci5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ2luc2VydEh0bWwnKSkge1xuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdpbnNlcnRIdG1sJywgJyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8g5aSE55CG57KY6LS05YaF5a65XG4gICAgVHh0LmZuLmJpbmRQYXN0ZUZpbHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciByZXN1bHRIdG1sID0gJyc7ICAvL+WtmOWCqOacgOe7iOeahOe7k+aenFxuICAgICAgICB2YXIgJHR4dCA9IHNlbGYuJHR4dDtcbiAgICAgICAgdmFyIGxlZ2FsVGFncyA9IGVkaXRvci5jb25maWcubGVnYWxUYWdzO1xuICAgICAgICB2YXIgbGVnYWxUYWdBcnIgPSBsZWdhbFRhZ3Muc3BsaXQoJywnKTtcblxuICAgICAgICAkdHh0Lm9uKCdwYXN0ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIWVkaXRvci5jb25maWcucGFzdGVGaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyDphY3nva7kuK3lj5bmtojkuobnspjotLTov4fmu6RcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50Tm9kZU5hbWUgPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCkubm9kZU5hbWU7XG4gICAgICAgICAgICBpZiAoY3VycmVudE5vZGVOYW1lID09PSAnVEQnIHx8IGN1cnJlbnROb2RlTmFtZSA9PT0gJ1RIJykge1xuICAgICAgICAgICAgICAgIC8vIOWcqOihqOagvOeahOWNleWFg+agvOS4reeymOi0tO+8jOW/veeVpeaJgOacieWGheWuueOAguWQpuWImeS8muWHuueOsOW8guW4uOaDheWGtVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzdWx0SHRtbCA9ICcnOyAvLyDlhYjmuIXnqbogcmVzdWx0SHRtbFxuXG4gICAgICAgICAgICB2YXIgcGFzdGVIdG1sLCAkcGFzdGUsIGRvY1NwbGl0SHRtbDtcbiAgICAgICAgICAgIHZhciBkYXRhID0gZS5jbGlwYm9hcmREYXRhIHx8IGUub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhO1xuICAgICAgICAgICAgdmFyIGllRGF0YSA9IHdpbmRvdy5jbGlwYm9hcmREYXRhO1xuXG4gICAgICAgICAgICBpZiAoZWRpdG9yLmNvbmZpZy5wYXN0ZVRleHQpIHtcbiAgICAgICAgICAgICAgICAvLyDlj6rnspjotLTnuq/mlofmnKxcblxuICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuZ2V0RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3M2NcbiAgICAgICAgICAgICAgICAgICAgcGFzdGVIdG1sID0gZGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZURhdGEgJiYgaWVEYXRhLmdldERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSUVcbiAgICAgICAgICAgICAgICAgICAgcGFzdGVIdG1sID0gaWVEYXRhLmdldERhdGEoJ3RleHQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5bmg4XlhrVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOaLvOaOpeS4uiA8cD4g5qCH562+XG4gICAgICAgICAgICAgICAgaWYgKHBhc3RlSHRtbCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRIdG1sID0gJzxwPicgKyBwYXN0ZUh0bWwgKyAnPC9wPic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOeymOi0tOi/h+a7pOS6huagt+W8j+eahOOAgeWPquacieagh+etvueahCBodG1sXG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmdldERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdzNjXG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W57KY6LS06L+H5p2l55qEaHRtbFxuICAgICAgICAgICAgICAgICAgICBwYXN0ZUh0bWwgPSBkYXRhLmdldERhdGEoJ3RleHQvaHRtbCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOi/h+a7pOS7jiB3b3JkIGV4Y2VsIOeymOi0tOi/h+adpeeahOS5seeggVxuICAgICAgICAgICAgICAgICAgICBkb2NTcGxpdEh0bWwgPSBwYXN0ZUh0bWwuc3BsaXQoJzwvaHRtbD4nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY1NwbGl0SHRtbC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3RlSHRtbCA9IGRvY1NwbGl0SHRtbFswXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXN0ZUh0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIm+W7umRvbVxuICAgICAgICAgICAgICAgICAgICAgICAgJHBhc3RlID0gJCgnPGRpdj4nICsgcGFzdGVIdG1sICsgJzwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG77yM5bm25bCG57uT5p6c5a2Y5YKo5YiwIHJlc3VsdEh0bWwg44CO5YWo5bGA44CP5Y+Y6YePXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGUoJHBhc3RlLmdldCgwKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlvpfkuI3liLBodG1s77yM6K+V5Zu+6I635Y+WdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzdGVIdG1sID0gZGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFzdGVIdG1sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pu/5o2i54m55q6K5a2X56ymXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzdGVIdG1sID0gcGFzdGVIdG1sLnJlcGxhY2UoL1sgXS9nLCAnJm5ic3A7JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzwvcD48cD4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmi7zmjqVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRIdG1sID0gJzxwPicgKyBwYXN0ZUh0bWwgKyAnPC9wPic7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmn6Xor6Lpk77mjqVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRIdG1sID0gcmVzdWx0SHRtbC5yZXBsYWNlKC88cD4oaHR0cHM/OlxcL1xcLy4qPyk8XFwvcD4vaWcsIGZ1bmN0aW9uIChtYXRjaCwgbGluaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxwPjxhIGhyZWY9XCInICsgbGluayArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nICsgbGluayArICc8L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGllRGF0YSAmJiBpZURhdGEuZ2V0RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJRSDnm7TmjqXku47liarliIfmnb/kuK3lj5blh7rnuq/mlofmnKzmoLzlvI9cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0SHRtbCA9IGllRGF0YS5nZXREYXRhKCd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0SHRtbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIOaLvOaOpeS4uiA8cD4g5qCH562+XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEh0bWwgPSAnPHA+JyArIHJlc3VsdEh0bWwgKyAnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEh0bWwgPSByZXN1bHRIdG1sLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxuJywgJ2cnKSwgJzwvcD48cD4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5bmg4XlhrVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5omn6KGM5ZG95LukXG4gICAgICAgICAgICBpZiAocmVzdWx0SHRtbCkge1xuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdpbnNlcnRIdG1sJywgcmVzdWx0SHRtbCk7XG5cbiAgICAgICAgICAgICAgICAvLyDliKDpmaTlhoXlrrnkuLrnqbrnmoQgcCDlkozltYzlpZfnmoQgcFxuICAgICAgICAgICAgICAgIHNlbGYuY2xlYXJFbXB0eU9yTmVzdFAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5aSE55CG57KY6LS055qE5YaF5a65XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZShlbGVtKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW0gfHwgIWVsZW0ubm9kZVR5cGUgfHwgIWVsZW0ubm9kZU5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgJGVsZW07XG4gICAgICAgICAgICB2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2YXIgbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXNDbG9uZTtcblxuICAgICAgICAgICAgLy8g5Y+q5aSE55CG5paH5pys5ZKM5pmu6YCabm9kZeagh+etvlxuICAgICAgICAgICAgaWYgKG5vZGVUeXBlICE9PSAzICYmIG5vZGVUeXBlICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkZWxlbSA9ICQoZWxlbSk7XG5cbiAgICAgICAgICAgIC8vIOWmguaenOaYr+WuueWZqO+8jOWImee7p+e7rea3seW6pumBjeWOhlxuICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnZGl2Jykge1xuICAgICAgICAgICAgICAgIGNoaWxkTm9kZXNDbG9uZSA9IFtdO1xuICAgICAgICAgICAgICAgICQuZWFjaChlbGVtLmNoaWxkTm9kZXMsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbGVtLmNoaWxkTm9kZXMg5Y+v6I635Y+WVEVYVOiKgueCue+8jOiAjCAkZWxlbS5jaGlsZHJlbigpIOWwseiOt+WPluS4jeWIsFxuICAgICAgICAgICAgICAgICAgICAvLyDlhYjlsIYgZWxlbS5jaGlsZE5vZGVzIOaLt+i0neS4gOS7ve+8jOS4gOmdouWcqOW+queOr+mAkuW9kui/h+eoi+S4rSBlbGVtIOWPkeeUn+WPmOWMllxuICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGVzQ2xvbmUucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyDpgY3ljoblrZDlhYPntKDvvIzmiafooYzmk43kvZxcbiAgICAgICAgICAgICAgICAkLmVhY2goY2hpbGROb2Rlc0Nsb25lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChsZWdhbFRhZ0Fyci5pbmRleE9mKG5vZGVOYW1lKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5ZCI5rOV5qCH562+5LmL5YaF55qE77yM5YiZ5qC55o2u5YWD57Sg57G75Z6L77yM6I635Y+W5YC8XG4gICAgICAgICAgICAgICAgcmVzdWx0SHRtbCArPSBnZXRSZXN1bHQoZWxlbSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5paH5pys77yM5YiZ55u05o6l5o+S5YWlIHAg5qCH562+XG4gICAgICAgICAgICAgICAgcmVzdWx0SHRtbCArPSAnPHA+JyArIGVsZW0udGV4dENvbnRlbnQgKyAnPC9wPic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVOYW1lID09PSAnYnInKSB7XG4gICAgICAgICAgICAgICAgLy8gPGJyPuS/neeVmVxuICAgICAgICAgICAgICAgIHJlc3VsdEh0bWwgKz0gJzxici8+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOW/veeVpeeahOagh+etvlxuICAgICAgICAgICAgICAgIGlmIChbJ21ldGEnLCAnc3R5bGUnLCAnc2NyaXB0JywgJ29iamVjdCcsICdmb3JtJywgJ2lmcmFtZScsICdociddLmluZGV4T2Yobm9kZU5hbWUpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyDlhbbku5bmoIfnrb7vvIznp7vpmaTlsZ7mgKfvvIzmj5LlhaUgcCDmoIfnrb5cbiAgICAgICAgICAgICAgICAkZWxlbSA9ICQocmVtb3ZlQXR0cnMoZWxlbSkpO1xuICAgICAgICAgICAgICAgIC8vIOazqOaEj++8jOi/memHjOeahCBjbG9uZSgpIOaYr+W/hemhu+eahO+8jOWQpuWImeS8muWHuumUmVxuICAgICAgICAgICAgICAgIHJlc3VsdEh0bWwgKz0gJCgnPGRpdj4nKS5hcHBlbmQoJGVsZW0uY2xvbmUoKSkuaHRtbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g6I635Y+W5YWD57Sg55qE57uT5p6cXG4gICAgICAgIGZ1bmN0aW9uIGdldFJlc3VsdChlbGVtKSB7XG4gICAgICAgICAgICB2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2YXIgJGVsZW07XG4gICAgICAgICAgICB2YXIgaHRtbEZvclAgPSAnJztcbiAgICAgICAgICAgIHZhciBodG1sRm9yTGkgPSAnJztcblxuICAgICAgICAgICAgaWYgKFsnYmxvY2txdW90ZSddLmluZGV4T2Yobm9kZU5hbWUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIC8vIOebtOaOpeWPluWHuuWFg+e0oHRleHTljbPlj69cbiAgICAgICAgICAgICAgICAkZWxlbSA9ICQoZWxlbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICc8JyArIG5vZGVOYW1lICsgJz4nICsgJGVsZW0udGV4dCgpICsgJzwvJyArIG5vZGVOYW1lICsgJz4nO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFsncCcsICdoMScsICdoMicsICdoMycsICdoNCcsICdoNSddLmluZGV4T2Yobm9kZU5hbWUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIC8vcCBoZWFkIOWPluWHuiB0ZXh0IOWSjOmTvuaOpVxuICAgICAgICAgICAgICAgIGVsZW0gPSByZW1vdmVBdHRycyhlbGVtKTtcbiAgICAgICAgICAgICAgICAkZWxlbSA9ICQoZWxlbSk7XG4gICAgICAgICAgICAgICAgaHRtbEZvclAgPSAkZWxlbS5odG1sKCk7XG5cbiAgICAgICAgICAgICAgICAvLyDliZTpmaQgYSBpbWcg5LmL5aSW55qE5YWD57SgXG4gICAgICAgICAgICAgICAgaHRtbEZvclAgPSBodG1sRm9yUC5yZXBsYWNlKC88Lio/Pi9pZywgZnVuY3Rpb24gKHRhZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSAnPC9hPicgfHwgdGFnLmluZGV4T2YoJzxhICcpID09PSAwIHx8IHRhZy5pbmRleE9mKCc8aW1nICcpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJzwnICsgbm9kZU5hbWUgKyAnPicgKyBodG1sRm9yUCArICc8LycgKyBub2RlTmFtZSArICc+JztcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChbJ3VsJywgJ29sJ10uaW5kZXhPZihub2RlTmFtZSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHVsIG9s5YWD57Sg77yM6I635Y+W5a2Q5YWD57Sg77yIbGnlhYPntKDvvInnmoR0ZXh0IGxpbmsgaW1n77yM5YaN5ou85o6lXG4gICAgICAgICAgICAgICAgJGVsZW0gPSAkKGVsZW0pO1xuICAgICAgICAgICAgICAgICRlbGVtLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkbGkgPSAkKHJlbW92ZUF0dHJzKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAkbGkuaHRtbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLzwuKj8+L2lnLCBmdW5jdGlvbiAodGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSAnPC9hPicgfHwgdGFnLmluZGV4T2YoJzxhICcpID09PSAwIHx8IHRhZy5pbmRleE9mKCc8aW1nICcpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBodG1sRm9yTGkgKz0gJzxsaT4nICsgaHRtbCArICc8L2xpPic7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICc8JyArIG5vZGVOYW1lICsgJz4nICsgaHRtbEZvckxpICsgJzwvJyArIG5vZGVOYW1lICsgJz4nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWFtuS7luWFg+e0oO+8jOenu+mZpOWFg+e0oOWxnuaAp1xuICAgICAgICAgICAgICAgICRlbGVtID0gJChyZW1vdmVBdHRycyhlbGVtKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQoJzxkaXY+JykuYXBwZW5kKCRlbGVtKS5odG1sKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDnp7vpmaTkuIDkuKrlhYPntKDvvIjlrZDlhYPntKDvvInnmoRhdHRyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUF0dHJzKGVsZW0pIHtcbiAgICAgICAgICAgIHZhciBhdHRycyA9IGVsZW0uYXR0cmlidXRlcyB8fCBbXTtcbiAgICAgICAgICAgIHZhciBhdHRyTmFtZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBleGNlcHRpb24gPSBbJ2hyZWYnLCAndGFyZ2V0JywgJ3NyYycsICdhbHQnLCAncm93c3BhbicsICdjb2xzcGFuJ107IC8v5L6L5aSW5oOF5Ya1XG5cbiAgICAgICAgICAgIC8vIOWFiOWtmOWCqOS4i2VsZW3kuK3miYDmnIkgYXR0ciDnmoTlkI3np7BcbiAgICAgICAgICAgICQuZWFjaChhdHRycywgZnVuY3Rpb24gKGtleSwgYXR0cikge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyICYmIGF0dHIubm9kZVR5cGUgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0ck5hbWVzLnB1c2goYXR0ci5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyDlho3moLnmja7lkI3np7DliKDpmaTmiYDmnIlhdHRyXG4gICAgICAgICAgICAkLmVhY2goYXR0ck5hbWVzLCBmdW5jdGlvbiAoa2V5LCBhdHRyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbi5pbmRleE9mKGF0dHIpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyDpmaTkuoYgZXhjZXB0aW9uIOinhOWumueahOS+i+WkluaDheWGte+8jOWIoOmZpOWFtuS7luWxnuaAp1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAvLyDpgJLlvZLlrZDoioLngrlcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGVsZW0uY2hpbGROb2RlcztcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkLmVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUF0dHJzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g57uR5a6aICR0eHQuZm9ybWF0VGV4dCgpIOaWueazlVxuICAgIFR4dC5mbi5iaW5kRm9ybWF0VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciAkdHh0ID0gc2VsZi4kdHh0O1xuICAgICAgICB2YXIgbGVnYWxUYWdzID0gRS5jb25maWcubGVnYWxUYWdzO1xuICAgICAgICB2YXIgbGVnYWxUYWdBcnIgPSBsZWdhbFRhZ3Muc3BsaXQoJywnKTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGxlZ2FsVGFnQXJyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlZ0FyciA9IFtdO1xuXG4gICAgICAgIC8vIOWwhiBFLmNvbmZpZy5sZWdhbFRhZ3Mg6YWN572u55qE5pyJ5pWI5a2X56ym77yM55Sf5oiQ5q2j5YiZ6KGo6L6+5byPXG4gICAgICAgICQuZWFjaChsZWdhbFRhZ0FyciwgZnVuY3Rpb24gKGssIHRhZykge1xuICAgICAgICAgICAgdmFyIHJlZyA9ICdcXD5cXFxccypcXDwoJyArIHRhZyArICcpXFw+JztcbiAgICAgICAgICAgIHJlZ0Fyci5wdXNoKG5ldyBSZWdFeHAocmVnLCAnaWcnKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWinuWKoCBsaSBcbiAgICAgICAgcmVnQXJyLnB1c2gobmV3IFJlZ0V4cCgnXFw+XFxcXHMqXFw8KGxpKVxcPicsICdpZycpKTtcblxuICAgICAgICAvLyDlop7liqAgdHJcbiAgICAgICAgcmVnQXJyLnB1c2gobmV3IFJlZ0V4cCgnXFw+XFxcXHMqXFw8KHRyKVxcPicsICdpZycpKTtcblxuICAgICAgICAvLyDlop7liqAgY29kZVxuICAgICAgICByZWdBcnIucHVzaChuZXcgUmVnRXhwKCdcXD5cXFxccypcXDwoY29kZSlcXD4nLCAnaWcnKSk7XG5cbiAgICAgICAgLy8g55Sf5oiQIGZvcm1hdFRleHQg5pa55rOVXG4gICAgICAgICR0eHQuZm9ybWF0VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkdGVtcCA9ICQoJzxkaXY+Jyk7XG4gICAgICAgICAgICB2YXIgaHRtbCA9ICR0eHQuaHRtbCgpO1xuXG4gICAgICAgICAgICAvLyDljrvpmaTnqbrmoLxcbiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoL1xccyo8L2lnLCAnPCcpO1xuXG4gICAgICAgICAgICAvLyDmrrXokL3jgIHooajmoLzkuYvpl7TmjaLooYxcbiAgICAgICAgICAgICQuZWFjaChyZWdBcnIsIGZ1bmN0aW9uIChrLCByZWcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZy50ZXN0KGh0bWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZShyZWcsIGZ1bmN0aW9uIChtYXRjaFN0ciwgdGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnPlxcbjwnICsgdGFnICsgJz4nO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICR0ZW1wLmh0bWwoaHRtbCk7XG4gICAgICAgICAgICByZXR1cm4gJHRlbXAudGV4dCgpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvLyDlrprliLYgJHR4dC5odG1sIOaWueazlVxuICAgIFR4dC5mbi5iaW5kSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciAkdHh0ID0gc2VsZi4kdHh0O1xuICAgICAgICB2YXIgJHZhbHVlQ29udGFpbmVyID0gZWRpdG9yLiR2YWx1ZUNvbnRhaW5lcjtcbiAgICAgICAgdmFyIHZhbHVlTm9kZU5hbWUgPSBlZGl0b3IudmFsdWVOb2RlTmFtZTtcblxuICAgICAgICAkdHh0Lmh0bWwgPSBmdW5jdGlvbiAoaHRtbCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgaWYgKHZhbHVlTm9kZU5hbWUgPT09ICdkaXYnKSB7XG4gICAgICAgICAgICAgICAgLy8gZGl2IOeUn+aIkOeahOe8lui+keWZqO+8jOWPluWAvOOAgei1i+WAvO+8jOmDveebtOaOpeinpuWPkWpxdWVyeeeahGh0bWzmlrnms5VcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAkLmZuLmh0bWwuY2FsbCgkdHh0LCBodG1sKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGV4dGFyZWEg55Sf5oiQ55qE57yW6L6R5Zmo77yM5YiZ6ZyA6KaB6ICD6JmR6LWL5YC85pe277yM5Lmf57uZdGV4dGFyZWHotYvlgLxcblxuICAgICAgICAgICAgaWYgKGh0bWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIOWPluWAvO+8jOebtOaOpeinpuWPkWpxdWVyeeWOn+eUn2h0bWzmlrnms5VcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAkLmZuLmh0bWwuY2FsbCgkdHh0KTtcblxuICAgICAgICAgICAgICAgIC8vIOabv+aNoiBodG1sIOS4re+8jHNyY+WSjGhyZWblsZ7mgKfkuK3nmoQgJiDlrZfnrKbjgIJcbiAgICAgICAgICAgICAgICAvLyDlm6DkuLogLmh0bWwoKSDmiJbogIUgLmlubmVySFRNTCDkvJrmiormiYDmnInnmoQgJiDlrZfnrKbpg73mlLnmiJAgJmFtcDsg5L2G5pivIHNyYyDlkowgaHJlZiDkuK3nmoTopoHkv53mjIEgJlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC8oaHJlZnxzcmMpXFw9XFxcIiguKilcXFwiL2lnbSwgZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIgKyAnPVwiJyArIGMucmVwbGFjZSgnJmFtcDsnLCAnJicpICsgJ1wiJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g6LWL5YC877yM6ZyA6KaB5ZCM5pe257uZIHRleHRhcmVhIOi1i+WAvFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9ICQuZm4uaHRtbC5jYWxsKCR0eHQsIGh0bWwpO1xuICAgICAgICAgICAgICAgICR2YWx1ZUNvbnRhaW5lci52YWwoaHRtbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChodG1sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDmiYvliqjop6blj5EgY2hhbmdlIOS6i+S7tu+8jOWboOS4uiAkdHh0IOebkeaOp+S6hiBjaGFuZ2Ug5LqL5Lu25p2l5Yik5pat5piv5ZCm6ZyA6KaB5omn6KGMIGVkaXRvci5vbmNoYW5nZSBcbiAgICAgICAgICAgICAgICAkdHh0LmNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG59KTtcbi8vIFR4dC5mbiBhcGlcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICB2YXIgVHh0ID0gRS5UeHQ7XG5cbiAgICB2YXIgdHh0Q2hhbmdlRXZlbnROYW1lcyA9ICdwcm9wZXJ0eWNoYW5nZSBjaGFuZ2UgY2xpY2sga2V5dXAgaW5wdXQgcGFzdGUnO1xuXG4gICAgLy8g5riy5p+TXG4gICAgVHh0LmZuLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0eHQgPSB0aGlzLiR0eHQ7XG4gICAgICAgIHZhciAkZWRpdG9yQ29udGFpbmVyID0gdGhpcy5lZGl0b3IuJGVkaXRvckNvbnRhaW5lcjtcbiAgICAgICAgJGVkaXRvckNvbnRhaW5lci5hcHBlbmQoJHR4dCk7XG4gICAgfTtcblxuICAgIC8vIOiuoeeul+mrmOW6plxuICAgIFR4dC5mbi5pbml0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIHZhciAkdHh0ID0gdGhpcy4kdHh0O1xuICAgICAgICB2YXIgdmFsdWVDb250YWluZXJIZWlnaHQgPSBlZGl0b3IuJHZhbHVlQ29udGFpbmVyLmhlaWdodCgpO1xuICAgICAgICB2YXIgbWVudUhlaWdodCA9IGVkaXRvci5tZW51Q29udGFpbmVyLmhlaWdodCgpO1xuICAgICAgICB2YXIgdHh0SGVpZ2h0ID0gdmFsdWVDb250YWluZXJIZWlnaHQgLSBtZW51SGVpZ2h0O1xuXG4gICAgICAgIC8vIOmZkOWItuacgOWwj+S4uiA1MHB4XG4gICAgICAgIHR4dEhlaWdodCA9IHR4dEhlaWdodCA8IDUwID8gNTAgOiB0eHRIZWlnaHQ7XG5cbiAgICAgICAgJHR4dC5oZWlnaHQodHh0SGVpZ2h0KTtcblxuICAgICAgICAvLyDorrDlvZXljp/lp4vpq5jluqZcbiAgICAgICAgZWRpdG9yLnZhbHVlQ29udGFpbmVySGVpZ2h0ID0gdmFsdWVDb250YWluZXJIZWlnaHQ7XG5cbiAgICAgICAgLy8g6K6+572uIG1heC1oZWlnaHRcbiAgICAgICAgdGhpcy5pbml0TWF4SGVpZ2h0KHR4dEhlaWdodCwgbWVudUhlaWdodCk7XG4gICAgfTtcblxuICAgIC8vIOiuoeeul+acgOWkp+mrmOW6plxuICAgIFR4dC5mbi5pbml0TWF4SGVpZ2h0ID0gZnVuY3Rpb24gKHR4dEhlaWdodCwgbWVudUhlaWdodCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIHZhciAkbWVudUNvbnRhaW5lciA9IGVkaXRvci5tZW51Q29udGFpbmVyLiRtZW51Q29udGFpbmVyO1xuICAgICAgICB2YXIgJHR4dCA9IHRoaXMuJHR4dDtcbiAgICAgICAgdmFyICR3cmFwID0gJCgnPGRpdj4nKTtcblxuICAgICAgICAvLyDpnIDopoHmtY/op4jlmajmlK/mjIEgbWF4LWhlaWdodO+8jOWQpuWImeS4jeeuoVxuICAgICAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUgJiYgJ21heC1oZWlnaHQnaW4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoJHR4dC5nZXQoMCkpKSB7XG4gICAgICAgICAgICAvLyDojrflj5YgbWF4LWhlaWdodCDlubbliKTmlq3mmK/lkKbmnInlgLxcbiAgICAgICAgICAgIHZhciBtYXhIZWlnaHQgPSBwYXJzZUludChlZGl0b3IuJHZhbHVlQ29udGFpbmVyLmNzcygnbWF4LWhlaWdodCcpKTtcbiAgICAgICAgICAgIGlmIChpc05hTihtYXhIZWlnaHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBtYXgtaGVpZ2h0IOWSjOOAjuWFqOWxj+OAj+aaguaXtuacieWGsueqgVxuICAgICAgICAgICAgaWYgKGVkaXRvci5tZW51cy5mdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgRS53YXJuKCdtYXgtaGVpZ2h05ZKM44CO5YWo5bGP44CP6I+c5Y2V5LiA6LW35L2/55So5pe277yM5Lya5pyJ5LiA5Lqb6Zeu6aKY5bCa5pyq6Kej5Yaz77yM6K+35pqC5pe25LiN6KaB5Lik5Liq5ZCM5pe25L2/55SoJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDmoIforrBcbiAgICAgICAgICAgIGVkaXRvci51c2VNYXhIZWlnaHQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyDorr7nva5tYXhoZWlnaHRcbiAgICAgICAgICAgICR3cmFwLmNzcyh7XG4gICAgICAgICAgICAgICAgJ21heC1oZWlnaHQnOiAobWF4SGVpZ2h0IC0gbWVudUhlaWdodCkgKyAncHgnLFxuICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ2F1dG8nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICR0eHQuY3NzKHtcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ3Zpc2libGUnLFxuICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogdHh0SGVpZ2h0ICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIOa7muWKqOW8j++8jOiPnOWNlemYtOW9sVxuICAgICAgICAgICAgJHdyYXAub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHR4dC5wYXJlbnQoKS5zY3JvbGxUb3AoKSA+IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZW51Q29udGFpbmVyLmFkZENsYXNzKCd3YW5nRWRpdG9yLW1lbnUtc2hhZG93Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJG1lbnVDb250YWluZXIucmVtb3ZlQ2xhc3MoJ3dhbmdFZGl0b3ItbWVudS1zaGFkb3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8g6ZyA5Zyo57yW6L6R5Zmo5Yy65Z+f5aSW6Z2i5YaN5YyF6KO55LiA5bGCXG4gICAgICAgICAgICAkdHh0LndyYXAoJHdyYXApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOS/neWtmOmAieWMulxuICAgIFR4dC5mbi5zYXZlU2VsZWN0aW9uRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdHh0ID0gdGhpcy4kdHh0O1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIHZhciB0aW1lb3V0SWQ7XG4gICAgICAgIHZhciBkdCA9IERhdGUubm93KCk7XG5cbiAgICAgICAgZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICAgICAgICAgIGVkaXRvci5zYXZlU2VsZWN0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlkIzmraXkv53lrZjpgInljLpcbiAgICAgICAgZnVuY3Rpb24gc2F2ZVN5bmMoKSB7XG4gICAgICAgICAgICAvLyAxMDBtc+S5i+WGhe+8jOS4jemHjeWkjeS/neWtmFxuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBkdCA8IDEwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZHQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgc2F2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5byC5q2l5L+d5a2Y6YCJ5Yy6XG4gICAgICAgIGZ1bmN0aW9uIHNhdmVBeW5jKCkge1xuICAgICAgICAgICAgLy8g6IqC5rWB77yM6Ziy5q2i6auY6aKR546H6YeN5aSN5pON5L2cXG4gICAgICAgICAgICBpZiAodGltZW91dElkKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHNhdmUsIDMwMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0eHQgY2hhbmdlIOOAgWZvY3Vz44CBYmx1ciDml7bpmo/ml7bkv53lrZjpgInljLpcbiAgICAgICAgJHR4dC5vbih0eHRDaGFuZ2VFdmVudE5hbWVzICsgJyBmb2N1cyBibHVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIOWFiOWQjOatpeS/neWtmOmAieWMuu+8jOS4uuS6huiuqeaOpeS4i+adpeWwsemprOS4iuimgeaJp+ihjCBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCkg55qE56iL5bqPXG4gICAgICAgICAgICAvLyDog73lpJ/ojrflj5bliLDmraPnoa7nmoQgcmFuZ2VFbGVtXG4gICAgICAgICAgICBzYXZlU3luYygpO1xuXG4gICAgICAgICAgICAvLyDlho3lvILmraXkv53lrZjpgInljLrvvIzkuLrkuobnoa7lrprmm7TliqDlh4bnoa7nmoTpgInljLrvvIzkuLrlkI7nu63nmoTmk43kvZzlgZrlh4blpIdcbiAgICAgICAgICAgIHNhdmVBeW5jKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOm8oOagh+aLluaLvemAieaLqeaXtu+8jOWPr+iDveS8muaLluaLveWIsOe8lui+keWZqOWMuuWfn+WklumdouWGjeadvuaJi++8jOatpOaXtiAkdHh0IOWwseebkeWQrOS4jeWIsCBjbGlja+S6i+S7tuS6hlxuICAgICAgICAkdHh0Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkdHh0Lm9uKCdtb3VzZWxlYXZlLnNhdmVTZWxlY3Rpb24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vIOWFiOWQjOatpeWQjuW8guatpe+8jOWmguS4iui/sOazqOmHilxuICAgICAgICAgICAgICAgIHNhdmVTeW5jKCk7XG4gICAgICAgICAgICAgICAgc2F2ZUF5bmMoKTtcblxuICAgICAgICAgICAgICAgIC8vIOmhuumBk+WQp+iPnOWNleeKtuaAgeS5n+abtOaWsOS6hlxuICAgICAgICAgICAgICAgIGVkaXRvci51cGRhdGVNZW51U3R5bGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5vbignbW91c2V1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICR0eHQub2ZmKCdtb3VzZWxlYXZlLnNhdmVTZWxlY3Rpb24nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH07XG5cbiAgICAvLyDpmo/ml7bmm7TmlrAgdmFsdWVcbiAgICBUeHQuZm4udXBkYXRlVmFsdWVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0eHQgPSB0aGlzLiR0eHQ7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmVkaXRvcjtcbiAgICAgICAgdmFyIHRpbWVvdXRJZCwgb2xkVmFsdWU7XG5cbiAgICAgICAgLy8g6Kem5Y+RIG9uY2hhbmdlIOS6i+S7tlxuICAgICAgICBmdW5jdGlvbiBkb09uY2hhbmdlKCkge1xuICAgICAgICAgICAgdmFyIHZhbCA9ICR0eHQuaHRtbCgpO1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09PSB2YWwpIHtcbiAgICAgICAgICAgICAgICAvLyDml6Dlj5jljJZcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOinpuWPkSBvbmNoYW5nZSDkuovku7ZcbiAgICAgICAgICAgIGlmIChlZGl0b3Iub25jaGFuZ2UgJiYgdHlwZW9mIGVkaXRvci5vbmNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGVkaXRvci5vbmNoYW5nZS5jYWxsKGVkaXRvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOabtOaWsOWGheWuuVxuICAgICAgICAgICAgZWRpdG9yLnVwZGF0ZVZhbHVlKCk7XG5cbiAgICAgICAgICAgIC8vIOiusOW9leacgOaWsOWGheWuuVxuICAgICAgICAgICAgb2xkVmFsdWUgPSB2YWw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0eHQgY2hhbmdlIOaXtumaj+aXtuabtOaWsOWGheWuuVxuICAgICAgICAkdHh0Lm9uKHR4dENoYW5nZUV2ZW50TmFtZXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyDliJ3lp4vljJZcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb2xkVmFsdWUgPSAkdHh0Lmh0bWwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g55uR5o6n5YaF5a655Y+Y5YyW77yI5YGc5q2i5pON5L2cIDEwMG1zIOS5i+WQjueri+WNs+aJp+ihjO+8iVxuICAgICAgICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkb09uY2hhbmdlLCAxMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8g6ZqP5pe25pu05pawIG1lbnVzdHlsZVxuICAgIFR4dC5mbi51cGRhdGVNZW51U3R5bGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0eHQgPSB0aGlzLiR0eHQ7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmVkaXRvcjtcblxuICAgICAgICAvLyB0eHQgY2hhbmdlIOaXtumaj+aXtuabtOaWsOWGheWuuVxuICAgICAgICAkdHh0Lm9uKHR4dENoYW5nZUV2ZW50TmFtZXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlZGl0b3IudXBkYXRlTWVudVN0eWxlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyDmnIDlkI7mj5LlhaXor5Xlm77mj5LlhaUgPHA+PGJyPjxwPlxuICAgIFR4dC5mbi5pbnNlcnRFbXB0eVAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdHh0ID0gdGhpcy4kdHh0O1xuICAgICAgICB2YXIgJGNoaWxkcmVuID0gJHR4dC5jaGlsZHJlbigpO1xuXG4gICAgICAgIGlmICgkY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAkdHh0LmFwcGVuZCgkKCc8cD48YnI+PC9wPicpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkLnRyaW0oJGNoaWxkcmVuLmxhc3QoKS5odG1sKCkpLnRvTG93ZXJDYXNlKCkgIT09ICc8YnI+Jykge1xuICAgICAgICAgICAgJHR4dC5hcHBlbmQoJCgnPHA+PGJyPjwvcD4nKSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g5bCG57yW6L6R5Zmo5pq06Zyy5Ye65p2l55qE5paH5a2X5ZKM5Zu+54mH77yM6YO955SoIHAg5p2l5YyF6KO5XG4gICAgVHh0LmZuLndyYXBJbWdBbmRUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHR4dCA9IHRoaXMuJHR4dDtcbiAgICAgICAgdmFyICRpbWdzID0gJHR4dC5jaGlsZHJlbignaW1nJyk7XG4gICAgICAgIHZhciB0eHQgPSAkdHh0WzBdO1xuICAgICAgICB2YXIgY2hpbGROb2RlcyA9IHR4dC5jaGlsZE5vZGVzO1xuICAgICAgICB2YXIgY2hpbGRyZW5MZW5ndGggPSBjaGlsZE5vZGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGksIGNoaWxkTm9kZSwgcDtcblxuICAgICAgICAvLyDlpITnkIblm77niYdcbiAgICAgICAgJGltZ3MubGVuZ3RoICYmICRpbWdzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS53cmFwKCc8cD4nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5aSE55CG5paH5a2XXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gMyAmJiBjaGlsZE5vZGUudGV4dENvbnRlbnQgJiYgJC50cmltKGNoaWxkTm9kZS50ZXh0Q29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAkKGNoaWxkTm9kZSkud3JhcCgnPHA+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8g5riF56m65YaF5a655Li656m655qEPHA+77yM5Lul5Y+K6YeN5aSN5YyF6KO555qEPHA+77yI5Zyod2luZG93c+S4i+eahGNocm9tZeeymOi0tOaWh+Wtl+S5i+WQju+8jOS8muWHuueOsOS4iui/sOaDheWGte+8iVxuICAgIFR4dC5mbi5jbGVhckVtcHR5T3JOZXN0UCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0eHQgPSB0aGlzLiR0eHQ7XG4gICAgICAgIHZhciAkcExpc3QgPSAkdHh0LmZpbmQoJ3AnKTtcblxuICAgICAgICAkcExpc3QuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHAgPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRwLmNoaWxkcmVuKCk7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW5MZW5ndGggPSAkY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgdmFyICRmaXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAkLnRyaW0oJHAuaHRtbCgpKTtcblxuICAgICAgICAgICAgLy8g5YaF5a655Li656m655qEcFxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgJHAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDltYzlpZfnmoRwXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW5MZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAkZmlyc3RDaGlsZCA9ICRjaGlsZHJlbi5maXJzdCgpO1xuICAgICAgICAgICAgICAgIGlmICgkZmlyc3RDaGlsZC5nZXQoMCkgJiYgJGZpcnN0Q2hpbGQuZ2V0KDApLm5vZGVOYW1lID09PSAnUCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJHAuaHRtbCggJGZpcnN0Q2hpbGQuaHRtbCgpICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8g6I635Y+WIHNjcm9sbFRvcFxuICAgIFR4dC5mbi5zY3JvbGxUb3AgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGVkaXRvciA9IHNlbGYuZWRpdG9yO1xuICAgICAgICB2YXIgJHR4dCA9IHNlbGYuJHR4dDtcblxuICAgICAgICBpZiAoZWRpdG9yLnVzZU1heEhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuICR0eHQucGFyZW50KCkuc2Nyb2xsVG9wKHZhbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJHR4dC5zY3JvbGxUb3AodmFsKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDpvKDmoIdob3ZlcuaXtuWAme+8jOaYvuekunDjgIFoZWFk55qE6auY5bqmXG4gICAgVHh0LmZuLnNob3dIZWlnaHRPbkhvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIHZhciAkZWRpdG9yQ29udGFpbmVyID0gZWRpdG9yLiRlZGl0b3JDb250YWluZXI7XG4gICAgICAgIHZhciBtZW51Q29udGFpbmVyID0gZWRpdG9yLm1lbnVDb250YWluZXI7XG4gICAgICAgIHZhciAkdHh0ID0gdGhpcy4kdHh0O1xuICAgICAgICB2YXIgJHRpcCA9ICQoJzxpIGNsYXNzPVwiaGVpZ2h0LXRpcFwiPjxpPicpO1xuICAgICAgICB2YXIgaXNUaXBJblR4dCA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFuZFNob3dUaXAoJHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCFpc1RpcEluVHh0KSB7XG4gICAgICAgICAgICAgICAgJGVkaXRvckNvbnRhaW5lci5hcHBlbmQoJHRpcCk7XG4gICAgICAgICAgICAgICAgaXNUaXBJblR4dCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0eHRUb3AgPSAkdHh0LnBvc2l0aW9uKCkudG9wO1xuICAgICAgICAgICAgdmFyIHR4dEhlaWdodCA9ICR0eHQub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICR0YXJnZXQuaGVpZ2h0KCk7XG4gICAgICAgICAgICB2YXIgdG9wID0gJHRhcmdldC5wb3NpdGlvbigpLnRvcDtcbiAgICAgICAgICAgIHZhciBtYXJnaW5Ub3AgPSBwYXJzZUludCgkdGFyZ2V0LmNzcygnbWFyZ2luLXRvcCcpLCAxMCk7XG4gICAgICAgICAgICB2YXIgcGFkZGluZ1RvcCA9IHBhcnNlSW50KCR0YXJnZXQuY3NzKCdwYWRkaW5nLXRvcCcpLCAxMCk7XG4gICAgICAgICAgICB2YXIgbWFyZ2luQm90dG9tID0gcGFyc2VJbnQoJHRhcmdldC5jc3MoJ21hcmdpbi1ib3R0b20nKSwgMTApO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmdCb3R0b20gPSBwYXJzZUludCgkdGFyZ2V0LmNzcygncGFkZGluZy1ib3R0b20nKSwgMTApO1xuXG4gICAgICAgICAgICAvLyDorqHnrpfliJ3mraXnmoTnu5PmnpxcbiAgICAgICAgICAgIHZhciByZXN1bHRIZWlnaHQgPSBoZWlnaHQgKyBwYWRkaW5nVG9wICsgbWFyZ2luVG9wICsgcGFkZGluZ0JvdHRvbSArIG1hcmdpbkJvdHRvbTtcbiAgICAgICAgICAgIHZhciByZXN1bHRUb3AgPSB0b3AgKyBtZW51Q29udGFpbmVyLmhlaWdodCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB2YXIgc3BhY2VWYWx1ZTtcblxuICAgICAgICAgICAgLy8gLy8g5Yik5pat5piv5ZCm6LaF5Ye65LiL6L6555WMXG4gICAgICAgICAgICAvLyBzcGFjZVZhbHVlID0gKHJlc3VsdFRvcCArIHJlc3VsdEhlaWdodCkgLSAodHh0VG9wICsgdHh0SGVpZ2h0KTtcbiAgICAgICAgICAgIC8vIGlmIChzcGFjZVZhbHVlID4gMCkge1xuICAgICAgICAgICAgLy8gICAgIHJlc3VsdEhlaWdodCA9IHJlc3VsdEhlaWdodCAtIHNwYWNlVmFsdWU7XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIC8vIC8vIOWIpOaWreaYr+WQpui2heWHuuS6huS4i+i+ueeVjFxuICAgICAgICAgICAgLy8gc3BhY2VWYWx1ZSA9IHR4dFRvcCA+IHJlc3VsdFRvcDtcbiAgICAgICAgICAgIC8vIGlmIChzcGFjZVZhbHVlKSB7XG4gICAgICAgICAgICAvLyAgICAgcmVzdWx0SGVpZ2h0ID0gcmVzdWx0SGVpZ2h0IC0gc3BhY2VWYWx1ZTtcbiAgICAgICAgICAgIC8vICAgICB0b3AgPSB0b3AgKyBzcGFjZVZhbHVlO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAvLyDmjInnhafmnIDnu4jnu5PmnpzmuLLmn5NcbiAgICAgICAgICAgICR0aXAuY3NzKHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCArIHBhZGRpbmdUb3AgKyBtYXJnaW5Ub3AgKyBwYWRkaW5nQm90dG9tICsgbWFyZ2luQm90dG9tLFxuICAgICAgICAgICAgICAgIHRvcDogdG9wICsgbWVudUNvbnRhaW5lci5oZWlnaHQoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVGlwKCkge1xuICAgICAgICAgICAgaWYgKCFpc1RpcEluVHh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHRpcC5yZW1vdmUoKTtcbiAgICAgICAgICAgIGlzVGlwSW5UeHQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgICR0eHQub24oJ21vdXNlZW50ZXInLCAndWwsb2wsYmxvY2txdW90ZSxwLGgxLGgyLGgzLGg0LGg1LHRhYmxlLHByZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBhZGRBbmRTaG93VGlwKCQoZS5jdXJyZW50VGFyZ2V0KSk7XG4gICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVtb3ZlVGlwKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn0pO1xuLy8g5bel5YW35Ye95pWwXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8gSUU4IFtdLmluZGV4T2YoKVxuICAgIGlmKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZil7XG4gICAgICAgIC8vSUXkvY7niYjmnKzkuI3mlK/mjIEgYXJyLmluZGV4T2YgXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgICB2YXIgaSA9IDAsXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IoOyBpPGxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZih0aGlzW2ldID09PSBlbGVtKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICAvL0lF5L2O54mI5pys5LiN5pSv5oyBIGFyci5sYXN0SW5kZXhPZlxuICAgICAgICBBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvcihsZW5ndGggPSBsZW5ndGggLSAxOyBsZW5ndGggPj0gMDsgbGVuZ3RoLS0pe1xuICAgICAgICAgICAgICAgIGlmKHRoaXNbbGVuZ3RoXSA9PT0gZWxlbSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElFOCBEYXRlLm5vdygpXG4gICAgaWYgKCFEYXRlLm5vdykge1xuICAgICAgICBEYXRlLm5vdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLnZhbHVlT2YoKTsgXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5sb2cgJiYgY29uc29sZS53YXJuICYmIGNvbnNvbGUuZXJyb3JcbiAgICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuICAgIHZhciBlbXB0eUZuID0gZnVuY3Rpb24gKCkge307XG4gICAgJC5lYWNoKFsnaW5mbycsICdsb2cnLCAnd2FybicsICdlcnJvciddLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoY29uc29sZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBFW3ZhbHVlXSA9IGVtcHR5Rm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBFW3ZhbHVlXSA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgLy8g6YCa6L+H6YWN572u5p2l5o6n5Yi25omT5Y2w6L6T5Ye6XG4gICAgICAgICAgICAgICAgaWYgKEUuY29uZmlnICYmIEUuY29uZmlnLnByaW50TG9nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGVbdmFsdWVdKCd3YW5nRWRpdG9y5o+Q56S6OiAnICsgaW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g6I635Y+W6ZqP5py65pWwXG4gICAgRS5yYW5kb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc2xpY2UoMik7XG4gICAgfTtcblxuICAgIC8vIOa1j+iniOWZqOaYr+WQpuaUr+aMgSBwbGFjZWhvbGRlclxuICAgIEUucGxhY2Vob2xkZXIgPSAncGxhY2Vob2xkZXInIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cbiAgICAvLyDlhbzlrrlJRTjnmoQgaW5wdXQgcGxhY2Vob2xkZXJcbiAgICBFLnBsYWNlaG9sZGVyRm9ySUU4ID0gZnVuY3Rpb24gKCRjb250YWluZXIpIHtcbiAgICAgICAgaWYgKEUucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAkY29udGFpbmVyLmZpbmQoJ2lucHV0W3BsYWNlaG9sZGVyXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAkaW5wdXQuYXR0cigncGxhY2Vob2xkZXInKTtcblxuICAgICAgICAgICAgaWYgKCRpbnB1dC52YWwoKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAkaW5wdXQuY3NzKCdjb2xvcicsICcjNjY2Jyk7XG4gICAgICAgICAgICAgICAgJGlucHV0LnZhbChwbGFjZWhvbGRlcik7XG5cbiAgICAgICAgICAgICAgICAkaW5wdXQub24oJ2ZvY3VzLnBsYWNlaG9sZGVyIGNsaWNrLnBsYWNlaG9sZGVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQudmFsKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LmNzcygnY29sb3InLCAnIzMzMycpO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQub2ZmKCdmb2N1cy5wbGFjZWhvbGRlciBjbGljay5wbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG4vLyDor63oqIDljIVcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG4gICAgRS5sYW5ncyA9IHt9O1xuICAgIFxuICAgIC8vIOS4reaWh1xuICAgIEUubGFuZ3NbJ3poLWNuJ10gPSB7XG4gICAgICAgIGJvbGQ6ICfnspfkvZMnLFxuICAgICAgICB1bmRlcmxpbmU6ICfkuIvliJLnur8nLFxuICAgICAgICBpdGFsaWM6ICfmlpzkvZMnLFxuICAgICAgICBmb3JlY29sb3I6ICfmloflrZfpopzoibInLFxuICAgICAgICBiZ2NvbG9yOiAn6IOM5pmv6ImyJyxcbiAgICAgICAgc3RyaWtldGhyb3VnaDogJ+WIoOmZpOe6vycsXG4gICAgICAgIGVyYXNlcjogJ+a4heepuuagvOW8jycsXG4gICAgICAgIHNvdXJjZTogJ+a6kOeggScsXG4gICAgICAgIHF1b3RlOiAn5byV55SoJyxcbiAgICAgICAgZm9udGZhbWlseTogJ+Wtl+S9kycsXG4gICAgICAgIGZvbnRzaXplOiAn5a2X5Y+3JyxcbiAgICAgICAgaGVhZDogJ+agh+mimCcsXG4gICAgICAgIG9yZGVybGlzdDogJ+acieW6j+WIl+ihqCcsXG4gICAgICAgIHVub3JkZXJsaXN0OiAn5peg5bqP5YiX6KGoJyxcbiAgICAgICAgYWxpZ25sZWZ0OiAn5bem5a+56b2QJyxcbiAgICAgICAgYWxpZ25jZW50ZXI6ICflsYXkuK0nLFxuICAgICAgICBhbGlnbnJpZ2h0OiAn5Y+z5a+56b2QJyxcbiAgICAgICAgbGluazogJ+mTvuaOpScsXG4gICAgICAgIHRleHQ6ICfmlofmnKwnLFxuICAgICAgICBzdWJtaXQ6ICfmj5DkuqQnLFxuICAgICAgICBjYW5jZWw6ICflj5bmtognLFxuICAgICAgICB1bmxpbms6ICflj5bmtojpk77mjqUnLFxuICAgICAgICB0YWJsZTogJ+ihqOagvCcsXG4gICAgICAgIGVtb3Rpb246ICfooajmg4UnLFxuICAgICAgICBpbWc6ICflm77niYcnLFxuICAgICAgICB1cGxvYWRJbWc6ICfkuIrkvKDlm77niYcnLFxuICAgICAgICBsaW5rSW1nOiAn572R57uc5Zu+54mHJyxcbiAgICAgICAgdmlkZW86ICfop4bpopEnLFxuICAgICAgICAnd2lkdGgnOiAn5a69JyxcbiAgICAgICAgJ2hlaWdodCc6ICfpq5gnLFxuICAgICAgICBsb2NhdGlvbjogJ+S9jee9ricsXG4gICAgICAgIGxvYWRpbmc6ICfliqDovb3kuK0nLFxuICAgICAgICBzZWFyY2hsb2NhdGlvbjogJ+aQnOe0ouS9jee9ricsXG4gICAgICAgIGR5bmFtaWNNYXA6ICfliqjmgIHlnLDlm74nLFxuICAgICAgICBjbGVhckxvY2F0aW9uOiAn5riF6Zmk5L2N572uJyxcbiAgICAgICAgbGFuZ0R5bmFtaWNPbmVMb2NhdGlvbjogJ+WKqOaAgeWcsOWbvuWPquiDveaYvuekuuS4gOS4quS9jee9ricsXG4gICAgICAgIGluc2VydGNvZGU6ICfmj5LlhaXku6PnoIEnLFxuICAgICAgICB1bmRvOiAn5pKk6ZSAJyxcbiAgICAgICAgcmVkbzogJ+mHjeWkjScsXG4gICAgICAgIGZ1bGxzY3JlZW46ICflhajlsY8nLFxuICAgICAgICBvcGVuTGluazogJ+aJk+W8gOmTvuaOpSdcbiAgICB9O1xuXG4gICAgLy8g6Iux5paHXG4gICAgRS5sYW5ncy5lbiA9IHtcbiAgICAgICAgYm9sZDogJ0JvbGQnLFxuICAgICAgICB1bmRlcmxpbmU6ICdVbmRlcmxpbmUnLFxuICAgICAgICBpdGFsaWM6ICdJdGFsaWMnLFxuICAgICAgICBmb3JlY29sb3I6ICdDb2xvcicsXG4gICAgICAgIGJnY29sb3I6ICdCYWNrY29sb3InLFxuICAgICAgICBzdHJpa2V0aHJvdWdoOiAnU3RyaWtldGhyb3VnaCcsXG4gICAgICAgIGVyYXNlcjogJ0VyYXNlcicsXG4gICAgICAgIHNvdXJjZTogJ0NvZGV2aWV3JyxcbiAgICAgICAgcXVvdGU6ICdRdW90ZScsXG4gICAgICAgIGZvbnRmYW1pbHk6ICdGb250IGZhbWlseScsXG4gICAgICAgIGZvbnRzaXplOiAnRm9udCBzaXplJyxcbiAgICAgICAgaGVhZDogJ0hlYWQnLFxuICAgICAgICBvcmRlcmxpc3Q6ICdPcmRlcmVkIGxpc3QnLFxuICAgICAgICB1bm9yZGVybGlzdDogJ1Vub3JkZXJlZCBsaXN0JyxcbiAgICAgICAgYWxpZ25sZWZ0OiAnQWxpZ24gbGVmdCcsXG4gICAgICAgIGFsaWduY2VudGVyOiAnQWxpZ24gY2VudGVyJyxcbiAgICAgICAgYWxpZ25yaWdodDogJ0FsaWduIHJpZ2h0JyxcbiAgICAgICAgbGluazogJ0luc2VydCBsaW5rJyxcbiAgICAgICAgdGV4dDogJ1RleHQnLFxuICAgICAgICBzdWJtaXQ6ICdTdWJtaXQnLFxuICAgICAgICBjYW5jZWw6ICdDYW5jZWwnLFxuICAgICAgICB1bmxpbms6ICdVbmxpbmsnLFxuICAgICAgICB0YWJsZTogJ1RhYmxlJyxcbiAgICAgICAgZW1vdGlvbjogJ0Vtb3Rpb25zJyxcbiAgICAgICAgaW1nOiAnSW1hZ2UnLFxuICAgICAgICB1cGxvYWRJbWc6ICdVcGxvYWQnLFxuICAgICAgICBsaW5rSW1nOiAnTGluaycsXG4gICAgICAgIHZpZGVvOiAnVmlkZW8nLFxuICAgICAgICAnd2lkdGgnOiAnd2lkdGgnLFxuICAgICAgICAnaGVpZ2h0JzogJ2hlaWdodCcsXG4gICAgICAgIGxvY2F0aW9uOiAnTG9jYXRpb24nLFxuICAgICAgICBsb2FkaW5nOiAnTG9hZGluZycsXG4gICAgICAgIHNlYXJjaGxvY2F0aW9uOiAnc2VhcmNoJyxcbiAgICAgICAgZHluYW1pY01hcDogJ0R5bmFtaWMnLFxuICAgICAgICBjbGVhckxvY2F0aW9uOiAnQ2xlYXInLFxuICAgICAgICBsYW5nRHluYW1pY09uZUxvY2F0aW9uOiAnT25seSBvbmUgbG9jYXRpb24gaW4gZHluYW1pYyBtYXAnLFxuICAgICAgICBpbnNlcnRjb2RlOiAnSW5zZXJ0IENvZGUnLFxuICAgICAgICB1bmRvOiAnVW5kbycsXG4gICAgICAgIHJlZG86ICdSZWRvJyxcbiAgICAgICAgZnVsbHNjcmVlbjogJ0Z1bGwgc2NyZW5uJyxcbiAgICAgICAgb3Blbkxpbms6ICdvcGVuIGxpbmsnXG4gICAgfTtcbn0pO1xuLy8g5YWo5bGA6YWN572uXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jb25maWcgPSB7fTtcblxuICAgIC8vIOWFqOWxj+aXtueahCB6LWluZGV4XG4gICAgRS5jb25maWcuemluZGV4ID0gMTAwMDA7XG5cbiAgICAvLyDmmK/lkKbmiZPljbBsb2dcbiAgICBFLmNvbmZpZy5wcmludExvZyA9IHRydWU7XG5cbiAgICAvLyDoj5zljZXlkLjpobbvvJpmYWxzZSAtIOS4jeWQuOmhtu+8m251bWJlciAtIOWQuOmhtu+8jOWAvOS4unRvcOWAvFxuICAgIEUuY29uZmlnLm1lbnVGaXhlZCA9IDA7XG5cbiAgICAvLyDnvJbovpHmupDnoIHml7bvvIzov4fmu6QgamF2YXNjcmlwdFxuICAgIEUuY29uZmlnLmpzRmlsdGVyID0gdHJ1ZTtcblxuICAgIC8vIOe8lui+keWZqOWFgeiuuOeahOagh+etvlxuICAgIEUuY29uZmlnLmxlZ2FsVGFncyA9ICdwLGgxLGgyLGgzLGg0LGg1LGg2LGJsb2NrcXVvdGUsdGFibGUsdWwsb2wscHJlJztcblxuICAgIC8vIOivreiogOWMhVxuICAgIEUuY29uZmlnLmxhbmcgPSBFLmxhbmdzWyd6aC1jbiddO1xuXG4gICAgLy8g6I+c5Y2V6YWN572uXG4gICAgRS5jb25maWcubWVudXMgPSBbXG4gICAgICAgICdzb3VyY2UnLFxuICAgICAgICAnfCcsXG4gICAgICAgICdib2xkJyxcbiAgICAgICAgJ3VuZGVybGluZScsXG4gICAgICAgICdpdGFsaWMnLFxuICAgICAgICAnc3RyaWtldGhyb3VnaCcsXG4gICAgICAgICdlcmFzZXInLFxuICAgICAgICAnZm9yZWNvbG9yJyxcbiAgICAgICAgJ2JnY29sb3InLFxuICAgICAgICAnfCcsXG4gICAgICAgICdxdW90ZScsXG4gICAgICAgICdmb250ZmFtaWx5JyxcbiAgICAgICAgJ2ZvbnRzaXplJyxcbiAgICAgICAgJ2hlYWQnLFxuICAgICAgICAndW5vcmRlcmxpc3QnLFxuICAgICAgICAnb3JkZXJsaXN0JyxcbiAgICAgICAgJ2FsaWdubGVmdCcsXG4gICAgICAgICdhbGlnbmNlbnRlcicsXG4gICAgICAgICdhbGlnbnJpZ2h0JyxcbiAgICAgICAgJ3wnLFxuICAgICAgICAnbGluaycsXG4gICAgICAgICd1bmxpbmsnLFxuICAgICAgICAndGFibGUnLFxuICAgICAgICAnZW1vdGlvbicsXG4gICAgICAgICd8JyxcbiAgICAgICAgJ2ltZycsXG4gICAgICAgICd2aWRlbycsXG4gICAgICAgICdsb2NhdGlvbicsXG4gICAgICAgICdpbnNlcnRjb2RlJyxcbiAgICAgICAgJ3wnLFxuICAgICAgICAndW5kbycsXG4gICAgICAgICdyZWRvJyxcbiAgICAgICAgJ2Z1bGxzY3JlZW4nXG4gICAgXTtcblxuICAgIC8vIOminOiJsumFjee9rlxuICAgIEUuY29uZmlnLmNvbG9ycyA9IHtcbiAgICAgICAgLy8gJ3ZhbHVlJzogJ3RpdGxlJ1xuICAgICAgICAnIzg4MDAwMCc6ICfmmpfnuqLoibInLFxuICAgICAgICAnIzgwMDA4MCc6ICfntKvoibInLFxuICAgICAgICAnI2ZmMDAwMCc6ICfnuqLoibInLFxuICAgICAgICAnI2ZmMDBmZic6ICfpspznsonoibInLFxuICAgICAgICAnIzAwMDA4MCc6ICfmt7Hok53oibInLFxuICAgICAgICAnIzAwMDBmZic6ICfok53oibInLFxuICAgICAgICAnIzAwZmZmZic6ICfmuZbok53oibInLFxuICAgICAgICAnIzAwODA4MCc6ICfok53nu7/oibInLFxuICAgICAgICAnIzAwODAwMCc6ICfnu7/oibInLFxuICAgICAgICAnIzgwODAwMCc6ICfmqYTmpoToibInLFxuICAgICAgICAnIzAwZmYwMCc6ICfmtYXnu7/oibInLFxuICAgICAgICAnI2ZmY2MwMCc6ICfmqZnpu4ToibInLFxuICAgICAgICAnIzgwODA4MCc6ICfngbDoibInLFxuICAgICAgICAnI2MwYzBjMCc6ICfpk7boibInLFxuICAgICAgICAnIzAwMDAwMCc6ICfpu5HoibInLFxuICAgICAgICAnI2ZmZmZmZic6ICfnmb3oibInXG4gICAgfTtcblxuICAgIC8vIOWtl+S9k1xuICAgIEUuY29uZmlnLmZhbWlseXMgPSBbXG4gICAgICAgICflrovkvZMnLCAn6buR5L2TJywgJ+alt+S9kycsICflvq7ova/pm4Xpu5EnLFxuICAgICAgICAnQXJpYWwnLCAnVmVyZGFuYScsICdHZW9yZ2lhJyxcbiAgICAgICAgJ1RpbWVzIE5ldyBSb21hbicsICdNaWNyb3NvZnQgSmhlbmdIZWknLFxuICAgICAgICAnVHJlYnVjaGV0IE1TJywgJ0NvdXJpZXIgTmV3JywgJ0ltcGFjdCcsICdDb21pYyBTYW5zIE1TJywgJ0NvbnNvbGFzJ1xuICAgIF07XG5cbiAgICAvLyDlrZflj7dcbiAgICBFLmNvbmZpZy5mb250c2l6ZXMgPSB7XG4gICAgICAgIC8vIOagvOW8j++8mid2YWx1ZSc6ICd0aXRsZSdcbiAgICAgICAgMTogJzEycHgnLFxuICAgICAgICAyOiAnMTNweCcsXG4gICAgICAgIDM6ICcxNnB4JyxcbiAgICAgICAgNDogJzE4cHgnLFxuICAgICAgICA1OiAnMjRweCcsXG4gICAgICAgIDY6ICczMnB4JyxcbiAgICAgICAgNzogJzQ4cHgnXG4gICAgfTtcblxuICAgIC8vIOihqOaDheWMhVxuICAgIEUuY29uZmlnLmVtb3Rpb25zU2hvdyA9ICdpY29uJzsgLy8g5pi+56S66aG577yM6buY6K6k5Li6J2ljb24n77yM5Lmf5Y+v5Lul6YWN572u5oiQJ3ZhbHVlJ1xuICAgIEUuY29uZmlnLmVtb3Rpb25zID0ge1xuICAgICAgICAvLyAnZGVmYXVsdCc6IHtcbiAgICAgICAgLy8gICAgIHRpdGxlOiAn6buY6K6kJyxcbiAgICAgICAgLy8gICAgIGRhdGE6ICcuL2Vtb3Rpb25zLmRhdGEnXG4gICAgICAgIC8vIH0sXG4gICAgICAgICd3ZWlibyc6IHtcbiAgICAgICAgICAgIHRpdGxlOiAn5b6u5Y2a6KGo5oOFJyxcbiAgICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdodHRwOi8vaW1nLnQuc2luYWpzLmNuL3QzNS9zdHlsZS9pbWFnZXMvY29tbW9uL2ZhY2UvZXh0L25vcm1hbC83YS9zaGVuc2hvdV90aHVtYi5naWYnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1vojYnms6XpqaxdJyAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2h0dHA6Ly9pbWcudC5zaW5hanMuY24vdDM1L3N0eWxlL2ltYWdlcy9jb21tb24vZmFjZS9leHQvbm9ybWFsLzYwL2hvcnNlMl90aHVtYi5naWYnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1vnpZ7pqaxdJyAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2h0dHA6Ly9pbWcudC5zaW5hanMuY24vdDM1L3N0eWxlL2ltYWdlcy9jb21tb24vZmFjZS9leHQvbm9ybWFsL2JjL2Z1eXVuX3RodW1iLmdpZicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnW+a1ruS6kV0nICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAnaHR0cDovL2ltZy50LnNpbmFqcy5jbi90MzUvc3R5bGUvaW1hZ2VzL2NvbW1vbi9mYWNlL2V4dC9ub3JtYWwvYzkvZ2VpbGlfdGh1bWIuZ2lmJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdb57uZ5YqbXScgICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdodHRwOi8vaW1nLnQuc2luYWpzLmNuL3QzNS9zdHlsZS9pbWFnZXMvY29tbW9uL2ZhY2UvZXh0L25vcm1hbC9mMi93Z190aHVtYi5naWYnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1vlm7Top4JdJyAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2h0dHA6Ly9pbWcudC5zaW5hanMuY24vdDM1L3N0eWxlL2ltYWdlcy9jb21tb24vZmFjZS9leHQvbm9ybWFsLzcwL3Z3X3RodW1iLmdpZicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnW+Wogeatpl0nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdodHRwOi8vaW1nLnQuc2luYWpzLmNuL3QzNS9zdHlsZS9pbWFnZXMvY29tbW9uL2ZhY2UvZXh0L25vcm1hbC82ZS9wYW5kYV90aHVtYi5naWYnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1vnhornjKtdJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAnaHR0cDovL2ltZy50LnNpbmFqcy5jbi90MzUvc3R5bGUvaW1hZ2VzL2NvbW1vbi9mYWNlL2V4dC9ub3JtYWwvODEvcmFiYml0X3RodW1iLmdpZicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnW+WFlOWtkF0nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdodHRwOi8vaW1nLnQuc2luYWpzLmNuL3QzNS9zdHlsZS9pbWFnZXMvY29tbW9uL2ZhY2UvZXh0L25vcm1hbC9iYy9vdG1fdGh1bWIuZ2lmJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdb5aWl54m55pu8XSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2h0dHA6Ly9pbWcudC5zaW5hanMuY24vdDM1L3N0eWxlL2ltYWdlcy9jb21tb24vZmFjZS9leHQvbm9ybWFsLzE1L2pfdGh1bWIuZ2lmJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdb5ZunXSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2h0dHA6Ly9pbWcudC5zaW5hanMuY24vdDM1L3N0eWxlL2ltYWdlcy9jb21tb24vZmFjZS9leHQvbm9ybWFsLzg5L2h1ZmVuX3RodW1iLmdpZicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnW+S6kueyiV0nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdodHRwOi8vaW1nLnQuc2luYWpzLmNuL3QzNS9zdHlsZS9pbWFnZXMvY29tbW9uL2ZhY2UvZXh0L25vcm1hbC9jNC9saXd1X3RodW1iLmdpZicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnW+ekvOeJqV0nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdodHRwOi8vaW1nLnQuc2luYWpzLmNuL3QzNS9zdHlsZS9pbWFnZXMvY29tbW9uL2ZhY2UvZXh0L25vcm1hbC9hYy9zbWlsZWFfdGh1bWIuZ2lmJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdb5ZG15ZG1XSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2h0dHA6Ly9pbWcudC5zaW5hanMuY24vdDM1L3N0eWxlL2ltYWdlcy9jb21tb24vZmFjZS9leHQvbm9ybWFsLzBiL3Rvb3RoYV90aHVtYi5naWYnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1vlk4jlk4hdJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDnmb7luqblnLDlm77nmoRrZXlcbiAgICBFLmNvbmZpZy5tYXBBayA9ICdUVmhqWWpxMUlDVDJxcUw1TGRTOG13YXMnO1xuXG4gICAgLy8g5LiK5Lyg5Zu+54mH55qE6YWN572uXG4gICAgLy8gc2VydmVy5Zyw5Z2AXG4gICAgRS5jb25maWcudXBsb2FkSW1nVXJsID0gJyc7XG4gICAgLy8g6LaF5pe25pe26Ze0XG4gICAgRS5jb25maWcudXBsb2FkVGltZW91dCA9IDIwICogMTAwMDtcbiAgICAvLyDnlKjkuo7lrZjlgqjkuIrkvKDlm57osIPkuovku7ZcbiAgICBFLmNvbmZpZy51cGxvYWRJbWdGbnMgPSB7fTtcbiAgICAvLyDoh6rlrprkuYnkuIrkvKDlm77niYfnmoRmaWxlbmFtZVxuICAgIC8vIEUuY29uZmlnLnVwbG9hZEltZ0ZpbGVOYW1lID0gJ2N1c3RvbUZpbGVOYW1lJztcblxuICAgIC8vIOiHquWumuS5ieS4iuS8oO+8jOiuvue9ruS4uiB0cnVlIOS5i+WQju+8jOaYvuekuuS4iuS8oOWbvuagh1xuICAgIEUuY29uZmlnLmN1c3RvbVVwbG9hZCA9IGZhbHNlO1xuICAgIC8vIOiHquWumuS5ieS4iuS8oOeahGluaXTkuovku7ZcbiAgICAvLyBFLmNvbmZpZy5jdXN0b21VcGxvYWRJbml0ID0gZnVuY3Rpb24gKCkgey4uLi59O1xuXG4gICAgLy8g6Ieq5a6a5LmJ5LiK5Lyg5pe25Lyg6YCS55qE5Y+C5pWw77yI5aaCIHRva2Vu77yJXG4gICAgRS5jb25maWcudXBsb2FkUGFyYW1zID0ge1xuICAgICAgICAvKiB0b2tlbjogJ2FiY2RlZjEyMzQ1JyAqL1xuICAgIH07XG5cbiAgICAvLyDoh6rlrprkuYnkuIrkvKDmmK/nmoRoZWFkZXLlj4LmlbBcbiAgICBFLmNvbmZpZy51cGxvYWRIZWFkZXJzID0ge1xuICAgICAgICAgLyogJ0FjY2VwdCcgOiAndGV4dC94LWpzb24nICovXG4gICAgfTtcblxuICAgIC8vIOi3qOWfn+S4iuS8oOaXtuS8oOmAkiBjb29raWXvvIzpu5jorqTkuLogdHJ1ZVxuICAgIEUuY29uZmlnLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG5cbiAgICAvLyDpmpDol4/nvZHnu5zlm77niYfvvIzpu5jorqTkuLogZmFsc2VcbiAgICBFLmNvbmZpZy5oaWRlTGlua0ltZyA9IGZhbHNlO1xuXG4gICAgLy8g5piv5ZCm6L+H5ruk57KY6LS05YaF5a65XG4gICAgRS5jb25maWcucGFzdGVGaWx0ZXIgPSB0cnVlO1xuXG4gICAgLy8g5piv5ZCm57KY6LS057qv5paH5pys77yM5b2TIGVkaXRvci5jb25maWcucGFzdGVGaWx0ZXIgPT09IGZhbHNlIOaXtuWAme+8jOatpOmFjee9ruWwhuWkseaViFxuICAgIEUuY29uZmlnLnBhc3RlVGV4dCA9IGZhbHNlO1xuXG4gICAgLy8g5o+S5YWl5Luj56CB5pe277yM6buY6K6k55qE6K+t6KiAXG4gICAgRS5jb25maWcuY29kZURlZmF1bHRMYW5nID0gJ2phdmFzY3JpcHQnO1xuXG59KTtcbi8vIOWFqOWxgFVJXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgIEUuVUkgPSB7fTtcblxuICAgICAvLyDkuLroj5zljZXoh6rlrprkuYnphY3nva7nmoRVSVxuICAgICBFLlVJLm1lbnVzID0ge1xuICAgICAgICAvLyDov5nkuKogZGVmYXVsdCDkuI3liqDlvJXlj7fvvIzlnKggSUU4IOS8muaKpemUmVxuICAgICAgICAnZGVmYXVsdCc6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1jb21tYW5kXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGJvbGQ6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1ib2xkXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIHVuZGVybGluZToge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLXVuZGVybGluZVwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBpdGFsaWM6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1pdGFsaWNcIj48L2k+PC9hPicsXG4gICAgICAgICAgICBzZWxlY3RlZDogJy5zZWxlY3RlZCdcbiAgICAgICAgfSxcbiAgICAgICAgZm9yZWNvbG9yOiB7XG4gICAgICAgICAgICBub3JtYWw6ICc8YSBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctcGVuY2lsXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGJnY29sb3I6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1icnVzaFwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBzdHJpa2V0aHJvdWdoOiB7XG4gICAgICAgICAgICBub3JtYWw6ICc8YSBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctc3RyaWtldGhyb3VnaFwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBlcmFzZXI6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1lcmFzZXJcIj48L2k+PC9hPicsXG4gICAgICAgICAgICBzZWxlY3RlZDogJy5zZWxlY3RlZCdcbiAgICAgICAgfSxcbiAgICAgICAgcXVvdGU6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1xdW90ZXMtbGVmdFwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1jb2RlXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGZvbnRmYW1pbHk6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1mb250MlwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBmb250c2l6ZToge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLXRleHQtaGVpZ2h0XCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWQ6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1oZWFkZXJcIj48L2k+PC9hPicsXG4gICAgICAgICAgICBzZWxlY3RlZDogJy5zZWxlY3RlZCdcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJsaXN0OiB7XG4gICAgICAgICAgICBub3JtYWw6ICc8YSBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctbGlzdC1udW1iZXJlZFwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICB1bm9yZGVybGlzdDoge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWxpc3QtYnVsbGV0XCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGFsaWdubGVmdDoge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWFsaWduLWxlZnRcIj48L2k+PC9hPicsXG4gICAgICAgICAgICBzZWxlY3RlZDogJy5zZWxlY3RlZCdcbiAgICAgICAgfSxcbiAgICAgICAgYWxpZ25jZW50ZXI6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1hbGlnbi1jZW50ZXJcIj48L2k+PC9hPicsXG4gICAgICAgICAgICBzZWxlY3RlZDogJy5zZWxlY3RlZCdcbiAgICAgICAgfSxcbiAgICAgICAgYWxpZ25yaWdodDoge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWFsaWduLXJpZ2h0XCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1saW5rXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIHVubGluazoge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLXVubGlua1wiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICB0YWJsZToge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLXRhYmxlXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGVtb3Rpb246IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1oYXBweVwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBpbWc6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1waWN0dXJlXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgICBub3JtYWw6ICc8YSBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctcGxheVwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgICAgbm9ybWFsOiAnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWxvY2F0aW9uXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGluc2VydGNvZGU6IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy10ZXJtaW5hbFwiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICB1bmRvOiB7XG4gICAgICAgICAgICBub3JtYWw6ICc8YSBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctY2N3XCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6ICcuc2VsZWN0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIHJlZG86IHtcbiAgICAgICAgICAgIG5vcm1hbDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1jd1wiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIHNlbGVjdGVkOiAnLnNlbGVjdGVkJ1xuICAgICAgICB9LFxuICAgICAgICBmdWxsc2NyZWVuOiB7XG4gICAgICAgICAgICBub3JtYWw6ICc8YSBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctZW5sYXJnZTJcIj48L2k+PC9hPicsXG4gICAgICAgICAgICBzZWxlY3RlZDogJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwic2VsZWN0ZWRcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctc2hyaW5rMlwiPjwvaT48L2E+J1xuICAgICAgICB9XG4gICAgIH07XG4gICAgIFxufSk7XG4vLyDlr7nosaHphY3nva5cbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmZuLmluaXREZWZhdWx0Q29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgZWRpdG9yLmNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBFLmNvbmZpZyk7XG4gICAgICAgIGVkaXRvci5VSSA9ICQuZXh0ZW5kKHt9LCBFLlVJKTtcbiAgICB9O1xuXG59KTtcbi8vIOWinuWKoCBjb250YWluZXJcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmZuLmFkZEVkaXRvckNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy4kZWRpdG9yQ29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cIndhbmdFZGl0b3ItY29udGFpbmVyXCI+PC9kaXY+Jyk7XG4gICAgfTtcblxufSk7XG4vLyDlop7liqDnvJbovpHljLrln5/lr7nosaFcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmZuLmFkZFR4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciB0eHQgPSBuZXcgRS5UeHQoZWRpdG9yKTtcblxuICAgICAgICBlZGl0b3IudHh0ID0gdHh0O1xuICAgIH07XG5cbn0pO1xuLy8g5aKe5YqgbWVudUNvbnRhaW5lcuWvueixoVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuZm4uYWRkTWVudUNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIGVkaXRvci5tZW51Q29udGFpbmVyID0gbmV3IEUuTWVudUNvbnRhaW5lcihlZGl0b3IpO1xuICAgIH07XG5cbn0pO1xuLy8g5aKe5YqgbWVudXNcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICAvLyDlrZjlgqjliJvlu7roj5zljZXnmoTlh73mlbBcbiAgICBFLmNyZWF0ZU1lbnVGbnMgPSBbXTtcbiAgICBFLmNyZWF0ZU1lbnUgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgRS5jcmVhdGVNZW51Rm5zLnB1c2goZm4pO1xuICAgIH07XG5cbiAgICAvLyDliJvlu7rmiYDmnInoj5zljZVcbiAgICBFLmZuLmFkZE1lbnVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIG1lbnVJZHMgPSBlZGl0b3IuY29uZmlnLm1lbnVzO1xuXG4gICAgICAgIC8vIOajgOmqjCBtZW51SWQg5piv5ZCm5Zyo6YWN572u5Lit5a2Y5ZyoXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrKG1lbnVJZCkge1xuICAgICAgICAgICAgaWYgKG1lbnVJZHMuaW5kZXhPZihtZW51SWQpID49IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOmBjeWOhuaJgOacieeahOiPnOWNleWIm+W7uuWHveaVsO+8jOW5tuaJp+ihjFxuICAgICAgICAkLmVhY2goRS5jcmVhdGVNZW51Rm5zLCBmdW5jdGlvbiAoaywgY3JlYXRlTWVudUZuKSB7XG4gICAgICAgICAgICBjcmVhdGVNZW51Rm4uY2FsbChlZGl0b3IsIGNoZWNrKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7XG4vLyBib2xk6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2JvbGQnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcblxuICAgICAgICAvLyDliJvlu7ogbWVudSDlr7nosaFcbiAgICAgICAgdmFyIG1lbnUgPSBuZXcgRS5NZW51KHtcbiAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgICAgICAgaWQ6IG1lbnVJZCxcbiAgICAgICAgICAgIHRpdGxlOiBsYW5nLmJvbGQsXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ0JvbGQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iemAieS4reeKtuaAgeS4i+eahGNsaWNr5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudFNlbGVjdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpc1JhbmdlRW1wdHkgPSBlZGl0b3IuaXNSYW5nZUVtcHR5KCk7XG4gICAgICAgICAgICBpZiAoIWlzUmFuZ2VFbXB0eSkge1xuICAgICAgICAgICAgICAgIC8vIOWmguaenOmAieWMuuacieWGheWuue+8jOWImeaJp+ihjOWfuuehgOWRveS7pFxuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdCb2xkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOWmguaenOmAieWMuuayoeacieWGheWuuVxuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kRm9yRWxlbSgnYixzdHJvbmcsaDEsaDIsaDMsaDQsaDUnLCBlLCAnQm9sZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gdW5kZXJsaW5l6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ3VuZGVybGluZSc7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcudW5kZXJsaW5lLFxuICAgICAgICAgICAgY29tbWFuZE5hbWU6ICdVbmRlcmxpbmUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iemAieS4reeKtuaAgeS4i+eahGNsaWNr5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudFNlbGVjdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpc1JhbmdlRW1wdHkgPSBlZGl0b3IuaXNSYW5nZUVtcHR5KCk7XG4gICAgICAgICAgICBpZiAoIWlzUmFuZ2VFbXB0eSkge1xuICAgICAgICAgICAgICAgIC8vIOWmguaenOmAieWMuuacieWGheWuue+8jOWImeaJp+ihjOWfuuehgOWRveS7pFxuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdVbmRlcmxpbmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c6YCJ5Yy65rKh5pyJ5YaF5a65XG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmRGb3JFbGVtKCd1LGEnLCBlLCAnVW5kZXJsaW5lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyBpdGFsaWMg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuICAgIFxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdpdGFsaWMnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy5pdGFsaWMsXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ0l0YWxpYydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5a6a5LmJ6YCJ5Lit54q25oCB5LiL55qEY2xpY2vkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50U2VsZWN0ZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGlzUmFuZ2VFbXB0eSA9IGVkaXRvci5pc1JhbmdlRW1wdHkoKTtcbiAgICAgICAgICAgIGlmICghaXNSYW5nZUVtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c6YCJ5Yy65pyJ5YaF5a6577yM5YiZ5omn6KGM5Z+656GA5ZG95LukXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ0l0YWxpYycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzpgInljLrmsqHmnInlhoXlrrlcbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZEZvckVsZW0oJ2knLCBlLCAnSXRhbGljJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyBmb3JlY29sb3Ig6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2ZvcmVjb2xvcic7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcbiAgICAgICAgdmFyIGNvbmZpZ0NvbG9ycyA9IGVkaXRvci5jb25maWcuY29sb3JzO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcuZm9yZWNvbG9yXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIm+W7uiBkcm9wUGFuZWxcbiAgICAgICAgdmFyICRjb250ZW50ID0gJCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgJC5lYWNoKGNvbmZpZ0NvbG9ycywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICAgICRjb250ZW50LmFwcGVuZChcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiY29sb3ItaXRlbVwiJyxcbiAgICAgICAgICAgICAgICAgICAgJyAgICB0aXRsZT1cIicgKyB2ICsgJ1wiIGNvbW1hbmRWYWx1ZT1cIicgKyBrICsgJ1wiICcsXG4gICAgICAgICAgICAgICAgICAgICcgICAgc3R5bGU9XCJjb2xvcjogJyArIGsgKyAnXCIgJyxcbiAgICAgICAgICAgICAgICAgICAgJz48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctcGVuY2lsXCI+PC9pPjwvYT4nXG4gICAgICAgICAgICAgICAgXS5qb2luKCcnKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgICRjb250ZW50Lm9uKCdjbGljaycsICdhW2NvbW1hbmRWYWx1ZV0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8g5omn6KGM5ZG95LukXG4gICAgICAgICAgICB2YXIgJGVsZW0gPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGNvbW1hbmRWYWx1ZSA9ICRlbGVtLmF0dHIoJ2NvbW1hbmRWYWx1ZScpO1xuXG4gICAgICAgICAgICBpZiAobWVudS5zZWxlY3RlZCAmJiBlZGl0b3IuaXNSYW5nZUVtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAvLyDlvZPliY3lpITkuo7pgInkuK3nirbmgIHvvIzlubbkuJTpgInkuK3lhoXlrrnkuLrnqbpcbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZEZvckVsZW0oJ2ZvbnRbY29sb3JdJywgZSwgJ2ZvcmVjb2xvcicsIGNvbW1hbmRWYWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOW9k+WJjeacquWkhOS6jumAieS4reeKtuaAge+8jOaIluiAheaciemAieS4reWGheWuueOAguWImeaJp+ihjOm7mOiupOWRveS7pFxuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdmb3JlY29sb3InLCBjb21tYW5kVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbWVudS5kcm9wUGFuZWwgPSBuZXcgRS5Ecm9wUGFuZWwoZWRpdG9yLCBtZW51LCB7XG4gICAgICAgICAgICAkY29udGVudDogJGNvbnRlbnQsXG4gICAgICAgICAgICB3aWR0aDogMTI1XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iSB1cGRhdGUgc2VsZWN0ZWQg5LqL5Lu2XG4gICAgICAgIG1lbnUudXBkYXRlU2VsZWN0ZWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2ZvbnRbY29sb3JdJyk7XG4gICAgICAgICAgICBpZiAocmFuZ2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyBiZ2NvbG9yIOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdiZ2NvbG9yJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuICAgICAgICB2YXIgY29uZmlnQ29sb3JzID0gZWRpdG9yLmNvbmZpZy5jb2xvcnM7XG5cbiAgICAgICAgLy8g5qOA5p+l5YWD57Sg5piv5ZCm5pyJIGJhY2tncm91bmQtY29sb3I6IOWGheiBlOagt+W8j1xuICAgICAgICBmdW5jdGlvbiBjaGVja0VsZW1GbihlbGVtKSB7XG4gICAgICAgICAgICB2YXIgY3NzVGV4dDtcbiAgICAgICAgICAgIGlmIChlbGVtICYmIGVsZW0uc3R5bGUgJiYgZWxlbS5zdHlsZS5jc3NUZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjc3NUZXh0ID0gZWxlbS5zdHlsZS5jc3NUZXh0O1xuICAgICAgICAgICAgICAgIGlmIChjc3NUZXh0ICYmIGNzc1RleHQuaW5kZXhPZignYmFja2dyb3VuZC1jb2xvcjonKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcuYmdjb2xvclxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDliJvlu7ogZHJvcFBhbmVsXG4gICAgICAgIHZhciAkY29udGVudCA9ICQoJzxkaXY+PC9kaXY+Jyk7XG4gICAgICAgICQuZWFjaChjb25maWdDb2xvcnMsIGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAgICAgICAkY29udGVudC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImNvbG9yLWl0ZW1cIicsXG4gICAgICAgICAgICAgICAgICAgICcgICAgdGl0bGU9XCInICsgdiArICdcIiBjb21tYW5kVmFsdWU9XCInICsgayArICdcIiAnLFxuICAgICAgICAgICAgICAgICAgICAnICAgIHN0eWxlPVwiY29sb3I6ICcgKyBrICsgJ1wiICcsXG4gICAgICAgICAgICAgICAgICAgICc+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWJydXNoXCI+PC9pPjwvYT4nXG4gICAgICAgICAgICAgICAgXS5qb2luKCcnKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgICRjb250ZW50Lm9uKCdjbGljaycsICdhW2NvbW1hbmRWYWx1ZV0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8g5omn6KGM5ZG95LukXG5cbiAgICAgICAgICAgIHZhciAkZWxlbSA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgY29tbWFuZFZhbHVlID0gJGVsZW0uYXR0cignY29tbWFuZFZhbHVlJyk7XG5cbiAgICAgICAgICAgIGlmIChtZW51LnNlbGVjdGVkICYmIGVkaXRvci5pc1JhbmdlRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIC8vIOW9k+WJjeWkhOS6jumAieS4reeKtuaAge+8jOW5tuS4lOmAieS4reWGheWuueS4uuepuuOAguS9v+eUqCBjb21tYW5kRm9yRWxlbSDmiafooYzlkb3ku6RcbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZEZvckVsZW0oe1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ3NwYW4sZm9udCcsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBjaGVja0VsZW1GblxuICAgICAgICAgICAgICAgIH0sIGUsICdCYWNrQ29sb3InLCBjb21tYW5kVmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDlvZPliY3mnKrlpITkuo7pgInkuK3nirbmgIHvvIzmiJbogIXmnInpgInkuK3lhoXlrrnjgILliJnmiafooYzpu5jorqTlkb3ku6RcbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZChlLCAnQmFja0NvbG9yJywgY29tbWFuZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1lbnUuZHJvcFBhbmVsID0gbmV3IEUuRHJvcFBhbmVsKGVkaXRvciwgbWVudSwge1xuICAgICAgICAgICAgJGNvbnRlbnQ6ICRjb250ZW50LFxuICAgICAgICAgICAgd2lkdGg6IDEyNVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDlrprkuYkgdXBkYXRlIHNlbGVjdGVkIOS6i+S7tlxuICAgICAgICBtZW51LnVwZGF0ZVNlbGVjdGVkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdzcGFuLGZvbnQnLCBjaGVja0VsZW1Gbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyYW5nZUVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDlop7liqDliLBlZGl0b3Llr7nosaHkuK1cbiAgICAgICAgZWRpdG9yLm1lbnVzW21lbnVJZF0gPSBtZW51O1xuICAgIH0pO1xuXG59KTtcbi8vIHN0cmlrZXRocm91Z2gg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ3N0cmlrZXRocm91Z2gnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy5zdHJpa2V0aHJvdWdoLFxuICAgICAgICAgICAgY29tbWFuZE5hbWU6ICdTdHJpa2VUaHJvdWdoJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDlrprkuYnpgInkuK3nirbmgIHkuIvnmoRjbGlja+S6i+S7tlxuICAgICAgICBtZW51LmNsaWNrRXZlbnRTZWxlY3RlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaXNSYW5nZUVtcHR5ID0gZWRpdG9yLmlzUmFuZ2VFbXB0eSgpO1xuICAgICAgICAgICAgaWYgKCFpc1JhbmdlRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzpgInljLrmnInlhoXlrrnvvIzliJnmiafooYzln7rnoYDlkb3ku6RcbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZChlLCAnU3RyaWtlVGhyb3VnaCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzpgInljLrmsqHmnInlhoXlrrlcbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZEZvckVsZW0oJ3N0cmlrZScsIGUsICdTdHJpa2VUaHJvdWdoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyBlcmFzZXIg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2VyYXNlcic7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcblxuICAgICAgICAvLyDliJvlu7ogbWVudSDlr7nosaFcbiAgICAgICAgdmFyIG1lbnUgPSBuZXcgRS5NZW51KHtcbiAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgICAgICAgaWQ6IG1lbnVJZCxcbiAgICAgICAgICAgIHRpdGxlOiBsYW5nLmVyYXNlcixcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnUmVtb3ZlRm9ybWF0J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDlrprkuYnngrnlh7vkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpc1JhbmdlRW1wdHkgPSBlZGl0b3IuaXNSYW5nZUVtcHR5KCk7XG5cbiAgICAgICAgICAgIGlmICghaXNSYW5nZUVtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy8g6YCJ5Yy65LiN5piv56m655qE77yM5YiZ5omn6KGM6buY6K6k5ZG95LukXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ1JlbW92ZUZvcm1hdCcpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyICRjbGVhckVsZW07XG5cbiAgICAgICAgICAgIC8vIOiHquWumuS5ieeahOWRveS7pOWHveaVsFxuICAgICAgICAgICAgZnVuY3Rpb24gY29tbWFuZEZuKCkge1xuICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciByYW5nZUVsZW07XG4gICAgICAgICAgICAgICAgdmFyIHBFbGVtLCAkcEVsZW07XG4gICAgICAgICAgICAgICAgdmFyIHF1b3RlRWxlbSwgJHF1b3RlRWxlbTtcbiAgICAgICAgICAgICAgICB2YXIgbGlzdEVsZW0sICRsaXN0RWxlbTtcblxuICAgICAgICAgICAgICAgIC8vIOiOt+WPlumAieWMuiBlbGVtXG4gICAgICAgICAgICAgICAgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgICAgIC8vIOesrOS4gOatpe+8jOiOt+WPliBxdW90ZSDniLblhYPntKBcbiAgICAgICAgICAgICAgICBxdW90ZUVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2Jsb2NrcXVvdGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocXVvdGVFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICRxdW90ZUVsZW0gPSAkKHF1b3RlRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICRjbGVhckVsZW0gPSAkKCc8cD4nICsgJHF1b3RlRWxlbS50ZXh0KCkgKyAnPC9wPicpO1xuICAgICAgICAgICAgICAgICAgICAkcXVvdGVFbGVtLmFmdGVyKCRjbGVhckVsZW0pLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyDnrKzkuozmraXvvIzojrflj5YgcCBoIOeItuWFg+e0oFxuICAgICAgICAgICAgICAgIHBFbGVtID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdwLGgxLGgyLGgzLGg0LGg1Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHBFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICRwRWxlbSA9ICQocEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAkY2xlYXJFbGVtID0gJCgnPHA+JyArICRwRWxlbS50ZXh0KCkgKyAnPC9wPicpO1xuICAgICAgICAgICAgICAgICAgICAkcEVsZW0uYWZ0ZXIoJGNsZWFyRWxlbSkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIOesrOS4ieatpe+8jOiOt+WPlmxpc3RcbiAgICAgICAgICAgICAgICBsaXN0RWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAndWwsb2wnKTtcbiAgICAgICAgICAgICAgICBpZiAobGlzdEVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgJGxpc3RFbGVtID0gJChsaXN0RWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICRjbGVhckVsZW0gPSAkKCc8cD4nICsgJGxpc3RFbGVtLnRleHQoKSArICc8L3A+Jyk7XG4gICAgICAgICAgICAgICAgICAgICRsaXN0RWxlbS5hZnRlcigkY2xlYXJFbGVtKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOiHquWumuS5iSBjYWxsYmFjayDkuovku7ZcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNr5Lit77yM6K6+572ucmFuZ2XkuLpjbGVhckVsZW1cbiAgICAgICAgICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZiAoJGNsZWFyRWxlbSkge1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVzdG9yZVNlbGVjdGlvbkJ5RWxlbSgkY2xlYXJFbGVtLmdldCgwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDmiafooYzoh6rlrprkuYnlkb3ku6RcbiAgICAgICAgICAgIGVkaXRvci5jdXN0b21Db21tYW5kKGUsIGNvbW1hbmRGbiwgY2FsbGJhY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gc291cmNlIOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdzb3VyY2UnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG4gICAgICAgIHZhciB0eHRIdG1sO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcuc291cmNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lbnUuaXNTaG93Q29kZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIOabtOaWsOWGheWuuVxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZSgpIHtcbiAgICAgICAgICAgIHZhciAkY29kZSA9IG1lbnUuJGNvZGVUZXh0YXJlYTtcbiAgICAgICAgICAgIHZhciAkdHh0ID0gZWRpdG9yLnR4dC4kdHh0O1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gJC50cmltKCRjb2RlLnZhbCgpKTsgLy8g5Y+W5YC8XG5cbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICc8cD48YnI+PC9wPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOi/h+a7pGpz5Luj56CBXG4gICAgICAgICAgICBpZiAoZWRpdG9yLmNvbmZpZy5qc0ZpbHRlcikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvPHNjcmlwdFtcXHNcXFNdKj88XFwvc2NyaXB0Pi9pZywgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g6LWL5YC8XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICR0eHQuaHRtbCh2YWx1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIC8vIOabtOaWsCBodG1sIOa6kOeggeWHuumUme+8jOS4gOiIrOmDveaYr+WPlua2iOS6hiBqcyDov4fmu6TkuYvlkI7vvIxqc+aKpemUmeWvvOiHtOeahFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5a6a5LmJY2xpY2vkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlZGl0b3IgPSBzZWxmLmVkaXRvcjtcbiAgICAgICAgICAgIHZhciAkdHh0ID0gZWRpdG9yLnR4dC4kdHh0O1xuICAgICAgICAgICAgdmFyIHR4dE91dGVySGVpZ2h0ID0gJHR4dC5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIHR4dEhlaWdodCA9ICR0eHQuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIGlmICghc2VsZi4kY29kZVRleHRhcmVhKSB7XG4gICAgICAgICAgICAgICAgc2VsZi4kY29kZVRleHRhcmVhID0gJCgnPHRleHRhcmVhIGNsYXNzPVwiY29kZS10ZXh0YXJlYVwiPjwvdGV4dGFyZWE+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgJGNvZGUgPSBzZWxmLiRjb2RlVGV4dGFyZWE7XG4gICAgICAgICAgICAkY29kZS5jc3Moe1xuICAgICAgICAgICAgICAgIGhlaWdodDogdHh0SGVpZ2h0LFxuICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJzogdHh0T3V0ZXJIZWlnaHQgLSB0eHRIZWlnaHRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDotYvlgLxcbiAgICAgICAgICAgICRjb2RlLnZhbCgkdHh0Lmh0bWwoKSk7XG5cbiAgICAgICAgICAgIC8vIOebkeaOp+WPmOWMllxuICAgICAgICAgICAgJGNvZGUub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDmuLLmn5NcbiAgICAgICAgICAgICR0eHQuYWZ0ZXIoJGNvZGUpLmhpZGUoKTtcbiAgICAgICAgICAgICRjb2RlLnNob3coKTtcblxuICAgICAgICAgICAgLy8g5pu05paw54q25oCBXG4gICAgICAgICAgICBtZW51LmlzU2hvd0NvZGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyDmiafooYwgdXBkYXRlU2VsZWN0ZWQg5LqL5Lu2XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkKCk7XG5cbiAgICAgICAgICAgIC8vIOemgeeUqOWFtuS7luiPnOWNlVxuICAgICAgICAgICAgZWRpdG9yLmRpc2FibGVNZW51c0V4Y2VwdCgnc291cmNlJyk7XG5cbiAgICAgICAgICAgIC8vIOiusOW9leW9k+WJjWh0bWzlgLxcbiAgICAgICAgICAgIHR4dEh0bWwgPSAkdHh0Lmh0bWwoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDlrprkuYnpgInkuK3nirbmgIHkuIvnmoRjbGlja+S6i+S7tlxuICAgICAgICBtZW51LmNsaWNrRXZlbnRTZWxlY3RlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgICAgICB2YXIgJHR4dCA9IGVkaXRvci50eHQuJHR4dDtcbiAgICAgICAgICAgIHZhciAkY29kZSA9IHNlbGYuJGNvZGVUZXh0YXJlYTtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgICAgICAgaWYgKCEkY29kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5pu05paw5YaF5a65XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuXG4gICAgICAgICAgICAvLyDmuLLmn5NcbiAgICAgICAgICAgICRjb2RlLmFmdGVyKCR0eHQpLmhpZGUoKTtcbiAgICAgICAgICAgICR0eHQuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyDmm7TmlrDnirbmgIFcbiAgICAgICAgICAgIG1lbnUuaXNTaG93Q29kZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyDmiafooYwgdXBkYXRlU2VsZWN0ZWQg5LqL5Lu2XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkKCk7XG5cbiAgICAgICAgICAgIC8vIOWQr+eUqOWFtuS7luiPnOWNlVxuICAgICAgICAgICAgZWRpdG9yLmVuYWJsZU1lbnVzRXhjZXB0KCdzb3VyY2UnKTtcblxuICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5omn6KGMIG9uY2hhbmdlIOS6i+S7tlxuICAgICAgICAgICAgaWYgKCR0eHQuaHRtbCgpICE9PSB0eHRIdG1sKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVkaXRvci5vbmNoYW5nZSAmJiB0eXBlb2YgZWRpdG9yLm9uY2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5vbmNoYW5nZS5jYWxsKGVkaXRvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWumuS5ieWIh+aNoumAieS4reeKtuaAgeS6i+S7tlxuICAgICAgICBtZW51LnVwZGF0ZVNlbGVjdGVkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1Nob3dDb2RlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gcXVvdGUg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ3F1b3RlJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcucXVvdGUsXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ2Zvcm1hdEJsb2NrJyxcbiAgICAgICAgICAgIGNvbW1hbmRWYWx1ZTogJ2Jsb2NrcXVvdGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iWNsaWNr5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgdmFyICRyYW5nZUVsZW07XG4gICAgICAgICAgICBpZiAoIXJhbmdlRWxlbSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY3VycmVudFF1b3RlID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdibG9ja3F1b3RlJyk7XG4gICAgICAgICAgICB2YXIgJHF1b3RlO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFF1b3RlKSB7XG4gICAgICAgICAgICAgICAgLy8g6K+05piO5b2T5YmN5ZyocXVvdGXkuYvlhoXvvIzkuI3lgZrku7vkvZXlpITnkIZcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0TGVnYWxUYWdzKHJhbmdlRWxlbSk7XG4gICAgICAgICAgICAkcmFuZ2VFbGVtID0gJChyYW5nZUVsZW0pO1xuXG4gICAgICAgICAgICAvLyDml6DmloflrZfvvIzliJnkuI3lhYHorrjmiafooYzlvJXnlKhcbiAgICAgICAgICAgIGlmICghJHJhbmdlRWxlbS50ZXh0KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYgKCFyYW5nZUVsZW0pIHtcbiAgICAgICAgICAgICAgICAvLyDmiafooYzpu5jorqTlkb3ku6RcbiAgICAgICAgICAgICAgICAvLyBJRTgg5LiL5omn6KGM5q2k5aSE77yI5LiN6L+H77yM57uP5rWL6K+V5Luj56CB5peg5pWI77yM5Lmf5LiN5oql6ZSZ77yJXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ2Zvcm1hdEJsb2NrJywgJ2Jsb2NrcXVvdGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOiHquWumuS5iWNvbW1hbmTkuovku7ZcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbW1hbmRGbigpIHtcbiAgICAgICAgICAgICAgICAkcXVvdGUgPSAkKCc8cD4nICsgJHJhbmdlRWxlbS50ZXh0KCkgKyAnPC9wPicpO1xuICAgICAgICAgICAgICAgICRyYW5nZUVsZW0uYWZ0ZXIoJHF1b3RlKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkcXVvdGUud3JhcCgnPGJsb2NrcXVvdGU+Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOiHquWumuS5iSBjYWxsYmFjayDkuovku7ZcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNr5Lit77yM6K6+572ucmFuZ2XkuLpxdW90ZVxuICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGlmICgkcXVvdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlc3RvcmVTZWxlY3Rpb25CeUVsZW0oJHF1b3RlLmdldCgwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDmiafooYzoh6rlrprkuYnlkb3ku6RcbiAgICAgICAgICAgIGVkaXRvci5jdXN0b21Db21tYW5kKGUsIGNvbW1hbmRGbiwgY2FsbGJhY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWumuS5iemAieS4reeKtuaAgeS4i+eahGNsaWNr5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudFNlbGVjdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW07XG4gICAgICAgICAgICB2YXIgcXVvdGVFbGVtO1xuICAgICAgICAgICAgdmFyICRsYXN0Q2hpbGQ7XG5cbiAgICAgICAgICAgIC8vIOiOt+WPluW9k+WJjemAieWMuueahGVsZW3vvIzlubbor5Xlm77lvoDkuIrmib4gcXVvdGUg5YWD57SgXG4gICAgICAgICAgICByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICBxdW90ZUVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2Jsb2NrcXVvdGUnKTtcbiAgICAgICAgICAgIGlmICghcXVvdGVFbGVtKSB7XG4gICAgICAgICAgICAgICAgLy8g5rKh5om+5Yiw77yM5YiZ6L+U5ZueXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g6Ieq5a6a5LmJ55qEY29tbWFuZOS6i+S7tlxuICAgICAgICAgICAgZnVuY3Rpb24gY29tbWFuZEZuKCkge1xuICAgICAgICAgICAgICAgIHZhciAkcXVvdGVFbGVtO1xuICAgICAgICAgICAgICAgIHZhciAkY2hpbGRyZW47XG5cbiAgICAgICAgICAgICAgICAkcXVvdGVFbGVtID0gJChxdW90ZUVsZW0pO1xuICAgICAgICAgICAgICAgICRjaGlsZHJlbiA9ICRxdW90ZUVsZW0uY2hpbGRyZW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoJGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAkY2hpbGRyZW4uZWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXRlbS5nZXQoMCkubm9kZU5hbWUgPT09ICdQJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRxdW90ZUVsZW0uYWZ0ZXIoJGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcXVvdGVFbGVtLmFmdGVyKCc8cD4nICsgJGl0ZW0udGV4dCgpICsgJzwvcD4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRsYXN0Q2hpbGQgPSAkaXRlbTsgIC8vIOiusOW9leacgOWQjuS4gOS4quWtkOWFg+e0oO+8jOeUqOS6jmNhbGxiYWNr5Lit55qEcmFuZ2XlrprkvY1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICRxdW90ZUVsZW0ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOiHquWumuS5ieeahGNhbGxiYWNr5Ye95pWwXG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICAvLyBjYWxsYmFja+S4re+8jOiuvue9rnJhbmdl5Li6bGFzdENoaWxkXG4gICAgICAgICAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKCRsYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlc3RvcmVTZWxlY3Rpb25CeUVsZW0oJGxhc3RDaGlsZC5nZXQoMCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5omn6KGM6Ieq5a6a5LmJ5ZG95LukXG4gICAgICAgICAgICBlZGl0b3IuY3VzdG9tQ29tbWFuZChlLCBjb21tYW5kRm4sIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDlrprkuYnmm7TmlrDpgInkuK3nirbmgIHnmoTkuovku7ZcbiAgICAgICAgbWVudS51cGRhdGVTZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOyAvL+iPnOWNleWvueixoVxuICAgICAgICAgICAgdmFyIGVkaXRvciA9IHNlbGYuZWRpdG9yO1xuICAgICAgICAgICAgdmFyIHJhbmdlRWxlbTtcblxuICAgICAgICAgICAgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdibG9ja3F1b3RlJyk7XG5cbiAgICAgICAgICAgIGlmIChyYW5nZUVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tIOS4pOasoeeCueWHuyBlbnRlciDot7Plh7rlvJXnlKggLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGVkaXRvci5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkdHh0ID0gZWRpdG9yLnR4dC4kdHh0O1xuICAgICAgICAgICAgdmFyIGlzUHJldkVudGVyID0gZmFsc2U7ICAvLyDmmK/kuI3mmK/liJrliJrlnKhxdW90ZeS4reaMieS6hiBlbnRlciDplK5cbiAgICAgICAgICAgICR0eHQub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgIT09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOS4jeaYryBlbnRlciDplK5cbiAgICAgICAgICAgICAgICAgICAgaXNQcmV2RW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICAgICAgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdibG9ja3F1b3RlJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFyYW5nZUVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g6YCJ5Yy65LiN5pivIHF1b3RlXG4gICAgICAgICAgICAgICAgICAgIGlzUHJldkVudGVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWlzUHJldkVudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOacgOi/keayoeacieWcqHFvdGXkuK3mjIllbnRlcumUrlxuICAgICAgICAgICAgICAgICAgICBpc1ByZXZFbnRlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFJhbmdlRWxlbSA9IGVkaXRvci5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgICAgICAgICB2YXIgJGN1cnJlbnRSYW5nZUVsZW0gPSAkKGN1cnJlbnRSYW5nZUVsZW0pO1xuICAgICAgICAgICAgICAgIGlmICgkY3VycmVudFJhbmdlRWxlbS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRSYW5nZUVsZW0ucGFyZW50KCkuYWZ0ZXIoJGN1cnJlbnRSYW5nZUVsZW0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOiuvue9rumAieWMulxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXN0b3JlU2VsZWN0aW9uQnlFbGVtKGN1cnJlbnRSYW5nZUVsZW0sICdzdGFydCcpO1xuXG4gICAgICAgICAgICAgICAgaXNQcmV2RW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyDpmLvmraLpu5jorqTooYzmlodcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgLy8gZWRpdG9yLnJlYWR5KFxuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSDlpITnkIZxdW90ZeS4reaXoOWGheWuueaXtuS4jeiDveWIoOmZpOeahOmXrumimCAtLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZWRpdG9yLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG4gICAgICAgICAgICB2YXIgJHJhbmdlRWxlbTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY29tbWFuZEZuKCkge1xuICAgICAgICAgICAgICAgICRyYW5nZUVsZW0gJiYgJHJhbmdlRWxlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgIGlmICghJHJhbmdlRWxlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciAkcHJldiA9ICRyYW5nZUVsZW0ucHJldigpO1xuICAgICAgICAgICAgICAgIGlmICgkcHJldi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5pyJIHByZXYg5YiZ5a6a5L2N5YiwIHByZXYg5pyA5ZCOXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXN0b3JlU2VsZWN0aW9uQnlFbGVtKCRwcmV2LmdldCgwKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5pegIHByZXYg5YiZ5Yid5aeL5YyW6YCJ5Yy6XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5pbml0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkdHh0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlICE9PSA4KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOS4jeaYryBiYWNrc3BhY2Ug6ZSuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgICAgIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAnYmxvY2txdW90ZScpO1xuICAgICAgICAgICAgICAgIGlmICghcmFuZ2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOmAieWMuuS4jeaYryBxdW90ZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRyYW5nZUVsZW0gPSAkKHJhbmdlRWxlbSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICRyYW5nZUVsZW0udGV4dCgpO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHF1b3RlIOS4rei/mOacieWGheWuuVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVkaXRvci5jdXN0b21Db21tYW5kKGUsIGNvbW1hbmRGbiwgY2FsbGJhY2spO1xuXG4gICAgICAgICAgICB9KTsgLy8gJHR4dC5vblxuICAgICAgICB9KTsgLy8gZWRpdG9yLnJlYWR5KFxuICAgIH0pO1xuXG59KTtcbi8vIOWtl+S9kyDoj5zljZVcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmNyZWF0ZU1lbnUoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgIHZhciBtZW51SWQgPSAnZm9udGZhbWlseSc7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcbiAgICAgICAgdmFyIGNvbmZpZ0ZhbWlseXMgPSBlZGl0b3IuY29uZmlnLmZhbWlseXM7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy5mb250ZmFtaWx5LFxuICAgICAgICAgICAgY29tbWFuZE5hbWU6ICdmb250TmFtZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyW5pWw5o2uXG4gICAgICAgIHZhciBkYXRhICA9IHt9O1xuICAgICAgICAvKlxuICAgICAgICAgICAgZGF0YSDpnIDopoHnmoTnu5PmnoRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAnY29tbWFuZFZhbHVlJzogJ3RpdGxlJ1xuICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgfVxuICAgICAgICAqL1xuICAgICAgICAkLmVhY2goY29uZmlnRmFtaWx5cywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICAgIC8vIGNvbmZpZ0ZhbWlseXMg5piv5pWw57uE77yMZGF0YSDmmK/lr7nosaFcbiAgICAgICAgICAgIGRhdGFbdl0gPSB2O1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDliJvlu7pkcm9wbGlzdFxuICAgICAgICB2YXIgdHBsID0gJzxzcGFuIHN0eWxlPVwiZm9udC1mYW1pbHk6eyNjb21tYW5kVmFsdWV9O1wiPnsjdGl0bGV9PC9zcGFuPic7XG4gICAgICAgIG1lbnUuZHJvcExpc3QgPSBuZXcgRS5Ecm9wTGlzdChlZGl0b3IsIG1lbnUsIHtcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICB0cGw6IHRwbCxcbiAgICAgICAgICAgIHNlbGVjdG9yRm9yRUxlbUNvbW1hbmQ6ICdmb250W2ZhY2VdJyAgLy8g5Li65LqG5omn6KGMIGVkaXRvci5jb21tYW5kRm9yRWxlbSDogIzkvKDlhaXnmoRlbGVt5p+l6K+i5pa55byPXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iSB1cGRhdGUgc2VsZWN0ZWQg5LqL5Lu2XG4gICAgICAgIG1lbnUudXBkYXRlU2VsZWN0ZWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2ZvbnRbZmFjZV0nKTtcbiAgICAgICAgICAgIGlmIChyYW5nZUVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDlop7liqDliLBlZGl0b3Llr7nosaHkuK1cbiAgICAgICAgZWRpdG9yLm1lbnVzW21lbnVJZF0gPSBtZW51O1xuICAgIH0pO1xufSk7XG4vLyDlrZflj7cg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdmb250c2l6ZSc7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcbiAgICAgICAgdmFyIGNvbmZpZ1NpemUgPSBlZGl0b3IuY29uZmlnLmZvbnRzaXplcztcblxuICAgICAgICAvLyDliJvlu7ogbWVudSDlr7nosaFcbiAgICAgICAgdmFyIG1lbnUgPSBuZXcgRS5NZW51KHtcbiAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgICAgICAgaWQ6IG1lbnVJZCxcbiAgICAgICAgICAgIHRpdGxlOiBsYW5nLmZvbnRzaXplLFxuICAgICAgICAgICAgY29tbWFuZE5hbWU6ICdmb250U2l6ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyW5pWw5o2uXG4gICAgICAgIHZhciBkYXRhICA9IGNvbmZpZ1NpemU7XG4gICAgICAgIC8qXG4gICAgICAgICAgICBkYXRhIOmcgOimgeeahOe7k+aehFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICdjb21tYW5kVmFsdWUnOiAndGl0bGUnXG4gICAgICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICB9XG4gICAgICAgICovXG5cbiAgICAgICAgLy8g5Yib5bu6ZHJvcGxpc3RcbiAgICAgICAgdmFyIHRwbCA9ICc8c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTp7I3RpdGxlfTtcIj57I3RpdGxlfTwvc3Bhbj4nO1xuICAgICAgICBtZW51LmRyb3BMaXN0ID0gbmV3IEUuRHJvcExpc3QoZWRpdG9yLCBtZW51LCB7XG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgdHBsOiB0cGwsXG4gICAgICAgICAgICBzZWxlY3RvckZvckVMZW1Db21tYW5kOiAnZm9udFtzaXplXScgIC8vIOS4uuS6huaJp+ihjCBlZGl0b3IuY29tbWFuZEZvckVsZW0g6ICM5Lyg5YWl55qEZWxlbeafpeivouaWueW8j1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDlrprkuYkgdXBkYXRlIHNlbGVjdGVkIOS6i+S7tlxuICAgICAgICBtZW51LnVwZGF0ZVNlbGVjdGVkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdmb250W3NpemVdJyk7XG4gICAgICAgICAgICBpZiAocmFuZ2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcbn0pO1xuLy8gaGVhZCDoj5zljZVcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2hlYWQnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy5oZWFkLFxuICAgICAgICAgICAgY29tbWFuZE5hbWU6ICdmb3JtYXRCbG9jaydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyW5pWw5o2uXG4gICAgICAgIHZhciBkYXRhICA9IHtcbiAgICAgICAgICAgICc8aDE+JzogJ+agh+mimDEnLFxuICAgICAgICAgICAgJzxoMj4nOiAn5qCH6aKYMicsXG4gICAgICAgICAgICAnPGgzPic6ICfmoIfpopgzJyxcbiAgICAgICAgICAgICc8aDQ+JzogJ+agh+mimDQnLFxuICAgICAgICAgICAgJzxoNT4nOiAn5qCH6aKYNSdcbiAgICAgICAgfTtcbiAgICAgICAgLypcbiAgICAgICAgICAgIGRhdGEg6ZyA6KaB55qE57uT5p6EXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJ2NvbW1hbmRWYWx1ZSc6ICd0aXRsZSdcbiAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgICAgIH1cbiAgICAgICAgKi9cblxuICAgICAgICB2YXIgaXNPcmRlcmVkTGlzdDtcbiAgICAgICAgZnVuY3Rpb24gYmVmb3JlRXZlbnQoZSkge1xuICAgICAgICAgICAgaWYgKGVkaXRvci5xdWVyeUNvbW1hbmRTdGF0ZSgnSW5zZXJ0T3JkZXJlZExpc3QnKSkge1xuICAgICAgICAgICAgICAgIGlzT3JkZXJlZExpc3QgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgLy8g5YWI5Y+W5raI5pyJ5bqP5YiX6KGoXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ0luc2VydE9yZGVyZWRMaXN0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlzT3JkZXJlZExpc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFmdGVyRXZlbnQoZSkge1xuICAgICAgICAgICAgaWYgKGlzT3JkZXJlZExpc3QpIHtcbiAgICAgICAgICAgICAgICAvLyDlho3orr7nva7mnInluo/liJfooahcbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZChlLCAnSW5zZXJ0T3JkZXJlZExpc3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWIm+W7umRyb3BsaXN0XG4gICAgICAgIHZhciB0cGwgPSAneyNjb21tYW5kVmFsdWV9eyN0aXRsZX0nO1xuICAgICAgICBtZW51LmRyb3BMaXN0ID0gbmV3IEUuRHJvcExpc3QoZWRpdG9yLCBtZW51LCB7XG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgdHBsOiB0cGwsXG4gICAgICAgICAgICAvLyDlr7kgb2wg55u05o6l6K6+572uIGhlYWTvvIzkvJrlh7rnjrDmr4/kuKogbGkg55qEIGluZGV4IOmDveWPmOaIkCAxIOeahOmXrumimO+8jOWboOatpOimgeWFiOWPlua2iCBvbO+8jOeEtuWQjuiuvue9riBoZWFk77yM5pyA5ZCO5YaN5aKe5Yqg5LiKIG9sXG4gICAgICAgICAgICBiZWZvcmVFdmVudDogYmVmb3JlRXZlbnQsXG4gICAgICAgICAgICBhZnRlckV2ZW50OiBhZnRlckV2ZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iSB1cGRhdGUgc2VsZWN0ZWQg5LqL5Lu2XG4gICAgICAgIG1lbnUudXBkYXRlU2VsZWN0ZWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2gxLGgyLGgzLGg0LGg1Jyk7XG4gICAgICAgICAgICBpZiAocmFuZ2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcbn0pO1xuLy8gdW5vcmRlcmxpc3Qg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ3Vub3JkZXJsaXN0JztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcudW5vcmRlcmxpc3QsXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ0luc2VydFVub3JkZXJlZExpc3QnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gb3JkZXJsaXN0IOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdvcmRlcmxpc3QnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy5vcmRlcmxpc3QsXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ0luc2VydE9yZGVyZWRMaXN0J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDlop7liqDliLBlZGl0b3Llr7nosaHkuK1cbiAgICAgICAgZWRpdG9yLm1lbnVzW21lbnVJZF0gPSBtZW51O1xuICAgIH0pO1xuXG59KTtcbi8vIGFsaWdubGVmdCDoj5zljZVcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmNyZWF0ZU1lbnUoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgIHZhciBtZW51SWQgPSAnYWxpZ25sZWZ0JztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcuYWxpZ25sZWZ0LFxuICAgICAgICAgICAgY29tbWFuZE5hbWU6ICdKdXN0aWZ5TGVmdCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5a6a5LmJIHVwZGF0ZSBzZWxlY3RlZCDkuovku7ZcbiAgICAgICAgbWVudS51cGRhdGVTZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgICAgIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAncCxoMSxoMixoMyxoNCxoNSxsaScsIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzc1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0gJiYgZWxlbS5zdHlsZSAmJiBlbGVtLnN0eWxlLmNzc1RleHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjc3NUZXh0ID0gZWxlbS5zdHlsZS5jc3NUZXh0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzVGV4dCAmJiAvdGV4dC1hbGlnbjpcXHMqbGVmdDsvLnRlc3QoY3NzVGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkKGVsZW0pLmF0dHIoJ2FsaWduJykgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICAvLyBmZiDkuK3vvIzorr7nva5hbGlnbi1sZWZ05LmL5ZCO77yM5Lya5pivIDxwIGFsaWduPVwibGVmdFwiPnh4eDwvcD5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJhbmdlRWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gYWxpZ25jZW50ZXIg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2FsaWduY2VudGVyJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcuYWxpZ25jZW50ZXIsXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ0p1c3RpZnlDZW50ZXInXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iSB1cGRhdGUgc2VsZWN0ZWQg5LqL5Lu2XG4gICAgICAgIG1lbnUudXBkYXRlU2VsZWN0ZWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ3AsaDEsaDIsaDMsaDQsaDUsbGknLCBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBjc3NUZXh0O1xuICAgICAgICAgICAgICAgIGlmIChlbGVtICYmIGVsZW0uc3R5bGUgJiYgZWxlbS5zdHlsZS5jc3NUZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3NzVGV4dCA9IGVsZW0uc3R5bGUuY3NzVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzc1RleHQgJiYgL3RleHQtYWxpZ246XFxzKmNlbnRlcjsvLnRlc3QoY3NzVGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkKGVsZW0pLmF0dHIoJ2FsaWduJykgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZmIOS4re+8jOiuvue9rmFsaWduLWNlbnRlcuS5i+WQju+8jOS8muaYryA8cCBhbGlnbj1cImNlbnRlclwiPnh4eDwvcD5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJhbmdlRWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gYWxpZ25yaWdodCDoj5zljZVcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmNyZWF0ZU1lbnUoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgIHZhciBtZW51SWQgPSAnYWxpZ25yaWdodCc7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcblxuICAgICAgICAvLyDliJvlu7ogbWVudSDlr7nosaFcbiAgICAgICAgdmFyIG1lbnUgPSBuZXcgRS5NZW51KHtcbiAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgICAgICAgaWQ6IG1lbnVJZCxcbiAgICAgICAgICAgIHRpdGxlOiBsYW5nLmFsaWducmlnaHQsXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ0p1c3RpZnlSaWdodCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5a6a5LmJIHVwZGF0ZSBzZWxlY3RlZCDkuovku7ZcbiAgICAgICAgbWVudS51cGRhdGVTZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgICAgIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAncCxoMSxoMixoMyxoNCxoNSxsaScsIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzc1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0gJiYgZWxlbS5zdHlsZSAmJiBlbGVtLnN0eWxlLmNzc1RleHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjc3NUZXh0ID0gZWxlbS5zdHlsZS5jc3NUZXh0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzVGV4dCAmJiAvdGV4dC1hbGlnbjpcXHMqcmlnaHQ7Ly50ZXN0KGNzc1RleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJChlbGVtKS5hdHRyKCdhbGlnbicpID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZmIOS4re+8jOiuvue9rmFsaWduLXJpZ2h05LmL5ZCO77yM5Lya5pivIDxwIGFsaWduPVwicmlnaHRcIj54eHg8L3A+XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyYW5nZUVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDlop7liqDliLBlZGl0b3Llr7nosaHkuK1cbiAgICAgICAgZWRpdG9yLm1lbnVzW21lbnVJZF0gPSBtZW51O1xuICAgIH0pO1xuXG59KTtcbi8vIGxpbmsg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2xpbmsnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy5saW5rXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIm+W7uiBkcm9wUGFuZWxcbiAgICAgICAgdmFyICRjb250ZW50ID0gJCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRkaXYxID0gJCgnPGRpdiBzdHlsZT1cIm1hcmdpbjoyMHB4IDEwcHg7XCIgY2xhc3M9XCJjbGVhcmZpeFwiPjwvZGl2PicpO1xuICAgICAgICB2YXIgJGRpdjIgPSAkZGl2MS5jbG9uZSgpO1xuICAgICAgICB2YXIgJGRpdjMgPSAkZGl2MS5jbG9uZSgpLmNzcygnbWFyZ2luJywgJzAgMTBweCcpO1xuICAgICAgICB2YXIgJHRleHRJbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYmxvY2tcIiBwbGFjZWhvbGRlcj1cIicgKyBsYW5nLnRleHQgKyAnXCIvPicpO1xuICAgICAgICB2YXIgJHVybElucHV0ID0gJCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJibG9ja1wiIHBsYWNlaG9sZGVyPVwiJyArIGxhbmcubGluayArICdcIi8+Jyk7XG4gICAgICAgIHZhciAkYnRuU3VibWl0ID0gJCgnPGJ1dHRvbiBjbGFzcz1cInJpZ2h0XCI+JyArIGxhbmcuc3VibWl0ICsgJzwvYnV0dG9uPicpO1xuICAgICAgICB2YXIgJGJ0bkNhbmNlbCA9ICQoJzxidXR0b24gY2xhc3M9XCJyaWdodCBncmF5XCI+JyArIGxhbmcuY2FuY2VsICsgJzwvYnV0dG9uPicpO1xuXG4gICAgICAgICRkaXYxLmFwcGVuZCgkdGV4dElucHV0KTtcbiAgICAgICAgJGRpdjIuYXBwZW5kKCR1cmxJbnB1dCk7XG4gICAgICAgICRkaXYzLmFwcGVuZCgkYnRuU3VibWl0KS5hcHBlbmQoJGJ0bkNhbmNlbCk7XG4gICAgICAgICRjb250ZW50LmFwcGVuZCgkZGl2MSkuYXBwZW5kKCRkaXYyKS5hcHBlbmQoJGRpdjMpO1xuICAgICAgICBcbiAgICAgICAgbWVudS5kcm9wUGFuZWwgPSBuZXcgRS5Ecm9wUGFuZWwoZWRpdG9yLCBtZW51LCB7XG4gICAgICAgICAgICAkY29udGVudDogJGNvbnRlbnQsXG4gICAgICAgICAgICB3aWR0aDogMzAwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iWNsaWNr5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbWVudSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZHJvcFBhbmVsID0gbWVudS5kcm9wUGFuZWw7XG5cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS3pmpDol48tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBpZiAoZHJvcFBhbmVsLmlzU2hvd2luZykge1xuICAgICAgICAgICAgICAgIGRyb3BQYW5lbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0t5pi+56S6LS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgICAgICAvLyDph43nva4gaW5wdXRcbiAgICAgICAgICAgICR0ZXh0SW5wdXQudmFsKCcnKTtcbiAgICAgICAgICAgICR1cmxJbnB1dC52YWwoJ2h0dHA6Ly8nKTtcblxuICAgICAgICAgICAgLy8g6I635Y+WdXJsXG4gICAgICAgICAgICB2YXIgdXJsID0gJyc7XG4gICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdhJyk7XG4gICAgICAgICAgICBpZiAocmFuZ2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gcmFuZ2VFbGVtLmhyZWYgfHwgJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOiOt+WPliB0ZXh0XG4gICAgICAgICAgICB2YXIgdGV4dCA9ICcnO1xuICAgICAgICAgICAgdmFyIGlzUmFuZ2VFbXB0eSA9IGVkaXRvci5pc1JhbmdlRW1wdHkoKTtcbiAgICAgICAgICAgIGlmICghaXNSYW5nZUVtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy8g6YCJ5Yy65LiN5piv56m6XG4gICAgICAgICAgICAgICAgdGV4dCA9IGVkaXRvci5nZXRSYW5nZVRleHQoKSB8fCAnJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmFuZ2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c6YCJ5Yy656m677yM5bm25LiU5ZyoIGEg5qCH562+5LmL5YaFXG4gICAgICAgICAgICAgICAgdGV4dCA9IHJhbmdlRWxlbS50ZXh0Q29udGVudCB8fCByYW5nZUVsZW0uaW5uZXJIVE1MO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDorr7nva4gdXJsIOWSjCB0ZXh0XG4gICAgICAgICAgICB1cmwgJiYgJHVybElucHV0LnZhbCh1cmwpO1xuICAgICAgICAgICAgdGV4dCAmJiAkdGV4dElucHV0LnZhbCh0ZXh0KTtcblxuICAgICAgICAgICAgLy8g5aaC5p6c5pyJ6YCJ5Yy65YaF5a6577yMdGV4dGlucHV0IOS4jeiDveS/ruaUuVxuICAgICAgICAgICAgaWYgKCFpc1JhbmdlRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAkdGV4dElucHV0LmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICR0ZXh0SW5wdXQucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5pi+56S677yI6KaB6K6+572u5aW95LqG5omA5pyJaW5wdXTnmoTlgLzlkozlsZ7mgKfkuYvlkI7lho3mmL7npLrvvIlcbiAgICAgICAgICAgIGRyb3BQYW5lbC5zaG93KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5a6a5LmJIHVwZGF0ZSBzZWxlY3RlZCDkuovku7ZcbiAgICAgICAgbWVudS51cGRhdGVTZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgICAgIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAnYScpO1xuICAgICAgICAgICAgaWYgKHJhbmdlRWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOOAjuWPlua2iOOAjyDmjInpkq5cbiAgICAgICAgJGJ0bkNhbmNlbC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbWVudS5kcm9wUGFuZWwuaGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDjgI7noa7lrprjgI/mjInpkq5cbiAgICAgICAgJGJ0blN1Ym1pdC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShyYW5nZUVsZW0sICdhJyk7XG4gICAgICAgICAgICB2YXIgaXNSYW5nZUVtcHR5ID0gZWRpdG9yLmlzUmFuZ2VFbXB0eSgpO1xuXG4gICAgICAgICAgICB2YXIgJGxpbmtFbGVtLCBsaW5rSHRtbDtcbiAgICAgICAgICAgIHZhciBjb21tYW5kRm4sIGNhbGxiYWNrO1xuICAgICAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG4gICAgICAgICAgICB2YXIgJG9sZExpbmtzLCAkbmV3TGlua3M7XG4gICAgICAgICAgICB2YXIgdW5pcUlkID0gJ2xpbmsnICsgRS5yYW5kb20oKTtcblxuICAgICAgICAgICAgLy8g6I635Y+W5pWw5o2uXG4gICAgICAgICAgICB2YXIgdXJsID0gJC50cmltKCR1cmxJbnB1dC52YWwoKSk7XG4gICAgICAgICAgICB2YXIgdGV4dCA9ICQudHJpbSgkdGV4dElucHV0LnZhbCgpKTtcblxuICAgICAgICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgICAgICAgICBtZW51LmRyb3BQYW5lbC5mb2N1c0ZpcnN0SW5wdXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdXJsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWlzUmFuZ2VFbXB0eSkge1xuICAgICAgICAgICAgICAgIC8vIOmAieS4reWMuuWfn+acieWGheWuue+8jOWImeaJp+ihjOm7mOiupOWRveS7pFxuXG4gICAgICAgICAgICAgICAgLy8g6I635Y+W55uu5YmNIHR4dCDlhoXmiYDmnInpk77mjqXvvIzlubbkuLrlvZPliY3pk77mjqXlgZrkuIDkuKrmoIforrBcbiAgICAgICAgICAgICAgICAkb2xkTGlua3MgPSAkdHh0LmZpbmQoJ2EnKTtcbiAgICAgICAgICAgICAgICAkb2xkTGlua3MuYXR0cih1bmlxSWQsICcxJyk7XG5cbiAgICAgICAgICAgICAgICAvLyDmiafooYzlkb3ku6QgXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ2NyZWF0ZUxpbmsnLCB1cmwpO1xuXG4gICAgICAgICAgICAgICAgLy8g5Y6755qE5rKh5pyJ5qCH6K6w55qE6ZO+5o6l77yM5Y2z5Yia5Yia5o+S5YWl55qE6ZO+5o6lXG4gICAgICAgICAgICAgICAgJG5ld0xpbmtzID0gJHR4dC5maW5kKCdhJykubm90KCdbJyArIHVuaXFJZCArICddJyk7XG4gICAgICAgICAgICAgICAgJG5ld0xpbmtzLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTsgLy8g5aKe5YqgIF9ibGFua1xuXG4gICAgICAgICAgICAgICAgLy8g5Y675o6J5LmL5YmN5YGa55qE5qCH6K6wXG4gICAgICAgICAgICAgICAgJG9sZExpbmtzLnJlbW92ZUF0dHIodW5pcUlkKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXRFbGVtKSB7XG4gICAgICAgICAgICAgICAgLy8g5peg6YCJ5Lit5Yy65Z+f77yM5ZyoIGEg5qCH562+5LmL5YaF77yM5L+u5pS56K+lIGEg5qCH562+55qE5YaF5a655ZKM6ZO+5o6lXG4gICAgICAgICAgICAgICAgJGxpbmtFbGVtID0gJCh0YXJnZXRFbGVtKTtcbiAgICAgICAgICAgICAgICBjb21tYW5kRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRsaW5rRWxlbS5hdHRyKCdocmVmJywgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgJGxpbmtFbGVtLnRleHQodGV4dCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXN0b3JlU2VsZWN0aW9uQnlFbGVtKHRhcmdldEVsZW0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8g5omn6KGM5ZG95LukXG4gICAgICAgICAgICAgICAgZWRpdG9yLmN1c3RvbUNvbW1hbmQoZSwgY29tbWFuZEZuLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOaXoOmAieS4reWMuuWfn++8jOS4jeWcqCBhIOagh+etvuS5i+WGhe+8jOaPkuWFpeaWsOeahOmTvuaOpVxuXG4gICAgICAgICAgICAgICAgbGlua0h0bWwgPSAnPGEgaHJlZj1cIicgKyB1cmwgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArIHRleHQgKyAnPC9hPic7XG4gICAgICAgICAgICAgICAgaWYgKEUudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua0h0bWwgKz0gJzxzcGFuPiZuYnNwOzwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZChlLCAnaW5zZXJ0SHRtbCcsIGxpbmtIdG1sKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gdW5saW5rIOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICd1bmxpbmsnO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy51bmxpbmssXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogJ3VuTGluaydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY2xpY2sg5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudCA9IGZ1bmN0aW9uICAoZSkge1xuICAgICAgICAgICAgdmFyIGlzUmFuZ2VFbXB0eSA9IGVkaXRvci5pc1JhbmdlRW1wdHkoKTtcbiAgICAgICAgICAgIGlmICghaXNSYW5nZUVtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy8g5pyJ6YCJ5Lit5Yy65Z+f77yM5oiW6ICFSUU477yM5omn6KGM6buY6K6k5ZG95LukXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ3VuTGluaycpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5peg6YCJ5Lit5Yy65Z+fLi4uXG5cbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICB2YXIgYUVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2EnKTtcbiAgICAgICAgICAgIGlmICghYUVsZW0pIHtcbiAgICAgICAgICAgICAgICAvLyDkuI3lnKggYSDkuYvlhoXvvIzov5Tlm55cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDlnKggYSDkuYvlhoVcbiAgICAgICAgICAgIHZhciAkYSA9ICQoYUVsZW0pO1xuICAgICAgICAgICAgdmFyICRzcGFuID0gJCgnPHNwYW4+JyArICRhLnRleHQoKSArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICBmdW5jdGlvbiBjb21tYW5kRm4oKSB7XG4gICAgICAgICAgICAgICAgJGEuYWZ0ZXIoJHNwYW4pLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlc3RvcmVTZWxlY3Rpb25CeUVsZW0oJHNwYW4uZ2V0KDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVkaXRvci5jdXN0b21Db21tYW5kKGUsIGNvbW1hbmRGbiwgY2FsbGJhY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gdGFibGUg6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ3RhYmxlJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcudGFibGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZHJvcFBhbmVsIOWGheWuuVxuICAgICAgICB2YXIgJGNvbnRlbnQgPSAkKCc8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAxNHB4OyBjb2xvcjogIzY2NjsgdGV4dC1hbGlnbjpyaWdodDtcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICR0YWJsZSA9ICQoJzx0YWJsZSBjbGFzcz1cImNob29zZS10YWJsZVwiIHN0eWxlPVwibWFyZ2luLWJvdHRvbToxMHB4O21hcmdpbi10b3A6NXB4O1wiPicpO1xuICAgICAgICB2YXIgJHJvdyA9ICQoJzxzcGFuPjA8L3NwYW4+Jyk7XG4gICAgICAgIHZhciAkcm93c3BhbiA9ICQoJzxzcGFuPiDooYwgPC9zcGFuPicpO1xuICAgICAgICB2YXIgJGNvbCA9ICQoJzxzcGFuPjA8L3NwYW4+Jyk7XG4gICAgICAgIHZhciAkY29sc3BhbiA9ICQoJzxzcGFuPiDliJc8L3NwYW4+Jyk7XG4gICAgICAgIHZhciAkdHI7XG4gICAgICAgIHZhciBpLCBqO1xuXG4gICAgICAgIC8vIOWIm+W7uuS4gOS4qm7ooYxu5YiX55qE6KGo5qC8XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAxNTsgaSsrKSB7XG4gICAgICAgICAgICAkdHIgPSAkKCc8dHIgaW5kZXg9XCInICsgKGkgKyAxKSArICdcIj4nKTtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCAyMDsgaisrKSB7XG4gICAgICAgICAgICAgICAgJHRyLmFwcGVuZCgkKCc8dGQgaW5kZXg9XCInICsgKGogKyAxKSArICdcIj4nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkdGFibGUuYXBwZW5kKCR0cik7XG4gICAgICAgIH1cbiAgICAgICAgJGNvbnRlbnQuYXBwZW5kKCR0YWJsZSk7XG4gICAgICAgICRjb250ZW50LmFwcGVuZCgkcm93KS5hcHBlbmQoJHJvd3NwYW4pLmFwcGVuZCgkY29sKS5hcHBlbmQoJGNvbHNwYW4pO1xuXG4gICAgICAgIC8vIOWumuS5iXRhYmxl5LqL5Lu2XG4gICAgICAgICR0YWJsZS5vbignbW91c2VlbnRlcicsICd0ZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgJGN1cnJlbnRUZCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGRJbmRleCA9ICRjdXJyZW50VGQuYXR0cignaW5kZXgnKTtcbiAgICAgICAgICAgIHZhciAkY3VycmVudFRyID0gJGN1cnJlbnRUZC5wYXJlbnQoKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VHJJbmRleCA9ICRjdXJyZW50VHIuYXR0cignaW5kZXgnKTtcblxuICAgICAgICAgICAgLy8g5pi+56S6XG4gICAgICAgICAgICAkcm93LnRleHQoY3VycmVudFRySW5kZXgpO1xuICAgICAgICAgICAgJGNvbC50ZXh0KGN1cnJlbnRUZEluZGV4KTtcblxuICAgICAgICAgICAgLy8g6YGN5Y6G6K6+572u6IOM5pmv6aKc6ImyXG4gICAgICAgICAgICAkdGFibGUuZmluZCgndHInKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRyID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICB2YXIgdHJJbmRleCA9ICR0ci5hdHRyKCdpbmRleCcpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh0ckluZGV4LCAxMCkgPD0gcGFyc2VJbnQoY3VycmVudFRySW5kZXgsIDEwKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyDor6XooYzpnIDopoHlj6/og73pnIDopoHorr7nva7og4zmma/oibJcbiAgICAgICAgICAgICAgICAgICAgJHRyLmZpbmQoJ3RkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRkID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZEluZGV4ID0gJHRkLmF0dHIoJ2luZGV4Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodGRJbmRleCwgMTApIDw9IHBhcnNlSW50KGN1cnJlbnRUZEluZGV4LCAxMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDpnIDopoHorr7nva7og4zmma/oibJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDpnIDopoHnp7vpmaTog4zmma/oibJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGQucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyDmlLnooYzkuI3pnIDopoHorr7nva7og4zmma/oibJcbiAgICAgICAgICAgICAgICAgICAgJHRyLmZpbmQoJ3RkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyBtb3VzZWxlYXZlIOWIoOmZpOiDjOaZr+iJslxuICAgICAgICAgICAgJHRhYmxlLmZpbmQoJ3RkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAkcm93LnRleHQoMCk7XG4gICAgICAgICAgICAkY29sLnRleHQoMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOaPkuWFpeihqOagvFxuICAgICAgICAkdGFibGUub24oJ2NsaWNrJywgJ3RkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciAkY3VycmVudFRkID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUZEluZGV4ID0gJGN1cnJlbnRUZC5hdHRyKCdpbmRleCcpO1xuICAgICAgICAgICAgdmFyICRjdXJyZW50VHIgPSAkY3VycmVudFRkLnBhcmVudCgpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUckluZGV4ID0gJGN1cnJlbnRUci5hdHRyKCdpbmRleCcpO1xuXG4gICAgICAgICAgICB2YXIgcm93bnVtID0gcGFyc2VJbnQoY3VycmVudFRySW5kZXgsIDEwKTtcbiAgICAgICAgICAgIHZhciBjb2xudW0gPSBwYXJzZUludChjdXJyZW50VGRJbmRleCwgMTApO1xuXG4gICAgICAgICAgICAvLyAtLS0tLS0tLSDmi7zmjqV0YWJlbCBodG1sIC0tLS0tLS0tXG5cbiAgICAgICAgICAgIHZhciBpLCBqO1xuICAgICAgICAgICAgdmFyIHRhYmxlSHRtbCA9ICc8dGFibGU+JztcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCByb3dudW07IGkrKykge1xuICAgICAgICAgICAgICAgIHRhYmxlSHRtbCArPSAnPHRyPic7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgY29sbnVtOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGFibGVIdG1sICs9ICc8dGQ+PHNwYW4+Jm5ic3A7PC9zcGFuPjwvdGQ+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFibGVIdG1sICs9ICc8L3RyPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWJsZUh0bWwgKz0gJzwvdGFibGU+JztcblxuICAgICAgICAgICAgLy8gLS0tLS0tLS0g5omn6KGM5ZG95LukIC0tLS0tLS0tXG4gICAgICAgICAgICBlZGl0b3IuY29tbWFuZChlLCAnaW5zZXJ0SHRtbCcsIHRhYmxlSHRtbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIm+W7uiBwYW5lbFxuICAgICAgICBtZW51LmRyb3BQYW5lbCA9IG5ldyBFLkRyb3BQYW5lbChlZGl0b3IsIG1lbnUsIHtcbiAgICAgICAgICAgICRjb250ZW50OiAkY29udGVudCxcbiAgICAgICAgICAgIHdpZHRoOiAyNjJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyBlbW90aW9uIOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdlbW90aW9uJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBjb25maWcgPSBlZGl0b3IuY29uZmlnO1xuICAgICAgICB2YXIgbGFuZyA9IGNvbmZpZy5sYW5nO1xuICAgICAgICB2YXIgY29uZmlnRW1vdGlvbnMgPSBjb25maWcuZW1vdGlvbnM7XG4gICAgICAgIHZhciBlbW90aW9uc1Nob3cgPSBjb25maWcuZW1vdGlvbnNTaG93O1xuXG4gICAgICAgIC8vIOiusOW9leavj+S4gOS4quihqOaDheWbvueJh+eahOWcsOWdgFxuICAgICAgICBlZGl0b3IuZW1vdGlvblVybHMgPSBbXTtcblxuICAgICAgICAvLyDliJvlu7ogbWVudSDlr7nosaFcbiAgICAgICAgdmFyIG1lbnUgPSBuZXcgRS5NZW51KHtcbiAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgICAgICAgaWQ6IG1lbnVJZCxcbiAgICAgICAgICAgIHRpdGxlOiBsYW5nLmVtb3Rpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5re75Yqg6KGo5oOF5Zu+54mH55qE5Ye95pWwXG4gICAgICAgIGZ1bmN0aW9uIGluc2VydEVtb3Rpb25JbWdzKGRhdGEsICR0YWJDb250ZW50KSB7XG4gICAgICAgICAgICAvLyDmt7vliqDooajmg4Xlm77niYdcbiAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAoaywgZW1vdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBzcmMgPSBlbW90aW9uLmljb24gfHwgZW1vdGlvbi51cmw7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZW1vdGlvbi52YWx1ZSB8fCBlbW90aW9uLnRpdGxlO1xuICAgICAgICAgICAgICAgIC8vIOmAmui/h+mFjee9riBlZGl0b3IuY29uZmlnLmVtb3Rpb25zU2hvdyDnmoTlgLzmnaXkv67mlLnmj5LlhaXliLDnvJbovpHlmajnmoTlhoXlrrnvvIjlm77niYcvdmFsdWXvvIlcbiAgICAgICAgICAgICAgICB2YXIgY29tbWFuZFZhbHVlID0gZW1vdGlvbnNTaG93ID09PSAnaWNvbicgPyBzcmMgOiB2YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgJGNvbW1hbmQgPSAkKCc8YSBocmVmPVwiI1wiIGNvbW1hbmRWYWx1ZT1cIicgKyBjb21tYW5kVmFsdWUgKyAnXCI+PC9hPicpO1xuICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJCgnPGltZz4nKTtcbiAgICAgICAgICAgICAgICAkaW1nLmF0dHIoJ19zcmMnLCBzcmMpOyAgLy8g5YWI5bCGIHNyYyDlpI3liLbliLAgJ19zcmMnIOWxnuaAp++8jOWFiOS4jeWKoOi9vVxuXG4gICAgICAgICAgICAgICAgJGNvbW1hbmQuYXBwZW5kKCRpbWcpO1xuICAgICAgICAgICAgICAgICR0YWJDb250ZW50LmFwcGVuZCgkY29tbWFuZCk7XG5cbiAgICAgICAgICAgICAgICAvLyDorrDlvZXkuIvmr4/kuIDkuKrooajmg4Xlm77niYfnmoTlnLDlnYBcbiAgICAgICAgICAgICAgICBlZGl0b3IuZW1vdGlvblVybHMucHVzaChzcmMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmi7zmjqUgZHJvcFBhbmVsIOWGheWuuVxuICAgICAgICB2YXIgJHBhbmVsQ29udGVudCA9ICQoJzxkaXYgY2xhc3M9XCJwYW5lbC10YWJcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICR0YWJDb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwidGFiLWNvbnRhaW5lclwiPjwvZGl2PicpO1xuICAgICAgICB2YXIgJGNvbnRlbnRDb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwiY29udGVudC1jb250YWluZXIgZW1vdGlvbi1jb250ZW50LWNvbnRhaW5lclwiPjwvZGl2PicpO1xuICAgICAgICAkLmVhY2goY29uZmlnRW1vdGlvbnMsIGZ1bmN0aW9uIChrLCBlbW90aW9uKSB7XG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBlbW90aW9uLnRpdGxlO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBlbW90aW9uLmRhdGE7XG5cbiAgICAgICAgICAgIEUubG9nKCfmraPlnKjlpITnkIYgJyArIHRpdGxlICsgJyDooajmg4XnmoTmlbDmja4uLi4nKTtcblxuICAgICAgICAgICAgLy8g5aKe5Yqg6K+l57uE6KGo5oOF55qEdGFi5ZKMY29udGVudFxuICAgICAgICAgICAgdmFyICR0YWIgPSAkKCc8YSBocmVmPVwiI1wiPicgKyB0aXRsZSArJyA8L2E+Jyk7XG4gICAgICAgICAgICAkdGFiQ29udGFpbmVyLmFwcGVuZCgkdGFiKTtcbiAgICAgICAgICAgIHZhciAkdGFiQ29udGVudCA9ICQoJzxkaXYgY2xhc3M9XCJjb250ZW50XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAkY29udGVudENvbnRhaW5lci5hcHBlbmQoJHRhYkNvbnRlbnQpO1xuXG4gICAgICAgICAgICAvLyB0YWIg5YiH5o2i5LqL5Lu2XG4gICAgICAgICAgICAkdGFiLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgJHRhYkNvbnRhaW5lci5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICRjb250ZW50Q29udGFpbmVyLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgJHRhYkNvbnRlbnQuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgJHRhYi5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8g5aSE55CGZGF0YVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIC8vIHVybCDlvaLlvI/vvIzpnIDopoHpgJrov4dhamF45LuO6K+ldXJs6I635Y+W5pWw5o2uXG4gICAgICAgICAgICAgICAgRS5sb2coJ+WwhumAmui/hyAnICsgZGF0YSArICcg5Zyw5Z2AYWpheOS4i+i9veihqOaDheWMhScpO1xuICAgICAgICAgICAgICAgICQuZ2V0KGRhdGEsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJC5wYXJzZUpTT04ocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgRS5sb2coJ+S4i+i9veWujOavle+8jOW+l+WIsCAnICsgcmVzdWx0Lmxlbmd0aCArICcg5Liq6KGo5oOFJyk7XG4gICAgICAgICAgICAgICAgICAgIGluc2VydEVtb3Rpb25JbWdzKHJlc3VsdCwgJHRhYkNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmICggT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYXJyYXknKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgLy8g5pWw57uE77yM5Y2zIGRhdGEg55u05o6l5bCx5piv6KGo5oOF5YyF5pWw5o2uXG4gICAgICAgICAgICAgICAgaW5zZXJ0RW1vdGlvbkltZ3MoZGF0YSwgJHRhYkNvbnRlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDlhbbku5bmg4XlhrXvvIxkYXRh5qC85byP5LiN5a+5XG4gICAgICAgICAgICAgICAgRS5lcnJvcignZGF0YSDmlbDmja7moLzlvI/plJnor6/vvIzor7fkv67mlLnkuLrmraPnoa7moLzlvI/vvIzlj4LogIPmlofmoaPvvJonICsgRS5kb2NzaXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkcGFuZWxDb250ZW50LmFwcGVuZCgkdGFiQ29udGFpbmVyKS5hcHBlbmQoJGNvbnRlbnRDb250YWluZXIpO1xuXG4gICAgICAgIC8vIOm7mOiupOaYvuekuuesrOS4gOS4qnRhYlxuICAgICAgICAkdGFiQ29udGFpbmVyLmNoaWxkcmVuKCkuZmlyc3QoKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgJGNvbnRlbnRDb250YWluZXIuY2hpbGRyZW4oKS5maXJzdCgpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgIC8vIOaPkuWFpeihqOaDhWNvbW1hbmTkuovku7ZcbiAgICAgICAgJGNvbnRlbnRDb250YWluZXIub24oJ2NsaWNrJywgJ2FbY29tbWFuZFZhbHVlXScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgJGEgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgICB2YXIgY29tbWFuZFZhbHVlID0gJGEuYXR0cignY29tbWFuZFZhbHVlJyk7XG4gICAgICAgICAgICB2YXIgaW1nO1xuXG4gICAgICAgICAgICAvLyBjb21tYW5kVmFsdWUg5pyJ5Y+v6IO95piv5Zu+54mHdXJs77yM5Lmf5pyJ5Y+v6IO95piv6KGo5oOF55qEIHZhbHVl77yM6ZyA6KaB5Yy65Yir5a+55b6FXG5cbiAgICAgICAgICAgIGlmIChlbW90aW9uc1Nob3cgPT09ICdpY29uJykge1xuICAgICAgICAgICAgICAgIC8vIOaPkuWFpeWbvueJh1xuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdJbnNlcnRJbWFnZScsIGNvbW1hbmRWYWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOaPkuWFpXZhbHVlXG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ2luc2VydEh0bWwnLCAnPHNwYW4+JyArIGNvbW1hbmRWYWx1ZSArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5re75YqgcGFuZWxcbiAgICAgICAgbWVudS5kcm9wUGFuZWwgPSBuZXcgRS5Ecm9wUGFuZWwoZWRpdG9yLCBtZW51LCB7XG4gICAgICAgICAgICAkY29udGVudDogJHBhbmVsQ29udGVudCxcbiAgICAgICAgICAgIHdpZHRoOiAzNTBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5a6a5LmJY2xpY2vkuovku7bvvIjlvILmraXliqDovb3ooajmg4Xlm77niYfvvIlcbiAgICAgICAgbWVudS5jbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBtZW51ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkcm9wUGFuZWwgPSBtZW51LmRyb3BQYW5lbDtcblxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLemakOiXjy0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGlmIChkcm9wUGFuZWwuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgZHJvcFBhbmVsLmhpZGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS3mmL7npLotLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBkcm9wUGFuZWwuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyDlvILmraXliqDovb3lm77niYdcbiAgICAgICAgICAgIGlmIChtZW51LmltZ0xvYWRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjb250ZW50Q29udGFpbmVyLmZpbmQoJ2ltZycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICB2YXIgX3NyYyA9ICRpbWcuYXR0cignX3NyYycpO1xuICAgICAgICAgICAgICAgICRpbWcub24oJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBFLmVycm9yKCfliqDovb3kuI3lh7rooajmg4Xlm77niYcgJyArIF9zcmMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRpbWcuYXR0cignc3JjJywgX3NyYyk7XG4gICAgICAgICAgICAgICAgJGltZy5yZW1vdmVBdHRyKCdfc3JjJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1lbnUuaW1nTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDlop7liqDliLBlZGl0b3Llr7nosaHkuK1cbiAgICAgICAgZWRpdG9yLm1lbnVzW21lbnVJZF0gPSBtZW51O1xuICAgIH0pO1xuXG59KTtcbi8vIGltZyDoj5zljZVcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmNyZWF0ZU1lbnUoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgIHZhciBtZW51SWQgPSAnaW1nJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcuaW1nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIm+W7uiBwYW5lbCBjb250ZW50XG4gICAgICAgIHZhciAkcGFuZWxDb250ZW50ID0gJCgnPGRpdiBjbGFzcz1cInBhbmVsLXRhYlwiPjwvZGl2PicpO1xuICAgICAgICB2YXIgJHRhYkNvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJ0YWItY29udGFpbmVyXCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkY29udGVudENvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJjb250ZW50LWNvbnRhaW5lclwiPjwvZGl2PicpO1xuICAgICAgICAkcGFuZWxDb250ZW50LmFwcGVuZCgkdGFiQ29udGFpbmVyKS5hcHBlbmQoJGNvbnRlbnRDb250YWluZXIpO1xuXG4gICAgICAgIC8vIHRhYlxuICAgICAgICB2YXIgJHVwbG9hZFRhYiA9ICQoJzxhIGhyZWY9XCIjXCI+JyArIGxhbmcudXBsb2FkSW1nICsgJzwvYT4nKTtcbiAgICAgICAgdmFyICRsaW5rVGFiID0gJCgnPGEgaHJlZj1cIiNcIj4nICsgbGFuZy5saW5rSW1nICsgJzwvYT4nKTtcbiAgICAgICAgJHRhYkNvbnRhaW5lci5hcHBlbmQoJHVwbG9hZFRhYikuYXBwZW5kKCRsaW5rVGFiKTtcblxuICAgICAgICAvLyDkuIrkvKDlm77niYcgY29udGVudFxuICAgICAgICB2YXIgJHVwbG9hZENvbnRlbnQgPSAkKCc8ZGl2IGNsYXNzPVwiY29udGVudFwiPjwvZGl2PicpO1xuICAgICAgICAkY29udGVudENvbnRhaW5lci5hcHBlbmQoJHVwbG9hZENvbnRlbnQpO1xuXG4gICAgICAgIC8vIOe9kee7nOWbvueJhyBjb250ZW50XG4gICAgICAgIHZhciAkbGlua0NvbnRlbnQgPSAkKCc8ZGl2IGNsYXNzPVwiY29udGVudFwiPjwvZGl2PicpO1xuICAgICAgICAkY29udGVudENvbnRhaW5lci5hcHBlbmQoJGxpbmtDb250ZW50KTtcbiAgICAgICAgbGlua0NvbnRlbnRIYW5kbGVyKGVkaXRvciwgbWVudSwgJGxpbmtDb250ZW50KTtcblxuICAgICAgICAvLyDmt7vliqBwYW5lbFxuICAgICAgICBtZW51LmRyb3BQYW5lbCA9IG5ldyBFLkRyb3BQYW5lbChlZGl0b3IsIG1lbnUsIHtcbiAgICAgICAgICAgICRjb250ZW50OiAkcGFuZWxDb250ZW50LFxuICAgICAgICAgICAgd2lkdGg6IDQwMCxcbiAgICAgICAgICAgIG9uUmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8g5riy5p+T5ZCO55qE5Zue6LCD5LqL5Lu277yM55So5LqO5omn6KGM6Ieq5a6a5LmJ5LiK5Lyg55qEaW5pdFxuICAgICAgICAgICAgICAgIC8vIOWboOS4uua4suafk+S5i+WQju+8jOS4iuS8oOmdouadv+eahGRvbeaJjeS8muiiq+a4suafk+WIsOmhtemdou+8jOaJjeiDveiuqeesrOS4ieaWueepuumXtOiOt+WPluWIsFxuICAgICAgICAgICAgICAgIHZhciBpbml0ID0gZWRpdG9yLmNvbmZpZy5jdXN0b21VcGxvYWRJbml0O1xuICAgICAgICAgICAgICAgIGluaXQgJiYgaW5pdC5jYWxsKGVkaXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG5cbiAgICAgICAgLy8gdGFiIOWIh+aNouS6i+S7tlxuICAgICAgICBmdW5jdGlvbiB0YWJUb2dnbGUoKSB7XG4gICAgICAgICAgICAkdXBsb2FkVGFiLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgJHRhYkNvbnRhaW5lci5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICRjb250ZW50Q29udGFpbmVyLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgJHVwbG9hZENvbnRlbnQuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgJHVwbG9hZFRhYi5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRsaW5rVGFiLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgJHRhYkNvbnRhaW5lci5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICRjb250ZW50Q29udGFpbmVyLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgJGxpbmtDb250ZW50LmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICRsaW5rVGFiLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIC8vIGZvY3VzIGlucHV0XG4gICAgICAgICAgICAgICAgaWYgKEUucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgJGxpbmtDb250ZW50LmZpbmQoJ2lucHV0W3R5cGU9dGV4dF0nKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDpu5jorqTmg4XlhrVcbiAgICAgICAgICAgIC8vICR1cGxvYWRUYWIuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAvLyAkdXBsb2FkQ29udGVudC5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICR1cGxvYWRUYWIuY2xpY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOmakOiXj+S4iuS8oOWbvueJh1xuICAgICAgICBmdW5jdGlvbiBoaWRlVXBsb2FkSW1nKCkge1xuICAgICAgICAgICAgJHRhYkNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgICR1cGxvYWRDb250ZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgJGxpbmtDb250ZW50LmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6ZqQ6JeP572R57uc5Zu+54mHXG4gICAgICAgIGZ1bmN0aW9uIGhpZGVMaW5rSW1nKCkge1xuICAgICAgICAgICAgJHRhYkNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgICRsaW5rQ29udGVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICR1cGxvYWRDb250ZW50LmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5Yik5pat55So5oi35piv5ZCm6YWN572u5LqG5LiK5Lyg5Zu+54mHXG4gICAgICAgIGVkaXRvci5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb25maWcgPSBlZGl0b3IuY29uZmlnO1xuICAgICAgICAgICAgdmFyIHVwbG9hZEltZ1VybCA9IGNvbmZpZy51cGxvYWRJbWdVcmw7XG4gICAgICAgICAgICB2YXIgY3VzdG9tVXBsb2FkID0gY29uZmlnLmN1c3RvbVVwbG9hZDtcbiAgICAgICAgICAgIHZhciBsaW5rSW1nID0gY29uZmlnLmhpZGVMaW5rSW1nO1xuICAgICAgICAgICAgdmFyICR1cGxvYWRJbWdQYW5lbDtcblxuICAgICAgICAgICAgaWYgKHVwbG9hZEltZ1VybCB8fCBjdXN0b21VcGxvYWQpIHtcbiAgICAgICAgICAgICAgICAvLyDnrKzkuIDvvIzmmrTpnLLlh7ogJHVwbG9hZENvbnRlbnQg5Lul5L6/55So5oi36Ieq5a6a5LmJIO+8ge+8ge+8gemHjeimgVxuICAgICAgICAgICAgICAgIGVkaXRvci4kdXBsb2FkQ29udGVudCA9ICR1cGxvYWRDb250ZW50O1xuXG4gICAgICAgICAgICAgICAgLy8g56ys5LqM77yM57uR5a6adGFi5YiH5o2i5LqL5Lu2XG4gICAgICAgICAgICAgICAgdGFiVG9nZ2xlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAobGlua0ltZykge1xuICAgICAgICAgICAgICAgICAgICAvLyDpmpDol4/nvZHnu5zlm77niYdcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxpbmtJbWcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOacqumFjee9ruS4iuS8oOWbvueJh+WKn+iDvVxuICAgICAgICAgICAgICAgIGhpZGVVcGxvYWRJbWcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g54K55Ye7ICR1cGxvYWRDb250ZW50IOeri+WNs+makOiXjyBkcm9wUGFuZWxcbiAgICAgICAgICAgIC8vIOS4uuS6huWFvOWuuUlFOOOAgTnnmoTkuIrkvKDvvIzlm6DkuLpJRTjjgIE55L2/55SoIG1vZGFsIOS4iuS8oFxuICAgICAgICAgICAgLy8g6L+Z6YeM5L2/55So5byC5q2l77yM5Li65LqG5LiN5aao56KN6auY57qn5rWP6KeI5Zmo6YCa6L+H54K55Ye7ICR1cGxvYWRDb250ZW50IOmAieaLqeaWh+S7tlxuICAgICAgICAgICAgZnVuY3Rpb24gaGlkZVBhbmVsKCkge1xuICAgICAgICAgICAgICAgIG1lbnUuZHJvcFBhbmVsLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICR1cGxvYWRDb250ZW50LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhpZGVQYW5lbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0g5aSE55CG572R57uc5Zu+54mHY29udGVudCAtLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBsaW5rQ29udGVudEhhbmRsZXIgKGVkaXRvciwgbWVudSwgJGxpbmtDb250ZW50KSB7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuICAgICAgICB2YXIgJHVybENvbnRhaW5lciA9ICQoJzxkaXYgc3R5bGU9XCJtYXJnaW46MjBweCAxMHB4IDEwcHggMTBweDtcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICR1cmxJbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYmxvY2tcIiBwbGFjZWhvbGRlcj1cImh0dHA6Ly9cIi8+Jyk7XG4gICAgICAgICR1cmxDb250YWluZXIuYXBwZW5kKCR1cmxJbnB1dCk7XG4gICAgICAgIHZhciAkYnRuU3VibWl0ID0gJCgnPGJ1dHRvbiBjbGFzcz1cInJpZ2h0XCI+JyArIGxhbmcuc3VibWl0ICsgJzwvYnV0dG9uPicpO1xuICAgICAgICB2YXIgJGJ0bkNhbmNlbCA9ICQoJzxidXR0b24gY2xhc3M9XCJyaWdodCBncmF5XCI+JyArIGxhbmcuY2FuY2VsICsgJzwvYnV0dG9uPicpO1xuXG4gICAgICAgICRsaW5rQ29udGVudC5hcHBlbmQoJHVybENvbnRhaW5lcikuYXBwZW5kKCRidG5TdWJtaXQpLmFwcGVuZCgkYnRuQ2FuY2VsKTtcblxuICAgICAgICAvLyDlj5bmtohcbiAgICAgICAgJGJ0bkNhbmNlbC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbWVudS5kcm9wUGFuZWwuaGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjYWxsYmFjayBcbiAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgICAgICAkdXJsSW5wdXQudmFsKCcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOehruWumlxuICAgICAgICAkYnRuU3VibWl0LmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gJC50cmltKCR1cmxJbnB1dC52YWwoKSk7XG4gICAgICAgICAgICBpZiAoIXVybCkge1xuICAgICAgICAgICAgICAgIC8vIOaXoOWGheWuuVxuICAgICAgICAgICAgICAgICR1cmxJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGltZ0h0bWwgPSAnPGltZyBzdHlsZT1cIm1heC13aWR0aDoxMDAlO1wiIHNyYz1cIicgKyB1cmwgKyAnXCIvPic7XG4gICAgICAgICAgICBlZGl0b3IuY29tbWFuZChlLCAnaW5zZXJ0SHRtbCcsIGltZ0h0bWwsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59KTtcbi8vIHZpZGVvIOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICd2aWRlbyc7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcbiAgICAgICAgdmFyIHJlZyA9IC9ePChpZnJhbWUpfChlbWJlZCkvaTsgIC8vIDxpZnJhbWUuLi4g5oiW6ICFIDxlbWJlZC4uLiDmoLzlvI9cblxuICAgICAgICAvLyDliJvlu7ogbWVudSDlr7nosaFcbiAgICAgICAgdmFyIG1lbnUgPSBuZXcgRS5NZW51KHtcbiAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgICAgICAgaWQ6IG1lbnVJZCxcbiAgICAgICAgICAgIHRpdGxlOiBsYW5nLnZpZGVvXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIm+W7uiBwYW5lbCDlhoXlrrlcbiAgICAgICAgdmFyICRjb250ZW50ID0gJCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRsaW5rSW5wdXRDb250YWluZXIgPSAkKCc8ZGl2IHN0eWxlPVwibWFyZ2luOjIwcHggMTBweDtcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRsaW5rSW5wdXQgPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImJsb2NrXCIgcGxhY2Vob2xkZXI9XFwn5qC85byP5aaC77yaPGlmcmFtZSBzcmM9XCIuLi5cIiBmcmFtZWJvcmRlcj0wIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT5cXCcvPicpO1xuICAgICAgICAkbGlua0lucHV0Q29udGFpbmVyLmFwcGVuZCgkbGlua0lucHV0KTtcbiAgICAgICAgdmFyICRzaXplQ29udGFpbmVyID0gJCgnPGRpdiBzdHlsZT1cIm1hcmdpbjoyMHB4IDEwcHg7XCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkd2lkdGhJbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiNjQwXCIgc3R5bGU9XCJ3aWR0aDo1MHB4O3RleHQtYWxpZ246Y2VudGVyO1wiLz4nKTtcbiAgICAgICAgdmFyICRoZWlnaHRJbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiNDk4XCIgc3R5bGU9XCJ3aWR0aDo1MHB4O3RleHQtYWxpZ246Y2VudGVyO1wiLz4nKTtcbiAgICAgICAgJHNpemVDb250YWluZXIuYXBwZW5kKCc8c3Bhbj4gJyArIGxhbmcud2lkdGggKyAnIDwvc3Bhbj4nKVxuICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHdpZHRoSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnPHNwYW4+IHB4ICZuYnNwOyZuYnNwOyZuYnNwOzwvc3Bhbj4nKVxuICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJzxzcGFuPiAnICsgbGFuZy5oZWlnaHQgKyAnIDwvc3Bhbj4nKVxuICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGhlaWdodElucHV0KVxuICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJzxzcGFuPiBweCA8L3NwYW4+Jyk7XG4gICAgICAgIHZhciAkYnRuQ29udGFpbmVyID0gJCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRob3dUb0NvcHkgPSAkKCc8YSBocmVmPVwiaHR0cDovL3d3dy5rYW5jbG91ZC5jbi93YW5nZnVwZW5nL3dhbmdlZGl0b3IyLzEzNDk3M1wiIHRhcmdldD1cIl9ibGFua1wiIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLXRvcDoxMHB4O21hcmdpbi1sZWZ0OjEwcHg7Y29sb3I6Izk5OTtcIj7lpoLkvZXlpI3liLbop4bpopHpk77mjqXvvJ88L2E+Jyk7XG4gICAgICAgIHZhciAkYnRuU3VibWl0ID0gJCgnPGJ1dHRvbiBjbGFzcz1cInJpZ2h0XCI+JyArIGxhbmcuc3VibWl0ICsgJzwvYnV0dG9uPicpO1xuICAgICAgICB2YXIgJGJ0bkNhbmNlbCA9ICQoJzxidXR0b24gY2xhc3M9XCJyaWdodCBncmF5XCI+JyArIGxhbmcuY2FuY2VsICsgJzwvYnV0dG9uPicpO1xuICAgICAgICAkYnRuQ29udGFpbmVyLmFwcGVuZCgkaG93VG9Db3B5KS5hcHBlbmQoJGJ0blN1Ym1pdCkuYXBwZW5kKCRidG5DYW5jZWwpO1xuICAgICAgICAkY29udGVudC5hcHBlbmQoJGxpbmtJbnB1dENvbnRhaW5lcikuYXBwZW5kKCRzaXplQ29udGFpbmVyKS5hcHBlbmQoJGJ0bkNvbnRhaW5lcik7XG5cbiAgICAgICAgLy8g5Y+W5raI5oyJ6ZKuXG4gICAgICAgICRidG5DYW5jZWwuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRsaW5rSW5wdXQudmFsKCcnKTtcbiAgICAgICAgICAgIG1lbnUuZHJvcFBhbmVsLmhpZGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g56Gu5a6a5oyJ6ZKuXG4gICAgICAgICRidG5TdWJtaXQuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBsaW5rID0gJC50cmltKCRsaW5rSW5wdXQudmFsKCkpO1xuICAgICAgICAgICAgdmFyICRsaW5rO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gcGFyc2VJbnQoJHdpZHRoSW5wdXQudmFsKCkpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHBhcnNlSW50KCRoZWlnaHRJbnB1dC52YWwoKSk7XG4gICAgICAgICAgICB2YXIgJGRpdiA9ICQoJzxkaXY+Jyk7XG4gICAgICAgICAgICB2YXIgaHRtbCA9ICc8cD57Y29udGVudH08L3A+JztcblxuICAgICAgICAgICAgLy8g6aqM6K+B5pWw5o2uXG4gICAgICAgICAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgICAgICAgICBtZW51LmRyb3BQYW5lbC5mb2N1c0ZpcnN0SW5wdXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcmVnLnRlc3QobGluaykpIHtcbiAgICAgICAgICAgICAgICBhbGVydCgn6KeG6aKR6ZO+5o6l5qC85byP6ZSZ6K+v77yBJyk7XG4gICAgICAgICAgICAgICAgbWVudS5kcm9wUGFuZWwuZm9jdXNGaXJzdElucHV0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNOYU4od2lkdGgpIHx8IGlzTmFOKGhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICBhbGVydCgn5a695bqm5oiW6auY5bqm5LiN5piv5pWw5a2X77yBJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkbGluayA9ICQobGluayk7XG5cbiAgICAgICAgICAgIC8vIOiuvue9rumrmOW6puWSjOWuveW6plxuICAgICAgICAgICAgJGxpbmsuYXR0cignd2lkdGgnLCB3aWR0aClcbiAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodCk7XG5cbiAgICAgICAgICAgIC8vIOaLvOaOpeWtl+espuS4slxuICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgne2NvbnRlbnR9JywgJGRpdi5hcHBlbmQoJGxpbmspLmh0bWwoKSk7XG5cbiAgICAgICAgICAgIC8vIOaJp+ihjOWRveS7pFxuICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ2luc2VydEh0bWwnLCBodG1sKTtcbiAgICAgICAgICAgICRsaW5rSW5wdXQudmFsKCcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5Yib5bu6cGFuZWxcbiAgICAgICAgbWVudS5kcm9wUGFuZWwgPSBuZXcgRS5Ecm9wUGFuZWwoZWRpdG9yLCBtZW51LCB7XG4gICAgICAgICAgICAkY29udGVudDogJGNvbnRlbnQsXG4gICAgICAgICAgICB3aWR0aDogNDAwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWinuWKoOWIsGVkaXRvcuWvueixoeS4rVxuICAgICAgICBlZGl0b3IubWVudXNbbWVudUlkXSA9IG1lbnU7XG4gICAgfSk7XG5cbn0pO1xuLy8gbG9jYXRpb24g6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8g5Yik5pat5rWP6KeI5Zmo55qEIGlucHV0IOaYr+WQpuaUr+aMgSBrZXl1cFxuICAgIHZhciBpbnB1dEtleXVwID0gKGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gJ29ua2V5dXAnIGluIGlucHV0O1xuICAgIH0pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykpO1xuXG4gICAgLy8g55m+5bqm5Zyw5Zu+55qEa2V5XG4gICAgRS5iYWlkdU1hcEFrID0gJ1RWaGpZanExSUNUMnFxTDVMZFM4bXdhcyc7XG5cbiAgICAvLyDkuIDkuKrpobXpnaLkuK3vvIzlpoLmnpzmnInlpJrkuKrnvJbovpHlmajvvIzlnLDlm77kvJrlh7rnjrDpl67popjjgILov5nkuKrlj4LmlbDorrDlvZXkuIDkuIvvvIzlpoLmnpzotoXov4cgMSDlsLHmj5DnpLpcbiAgICBFLm51bWJlck9mTG9jYXRpb24gPSAwO1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2xvY2F0aW9uJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKytFLm51bWJlck9mTG9jYXRpb24gPiAxKSB7XG4gICAgICAgICAgICBFLmVycm9yKCfnm67liY3kuI3mlK/mjIHlnKjkuIDkuKrpobXpnaLlpJrkuKrnvJbovpHlmajkuIrlkIzml7bkvb/nlKjlnLDlm77vvIzlj6/pgJrov4foh6rlrprkuYnoj5zljZXphY3nva7ljrvmjonlnLDlm77oj5zljZUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgY29uZmlnID0gZWRpdG9yLmNvbmZpZztcbiAgICAgICAgdmFyIGxhbmcgPSBjb25maWcubGFuZztcbiAgICAgICAgdmFyIGFrID0gY29uZmlnLm1hcEFrO1xuXG4gICAgICAgIC8vIOWcsOWbvueahOWPmOmHj+WtmOWCqOWIsOi/meS4quWcsOaWuVxuICAgICAgICBlZGl0b3IubWFwRGF0YSA9IHt9O1xuICAgICAgICB2YXIgbWFwRGF0YSA9IGVkaXRvci5tYXBEYXRhO1xuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0g5Zyw5Zu+5LqL5Lu2IC0tLS0tLS0tLS1cbiAgICAgICAgbWFwRGF0YS5tYXJrZXJzID0gW107XG4gICAgICAgIG1hcERhdGEubWFwQ29udGFpbmVySWQgPSAnbWFwJyArIEUucmFuZG9tKCk7XG5cbiAgICAgICAgbWFwRGF0YS5jbGVhckxvY2F0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBEYXRhLm1hcDtcbiAgICAgICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFwLmNsZWFyT3ZlcmxheXMoKTtcblxuICAgICAgICAgICAgLy/lkIzml7bvvIzmuIXnqbptYXJrZXLmlbDnu4RcbiAgICAgICAgICAgIG1hcERhdGEubWFya2VycyA9IFtdO1xuICAgICAgICB9O1xuXG4gICAgICAgIG1hcERhdGEuc2VhcmNoTWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcERhdGEubWFwO1xuICAgICAgICAgICAgaWYgKCFtYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBCTWFwID0gd2luZG93LkJNYXA7XG4gICAgICAgICAgICB2YXIgY2l0eU5hbWUgPSAkY2l0eUlucHV0LnZhbCgpO1xuICAgICAgICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9ICRzZWFyY2hJbnB1dC52YWwoKTtcbiAgICAgICAgICAgIHZhciBteUdlbywgbWFya2VyO1xuXG4gICAgICAgICAgICBpZihjaXR5TmFtZSAhPT0gJycpe1xuICAgICAgICAgICAgICAgIGlmKCFsb2NhdGlvbk5hbWUgfHwgbG9jYXRpb25OYW1lID09PSAnJyl7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5jZW50ZXJBbmRab29tKGNpdHlOYW1lLCAxMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy/lnLDlnYDop6PmnpBcbiAgICAgICAgICAgICAgICBpZihsb2NhdGlvbk5hbWUgJiYgbG9jYXRpb25OYW1lICE9PSAnJyl7XG4gICAgICAgICAgICAgICAgICAgIG15R2VvID0gbmV3IEJNYXAuR2VvY29kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8g5bCG5Zyw5Z2A6Kej5p6Q57uT5p6c5pi+56S65Zyo5Zyw5Zu+5LiKLOW5tuiwg+aVtOWcsOWbvuinhumHjlxuICAgICAgICAgICAgICAgICAgICBteUdlby5nZXRQb2ludChsb2NhdGlvbk5hbWUsIGZ1bmN0aW9uKHBvaW50KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2ludCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5jZW50ZXJBbmRab29tKHBvaW50LCAxMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyID0gbmV3IEJNYXAuTWFya2VyKHBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAuYWRkT3ZlcmxheShtYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlci5lbmFibGVEcmFnZ2luZygpOyAgLy/lhYHorrjmi5bmi71cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBEYXRhLm1hcmtlcnMucHVzaChtYXJrZXIpOyAgLy/lsIZtYXJrZXLliqDlhaXliLDmlbDnu4TkuK1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmnKrmib7liLAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAuY2VudGVyQW5kWm9vbShjaXR5TmFtZSwgMTEpOyAgLy/mib7kuI3liLDliJnph43mlrDlrprkvY3liLDln47luIJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgY2l0eU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gLy8gaWYoY2l0eU5hbWUgIT09ICcnKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGxvYWQgc2NyaXB0IOS5i+WQjueahCBjYWxsYmFja1xuICAgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBmYWxzZTtcbiAgICAgICAgd2luZG93LmJhaWR1TWFwQ2FsbEJhY2sgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8g6YG/5YWN6YeN5aSN5Yqg6L29XG4gICAgICAgICAgICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhc0NhbGxiYWNrID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIEJNYXAgPSB3aW5kb3cuQk1hcDtcbiAgICAgICAgICAgIGlmICghbWFwRGF0YS5tYXApIHtcbiAgICAgICAgICAgICAgICAvLyDliJvlu7pNYXDlrp7kvotcbiAgICAgICAgICAgICAgICBtYXBEYXRhLm1hcCA9IG5ldyBCTWFwLk1hcChtYXBEYXRhLm1hcENvbnRhaW5lcklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBEYXRhLm1hcDtcblxuICAgICAgICAgICAgbWFwLmNlbnRlckFuZFpvb20obmV3IEJNYXAuUG9pbnQoMTE2LjQwNCwgMzkuOTE1KSwgMTEpOyAgLy8g5Yid5aeL5YyW5Zyw5Zu+LOiuvue9ruS4reW/g+eCueWdkOagh+WSjOWcsOWbvue6p+WIq1xuICAgICAgICAgICAgbWFwLmFkZENvbnRyb2wobmV3IEJNYXAuTWFwVHlwZUNvbnRyb2woKSk7ICAgLy/mt7vliqDlnLDlm77nsbvlnovmjqfku7ZcbiAgICAgICAgICAgIG1hcC5zZXRDdXJyZW50Q2l0eShcIuWMl+S6rFwiKTsgICAgICAgICAgLy8g6K6+572u5Zyw5Zu+5pi+56S655qE5Z+O5biCIOatpOmhueaYr+W/hemhu+iuvue9rueahFxuICAgICAgICAgICAgbWFwLmVuYWJsZVNjcm9sbFdoZWVsWm9vbSh0cnVlKTsgICAgIC8v5byA5ZCv6byg5qCH5rua6L2u57yp5pS+XG5cbiAgICAgICAgICAgIC8v5qC55o2uSVDlrprkvY1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvY2F0aW9uRnVuKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgdmFyIGNpdHlOYW1lID0gcmVzdWx0Lm5hbWU7XG4gICAgICAgICAgICAgICAgbWFwLnNldENlbnRlcihjaXR5TmFtZSk7XG5cbiAgICAgICAgICAgICAgICAvLyDorr7nva7ln47luILlkI3np7BcbiAgICAgICAgICAgICAgICAkY2l0eUlucHV0LnZhbChjaXR5TmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKEUucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNlYXJjaElucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0SWQsIHNlYXJjaEZuO1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dEtleXVwKSB7XG4gICAgICAgICAgICAgICAgICAgLy8g5bm257uR5a6a5pCc57Si5LqL5Lu2IC0gaW5wdXQg5pSv5oyBIGtleXVwXG4gICAgICAgICAgICAgICAgICAgc2VhcmNoRm4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50eXBlID09PSAna2V5dXAnICYmIGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KG1hcERhdGEuc2VhcmNoTWFwLCA1MDApO1xuICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgJGNpdHlJbnB1dC5vbigna2V5dXAgY2hhbmdlIHBhc3RlJywgc2VhcmNoRm4pO1xuICAgICAgICAgICAgICAgICAgICRzZWFyY2hJbnB1dC5vbigna2V5dXAgY2hhbmdlIHBhc3RlJywgc2VhcmNoRm4pOyBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyDlubbnu5HlrprmkJzntKLkuovku7YgLSBpbnB1dCDkuI3mlK/mjIEga2V5dXBcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRjb250ZW50LmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFuZWwg5LiN5pi+56S65LqG77yM5bCx5LiN55So5YaN55uR5o6n5LqGXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudENpdHkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2VhcmNoID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2l0eSA9ICRjaXR5SW5wdXQudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoID0gJHNlYXJjaElucHV0LnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2l0eSAhPT0gY3VycmVudENpdHkgfHwgc2VhcmNoICE9PSBjdXJyZW50U2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yia6I635Y+W55qE5pWw5o2u5ZKM5LmL5YmN55qE5pWw5o2u5LiN5LiA6Ie077yM5omn6KGM5p+l6K+iXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwRGF0YS5zZWFyY2hNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDmlbDmja5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2l0eSA9IGNpdHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlYXJjaCA9IHNlYXJjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g57un57ut55uR5o6nXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHNlYXJjaEZuLCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8g5byA5aeL55uR5o6nXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoc2VhcmNoRm4sIDEwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBteUNpdHkgPSBuZXcgQk1hcC5Mb2NhbENpdHkoKTtcbiAgICAgICAgICAgIG15Q2l0eS5nZXQobG9jYXRpb25GdW4pO1xuXG4gICAgICAgICAgICAvL+m8oOagh+eCueWHu++8jOWIm+W7uuS9jee9rlxuICAgICAgICAgICAgbWFwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IEJNYXAuTWFya2VyKG5ldyBCTWFwLlBvaW50KGUucG9pbnQubG5nLCBlLnBvaW50LmxhdCkpOyBcbiAgICAgICAgICAgICAgICBtYXAuYWRkT3ZlcmxheShtYXJrZXIpOyAgXG4gICAgICAgICAgICAgICAgbWFya2VyLmVuYWJsZURyYWdnaW5nKCk7XG4gICAgICAgICAgICAgICAgbWFwRGF0YS5tYXJrZXJzLnB1c2gobWFya2VyKTsgIC8v5Yqg5YWl5Yiw5pWw57uE5LitXG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbWFwRGF0YS5sb2FkTWFwU2NyaXB0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgICAgICAgICBzY3JpcHQuc3JjID0gXCJodHRwczovL2FwaS5tYXAuYmFpZHUuY29tL2FwaT92PTIuMCZhaz1cIiArIGFrICsgXCImcz0xJmNhbGxiYWNrPWJhaWR1TWFwQ2FsbEJhY2tcIjsgIC8vIGJhaWR1TWFwQ2FsbEJhY2vmmK/kuIDkuKrmnKzlnLDlh73mlbBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gSUUxMC0g5oql6ZSZXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBFLmVycm9yKCfliqDovb3lnLDlm77ov4fnqIvkuK3lj5HnlJ/plJnor68nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyDliJ3lp4vljJblnLDlm75cbiAgICAgICAgbWFwRGF0YS5pbml0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5CTWFwKSB7XG4gICAgICAgICAgICAgICAgLy8g5LiN5piv56ys5LiA5qyh77yM55u05o6l5aSE55CG5Zyw5Zu+5Y2z5Y+vXG4gICAgICAgICAgICAgICAgd2luZG93LmJhaWR1TWFwQ2FsbEJhY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g56ys5LiA5qyh77yM5YWI5Yqg6L295Zyw5Zu+IHNjcmlwdO+8jOWGjeWkhOeQhuWcsOWbvu+8iHNjcmlwdOWKoOi9veWujOiHquWKqOaJp+ihjOWkhOeQhu+8iVxuICAgICAgICAgICAgICAgIG1hcERhdGEubG9hZE1hcFNjcmlwdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0g5Yib5bu6IG1lbnUg5a+56LGhIC0tLS0tLS0tLS1cblxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcubG9jYXRpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZWRpdG9yLm1lbnVzW21lbnVJZF0gPSBtZW51O1xuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0g5p6E5bu6VUkgLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vIHBhbmVsIGNvbnRlbnQgXG4gICAgICAgIHZhciAkY29udGVudCA9ICQoJzxkaXY+PC9kaXY+Jyk7XG5cbiAgICAgICAgLy8g5pCc57Si5qGGXG4gICAgICAgIHZhciAkaW5wdXRDb250YWluZXIgPSAkKCc8ZGl2IHN0eWxlPVwibWFyZ2luOjEwcHggMDtcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRjaXR5SW5wdXQgPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIi8+Jyk7XG4gICAgICAgICRjaXR5SW5wdXQuY3NzKHtcbiAgICAgICAgICAgIHdpZHRoOiAnODBweCcsXG4gICAgICAgICAgICAndGV4dC1hbGlnbic6ICdjZW50ZXInXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgJHNlYXJjaElucHV0ID0gJCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIvPicpO1xuICAgICAgICAkc2VhcmNoSW5wdXQuY3NzKHtcbiAgICAgICAgICAgIHdpZHRoOiAnMzAwcHgnLFxuICAgICAgICAgICAgJ21hcmdpbi1sZWZ0JzogJzEwcHgnXG4gICAgICAgIH0pLmF0dHIoJ3BsYWNlaG9sZGVyJywgbGFuZy5zZWFyY2hsb2NhdGlvbik7XG4gICAgICAgIHZhciAkY2xlYXJCdG4gPSAkKCc8YnV0dG9uIGNsYXNzPVwicmlnaHQgbGlua1wiPicgKyBsYW5nLmNsZWFyTG9jYXRpb24gKyAnPC9idXR0b24+Jyk7XG4gICAgICAgICRpbnB1dENvbnRhaW5lci5hcHBlbmQoJGNsZWFyQnRuKVxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRjaXR5SW5wdXQpXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHNlYXJjaElucHV0KTtcbiAgICAgICAgJGNvbnRlbnQuYXBwZW5kKCRpbnB1dENvbnRhaW5lcik7XG5cbiAgICAgICAgLy8g5riF6Zmk5L2N572u5oyJ6ZKuXG4gICAgICAgICRjbGVhckJ0bi5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgJHNlYXJjaElucHV0LnZhbCgnJyk7XG4gICAgICAgICAgICAkc2VhcmNoSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIG1hcERhdGEuY2xlYXJMb2NhdGlvbnMoKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5Zyw5Zu+XG4gICAgICAgIHZhciAkbWFwID0gJCgnPGRpdiBpZD1cIicgKyBtYXBEYXRhLm1hcENvbnRhaW5lcklkICsgJ1wiPjwvZGl2PicpO1xuICAgICAgICAkbWFwLmNzcyh7XG4gICAgICAgICAgICBoZWlnaHQ6ICcyNjBweCcsXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgICAnbWFyZ2luLXRvcCc6ICcxMHB4JyxcbiAgICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjZjFmMWYxJ1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyICRtYXBMb2FkaW5nID0gJCgnPHNwYW4+JyArIGxhbmcubG9hZGluZyArICc8L3NwYW4+Jyk7XG4gICAgICAgICRtYXBMb2FkaW5nLmNzcyh7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwcHgnLFxuICAgICAgICAgICAgJ3RleHQtYWxpZ24nOiAnY2VudGVyJyxcbiAgICAgICAgICAgIHRvcDogJzQ1JScsXG4gICAgICAgICAgICBsZWZ0OiAnNTAlJyxcbiAgICAgICAgICAgICdtYXJnaW4tbGVmdCc6ICctNTBweCdcbiAgICAgICAgfSk7XG4gICAgICAgICRtYXAuYXBwZW5kKCRtYXBMb2FkaW5nKTtcbiAgICAgICAgJGNvbnRlbnQuYXBwZW5kKCRtYXApO1xuXG4gICAgICAgIC8vIOaMiemSrlxuICAgICAgICB2YXIgJGJ0bkNvbnRhaW5lciA9ICQoJzxkaXYgc3R5bGU9XCJtYXJnaW46MTBweCAwO1wiPjwvZGl2PicpO1xuICAgICAgICB2YXIgJGJ0blN1Ym1pdCA9ICQoJzxidXR0b24gY2xhc3M9XCJyaWdodFwiPicgKyBsYW5nLnN1Ym1pdCArICc8L2J1dHRvbj4nKTtcbiAgICAgICAgdmFyICRidG5DYW5jZWwgPSAkKCc8YnV0dG9uIGNsYXNzPVwicmlnaHQgZ3JheVwiPicgKyBsYW5nLmNhbmNlbCArICc8L2J1dHRvbj4nKTtcbiAgICAgICAgdmFyICRjaGVja0xhYmVsID0gJCgnPGxhYmVsIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLXRvcDoxMHB4O2NvbG9yOiM2NjY7XCI+PC9sYWJlbD4nKTtcbiAgICAgICAgdmFyICRjaGVjayA9ICQoJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIj4nKTtcbiAgICAgICAgJGNoZWNrTGFiZWwuYXBwZW5kKCRjaGVjaykuYXBwZW5kKCc8c3BhbiBzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1sZWZ0OjVweDtcIj4gICcgKyBsYW5nLmR5bmFtaWNNYXAgKyAnPC9zcGFuPicpO1xuICAgICAgICAkYnRuQ29udGFpbmVyLmFwcGVuZCgkY2hlY2tMYWJlbClcbiAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGJ0blN1Ym1pdClcbiAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGJ0bkNhbmNlbCk7XG4gICAgICAgICRjb250ZW50LmFwcGVuZCgkYnRuQ29udGFpbmVyKTtcblxuICAgICAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgICAgICRzZWFyY2hJbnB1dC52YWwoJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g44CO5Y+W5raI44CP5oyJ6ZKu5LqL5Lu2XG4gICAgICAgICRidG5DYW5jZWwuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBtZW51LmRyb3BQYW5lbC5oaWRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOOAjuehruWumuOAj+aMiemSruS6i+S7tlxuICAgICAgICAkYnRuU3VibWl0LmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwRGF0YS5tYXAsXG4gICAgICAgICAgICAgICAgaXNEeW5hbWljID0gJGNoZWNrLmlzKCc6Y2hlY2tlZCcpLFxuICAgICAgICAgICAgICAgIG1hcmtlcnMgPSAgbWFwRGF0YS5tYXJrZXJzLFxuXG4gICAgICAgICAgICAgICAgY2VudGVyID0gbWFwLmdldENlbnRlcigpLFxuICAgICAgICAgICAgICAgIGNlbnRlckxuZyA9IGNlbnRlci5sbmcsXG4gICAgICAgICAgICAgICAgY2VudGVyTGF0ID0gY2VudGVyLmxhdCxcblxuICAgICAgICAgICAgICAgIHpvb20gPSBtYXAuZ2V0Wm9vbSgpLFxuXG4gICAgICAgICAgICAgICAgc2l6ZSA9IG1hcC5nZXRTaXplKCksXG4gICAgICAgICAgICAgICAgc2l6ZVdpZHRoID0gc2l6ZS53aWR0aCxcbiAgICAgICAgICAgICAgICBzaXplSGVpZ2h0ID0gc2l6ZS5oZWlnaHQsXG5cbiAgICAgICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICBzcmMsXG4gICAgICAgICAgICAgICAgaWZyYW1lO1xuXG4gICAgICAgICAgICBpZihpc0R5bmFtaWMpe1xuICAgICAgICAgICAgICAgIC8v5Yqo5oCB5Zyw5Z2AXG4gICAgICAgICAgICAgICAgc3JjID0gJ2h0dHA6Ly91ZWRpdG9yLmJhaWR1LmNvbS91ZWRpdG9yL2RpYWxvZ3MvbWFwL3Nob3cuaHRtbCMnO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgLy/pnZnmgIHlnLDlnYBcbiAgICAgICAgICAgICAgICBzcmMgPSAnaHR0cDovL2FwaS5tYXAuYmFpZHUuY29tL3N0YXRpY2ltYWdlPyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vc3Jj5Y+C5pWwXG4gICAgICAgICAgICBzcmMgPSBzcmMgKydjZW50ZXI9JyArIGNlbnRlckxuZyArICcsJyArIGNlbnRlckxhdCArXG4gICAgICAgICAgICAgICAgJyZ6b29tPScgKyB6b29tICtcbiAgICAgICAgICAgICAgICAnJndpZHRoPScgKyBzaXplV2lkdGggK1xuICAgICAgICAgICAgICAgICcmaGVpZ2h0PScgKyBzaXplSGVpZ2h0O1xuICAgICAgICAgICAgaWYobWFya2Vycy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICBzcmMgPSBzcmMgKyAnJm1hcmtlcnM9JztcblxuICAgICAgICAgICAgICAgIC8v5re75Yqg5omA5pyJ55qEbWFya2VyXG4gICAgICAgICAgICAgICAgJC5lYWNoKG1hcmtlcnMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHZhbHVlLmdldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKGtleSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjICsgJ3wnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IHNyYyArIHBvc2l0aW9uLmxuZyArICcsJyArIHBvc2l0aW9uLmxhdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoaXNEeW5hbWljKXtcbiAgICAgICAgICAgICAgICBpZihtYXJrZXJzLmxlbmd0aCA+IDEpe1xuICAgICAgICAgICAgICAgICAgICBhbGVydCggbGFuZy5sYW5nRHluYW1pY09uZUxvY2F0aW9uICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzcmMgKz0gJyZtYXJrZXJTdHlsZXM9bCxBJztcblxuICAgICAgICAgICAgICAgIC8v5o+S5YWlaWZyYW1lXG4gICAgICAgICAgICAgICAgaWZyYW1lID0gJzxpZnJhbWUgY2xhc3M9XCJ1ZWRpdG9yX2JhaWR1bWFwXCIgc3JjPVwie3NyY31cIiBmcmFtZWJvcmRlcj1cIjBcIiB3aWR0aD1cIicgKyBzaXplV2lkdGggKyAnXCIgaGVpZ2h0PVwiJyArIHNpemVIZWlnaHQgKyAnXCI+PC9pZnJhbWU+JztcbiAgICAgICAgICAgICAgICBpZnJhbWUgPSBpZnJhbWUucmVwbGFjZSgne3NyY30nLCBzcmMpO1xuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdpbnNlcnRIdG1sJywgaWZyYW1lLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAvL+aPkuWFpeWbvueJh1xuICAgICAgICAgICAgICAgIGVkaXRvci5jb21tYW5kKGUsICdpbnNlcnRIdG1sJywgJzxpbWcgc3R5bGU9XCJtYXgtd2lkdGg6MTAwJTtcIiBzcmM9XCInICsgc3JjICsgJ1wiLz4nLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOagueaNriBVSSDliJvlu7roj5zljZUgcGFuZWxcbiAgICAgICAgbWVudS5kcm9wUGFuZWwgPSBuZXcgRS5Ecm9wUGFuZWwoZWRpdG9yLCBtZW51LCB7XG4gICAgICAgICAgICAkY29udGVudDogJGNvbnRlbnQsXG4gICAgICAgICAgICB3aWR0aDogNTAwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0g5LqL5Lu2IC0tLS0tLS0tLS1cblxuICAgICAgICAvLyByZW5kZXIg5pe25omn6KGM5LqL5Lu2XG4gICAgICAgIG1lbnUub25SZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYWsgPT09IEUuYmFpZHVNYXBBaykge1xuICAgICAgICAgICAgICAgIEUud2Fybign5bu66K6u5Zyo6YWN572u5Lit6Ieq5a6a5LmJ55m+5bqm5Zyw5Zu+55qEbWFwQWvvvIzlkKbliJnlj6/og73lvbHlk43lnLDlm77lip/og73vvIzmlofmoaPvvJonICsgRS5kb2NzaXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBjbGljayDkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBtZW51ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkcm9wUGFuZWwgPSBtZW51LmRyb3BQYW5lbDtcbiAgICAgICAgICAgIHZhciBmaXJzdFRpbWUgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLemakOiXjy0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGlmIChkcm9wUGFuZWwuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgZHJvcFBhbmVsLmhpZGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS3mmL7npLotLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBpZiAoIW1hcERhdGEubWFwKSB7XG4gICAgICAgICAgICAgICAgLy8g56ys5LiA5qyh77yM5YWI5Yqg6L295Zyw5Zu+XG4gICAgICAgICAgICAgICAgZmlyc3RUaW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZHJvcFBhbmVsLnNob3coKTtcbiAgICAgICAgICAgIG1hcERhdGEuaW5pdE1hcCgpO1xuXG4gICAgICAgICAgICBpZiAoIWZpcnN0VGltZSkge1xuICAgICAgICAgICAgICAgICRzZWFyY2hJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgfSk7XG5cbn0pO1xuLy8gaW5zZXJ0Y29kZSDoj5zljZVcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICAvLyDliqDovb0gaGlnaGxpZ2h0anMg5Luj56CBXG4gICAgZnVuY3Rpb24gbG9hZEhsanMoKSB7XG4gICAgICAgIGlmIChFLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFIDgnKSA+IDApIHtcbiAgICAgICAgICAgIC8vIOS4jeaUr+aMgSBJRThcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LmhsanMpIHtcbiAgICAgICAgICAgIC8vIOS4jeimgemHjeWkjeWKoOi9vVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgICAgIHNjcmlwdC5zcmMgPSBcIi8vY2RuLmJvb3Rjc3MuY29tL2hpZ2hsaWdodC5qcy85LjIuMC9oaWdobGlnaHQubWluLmpzXCI7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9XG4gICAgXG5cbiAgICBFLmNyZWF0ZU1lbnUoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgIHZhciBtZW51SWQgPSAnaW5zZXJ0Y29kZSc7XG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5Yqg6L29IGhpZ2hsaWdodGpzIOS7o+eggVxuICAgICAgICBzZXRUaW1lb3V0KGxvYWRIbGpzLCAwKTtcblxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGNvbmZpZyA9IGVkaXRvci5jb25maWc7XG4gICAgICAgIHZhciBsYW5nID0gY29uZmlnLmxhbmc7XG4gICAgICAgIHZhciAkdHh0ID0gZWRpdG9yLnR4dC4kdHh0O1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcuaW5zZXJ0Y29kZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjbGljayDkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBtZW51ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkcm9wUGFuZWwgPSBtZW51LmRyb3BQYW5lbDtcblxuICAgICAgICAgICAgLy8g6ZqQ6JePXG4gICAgICAgICAgICBpZiAoZHJvcFBhbmVsLmlzU2hvd2luZykge1xuICAgICAgICAgICAgICAgIGRyb3BQYW5lbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDmmL7npLpcbiAgICAgICAgICAgICR0ZXh0YXJlYS52YWwoJycpO1xuICAgICAgICAgICAgZHJvcFBhbmVsLnNob3coKTtcblxuICAgICAgICAgICAgLy8gaGlnaGxpZ2h0anMg6K+t6KiA5YiX6KGoXG4gICAgICAgICAgICB2YXIgaGxqcyA9IHdpbmRvdy5obGpzO1xuICAgICAgICAgICAgaWYgKGhsanMgJiYgaGxqcy5saXN0TGFuZ3VhZ2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRsYW5nU2VsZWN0LmNoaWxkcmVuKCkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJGxhbmdTZWxlY3QuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi10b3AnOiAnOXB4JyxcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi1sZWZ0JzogJzVweCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkLmVhY2goaGxqcy5saXN0TGFuZ3VhZ2VzKCksIGZ1bmN0aW9uIChrZXksIGxhbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhbmcgPT09ICd4bWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5nID0gJ2h0bWwnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYW5nID09PSBjb25maWcuY29kZURlZmF1bHRMYW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbGFuZ1NlbGVjdC5hcHBlbmQoJzxvcHRpb24gdmFsdWU9XCInICsgbGFuZyArICdcIiBzZWxlY3RlZD1cInNlbGVjdGVkXCI+JyArIGxhbmcgKyAnPC9vcHRpb24+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbGFuZ1NlbGVjdC5hcHBlbmQoJzxvcHRpb24gdmFsdWU9XCInICsgbGFuZyArICdcIj4nICsgbGFuZyArICc8L29wdGlvbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkbGFuZ1NlbGVjdC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g6YCJ5Lit54q25oCB5LiL55qEIGNsaWNrIOS6i+S7tlxuICAgICAgICBtZW51LmNsaWNrRXZlbnRTZWxlY3RlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbWVudSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZHJvcFBhbmVsID0gbWVudS5kcm9wUGFuZWw7XG5cbiAgICAgICAgICAgIC8vIOmakOiXj1xuICAgICAgICAgICAgaWYgKGRyb3BQYW5lbC5pc1Nob3dpbmcpIHtcbiAgICAgICAgICAgICAgICBkcm9wUGFuZWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5pi+56S6XG4gICAgICAgICAgICBkcm9wUGFuZWwuc2hvdygpO1xuXG4gICAgICAgICAgICB2YXIgcmFuZ2VFbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ3ByZScpO1xuICAgICAgICAgICAgdmFyICR0YXJnZXRFbGVtO1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtKSB7XG4gICAgICAgICAgICAgICAgLy8g56Gu5a6a5om+5YiwIHByZSDkuYvlkI7vvIzlho3mib4gY29kZVxuICAgICAgICAgICAgICAgIHRhcmdldEVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2NvZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGFyZ2V0RWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICR0YXJnZXRFbGVtID0gJCh0YXJnZXRFbGVtKTtcblxuICAgICAgICAgICAgLy8g6LWL5YC85YaF5a65XG4gICAgICAgICAgICAkdGV4dGFyZWEudmFsKCR0YXJnZXRFbGVtLnRleHQoKSk7XG4gICAgICAgICAgICBpZiAoJGxhbmdTZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAvLyDotYvlgLzor63oqIBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSAkdGFyZ2V0RWxlbS5hdHRyKCdjbGFzcycpO1xuICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJGxhbmdTZWxlY3QudmFsKGNsYXNzTmFtZS5zcGxpdCgnICcpWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5a6a5LmJ5pu05paw6YCJ5Lit54q25oCB55qE5LqL5Lu2XG4gICAgICAgIG1lbnUudXBkYXRlU2VsZWN0ZWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsgLy/oj5zljZXlr7nosaFcbiAgICAgICAgICAgIHZhciBlZGl0b3IgPSBzZWxmLmVkaXRvcjtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW07XG5cbiAgICAgICAgICAgIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgICAgIHJhbmdlRWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAncHJlJyk7XG5cbiAgICAgICAgICAgIGlmIChyYW5nZUVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWIm+W7uiBwYW5lbFxuICAgICAgICB2YXIgJGNvbnRlbnQgPSAkKCc8ZGl2PjwvZGl2PicpO1xuICAgICAgICB2YXIgJHRleHRhcmVhID0gJCgnPHRleHRhcmVhPjwvdGV4dGFyZWE+Jyk7XG4gICAgICAgIHZhciAkbGFuZ1NlbGVjdCA9ICQoJzxzZWxlY3Q+PC9zZWxlY3Q+Jyk7XG4gICAgICAgIGNvbnRlbnRIYW5kbGUoJGNvbnRlbnQpO1xuICAgICAgICBtZW51LmRyb3BQYW5lbCA9IG5ldyBFLkRyb3BQYW5lbChlZGl0b3IsIG1lbnUsIHtcbiAgICAgICAgICAgICRjb250ZW50OiAkY29udGVudCxcbiAgICAgICAgICAgIHdpZHRoOiA1MDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcblxuICAgICAgICAvLyAtLS0tLS0g5aKe5YqgIGNvbnRlbnQg5YaF5a65IC0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBjb250ZW50SGFuZGxlKCRjb250ZW50KSB7XG4gICAgICAgICAgICAvLyB0ZXh0YXJlYSDljLrln59cbiAgICAgICAgICAgIHZhciAkdGV4dGFyZWFDb250YWluZXIgPSAkKCc8ZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgJHRleHRhcmVhQ29udGFpbmVyLmNzcyh7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAnMTVweCA1cHggNXB4IDVweCcsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTYwcHgnLFxuICAgICAgICAgICAgICAgICd0ZXh0LWFsaWduJzogJ2NlbnRlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHRleHRhcmVhLmNzcyh7XG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMTBweCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHRleHRhcmVhLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyDlj5bmtoggdGFiIOmUrum7mOiupOihjOS4ulxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHRleHRhcmVhQ29udGFpbmVyLmFwcGVuZCgkdGV4dGFyZWEpO1xuICAgICAgICAgICAgJGNvbnRlbnQuYXBwZW5kKCR0ZXh0YXJlYUNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIC8vIOaMiemSruWMuuWfn1xuICAgICAgICAgICAgdmFyICRidG5Db250YWluZXIgPSAkKCc8ZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgdmFyICRidG5TdWJtaXQgPSAkKCc8YnV0dG9uIGNsYXNzPVwicmlnaHRcIj4nICsgbGFuZy5zdWJtaXQgKyAnPC9idXR0b24+Jyk7XG4gICAgICAgICAgICB2YXIgJGJ0bkNhbmNlbCA9ICQoJzxidXR0b24gY2xhc3M9XCJyaWdodCBncmF5XCI+JyArIGxhbmcuY2FuY2VsICsgJzwvYnV0dG9uPicpO1xuXG4gICAgICAgICAgICAkYnRuQ29udGFpbmVyLmFwcGVuZCgkYnRuU3VibWl0KS5hcHBlbmQoJGJ0bkNhbmNlbCkuYXBwZW5kKCRsYW5nU2VsZWN0KTtcbiAgICAgICAgICAgICRjb250ZW50LmFwcGVuZCgkYnRuQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgLy8g5Y+W5raI5oyJ6ZKuXG4gICAgICAgICAgICAkYnRuQ2FuY2VsLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIG1lbnUuZHJvcFBhbmVsLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDnoa7lrprmjInpkq5cbiAgICAgICAgICAgIHZhciBjb2RlVHBsID0gJzxwcmUgc3R5bGU9XCJtYXgtd2lkdGg6MTAwJTtvdmVyZmxvdy14OmF1dG87XCI+PGNvZGV7I2xhbmdDbGFzc30+eyNjb250ZW50fTwvY29kZT48L3ByZT4nO1xuICAgICAgICAgICAgJGJ0blN1Ym1pdC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gJHRleHRhcmVhLnZhbCgpO1xuICAgICAgICAgICAgICAgIGlmICghdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOaXoOWGheWuuVxuICAgICAgICAgICAgICAgICAgICAkdGV4dGFyZWEuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQudHJpbSgkKHJhbmdlRWxlbSkudGV4dCgpKSAmJiBjb2RlVHBsLmluZGV4T2YoJzxwPjxicj48L3A+JykgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZVRwbCA9ICc8cD48YnI+PC9wPicgKyBjb2RlVHBsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBsYW5nID0gJGxhbmdTZWxlY3QgPyAkbGFuZ1NlbGVjdC52YWwoKSA6ICcnOyAvLyDojrflj5bpq5jkuq7or63oqIBcbiAgICAgICAgICAgICAgICB2YXIgbGFuZ0NsYXNzID0gJyc7XG4gICAgICAgICAgICAgICAgdmFyIGRvSGlnaHRsaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHR4dC5maW5kKCdwcmUgY29kZScpLmVhY2goZnVuY3Rpb24gKGksIGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGJsb2NrID0gJChibG9jayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGJsb2NrLmF0dHIoJ2NvZGVtYXJrJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmnIkgY29kZW1hcmsg5qCH6K6w55qE5Luj56CB5Z2X77yM5bCx5LiN5YaN6YeN5paw5qC85byP5YyW5LqGXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuaGxqcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWsOS7o+eggeWdl++8jOagvOW8j+WMluS5i+WQju+8jOeri+WNs+agh+iusCBjb2RlbWFya1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5obGpzLmhpZ2hsaWdodEJsb2NrKGJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYmxvY2suYXR0cignY29kZW1hcmsnLCAnMScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8g6K+t6KiA6auY5Lqu5qC35byPXG4gICAgICAgICAgICAgICAgaWYgKGxhbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ0NsYXNzID0gJyBjbGFzcz1cIicgKyBsYW5nICsgJyBobGpzXCInO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOabv+aNouagh+etvlxuICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKC8mL2dtLCAnJmFtcDsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88L2dtLCAnJmx0OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLz4vZ20sICcmZ3Q7Jyk7XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0tIG1lbnUg5pyq6YCJ5Lit54q25oCBIC0tLS1cbiAgICAgICAgICAgICAgICBpZiAoIW1lbnUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5ou85o6laHRtbFxuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGNvZGVUcGwucmVwbGFjZSgneyNsYW5nQ2xhc3N9JywgbGFuZ0NsYXNzKS5yZXBsYWNlKCd7I2NvbnRlbnR9JywgdmFsKTtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZSwgJ2luc2VydEh0bWwnLCBodG1sLCBkb0hpZ2h0bGlnaHQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gLS0tLSBtZW51IOmAieS4reeKtuaAgSAtLS0tXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldEVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ3ByZScpO1xuICAgICAgICAgICAgICAgIHZhciAkdGFyZ2V0RWxlbTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RWxlbSkge1xuICAgICAgICAgICAgICAgICAgICAvLyDnoa7lrprmib7liLAgcHJlIOS5i+WQju+8jOWGjeaJviBjb2RlXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW0gPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKHJhbmdlRWxlbSwgJ2NvZGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHRhcmdldEVsZW0gPSAkKHRhcmdldEVsZW0pO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY29tbWFuZEZuKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFuZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gJHRhcmdldEVsZW0uYXR0cignY2xhc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgIT09IGxhbmcgKyAnIGhsanMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRhcmdldEVsZW0uYXR0cignY2xhc3MnLCBsYW5nICsgJyBobGpzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldEVsZW0uaHRtbCh2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlc3RvcmVTZWxlY3Rpb25CeUVsZW0odGFyZ2V0RWxlbSk7XG4gICAgICAgICAgICAgICAgICAgIGRvSGlnaHRsaWdodCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlZGl0b3IuY3VzdG9tQ29tbWFuZChlLCBjb21tYW5kRm4sIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tIGVudGVyIOaXtu+8jOS4jeWPpui1t+agh+etvu+8jOWPquaNouihjCAtLS0tLS1cbiAgICAgICAgJHR4dC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlICE9PSAxMykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAnY29kZScpO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXRFbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlZGl0b3IuY29tbWFuZChlLCAnaW5zZXJ0SHRtbCcsICdcXG4nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tLS0tIOeCueWHu+aXtu+8jOemgeeUqOWFtuS7luagh+etviAtLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTWVudSgpIHtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAnY29kZScpO1xuICAgICAgICAgICAgaWYgKHRhcmdldEVsZW0pIHtcbiAgICAgICAgICAgICAgICAvLyDlnKggY29kZSDkuYvlhoXvvIznpoHnlKjlhbbku5boj5zljZVcbiAgICAgICAgICAgICAgICBlZGl0b3IuZGlzYWJsZU1lbnVzRXhjZXB0KCdpbnNlcnRjb2RlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOS4jeaYr+WcqCBjb2RlIOS5i+WGhe+8jOWQr+eUqOWFtuS7luiPnOWNlVxuICAgICAgICAgICAgICAgIGVkaXRvci5lbmFibGVNZW51c0V4Y2VwdCgnaW5zZXJ0Y29kZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICR0eHQub24oJ2tleWRvd24gY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8g5q2k5aSE5b+F6aG75L2/55SoIHNldFRpbWVvdXQg5byC5q2l5aSE55CG77yM5ZCm5YiZ5LiN5a+5XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHVwZGF0ZU1lbnUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSk7XG4vLyB1bmRvIOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICd1bmRvJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcudW5kb1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjbGljayDkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGVkaXRvci51bmRvKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcblxuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLSDliJ3lp4vljJbml7bjgIFlbnRlciDml7bjgIHmiZPlrZfkuK3mlq3ml7bvvIzlgZrorrDlvZUgLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLSBjdHJsICsgeiDmmK/osIPnlKjorrDlvZXmkqTplIDvvIzogIzkuI3mmK/kvb/nlKjmtY/op4jlmajpu5jorqTnmoTmkqTplIAgLS0tLS0tLS0tLS0tXG4gICAgICAgIGVkaXRvci5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkdHh0ID0gZWRpdG9yLnR4dC4kdHh0O1xuICAgICAgICAgICAgdmFyIHRpbWVvdXRJZDtcblxuICAgICAgICAgICAgLy8g5omn6KGMdW5kb+iusOW9lVxuICAgICAgICAgICAgZnVuY3Rpb24gdW5kbygpIHtcbiAgICAgICAgICAgICAgICBlZGl0b3IudW5kb1JlY29yZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkdHh0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5Q29kZSA9IGUua2V5Q29kZTtcblxuICAgICAgICAgICAgICAgIC8vIOaSpOmUgCBjdHJsICsgelxuICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYga2V5Q29kZSA9PT0gOTApIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnVuZG8oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChrZXlDb2RlID09PSAxMykge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbnRlciDlgZrorrDlvZVcbiAgICAgICAgICAgICAgICAgICAgdW5kbygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGtleXVwIOS5i+WQjiAxcyDkuYvlhoXkuI3mk43kvZzvvIzliJnlgZrkuIDmrKHorrDlvZVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCh1bmRvLCAxMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8g5Yid5aeL5YyW5YGa6K6w5b2VXG4gICAgICAgICAgICBlZGl0b3IudW5kb1JlY29yZCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSk7XG4vLyByZWRvIOiPnOWNlVxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuY3JlYXRlTWVudShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdyZWRvJztcbiAgICAgICAgaWYgKCFjaGVjayhtZW51SWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBsYW5nID0gZWRpdG9yLmNvbmZpZy5sYW5nO1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICAgICAgICBpZDogbWVudUlkLFxuICAgICAgICAgICAgdGl0bGU6IGxhbmcucmVkb1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjbGljayDkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGVkaXRvci5yZWRvKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyDlhajlsY8g6I+c5Y2VXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8g6K6w5b2V5YWo5bGP5pe255qEc2Nyb2xsVG9wXG4gICAgdmFyIHNjcm9sbFRvcFdoZW5GdWxsU2NyZWVuO1xuXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICB2YXIgbWVudUlkID0gJ2Z1bGxzY3JlZW4nO1xuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG4gICAgICAgIHZhciBjb25maWcgPSBlZGl0b3IuY29uZmlnO1xuICAgICAgICB2YXIgekluZGV4Q29uZmlnID0gY29uZmlnLnppbmRleCB8fCAxMDAwMDtcbiAgICAgICAgdmFyIGxhbmcgPSBjb25maWcubGFuZztcblxuICAgICAgICB2YXIgaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgekluZGV4O1xuXG4gICAgICAgIHZhciBtYXhIZWlnaHQ7XG5cbiAgICAgICAgLy8g5Yib5bu6IG1lbnUg5a+56LGhXG4gICAgICAgIHZhciBtZW51ID0gbmV3IEUuTWVudSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIGlkOiBtZW51SWQsXG4gICAgICAgICAgICB0aXRsZTogbGFuZy5mdWxsc2NyZWVuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWumuS5iWNsaWNr5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyDlop7liqDmoLflvI9cbiAgICAgICAgICAgIHZhciAkZWRpdG9yQ29udGFpbmVyID0gZWRpdG9yLiRlZGl0b3JDb250YWluZXI7XG4gICAgICAgICAgICAkZWRpdG9yQ29udGFpbmVyLmFkZENsYXNzKCd3YW5nRWRpdG9yLWZ1bGxzY3JlZW4nKTtcblxuICAgICAgICAgICAgLy8g77yI5YWI5L+d5a2Y5b2T5YmN55qE77yJ5YaN6K6+572uei1pbmRleFxuICAgICAgICAgICAgekluZGV4ID0gJGVkaXRvckNvbnRhaW5lci5jc3MoJ3otaW5kZXgnKTtcbiAgICAgICAgICAgICRlZGl0b3JDb250YWluZXIuY3NzKCd6LWluZGV4JywgekluZGV4Q29uZmlnKTtcblxuICAgICAgICAgICAgdmFyICR3cmFwcGVyO1xuICAgICAgICAgICAgdmFyIHR4dEhlaWdodCA9ICR0eHQuaGVpZ2h0KCk7XG4gICAgICAgICAgICB2YXIgdHh0T3V0ZXJIZWlnaHQgPSAkdHh0Lm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIGlmIChlZGl0b3IudXNlTWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgLy8g6K6w5b2VIG1heC1oZWlnaHTvvIzlubbmmoLml7bljrvmjoltYXhoZWlnaHRcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAkdHh0LmNzcygnbWF4LWhlaWdodCcpO1xuICAgICAgICAgICAgICAgICR0eHQuY3NzKCdtYXgtaGVpZ2h0JywgJ25vbmUnKTtcblxuICAgICAgICAgICAgICAgIC8vIOWmguaenOS9v+eUqOS6hm1heEhlaWdodO+8jCDlsIYkdHh05LuO5a6D55qE54i25YWD57Sg5Lit56e75Ye65p2lXG4gICAgICAgICAgICAgICAgJHdyYXBwZXIgPSAkdHh0LnBhcmVudCgpO1xuICAgICAgICAgICAgICAgICR3cmFwcGVyLmFmdGVyKCR0eHQpO1xuICAgICAgICAgICAgICAgICR3cmFwcGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICR0eHQuY3NzKCdvdmVyZmxvdy15JywgJ2F1dG8nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g6K6+572u6auY5bqm5Yiw5YWo5bGPXG4gICAgICAgICAgICB2YXIgbWVudUNvbnRhaW5lciA9IGVkaXRvci5tZW51Q29udGFpbmVyO1xuICAgICAgICAgICAgJHR4dC5oZWlnaHQoXG4gICAgICAgICAgICAgICAgRS4kd2luZG93LmhlaWdodCgpIC0gXG4gICAgICAgICAgICAgICAgbWVudUNvbnRhaW5lci5oZWlnaHQoKSAtIFxuICAgICAgICAgICAgICAgICh0eHRPdXRlckhlaWdodCAtIHR4dEhlaWdodCkgIC8vIOWOu+aOieWGhei+uei3neWSjOWklui+uei3nVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8g5Y+W5raIbWVudUNvbnRhaW5lcueahOWGheiBlOagt+W8j++8iG1lbnXlkLjpobbml7bvvIzkvJrkuLogbWVudUNvbnRhaW5lciDorr7nva7kuIDkupvlhoXogZTmoLflvI/vvIlcbiAgICAgICAgICAgIGVkaXRvci5tZW51Q29udGFpbmVyLiRtZW51Q29udGFpbmVyLmF0dHIoJ3N0eWxlJywgJycpO1xuXG4gICAgICAgICAgICAvLyDkv53lrZjnirbmgIFcbiAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyDorrDlvZXnvJbovpHlmajmmK/lkKblhajlsY9cbiAgICAgICAgICAgIGVkaXRvci5pc0Z1bGxTY3JlZW4gPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyDorrDlvZXorr7nva7lhajlsY/ml7bnmoTpq5jluqZcbiAgICAgICAgICAgIHNjcm9sbFRvcFdoZW5GdWxsU2NyZWVuID0gRS4kd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWumuS5iemAieS4reeKtuaAgeeahCBjbGljayDkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50U2VsZWN0ZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8g5Y+W5raI5qC35byPXG4gICAgICAgICAgICB2YXIgJGVkaXRvckNvbnRhaW5lciA9IGVkaXRvci4kZWRpdG9yQ29udGFpbmVyO1xuICAgICAgICAgICAgJGVkaXRvckNvbnRhaW5lci5yZW1vdmVDbGFzcygnd2FuZ0VkaXRvci1mdWxsc2NyZWVuJyk7XG4gICAgICAgICAgICAkZWRpdG9yQ29udGFpbmVyLmNzcygnei1pbmRleCcsIHpJbmRleCk7XG5cbiAgICAgICAgICAgIC8vIOi/mOWOn2hlaWdodFxuICAgICAgICAgICAgaWYgKGVkaXRvci51c2VNYXhIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAkdHh0LmNzcygnbWF4LWhlaWdodCcsIG1heEhlaWdodCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGVkaXRvci52YWx1ZUNvbnRhaW5lckhlaWdodCDlnKggZWRpdG9yLnR4dC5pbml0SGVpZ2h0KCkg5Lit5LqL5YWI5L+d5a2Y5LqGXG4gICAgICAgICAgICAgICAgZWRpdG9yLiR2YWx1ZUNvbnRhaW5lci5jc3MoJ2hlaWdodCcsIGVkaXRvci52YWx1ZUNvbnRhaW5lckhlaWdodCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOmHjeaWsOiuoeeul+mrmOW6plxuICAgICAgICAgICAgZWRpdG9yLnR4dC5pbml0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIC8vIOS/neWtmOeKtuaAgVxuICAgICAgICAgICAgaXNTZWxlY3RlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyDorrDlvZXnvJbovpHlmajmmK/lkKblhajlsY9cbiAgICAgICAgICAgIGVkaXRvci5pc0Z1bGxTY3JlZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8g6L+Y5Y6fc2Nyb2xsVG9wXG4gICAgICAgICAgICBpZiAoc2Nyb2xsVG9wV2hlbkZ1bGxTY3JlZW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEUuJHdpbmRvdy5zY3JvbGxUb3Aoc2Nyb2xsVG9wV2hlbkZ1bGxTY3JlZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWumuS5iemAieS4reS6i+S7tlxuICAgICAgICBtZW51LnVwZGF0ZVNlbGVjdGVkRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzU2VsZWN0ZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyDmuLLmn5NtZW51c1xuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuZm4ucmVuZGVyTWVudXMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51cyA9IGVkaXRvci5tZW51cztcbiAgICAgICAgdmFyIG1lbnVJZHMgPSBlZGl0b3IuY29uZmlnLm1lbnVzO1xuICAgICAgICB2YXIgbWVudUNvbnRhaW5lciA9IGVkaXRvci5tZW51Q29udGFpbmVyO1xuXG4gICAgICAgIHZhciBtZW51O1xuICAgICAgICB2YXIgZ3JvdXBJZHggPSAwO1xuICAgICAgICAkLmVhY2gobWVudUlkcywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICAgIGlmICh2ID09PSAnfCcpIHtcbiAgICAgICAgICAgICAgICBncm91cElkeCsrO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWVudSA9IG1lbnVzW3ZdO1xuICAgICAgICAgICAgaWYgKG1lbnUpIHtcbiAgICAgICAgICAgICAgICBtZW51LnJlbmRlcihncm91cElkeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn0pO1xuLy8g5riy5p+TbWVudXNcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmZuLnJlbmRlck1lbnVDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51Q29udGFpbmVyID0gZWRpdG9yLm1lbnVDb250YWluZXI7XG4gICAgICAgIHZhciAkZWRpdG9yQ29udGFpbmVyID0gZWRpdG9yLiRlZGl0b3JDb250YWluZXI7XG5cbiAgICAgICAgbWVudUNvbnRhaW5lci5yZW5kZXIoKTtcblxuICAgIH07XG5cbn0pO1xuLy8g5riy5p+TIHR4dFxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUuZm4ucmVuZGVyVHh0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgdHh0ID0gZWRpdG9yLnR4dDtcblxuICAgICAgICB0eHQucmVuZGVyKCk7XG5cbiAgICAgICAgLy8gcmVhZHkg5pe25YCZ77yM6K6h566XdHh055qE6auY5bqmXG4gICAgICAgIGVkaXRvci5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0eHQuaW5pdEhlaWdodCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG59KTtcbi8vIOa4suafkyBjb250YWluZXJcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmZuLnJlbmRlckVkaXRvckNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyICR2YWx1ZUNvbnRhaW5lciA9IGVkaXRvci4kdmFsdWVDb250YWluZXI7XG4gICAgICAgIHZhciAkZWRpdG9yQ29udGFpbmVyID0gZWRpdG9yLiRlZGl0b3JDb250YWluZXI7XG4gICAgICAgIHZhciAkdHh0ID0gZWRpdG9yLnR4dC4kdHh0O1xuICAgICAgICB2YXIgJHByZXYsICRwYXJlbnQ7XG5cbiAgICAgICAgLy8g5bCG57yW6L6R5Zmo5riy5p+T5Yiw6aG16Z2i5LitXG4gICAgICAgIGlmICgkdmFsdWVDb250YWluZXIgPT09ICR0eHQpIHtcbiAgICAgICAgICAgICRwcmV2ID0gZWRpdG9yLiRwcmV2O1xuICAgICAgICAgICAgJHBhcmVudCA9IGVkaXRvci4kcGFyZW50O1xuXG4gICAgICAgICAgICBpZiAoJHByZXYgJiYgJHByZXYubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8g5pyJ5YmN572u6IqC54K577yM5bCx5o+S5YWl5Yiw5YmN572u6IqC54K555qE5ZCO6Z2iXG4gICAgICAgICAgICAgICAgJHByZXYuYWZ0ZXIoJGVkaXRvckNvbnRhaW5lcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOayoeacieWJjee9ruiKgueCue+8jOWwseebtOaOpeaPkuWFpeWIsOeItuWFg+e0oFxuICAgICAgICAgICAgICAgICRwYXJlbnQucHJlcGVuZCgkZWRpdG9yQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHZhbHVlQ29udGFpbmVyLmFmdGVyKCRlZGl0b3JDb250YWluZXIpO1xuICAgICAgICAgICAgJHZhbHVlQ29udGFpbmVyLmhpZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOiuvue9ruWuveW6pu+8iOi/meagt+iuvue9ruWuveW6puaciemXrumimO+8iVxuICAgICAgICAvLyAkZWRpdG9yQ29udGFpbmVyLmNzcygnd2lkdGgnLCAkdmFsdWVDb250YWluZXIuY3NzKCd3aWR0aCcpKTtcbiAgICB9O1xuXG59KTtcbi8vIOiPnOWNleS6i+S7tlxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIC8vIOe7keWumuavj+S4quiPnOWNleeahGNsaWNr5LqL5Lu2XG4gICAgRS5mbi5ldmVudE1lbnVzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBtZW51cyA9IHRoaXMubWVudXM7XG5cbiAgICAgICAgLy8g57uR5a6a6I+c5Y2V55qE54K55Ye75LqL5Lu2XG4gICAgICAgICQuZWFjaChtZW51cywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICAgIHYuYmluZEV2ZW50KCk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxufSk7XG4vLyDoj5zljZVjb250YWluZXLkuovku7Zcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLmZuLmV2ZW50TWVudUNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcblxuICAgIH07XG5cbn0pO1xuLy8g57yW6L6R5Yy65Z+f5LqL5Lu2XG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5mbi5ldmVudFR4dCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgdHh0ID0gdGhpcy50eHQ7XG5cbiAgICAgICAgLy8gdHh05YaF5a655Y+Y5YyW5pe277yM5L+d5a2Y6YCJ5Yy6XG4gICAgICAgIHR4dC5zYXZlU2VsZWN0aW9uRXZlbnQoKTtcblxuICAgICAgICAvLyB0eHTlhoXlrrnlj5jljJbml7bvvIzpmo/ml7bmm7TmlrAgdmFsdWVcbiAgICAgICAgdHh0LnVwZGF0ZVZhbHVlRXZlbnQoKTtcblxuICAgICAgICAvLyB0eHTlhoXlrrnlj5jljJbml7bvvIzpmo/ml7bmm7TmlrAgbWVudSBzdHlsZVxuICAgICAgICB0eHQudXBkYXRlTWVudVN0eWxlRXZlbnQoKTtcblxuICAgICAgICAvLyAvLyDpvKDmoIdob3ZlcuaXtu+8jOaYvuekuiBwIGhlYWQg6auY5bqm77yI5pqC5pe25YWz6Zet6L+Z5Liq5Yqf6IO977yJXG4gICAgICAgIC8vIGlmICghL2llL2kudGVzdChFLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgLy8gICAgIC8vIOaaguaXtuS4jeaUr+aMgUlFXG4gICAgICAgIC8vICAgICB0eHQuc2hvd0hlaWdodE9uSG92ZXIoKTtcbiAgICAgICAgLy8gfVxuICAgIH07XG5cbn0pO1xuLy8g5LiK5Lyg5Zu+54mH5LqL5Lu2XG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5wbHVnaW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGZucyA9IGVkaXRvci5jb25maWcudXBsb2FkSW1nRm5zOyAvLyBlZGl0b3IuY29uZmlnLnVwbG9hZEltZ0ZucyA9IHt9IOWcqGNvbmZpZ+aWh+S7tuS4reWumuS5ieS6hlxuXG4gICAgICAgIC8vIC0tLS0tLS0tIOWumuS5iWxvYWTlh73mlbAgLS0tLS0tLS1cbiAgICAgICAgZm5zLm9ubG9hZCB8fCAoZm5zLm9ubG9hZCA9IGZ1bmN0aW9uIChyZXN1bHRUZXh0LCB4aHIpIHtcbiAgICAgICAgICAgIEUubG9nKCfkuIrkvKDnu5PmnZ/vvIzov5Tlm57nu5PmnpzkuLogJyArIHJlc3VsdFRleHQpO1xuXG4gICAgICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgIHZhciBvcmlnaW5hbE5hbWUgPSBlZGl0b3IudXBsb2FkSW1nT3JpZ2luYWxOYW1lIHx8ICcnOyAgLy8g5LiK5Lyg5Zu+54mH5pe277yM5bey57uP5bCG5Zu+54mH55qE5ZCN5a2X5a2Y5ZyoIGVkaXRvci51cGxvYWRJbWdPcmlnaW5hbE5hbWVcbiAgICAgICAgICAgIHZhciBpbWc7XG4gICAgICAgICAgICBpZiAocmVzdWx0VGV4dC5pbmRleE9mKCdlcnJvcnwnKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIOaPkOekuumUmeivr1xuICAgICAgICAgICAgICAgIEUud2Fybign5LiK5Lyg5aSx6LSl77yaJyArIHJlc3VsdFRleHQuc3BsaXQoJ3wnKVsxXSk7XG4gICAgICAgICAgICAgICAgYWxlcnQocmVzdWx0VGV4dC5zcGxpdCgnfCcpWzFdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgRS5sb2coJ+S4iuS8oOaIkOWKn++8jOWNs+WwhuaPkuWFpee8lui+keWMuuWfn++8jOe7k+aenOS4uu+8micgKyByZXN1bHRUZXh0KTtcblxuICAgICAgICAgICAgICAgIC8vIOWwhue7k+aenOaPkuWFpee8lui+keWZqFxuICAgICAgICAgICAgICAgIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxpbWcgc3JjPVwiJyArIHJlc3VsdFRleHQgKyAnXCIgYWx0PVwiJyArIG9yaWdpbmFsTmFtZSArICdcIiBzdHlsZT1cIm1heC13aWR0aDoxMDAlO1wiLz4nO1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuY29tbWFuZChudWxsLCAnaW5zZXJ0SHRtbCcsIGh0bWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIEUubG9nKCflt7Lmj5LlhaXlm77niYfvvIzlnLDlnYAgJyArIHJlc3VsdFRleHQpO1xuICAgICAgICAgICAgICAgICAgICBpbWcgPSBudWxsO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIEUuZXJyb3IoJ+S9v+eUqOi/lOWbnueahOe7k+aenOiOt+WPluWbvueJh++8jOWPkeeUn+mUmeivr+OAguivt+ehruiupOS7peS4i+e7k+aenOaYr+WQpuato+ehru+8micgKyByZXN1bHRUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaW1nID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSByZXN1bHRUZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC0tLS0tLS0tIOWumuS5iXRpZW1vdXTlh73mlbAgLS0tLS0tLS1cbiAgICAgICAgZm5zLm9udGltZW91dCB8fCAoZm5zLm9udGltZW91dCA9IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgICAgIEUuZXJyb3IoJ+S4iuS8oOWbvueJh+i2heaXticpO1xuICAgICAgICAgICAgYWxlcnQoJ+S4iuS8oOWbvueJh+i2heaXticpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0tLS0tLSDlrprkuYllcnJvcuWHveaVsCAtLS0tLS0tLVxuICAgICAgICBmbnMub25lcnJvciB8fCAoZm5zLm9uZXJyb3IgPSBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICBFLmVycm9yKCfkuIrkvKDkuIrlm77niYflj5HnlJ/plJnor68nKTtcbiAgICAgICAgICAgIGFsZXJ0KCfkuIrkvKDkuIrlm77niYflj5HnlJ/plJnor68nKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcbn0pO1xuLy8geGhyIOS4iuS8oOWbvueJh1xuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIGlmICghd2luZG93LkZpbGVSZWFkZXIgfHwgIXdpbmRvdy5Gb3JtRGF0YSkge1xuICAgICAgICAvLyDlpoLmnpzkuI3mlK/mjIFodG1sNeeahOaWh+aho+aTjeS9nO+8jOebtOaOpei/lOWbnlxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgRS5wbHVnaW4oZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgY29uZmlnID0gZWRpdG9yLmNvbmZpZztcbiAgICAgICAgdmFyIHVwbG9hZEltZ1VybCA9IGNvbmZpZy51cGxvYWRJbWdVcmw7XG4gICAgICAgIHZhciB1cGxvYWRUaW1lb3V0ID0gY29uZmlnLnVwbG9hZFRpbWVvdXQ7XG5cbiAgICAgICAgLy8g6I635Y+W6YWN572u5Lit55qE5LiK5Lyg5LqL5Lu2XG4gICAgICAgIHZhciB1cGxvYWRJbWdGbnMgPSBjb25maWcudXBsb2FkSW1nRm5zO1xuICAgICAgICB2YXIgb25sb2FkID0gdXBsb2FkSW1nRm5zLm9ubG9hZDtcbiAgICAgICAgdmFyIG9udGltZW91dCA9IHVwbG9hZEltZ0Zucy5vbnRpbWVvdXQ7XG4gICAgICAgIHZhciBvbmVycm9yID0gdXBsb2FkSW1nRm5zLm9uZXJyb3I7XG5cbiAgICAgICAgaWYgKCF1cGxvYWRJbWdVcmwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLS0tLS0tIOWwhuS7pWJhc2U2NOeahOWbvueJh3VybOaVsOaNrui9rOaNouS4ukJsb2IgLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gY29udmVydEJhc2U2NFVybFRvQmxvYih1cmxEYXRhLCBmaWxldHlwZSl7XG4gICAgICAgICAgICAvL+WOu+aOiXVybOeahOWktO+8jOW5tui9rOaNouS4umJ5dGVcbiAgICAgICAgICAgIHZhciBieXRlcyA9IHdpbmRvdy5hdG9iKHVybERhdGEuc3BsaXQoJywnKVsxXSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8v5aSE55CG5byC5bi4LOWwhmFzY2lp56CB5bCP5LqOMOeahOi9rOaNouS4uuWkp+S6jjBcbiAgICAgICAgICAgIHZhciBhYiA9IG5ldyBBcnJheUJ1ZmZlcihieXRlcy5sZW5ndGgpO1xuICAgICAgICAgICAgdmFyIGlhID0gbmV3IFVpbnQ4QXJyYXkoYWIpO1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpYVtpXSA9IGJ5dGVzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYihbYWJdLCB7dHlwZSA6IGZpbGV0eXBlfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0tLS0tLSDmj5LlhaXlm77niYfnmoTmlrnms5UgLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gaW5zZXJ0SW1nKHNyYywgZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGltZyBzcmM9XCInICsgc3JjICsgJ1wiIHN0eWxlPVwibWF4LXdpZHRoOjEwMCU7XCIvPic7XG4gICAgICAgICAgICAgICAgZWRpdG9yLmNvbW1hbmQoZXZlbnQsICdpbnNlcnRIdG1sJywgaHRtbCk7XG5cbiAgICAgICAgICAgICAgICBFLmxvZygn5bey5o+S5YWl5Zu+54mH77yM5Zyw5Z2AICcgKyBzcmMpO1xuICAgICAgICAgICAgICAgIGltZyA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgRS5lcnJvcign5L2/55So6L+U5Zue55qE57uT5p6c6I635Y+W5Zu+54mH77yM5Y+R55Sf6ZSZ6K+v44CC6K+356Gu6K6k5Lul5LiL57uT5p6c5piv5ZCm5q2j56Gu77yaJyArIHNyYyk7XG4gICAgICAgICAgICAgICAgaW1nID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWcuc3JjID0gc3JjO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tLS0gb25wcm9ncmVzcyDkuovku7YgLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoZSkge1xuICAgICAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBwZXJjZW50Q29tcGxldGUgPSBlLmxvYWRlZCAvIGUudG90YWw7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnNob3dVcGxvYWRQcm9ncmVzcyhwZXJjZW50Q29tcGxldGUgKiAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tLS0geGhyIOS4iuS8oOWbvueJhyAtLS0tLS0tLVxuICAgICAgICBlZGl0b3IueGhyVXBsb2FkSW1nID0gZnVuY3Rpb24gKG9wdCkge1xuICAgICAgICAgICAgLy8gb3B0IOaVsOaNrlxuICAgICAgICAgICAgdmFyIGV2ZW50ID0gb3B0LmV2ZW50O1xuICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gb3B0LmZpbGVuYW1lIHx8ICcnO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IG9wdC5iYXNlNjQ7XG4gICAgICAgICAgICB2YXIgZmlsZVR5cGUgPSBvcHQuZmlsZVR5cGUgfHwgJ2ltYWdlL3BuZyc7IC8vIOaXoOaJqeWxleWQjeWImem7mOiupOS9v+eUqCBwbmdcbiAgICAgICAgICAgIHZhciBuYW1lID0gb3B0Lm5hbWUgfHwgJ3dhbmdFZGl0b3JfdXBsb2FkX2ZpbGUnO1xuICAgICAgICAgICAgdmFyIGxvYWRmbiA9IG9wdC5sb2FkZm4gfHwgb25sb2FkO1xuICAgICAgICAgICAgdmFyIGVycm9yZm4gPSBvcHQuZXJyb3JmbiB8fCBvbmVycm9yO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXRmbiA9IG9wdC50aW1lb3V0Zm4gfHwgb250aW1lb3V0O1xuXG4gICAgICAgICAgICAvLyDkuIrkvKDlj4LmlbDvvIjlpoIgdG9rZW7vvIlcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBlZGl0b3IuY29uZmlnLnVwbG9hZFBhcmFtcyB8fCB7fTtcblxuICAgICAgICAgICAgLy8gaGVhZGVyc1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBlZGl0b3IuY29uZmlnLnVwbG9hZEhlYWRlcnMgfHwge307XG5cbiAgICAgICAgICAgIC8vIOiOt+WPluaWh+S7tuaJqeWxleWQjVxuICAgICAgICAgICAgdmFyIGZpbGVFeHQgPSAncG5nJzsgIC8vIOm7mOiupOS4uiBwbmdcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZS5pbmRleE9mKCcuJykgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8g5Y6f5p2l55qE5paH5Lu25ZCN5pyJ5omp5bGV5ZCNXG4gICAgICAgICAgICAgICAgZmlsZUV4dCA9IGZpbGVOYW1lLnNsaWNlKGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJykgLSBmaWxlTmFtZS5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZVR5cGUuaW5kZXhPZignLycpID4gMCAmJiBmaWxlVHlwZS5zcGxpdCgnLycpWzFdKSB7XG4gICAgICAgICAgICAgICAgLy8g5paH5Lu25ZCN5rKh5pyJ5omp5bGV5ZCN77yM6YCa6L+H57G75Z6L6I635Y+W77yM5aaC5LuOICdpbWFnZS9wbmcnIOWPliAncG5nJ1xuICAgICAgICAgICAgICAgIGZpbGVFeHQgPSBmaWxlVHlwZS5zcGxpdCgnLycpWzFdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0gYmVnaW4g6aKE6KeI5qih5ouf5LiK5LygIC0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgaWYgKEUuaXNPbldlYnNpdGUpIHtcbiAgICAgICAgICAgICAgICBFLmxvZygn6aKE6KeI5qih5ouf5LiK5LygJyk7XG4gICAgICAgICAgICAgICAgaW5zZXJ0SW1nKGJhc2U2NCwgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLSBlbmQg6aKE6KeI5qih5ouf5LiK5LygIC0tLS0tLS0tLS0tLVxuXG4gICAgICAgICAgICAvLyDlj5jph4/lo7DmmI5cbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHZhciB0aW1lb3V0SWQ7XG4gICAgICAgICAgICB2YXIgc3JjO1xuICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgICAgIC8vIOi2heaXtuWkhOeQhlxuICAgICAgICAgICAgZnVuY3Rpb24gdGltZW91dENhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh4aHIgJiYgeGhyLmFib3J0KSB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOi2heaXtuS6huWwsemYu+atoum7mOiupOihjOS4ulxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyDmiafooYzlm57osIPlh73mlbDvvIzmj5DnpLrku4DkuYjlhoXlrrnvvIzpg73lupTor6XlnKjlm57osIPlh73mlbDkuK3lrprkuYlcbiAgICAgICAgICAgICAgICB0aW1lb3V0Zm4gJiYgdGltZW91dGZuLmNhbGwoZWRpdG9yLCB4aHIpO1xuXG4gICAgICAgICAgICAgICAgLy8g6ZqQ6JeP6L+b5bqm5p2hXG4gICAgICAgICAgICAgICAgZWRpdG9yLmhpZGVVcGxvYWRQcm9ncmVzcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g6K6w5b2V5paH5Lu25ZCN5YiwIGVkaXRvci51cGxvYWRJbWdPcmlnaW5hbE5hbWUg77yM5o+S5YWl5Zu+54mH5pe277yM5Y+v5YGaIGFsdCDlsZ7mgKfnlKhcbiAgICAgICAgICAgICAgICBlZGl0b3IudXBsb2FkSW1nT3JpZ2luYWxOYW1lID0gZmlsZU5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmluZGV4T2YoJy4nKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnVwbG9hZEltZ09yaWdpbmFsTmFtZSA9IGZpbGVOYW1lLnNwbGl0KCcuJylbMF07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g5omn6KGMbG9hZOWHveaVsO+8jOS7u+S9leaTjeS9nO+8jOmDveW6lOivpeWcqGxvYWTlh73mlbDkuK3lrprkuYlcbiAgICAgICAgICAgICAgICBsb2FkZm4gJiYgbG9hZGZuLmNhbGwoZWRpdG9yLCB4aHIucmVzcG9uc2VUZXh0LCB4aHIpO1xuXG4gICAgICAgICAgICAgICAgLy8g6ZqQ6JeP6L+b5bqm5p2hXG4gICAgICAgICAgICAgICAgZWRpdG9yLmhpZGVVcGxvYWRQcm9ncmVzcygpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g6LaF5pe25LqG5bCx6Zi75q2i6buY6K6k6KGM5Li6XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIC8vIOaJp+ihjGVycm9y5Ye95pWw77yM6ZSZ6K+v5o+Q56S677yM5bqU6K+l5ZyoZXJyb3Llh73mlbDkuK3lrprkuYlcbiAgICAgICAgICAgICAgICBlcnJvcmZuICYmIGVycm9yZm4uY2FsbChlZGl0b3IsIHhocik7XG5cbiAgICAgICAgICAgICAgICAvLyDpmpDol4/ov5vluqbmnaFcbiAgICAgICAgICAgICAgICBlZGl0b3IuaGlkZVVwbG9hZFByb2dyZXNzKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8geGhyLm9ucHJvZ3Jlc3MgPSB1cGRhdGVQcm9ncmVzcztcbiAgICAgICAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IHVwZGF0ZVByb2dyZXNzO1xuXG4gICAgICAgICAgICAvLyDloavlhYXmlbDmja5cbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChuYW1lLCBjb252ZXJ0QmFzZTY0VXJsVG9CbG9iKGJhc2U2NCwgZmlsZVR5cGUpLCBFLnJhbmRvbSgpICsgJy4nICsgZmlsZUV4dCk7XG5cbiAgICAgICAgICAgIC8vIOa3u+WKoOWPguaVsFxuICAgICAgICAgICAgJC5lYWNoKHBhcmFtcywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8g5byA5aeL5LiK5LygXG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHVwbG9hZEltZ1VybCwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpOyAgLy8g5bCG5Y+C5pWw6Kej5p6Q5oiQ5Lyg57ufZm9ybeeahOaWueW8j+S4iuS8oFxuXG4gICAgICAgICAgICAvLyDkv67mlLnoh6rlrprkuYnphY3nva7nmoRoZWFkZXJzXG4gICAgICAgICAgICAkLmVhY2goaGVhZGVycywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDot6jln5/kuIrkvKDml7bvvIzkvKBjb29raWVcbiAgICAgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBlZGl0b3IuY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCB0cnVlO1xuXG4gICAgICAgICAgICAvLyDlj5HpgIHmlbDmja5cbiAgICAgICAgICAgIHhoci5zZW5kKGZvcm1EYXRhKTtcbiAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQodGltZW91dENhbGxiYWNrLCB1cGxvYWRUaW1lb3V0KTtcblxuICAgICAgICAgICAgRS5sb2coJ+W8gOWni+S4iuS8oC4uLuW5tuW8gOWni+i2heaXtuiuoeeulycpO1xuICAgICAgICB9O1xuICAgIH0pO1xufSk7XG4vLyDov5vluqbmnaFcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLnBsdWdpbihmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51Q29udGFpbmVyID0gZWRpdG9yLm1lbnVDb250YWluZXI7XG4gICAgICAgIHZhciBtZW51SGVpZ2h0ID0gbWVudUNvbnRhaW5lci5oZWlnaHQoKTtcbiAgICAgICAgdmFyICRlZGl0b3JDb250YWluZXIgPSBlZGl0b3IuJGVkaXRvckNvbnRhaW5lcjtcbiAgICAgICAgdmFyIHdpZHRoID0gJGVkaXRvckNvbnRhaW5lci53aWR0aCgpO1xuICAgICAgICB2YXIgJHByb2dyZXNzID0gJCgnPGRpdiBjbGFzcz1cIndhbmdFZGl0b3ItdXBsb2FkLXByb2dyZXNzXCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgLy8g5riy5p+T5LqL5Lu2XG4gICAgICAgIHZhciBpc1JlbmRlciA9IGZhbHNlO1xuICAgICAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICBpZiAoaXNSZW5kZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc1JlbmRlciA9IHRydWU7XG5cbiAgICAgICAgICAgICRwcm9ncmVzcy5jc3Moe1xuICAgICAgICAgICAgICAgIHRvcDogbWVudUhlaWdodCArICdweCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGVkaXRvckNvbnRhaW5lci5hcHBlbmQoJHByb2dyZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLS0tLSDmmL7npLrov5vluqYgLS0tLS0tXG4gICAgICAgIGVkaXRvci5zaG93VXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5pi+56S65LmL5YmN77yM5YWI5Yik5pat5piv5ZCm5riy5p+TXG4gICAgICAgICAgICByZW5kZXIoKTtcblxuICAgICAgICAgICAgJHByb2dyZXNzLnNob3coKTtcbiAgICAgICAgICAgICRwcm9ncmVzcy53aWR0aChwcm9ncmVzcyAqIHdpZHRoIC8gMTAwKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAtLS0tLS0g6ZqQ6JeP6L+b5bqm5p2hIC0tLS0tLVxuICAgICAgICB2YXIgdGltZW91dElkO1xuICAgICAgICBmdW5jdGlvbiBoaWRlUHJvZ3Jlc3MoKSB7XG4gICAgICAgICAgICAkcHJvZ3Jlc3MuaGlkZSgpO1xuICAgICAgICAgICAgdGltZW91dElkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlZGl0b3IuaGlkZVVwbG9hZFByb2dyZXNzID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWUgPSB0aW1lIHx8IDc1MDtcbiAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoaGlkZVByb2dyZXNzLCB0aW1lKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn0pO1xuLy8gdXBsb2FkIGltZyDmj5Lku7Zcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLnBsdWdpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgY29uZmlnID0gZWRpdG9yLmNvbmZpZztcbiAgICAgICAgdmFyIHVwbG9hZEltZ1VybCA9IGNvbmZpZy51cGxvYWRJbWdVcmw7XG4gICAgICAgIHZhciB1cGxvYWRUaW1lb3V0ID0gY29uZmlnLnVwbG9hZFRpbWVvdXQ7XG4gICAgICAgIHZhciBldmVudDtcblxuICAgICAgICBpZiAoIXVwbG9hZEltZ1VybCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6I635Y+WZWRpdG9y55qE5LiK5LygZG9tXG4gICAgICAgIHZhciAkdXBsb2FkQ29udGVudCA9IGVkaXRvci4kdXBsb2FkQ29udGVudDtcbiAgICAgICAgaWYgKCEkdXBsb2FkQ29udGVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6Ieq5a6a5LmJVUnvvIzlubbmt7vliqDliLDkuIrkvKBkb23oioLngrnkuIpcbiAgICAgICAgdmFyICR1cGxvYWRJY29uID0gJCgnPGRpdiBjbGFzcz1cInVwbG9hZC1pY29uLWNvbnRhaW5lclwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy11cGxvYWRcIj48L2k+PC9kaXY+Jyk7XG4gICAgICAgICR1cGxvYWRDb250ZW50LmFwcGVuZCgkdXBsb2FkSWNvbik7XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLSDmnoTlu7rkuIrkvKDlr7nosaEgLS0tLS0tLS0tLVxuICAgICAgICB2YXIgdXBmaWxlID0gbmV3IEUuVXBsb2FkRmlsZSh7XG4gICAgICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgICAgIHVwbG9hZFVybDogdXBsb2FkSW1nVXJsLFxuICAgICAgICAgICAgdGltZW91dDogdXBsb2FkVGltZW91dCxcbiAgICAgICAgICAgIGZpbGVBY2NlcHQ6ICdpbWFnZS9qcGcsaW1hZ2UvanBlZyxpbWFnZS9wbmcsaW1hZ2UvZ2lmLGltYWdlL2JtcCcgICAgLy8g5Y+q5YWB6K646YCJ5oup5Zu+54mHIFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDpgInmi6nmnKzlnLDmlofku7bvvIzkuIrkvKBcbiAgICAgICAgJHVwbG9hZEljb24uY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGV2ZW50ID0gZTtcbiAgICAgICAgICAgIHVwZmlsZS5zZWxlY3RGaWxlcygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuLy8gaDUg5pa55byP5LiK5Lyg5Zu+54mHXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgaWYgKCF3aW5kb3cuRmlsZVJlYWRlciB8fCAhd2luZG93LkZvcm1EYXRhKSB7XG4gICAgICAgIC8vIOWmguaenOS4jeaUr+aMgWh0bWw155qE5paH5qGj5pON5L2c77yM55u05o6l6L+U5ZueXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDmnoTpgKDlh73mlbBcbiAgICB2YXIgVXBsb2FkRmlsZSA9IGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBvcHQuZWRpdG9yO1xuICAgICAgICB0aGlzLnVwbG9hZFVybCA9IG9wdC51cGxvYWRVcmw7XG4gICAgICAgIHRoaXMudGltZW91dCA9IG9wdC50aW1lb3V0O1xuICAgICAgICB0aGlzLmZpbGVBY2NlcHQgPSBvcHQuZmlsZUFjY2VwdDtcbiAgICAgICAgdGhpcy5tdWx0aXBsZSA9IHRydWU7XG4gICAgfTtcblxuICAgIFVwbG9hZEZpbGUuZm4gPSBVcGxvYWRGaWxlLnByb3RvdHlwZTtcblxuICAgIC8vIGNsZWFyXG4gICAgVXBsb2FkRmlsZS5mbi5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy4kaW5wdXQudmFsKCcnKTtcbiAgICAgICAgRS5sb2coJ2lucHV0IHZhbHVlIOW3sua4heepuicpO1xuICAgIH07XG5cbiAgICAvLyDmuLLmn5NcbiAgICBVcGxvYWRGaWxlLmZuLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZi5faGFzUmVuZGVyKSB7XG4gICAgICAgICAgICAvLyDkuI3opoHph43lpI3muLLmn5NcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIEUubG9nKCfmuLLmn5Nkb20nKTtcblxuICAgICAgICB2YXIgZmlsZUFjY2VwdCA9IHNlbGYuZmlsZUFjY2VwdDtcbiAgICAgICAgdmFyIGFjY2VwdFRwbCA9IGZpbGVBY2NlcHQgPyAnYWNjZXB0PVwiJyArIGZpbGVBY2NlcHQgKyAnXCInIDogJyc7XG4gICAgICAgIHZhciBtdWx0aXBsZSA9IHNlbGYubXVsdGlwbGU7XG4gICAgICAgIHZhciBtdWx0aXBsZVRwbCA9IG11bHRpcGxlID8gJ211bHRpcGxlPVwibXVsdGlwbGVcIicgOiAnJztcbiAgICAgICAgdmFyICRpbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwiZmlsZVwiICcgKyBhY2NlcHRUcGwgKyAnICcgKyBtdWx0aXBsZVRwbCArICcvPicpO1xuICAgICAgICB2YXIgJGNvbnRhaW5lciA9ICQoJzxkaXYgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgJGNvbnRhaW5lci5hcHBlbmQoJGlucHV0KTtcbiAgICAgICAgRS4kYm9keS5hcHBlbmQoJGNvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gb25jaGFuZ2Ug5LqL5Lu2XG4gICAgICAgICRpbnB1dC5vbignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWQoZSwgJGlucHV0LmdldCgwKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOiusOW9leWvueixoeaVsOaNrlxuICAgICAgICBzZWxmLiRpbnB1dCA9ICRpbnB1dDtcblxuICAgICAgICAvLyDorrDlvZVcbiAgICAgICAgc2VsZi5faGFzUmVuZGVyID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8g6YCJ5oupXG4gICAgVXBsb2FkRmlsZS5mbi5zZWxlY3RGaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIEUubG9nKCfkvb/nlKggaHRtbDUg5pa55byP5LiK5LygJyk7XG5cbiAgICAgICAgLy8g5YWI5riy5p+TXG4gICAgICAgIHNlbGYucmVuZGVyKCk7XG5cbiAgICAgICAgLy8g6YCJ5oupXG4gICAgICAgIEUubG9nKCfpgInmi6nmlofku7YnKTtcbiAgICAgICAgc2VsZi4kaW5wdXQuY2xpY2soKTtcbiAgICB9O1xuXG4gICAgLy8g6YCJ5Lit5paH5Lu25LmL5ZCOXG4gICAgVXBsb2FkRmlsZS5mbi5zZWxlY3RlZCA9IGZ1bmN0aW9uIChlLCBpbnB1dCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBmaWxlcyA9IGlucHV0LmZpbGVzIHx8IFtdO1xuICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBFLmxvZygn6YCJ5LitICcgKyBmaWxlcy5sZW5ndGggKyAnIOS4quaWh+S7ticpO1xuXG4gICAgICAgIC8vIOmBjeWOhumAieS4reeahOaWh+S7tu+8jOmihOiniOOAgeS4iuS8oFxuICAgICAgICAkLmVhY2goZmlsZXMsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICBzZWxmLnVwbG9hZCh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyDkuIrkvKDljZXkuKrmlofku7ZcbiAgICBVcGxvYWRGaWxlLmZuLnVwbG9hZCA9IGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGVkaXRvciA9IHNlbGYuZWRpdG9yO1xuICAgICAgICB2YXIgZmlsZW5hbWUgPSBmaWxlLm5hbWUgfHwgJyc7XG4gICAgICAgIHZhciBmaWxlVHlwZSA9IGZpbGUudHlwZSB8fCAnJztcbiAgICAgICAgdmFyIHVwbG9hZEltZ0ZucyA9IGVkaXRvci5jb25maWcudXBsb2FkSW1nRm5zO1xuICAgICAgICB2YXIgdXBsb2FkRmlsZU5hbWUgPSBlZGl0b3IuY29uZmlnLnVwbG9hZEltZ0ZpbGVOYW1lIHx8ICd3YW5nRWRpdG9ySDVGaWxlJztcbiAgICAgICAgdmFyIG9ubG9hZCA9IHVwbG9hZEltZ0Zucy5vbmxvYWQ7XG4gICAgICAgIHZhciBvbnRpbWVvdXQgPSB1cGxvYWRJbWdGbnMub250aW1lb3V0O1xuICAgICAgICB2YXIgb25lcnJvciA9IHVwbG9hZEltZ0Zucy5vbmVycm9yO1xuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICBpZiAoIW9ubG9hZCB8fCAhb250aW1lb3V0IHx8ICFvbmVycm9yKSB7XG4gICAgICAgICAgICBFLmVycm9yKCfor7fkuLrnvJbovpHlmajphY3nva7kuIrkvKDlm77niYfnmoQgb25sb2FkIG9udGltZW91dCBvbmVycm9yIOWbnuiwg+S6i+S7ticpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cblxuICAgICAgICBFLmxvZygn5byA5aeL5omn6KGMICcgKyBmaWxlbmFtZSArICcg5paH5Lu255qE5LiK5LygJyk7XG5cbiAgICAgICAgLy8g5riF56m6IGlucHV0IOaVsOaNrlxuICAgICAgICBmdW5jdGlvbiBjbGVhcklucHV0KCkge1xuICAgICAgICAgICAgc2VsZi5jbGVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gb25sb2Fk5LqL5Lu2XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgRS5sb2coJ+W3suivu+WPlicgKyBmaWxlbmFtZSArICfmlofku7YnKTtcblxuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGUudGFyZ2V0LnJlc3VsdCB8fCB0aGlzLnJlc3VsdDtcbiAgICAgICAgICAgIGVkaXRvci54aHJVcGxvYWRJbWcoe1xuICAgICAgICAgICAgICAgIGV2ZW50OiBlLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgICAgICAgICBiYXNlNjQ6IGJhc2U2NCxcbiAgICAgICAgICAgICAgICBmaWxlVHlwZTogZmlsZVR5cGUsXG4gICAgICAgICAgICAgICAgbmFtZTogdXBsb2FkRmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgbG9hZGZuOiBmdW5jdGlvbiAocmVzdWx0VGV4dCwgeGhyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM6YWN572u5Lit55qE5pa55rOVXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBvbmxvYWQuY2FsbChlZGl0b3IsIHJlc3VsdFRleHQsIHhocik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcmZuOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEUuaXNPbldlYnNpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCd3YW5nRWRpdG9y5a6Y572R5pqC5pe25rKh5pyJ5pyN5Yqh56uv77yM5Zug5q2k5oql6ZSZ44CC5a6e6ZmF6aG555uu5Lit5LiN5Lya5Y+R55SfJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM6YWN572u5Lit55qE5pa55rOVXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBvbmVycm9yLmNhbGwoZWRpdG9yLCB4aHIpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGltZW91dGZuOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEUuaXNPbldlYnNpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCd3YW5nRWRpdG9y5a6Y572R5pqC5pe25rKh5pyJ5pyN5Yqh56uv77yM5Zug5q2k6LaF5pe244CC5a6e6ZmF6aG555uu5Lit5LiN5Lya5Y+R55SfJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM6YWN572u5Lit55qE5pa55rOVXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBvbnRpbWVvdXQoZWRpdG9yLCB4aHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOW8gOWni+WPluaWh+S7tlxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICB9O1xuXG4gICAgLy8g5pq06Zyy57uZIEVcbiAgICBFLlVwbG9hZEZpbGUgPSBVcGxvYWRGaWxlO1xuXG59KTtcbi8vIGZvcm3mlrnlvI/kuIrkvKDlm77niYdcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBpZiAod2luZG93LkZpbGVSZWFkZXIgJiYgd2luZG93LkZvcm1EYXRhKSB7XG4gICAgICAgIC8vIOWmguaenOaUr+aMgSBodG1sNSDkuIrkvKDvvIzliJnov5Tlm55cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyDmnoTpgKDlh73mlbBcbiAgICB2YXIgVXBsb2FkRmlsZSA9IGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBvcHQuZWRpdG9yO1xuICAgICAgICB0aGlzLnVwbG9hZFVybCA9IG9wdC51cGxvYWRVcmw7XG4gICAgICAgIHRoaXMudGltZW91dCA9IG9wdC50aW1lb3V0O1xuICAgICAgICB0aGlzLmZpbGVBY2NlcHQgPSBvcHQuZmlsZUFjY2VwdDtcbiAgICAgICAgdGhpcy5tdWx0aXBsZSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBVcGxvYWRGaWxlLmZuID0gVXBsb2FkRmlsZS5wcm90b3R5cGU7XG5cbiAgICAvLyBjbGVhclxuICAgIFVwbG9hZEZpbGUuZm4uY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuJGlucHV0LnZhbCgnJyk7XG4gICAgICAgIEUubG9nKCdpbnB1dCB2YWx1ZSDlt7LmuIXnqbonKTtcbiAgICB9O1xuXG4gICAgLy8g6ZqQ6JePbW9kYWxcbiAgICBVcGxvYWRGaWxlLmZuLmhpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5tb2RhbC5oaWRlKCk7XG4gICAgfTtcblxuICAgIC8vIOa4suafk1xuICAgIFVwbG9hZEZpbGUuZm4ucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBlZGl0b3IgPSBzZWxmLmVkaXRvcjtcbiAgICAgICAgdmFyIHVwbG9hZEZpbGVOYW1lID0gZWRpdG9yLmNvbmZpZy51cGxvYWRJbWdGaWxlTmFtZSB8fCAnd2FuZ0VkaXRvckZvcm1GaWxlJztcbiAgICAgICAgaWYgKHNlbGYuX2hhc1JlbmRlcikge1xuICAgICAgICAgICAgLy8g5LiN6KaB6YeN5aSN5riy5p+TXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmnI3liqHlmajnq6/ot6/lvoRcbiAgICAgICAgdmFyIHVwbG9hZFVybCA9IHNlbGYudXBsb2FkVXJsO1xuXG4gICAgICAgIEUubG9nKCfmuLLmn5Nkb20nKTtcblxuICAgICAgICAvLyDliJvlu7ogZm9ybSDlkowgaWZyYW1lXG4gICAgICAgIHZhciBpZnJhbWVJZCA9ICdpZnJhbWUnICsgRS5yYW5kb20oKTtcbiAgICAgICAgdmFyICRpZnJhbWUgPSAkKCc8aWZyYW1lIG5hbWU9XCInICsgaWZyYW1lSWQgKyAnXCIgaWQ9XCInICsgaWZyYW1lSWQgKyAnXCIgZnJhbWVib3JkZXI9XCIwXCIgd2lkdGg9XCIwXCIgaGVpZ2h0PVwiMFwiPjwvaWZyYW1lPicpO1xuICAgICAgICB2YXIgbXVsdGlwbGUgPSBzZWxmLm11bHRpcGxlO1xuICAgICAgICB2YXIgbXVsdGlwbGVUcGwgPSBtdWx0aXBsZSA/ICdtdWx0aXBsZT1cIm11bHRpcGxlXCInIDogJyc7XG4gICAgICAgIHZhciAkcCA9ICQoJzxwPumAieaLqeWbvueJh+W5tuS4iuS8oDwvcD4nKTtcbiAgICAgICAgdmFyICRpbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwiZmlsZVwiICcgKyBtdWx0aXBsZVRwbCArICcgbmFtZT1cIicgKyB1cGxvYWRGaWxlTmFtZSArICdcIi8+Jyk7XG4gICAgICAgIHZhciAkYnRuID0gJCgnPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIuS4iuS8oFwiLz4nKTtcbiAgICAgICAgdmFyICRmb3JtID0gJCgnPGZvcm0gZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIiBtZXRob2Q9XCJwb3N0XCIgYWN0aW9uPVwiJyArIHVwbG9hZFVybCArICdcIiB0YXJnZXQ9XCInICsgaWZyYW1lSWQgKyAnXCI+PC9mb3JtPicpO1xuICAgICAgICB2YXIgJGNvbnRhaW5lciA9ICQoJzxkaXYgc3R5bGU9XCJtYXJnaW46MTBweCAyMHB4O1wiPjwvZGl2PicpO1xuXG4gICAgICAgICRmb3JtLmFwcGVuZCgkcCkuYXBwZW5kKCRpbnB1dCkuYXBwZW5kKCRidG4pO1xuXG4gICAgICAgIC8vIOWinuWKoOeUqOaIt+mFjee9rueahOWPguaVsO+8jOWmgiB0b2tlblxuICAgICAgICAkLmVhY2goZWRpdG9yLmNvbmZpZy51cGxvYWRQYXJhbXMsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAkZm9ybS5hcHBlbmQoICQoJzxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIicgKyBrZXkgKyAnXCIgdmFsdWU9XCInICsgdmFsdWUgKyAnXCIvPicpICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRjb250YWluZXIuYXBwZW5kKCRmb3JtKTtcbiAgICAgICAgJGNvbnRhaW5lci5hcHBlbmQoJGlmcmFtZSk7XG5cbiAgICAgICAgc2VsZi4kaW5wdXQgPSAkaW5wdXQ7XG4gICAgICAgIHNlbGYuJGlmcmFtZSA9ICRpZnJhbWU7XG5cbiAgICAgICAgLy8g55Sf5oiQIG1vZGFsXG4gICAgICAgIHZhciBtb2RhbCA9IG5ldyBFLk1vZGFsKGVkaXRvciwgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAkY29udGVudDogJGNvbnRhaW5lclxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5tb2RhbCA9IG1vZGFsO1xuXG4gICAgICAgIC8vIOiusOW9lVxuICAgICAgICBzZWxmLl9oYXNSZW5kZXIgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvLyDnu5HlrpogaWZyYW1lIGxvYWQg5LqL5Lu2XG4gICAgVXBsb2FkRmlsZS5mbi5iaW5kTG9hZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmLl9oYXNCaW5kTG9hZCkge1xuICAgICAgICAgICAgLy8g5LiN6KaB6YeN5aSN57uR5a6aXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWRpdG9yID0gc2VsZi5lZGl0b3I7XG4gICAgICAgIHZhciAkaWZyYW1lID0gc2VsZi4kaWZyYW1lO1xuICAgICAgICB2YXIgaWZyYW1lID0gJGlmcmFtZS5nZXQoMCk7XG4gICAgICAgIHZhciBpZnJhbWVXaW5kb3cgPSBpZnJhbWUuY29udGVudFdpbmRvdztcbiAgICAgICAgdmFyIG9ubG9hZCA9IGVkaXRvci5jb25maWcudXBsb2FkSW1nRm5zLm9ubG9hZDtcblxuICAgICAgICAvLyDlrprkuYlsb2Fk5LqL5Lu2XG4gICAgICAgIGZ1bmN0aW9uIG9ubG9hZEZuKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdFRleHQgPSAkLnRyaW0oaWZyYW1lV2luZG93LmRvY3VtZW50LmJvZHkuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIGlmICghcmVzdWx0VGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g6I635Y+W5paH5Lu25ZCNXG4gICAgICAgICAgICB2YXIgZmlsZUZ1bGxOYW1lID0gc2VsZi4kaW5wdXQudmFsKCk7ICAvLyDnu5PmnpzlpoIgQzpcXGZvbGRlclxcYWJjLnBuZyDmoLzlvI9cbiAgICAgICAgICAgIHZhciBmaWxlT3JpZ2luYWxOYW1lID0gZmlsZUZ1bGxOYW1lO1xuICAgICAgICAgICAgaWYgKGZpbGVGdWxsTmFtZS5sYXN0SW5kZXhPZignXFxcXCcpID49IDApIHtcbiAgICAgICAgICAgICAgICAvLyDojrflj5YgYWJjLnBuZyDmoLzlvI9cbiAgICAgICAgICAgICAgICBmaWxlT3JpZ2luYWxOYW1lID0gZmlsZUZ1bGxOYW1lLnNsaWNlKGZpbGVGdWxsTmFtZS5sYXN0SW5kZXhPZignXFxcXCcpICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVPcmlnaW5hbE5hbWUuaW5kZXhPZignLicpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyDojrflj5YgYWJjIO+8iOWNs+S4jeW4puaJqeWxleWQjeeahOaWh+S7tuWQje+8iVxuICAgICAgICAgICAgICAgICAgICBmaWxlT3JpZ2luYWxOYW1lID0gZmlsZU9yaWdpbmFsTmFtZS5zcGxpdCgnLicpWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5bCG5paH5Lu25ZCN5pqC5a2Y5YiwIGVkaXRvci51cGxvYWRJbWdPcmlnaW5hbE5hbWUg77yM5o+S5YWl5Zu+54mH5pe277yM5Y+v5L2c5Li6IGFsdCDlsZ7mgKfmnaXnlKhcbiAgICAgICAgICAgIGVkaXRvci51cGxvYWRJbWdPcmlnaW5hbE5hbWUgPSBmaWxlT3JpZ2luYWxOYW1lO1xuXG4gICAgICAgICAgICAvLyDmiafooYxsb2Fk5Ye95pWw77yM5o+S5YWl5Zu+54mH55qE5pON5L2c77yM5bqU6K+l5ZyobG9hZOWHveaVsOS4reaJp+ihjFxuICAgICAgICAgICAgb25sb2FkLmNhbGwoZWRpdG9yLCByZXN1bHRUZXh0KTtcblxuICAgICAgICAgICAgLy8g5riF56m6IGlucHV0IOaVsOaNrlxuICAgICAgICAgICAgc2VsZi5jbGVhcigpO1xuXG4gICAgICAgICAgICAvLyDpmpDol49tb2RhbFxuICAgICAgICAgICAgc2VsZi5oaWRlTW9kYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOe7keWumiBsb2FkIOS6i+S7tlxuICAgICAgICBpZiAoaWZyYW1lLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgICAgICBpZnJhbWUuYXR0YWNoRXZlbnQoJ29ubG9hZCcsIG9ubG9hZEZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmcmFtZS5vbmxvYWQgPSBvbmxvYWRGbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOiusOW9lVxuICAgICAgICBzZWxmLl9oYXNCaW5kTG9hZCA9IHRydWU7XG4gICAgfTtcblxuICAgIFVwbG9hZEZpbGUuZm4uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgbW9kYWwgPSBzZWxmLm1vZGFsO1xuXG4gICAgICAgIGZ1bmN0aW9uIHNob3coKSB7XG4gICAgICAgICAgICBtb2RhbC5zaG93KCk7XG4gICAgICAgICAgICBzZWxmLmJpbmRMb2FkRXZlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KHNob3cpO1xuICAgIH07XG5cbiAgICAvLyDpgInmi6lcbiAgICBVcGxvYWRGaWxlLmZuLnNlbGVjdEZpbGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgRS5sb2coJ+S9v+eUqCBmb3JtIOaWueW8j+S4iuS8oCcpO1xuXG4gICAgICAgIC8vIOWFiOa4suafk1xuICAgICAgICBzZWxmLnJlbmRlcigpO1xuXG4gICAgICAgIC8vIOWFiOa4heepulxuICAgICAgICBzZWxmLmNsZWFyKCk7XG5cbiAgICAgICAgLy8g5pi+56S6XG4gICAgICAgIHNlbGYuc2hvdygpO1xuICAgIH07XG5cbiAgICAvLyDmmrTpnLLnu5kgRVxuICAgIEUuVXBsb2FkRmlsZSA9IFVwbG9hZEZpbGU7XG5cbn0pO1xuLy8gdXBsb2FkIGltZyDmj5Lku7Yg57KY6LS05Zu+54mHXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuICAgIFxuICAgIEUucGx1Z2luKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciB0eHQgPSBlZGl0b3IudHh0O1xuICAgICAgICB2YXIgJHR4dCA9IHR4dC4kdHh0O1xuICAgICAgICB2YXIgY29uZmlnID0gZWRpdG9yLmNvbmZpZztcbiAgICAgICAgdmFyIHVwbG9hZEltZ1VybCA9IGNvbmZpZy51cGxvYWRJbWdVcmw7XG4gICAgICAgIHZhciB1cGxvYWRGaWxlTmFtZSA9IGNvbmZpZy51cGxvYWRJbWdGaWxlTmFtZSB8fCAnd2FuZ0VkaXRvclBhc3RlRmlsZSc7XG4gICAgICAgIHZhciBwYXN0ZUV2ZW50O1xuICAgICAgICB2YXIgJGltZ3NCZWZvcmVQYXN0ZTtcblxuICAgICAgICAvLyDmnKrphY3nva7kuIrkvKDlm77niYd1cmzvvIzliJnlv73nlaVcbiAgICAgICAgaWYgKCF1cGxvYWRJbWdVcmwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLS0tLS0tIOmdniBjaHJvbWUg5LiL77yM6YCa6L+H5p+l5om+57KY6LS055qE5Zu+54mH55qE5pa55byP5LiK5LygIC0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRQYXN0ZUltZ0FuZFVwbG9hZCgpIHtcbiAgICAgICAgICAgIHZhciByZWcgPSAvXmRhdGE6KGltYWdlXFwvXFx3Kyk7YmFzZTY0LztcbiAgICAgICAgICAgIHZhciAkaW1ncyA9ICR0eHQuZmluZCgnaW1nJyk7XG5cbiAgICAgICAgICAgIEUubG9nKCfnspjotLTlkI7vvIzmo4Dmn6XliLDnvJbovpHlmajmnIknICsgJGltZ3MubGVuZ3RoICsgJ+S4quWbvueJh+OAguW8gOWni+mBjeWOhuWbvueJh++8jOivleWbvuaJvuWIsOWImuWImueymOi0tOi/h+adpeeahOWbvueJhycpO1xuXG4gICAgICAgICAgICAkLmVhY2goJGltZ3MsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW1nID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoaW1nKTtcbiAgICAgICAgICAgICAgICB2YXIgZmxhZztcbiAgICAgICAgICAgICAgICB2YXIgYmFzZTY0ID0gJGltZy5hdHRyKCdzcmMnKTtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIOWIpOaWreW9k+WJjeWbvueJh+aYr+WQpuaYr+eymOi0tOS5i+WJjeeahFxuICAgICAgICAgICAgICAgICRpbWdzQmVmb3JlUGFzdGUuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWcgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW9k+WJjeWbvueJh+aYr+eymOi0tOS5i+WJjeeahFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIOW9k+WJjeWbvueJh+aYr+eymOi0tOS5i+WJjeeahO+8jOWImeW/veeVpVxuICAgICAgICAgICAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBFLmxvZygn5om+5Yiw5LiA5Liq57KY6LS06L+H5p2l55qE5Zu+54mHJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3QoYmFzZTY0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyDlvpfliLDnmoTnspjotLTnmoTlm77niYfmmK8gYmFzZTY0IOagvOW8j++8jOespuWQiOimgeaxglxuICAgICAgICAgICAgICAgICAgICBFLmxvZygnc3JjIOaYryBiYXNlNjQg5qC85byP77yM5Y+v5Lul5LiK5LygJyk7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSBiYXNlNjQubWF0Y2gocmVnKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnhoclVwbG9hZEltZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogcGFzdGVFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NDogYmFzZTY0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB1cGxvYWRGaWxlTmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBFLmxvZygnc3JjIOS4uiAnICsgYmFzZTY0ICsgJyDvvIzkuI3mmK8gYmFzZTY0IOagvOW8j++8jOaaguaXtuS4jeaUr+aMgeS4iuS8oCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOacgOe7iOenu+mZpOWOn+WbvueJh1xuICAgICAgICAgICAgICAgICRpbWcucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgRS5sb2coJ+mBjeWOhue7k+adnycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5byA5aeL55uR5o6n57KY6LS05LqL5Lu2XG4gICAgICAgICR0eHQub24oJ3Bhc3RlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHBhc3RlRXZlbnQgPSBlO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBwYXN0ZUV2ZW50LmNsaXBib2FyZERhdGEgfHwgcGFzdGVFdmVudC5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGE7XG4gICAgICAgICAgICB2YXIgdGV4dDtcbiAgICAgICAgICAgIHZhciBpdGVtcztcblxuICAgICAgICAgICAgLy8gLS0tLS0tLS0g6K+V5Zu+6I635Y+W5Ymq5YiH5p2/5Lit55qE5paH5a2X77yM5pyJ5paH5a2X55qE5oOF5Ya15LiL77yM5bCx5LiN5aSE55CG5Zu+54mH57KY6LS0IC0tLS0tLS0tXG4gICAgICAgICAgICBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHdpbmRvdy5jbGlwYm9hcmREYXRhICYmIHdpbmRvdy5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IGRhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpIHx8IGRhdGEuZ2V0RGF0YSgndGV4dC9odG1sJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbXMgPSBkYXRhICYmIGRhdGEuaXRlbXM7XG4gICAgICAgICAgICBpZiAoaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLSBjaHJvbWUg5Y+v5Lul55SoIGRhdGEuaXRlbXMg5Y+W5Ye65Zu+54mHIC0tLS0tXG4gICAgICAgICAgICAgICAgRS5sb2coJ+mAmui/hyBkYXRhLml0ZW1zIOW+l+WIsOS6huaVsOaNricpO1xuXG4gICAgICAgICAgICAgICAgJC5lYWNoKGl0ZW1zLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZVR5cGUgPSB2YWx1ZS50eXBlIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZihmaWxlVHlwZS5pbmRleE9mKCdpbWFnZScpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiN5piv5Zu+54mHXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IHZhbHVlLmdldEFzRmlsZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgICAgICAgICAgICBFLmxvZygn5b6X5Yiw5LiA5Liq57KY6LS05Zu+54mHJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBFLmxvZygn6K+75Y+W5Yiw57KY6LS055qE5Zu+54mHJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaJp+ihjOS4iuS8oFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGUudGFyZ2V0LnJlc3VsdCB8fCB0aGlzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci54aHJVcGxvYWRJbWcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBwYXN0ZUV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NDogYmFzZTY0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBmaWxlVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB1cGxvYWRGaWxlTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy/or7vlj5bnspjotLTnmoTmlofku7ZcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tIOmdniBjaHJvbWUg5LiN6IO955SoIGRhdGEuaXRlbXMg5Y+W5Zu+54mHIC0tLS0tXG5cbiAgICAgICAgICAgICAgICBFLmxvZygn5pyq5LuOIGRhdGEuaXRlbXMg5b6X5Yiw5pWw5o2u77yM5L2/55So5qOA5rWL57KY6LS05Zu+54mH55qE5pa55byPJyk7XG5cbiAgICAgICAgICAgICAgICAvLyDojrflj5ZcbiAgICAgICAgICAgICAgICAkaW1nc0JlZm9yZVBhc3RlID0gJHR4dC5maW5kKCdpbWcnKTtcbiAgICAgICAgICAgICAgICBFLmxvZygn57KY6LS05YmN77yM5qOA5p+l5Yiw57yW6L6R5Zmo5pyJJyArICRpbWdzQmVmb3JlUGFzdGUubGVuZ3RoICsgJ+S4quWbvueJhycpO1xuXG4gICAgICAgICAgICAgICAgLy8g5byC5q2l5LiK5Lyg5om+5Yiw55qE5Zu+54mHXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmaW5kUGFzdGVJbWdBbmRVcGxvYWQsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0pO1xufSk7XG4vLyDmi5bmi73kuIrkvKDlm77niYcg5o+S5Lu2IFxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUucGx1Z2luKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIHR4dCA9IGVkaXRvci50eHQ7XG4gICAgICAgIHZhciAkdHh0ID0gdHh0LiR0eHQ7XG4gICAgICAgIHZhciBjb25maWcgPSBlZGl0b3IuY29uZmlnO1xuICAgICAgICB2YXIgdXBsb2FkSW1nVXJsID0gY29uZmlnLnVwbG9hZEltZ1VybDtcbiAgICAgICAgdmFyIHVwbG9hZEZpbGVOYW1lID0gY29uZmlnLnVwbG9hZEltZ0ZpbGVOYW1lIHx8ICd3YW5nRWRpdG9yRHJhZ0ZpbGUnO1xuXG4gICAgICAgIC8vIOacqumFjee9ruS4iuS8oOWbvueJh3VybO+8jOWImeW/veeVpVxuICAgICAgICBpZiAoIXVwbG9hZEltZ1VybCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6Zi75q2i5rWP6KeI5Zmo6buY6K6k6KGM5Li6XG4gICAgICAgIEUuJGRvY3VtZW50Lm9uKCdkcmFnbGVhdmUgZHJvcCBkcmFnZW50ZXIgZHJhZ292ZXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDnm5HmjqcgJHR4dCBkcm9wIOS6i+S7tlxuICAgICAgICAkdHh0Lm9uKCdkcm9wJywgZnVuY3Rpb24gKGRyYWdFdmVudCkge1xuICAgICAgICAgICAgZHJhZ0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gZHJhZ0V2ZW50Lm9yaWdpbmFsRXZlbnQ7XG4gICAgICAgICAgICB2YXIgZmlsZXMgPSBvcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlciAmJiBvcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcblxuICAgICAgICAgICAgaWYgKCFmaWxlcyB8fCAhZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkLmVhY2goZmlsZXMsIGZ1bmN0aW9uIChrLCBmaWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWxlLnR5cGU7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBmaWxlLm5hbWU7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZS5pbmRleE9mKCdpbWFnZS8nKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5Y+q5o6l5pS25Zu+54mHXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBFLmxvZygn5b6X5Yiw5Zu+54mHICcgKyBuYW1lKTtcblxuICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBFLmxvZygn6K+75Y+W5Yiw5Zu+54mHICcgKyBuYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDmiafooYzkuIrkvKBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGUudGFyZ2V0LnJlc3VsdCB8fCB0aGlzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnhoclVwbG9hZEltZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogZHJhZ0V2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0OiBiYXNlNjQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlVHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHVwbG9hZEZpbGVOYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvL+ivu+WPlueymOi0tOeahOaWh+S7tlxuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0pO1xuLy8g57yW6L6R5Zmo5Yy65Z+fIHRhYmxlIHRvb2xiYXJcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBFLnBsdWdpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgdHh0ID0gZWRpdG9yLnR4dDtcbiAgICAgICAgdmFyICR0eHQgPSB0eHQuJHR4dDtcbiAgICAgICAgdmFyIGh0bWwgPSAnJztcbiAgICAgICAgLy8g6K+05piO77ya6K6+572u5LqGIG1heC1oZWlnaHQg5LmL5ZCO77yMJHR4dC5wYXJlbnQoKSDotJ/otKPmu5rliqjlpITnkIZcbiAgICAgICAgdmFyICRjdXJyZW50VHh0ID0gZWRpdG9yLnVzZU1heEhlaWdodCA/ICR0eHQucGFyZW50KCkgOiAkdHh0O1xuICAgICAgICB2YXIgJGN1cnJlbnRUYWJsZTtcblxuICAgICAgICAvLyDnlKjliLDnmoRkb23oioLngrlcbiAgICAgICAgdmFyIGlzUmVuZGVyZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyICR0b29sYmFyID0gJCgnPGRpdiBjbGFzcz1cInR4dC10b29sYmFyXCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkdHJpYW5nbGUgPSAkKCc8ZGl2IGNsYXNzPVwidGlwLXRyaWFuZ2xlXCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkZGVsZXRlID0gJCgnPGEgaHJlZj1cIiNcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctdHJhc2gtb1wiPjwvaT48L2E+Jyk7XG4gICAgICAgIHZhciAkem9vbVNtYWxsID0gJCgnPGEgaHJlZj1cIiNcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctc2VhcmNoLW1pbnVzXCI+PC9pPjwvYT4nKTtcbiAgICAgICAgdmFyICR6b29tQmlnID0gJCgnPGEgaHJlZj1cIiNcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctc2VhcmNoLXBsdXNcIj48L2k+PC9hPicpO1xuXG4gICAgICAgIC8vIOa4suafk+WIsOmhtemdolxuICAgICAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICBpZiAoaXNSZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgICAgICAgICBiaW5kRXZlbnQoKTtcblxuICAgICAgICAgICAgLy8g5ou85o6lIOa4suafk+WIsOmhtemdouS4ilxuICAgICAgICAgICAgJHRvb2xiYXIuYXBwZW5kKCR0cmlhbmdsZSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkZGVsZXRlKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCR6b29tU21hbGwpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHpvb21CaWcpO1xuICAgICAgICAgICAgZWRpdG9yLiRlZGl0b3JDb250YWluZXIuYXBwZW5kKCR0b29sYmFyKTtcbiAgICAgICAgICAgIGlzUmVuZGVyZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g57uR5a6a5LqL5Lu2XG4gICAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudCgpIHtcbiAgICAgICAgICAgIC8vIOe7n+S4gOaJp+ihjOWRveS7pOeahOaWueazlVxuICAgICAgICAgICAgdmFyIGNvbW1hbmRGbjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbW1hbmQoZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAvLyDmiafooYzlkb3ku6TkuYvliY3vvIzlhYjlrZjlgqhodG1s5YaF5a65XG4gICAgICAgICAgICAgICAgaHRtbCA9ICR0eHQuaHRtbCgpO1xuICAgICAgICAgICAgICAgIC8vIOebkeaOp+WGheWuueWPmOWMllxuICAgICAgICAgICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uICAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaHRtbCAhPT0gJHR4dC5odG1sKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0eHQuY2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOWRveS7pFxuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kRm4pIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmN1c3RvbUNvbW1hbmQoZSwgY29tbWFuZEZuLCBjYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDliKDpmaRcbiAgICAgICAgICAgICRkZWxldGUuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50VGFibGUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb21tYW5kKGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChoaWRlLCAxMDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIOaUvuWkp1xuICAgICAgICAgICAgJHpvb21CaWcuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50VGFibGUuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb21tYW5kKGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChzaG93KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDnvKnlsI9cbiAgICAgICAgICAgICR6b29tU21hbGwuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50VGFibGUuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb21tYW5kKGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChzaG93KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5pi+56S6IHRvb2xiYXJcbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgIGlmIChlZGl0b3IuX2Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgLy8g57yW6L6R5Zmo5bey57uP6KKr56aB55So77yM5YiZ5LiN6K6p5pi+56S6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRjdXJyZW50VGFibGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjdXJyZW50VGFibGUuYWRkQ2xhc3MoJ2NsaWNrZWQnKTtcbiAgICAgICAgICAgIHZhciB0YWJsZVBvc2l0aW9uID0gJGN1cnJlbnRUYWJsZS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgdmFyIHRhYmxlVG9wID0gdGFibGVQb3NpdGlvbi50b3A7XG4gICAgICAgICAgICB2YXIgdGFibGVMZWZ0ID0gdGFibGVQb3NpdGlvbi5sZWZ0O1xuICAgICAgICAgICAgdmFyIHRhYmxlSGVpZ2h0ID0gJGN1cnJlbnRUYWJsZS5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIHRhYmxlV2lkdGggPSAkY3VycmVudFRhYmxlLm91dGVyV2lkdGgoKTtcblxuICAgICAgICAgICAgLy8gLS0tIOWumuS9jSB0b29sYmFyIC0tLVxuXG4gICAgICAgICAgICAvLyDorqHnrpfliJ3mraXnu5PmnpxcbiAgICAgICAgICAgIHZhciB0b3AgPSB0YWJsZVRvcCArIHRhYmxlSGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGxlZnQgPSB0YWJsZUxlZnQ7XG4gICAgICAgICAgICB2YXIgbWFyZ2luTGVmdCA9IDA7XG5cbiAgICAgICAgICAgIHZhciB0eHRUb3AgPSAkY3VycmVudFR4dC5wb3NpdGlvbigpLnRvcDtcbiAgICAgICAgICAgIHZhciB0eHRIZWlnaHQgPSAkY3VycmVudFR4dC5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgaWYgKHRvcCA+ICh0eHRUb3AgKyB0eHRIZWlnaHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gdG9wIOS4jeW+l+i2heWHuue8lui+keiMg+WbtFxuICAgICAgICAgICAgICAgIHRvcCA9IHR4dFRvcCArIHR4dEhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5pi+56S677yI5pa55L6/6K6h566XIG1hcmdpbu+8iVxuICAgICAgICAgICAgJHRvb2xiYXIuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyDorqHnrpcgbWFyZ2luXG4gICAgICAgICAgICB2YXIgd2lkdGggPSAkdG9vbGJhci5vdXRlcldpZHRoKCk7XG4gICAgICAgICAgICBtYXJnaW5MZWZ0ID0gdGFibGVXaWR0aCAvIDIgLSB3aWR0aCAvIDI7XG5cbiAgICAgICAgICAgIC8vIOWumuS9jVxuICAgICAgICAgICAgJHRvb2xiYXIuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IHRvcCArIDUsXG4gICAgICAgICAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgICAgICAgICAnbWFyZ2luLWxlZnQnOiBtYXJnaW5MZWZ0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIOWmguaenOWumuS9jeWkqumdoOW3puS6hlxuICAgICAgICAgICAgaWYgKG1hcmdpbkxlZnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgLy8g5b6X5Yiw5LiJ6KeS5b2i55qEbWFyZ2luLWxlZnRcbiAgICAgICAgICAgICAgICAkdG9vbGJhci5jc3MoJ21hcmdpbi1sZWZ0JywgJzAnKTtcbiAgICAgICAgICAgICAgICAkdHJpYW5nbGUuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdHJpYW5nbGUuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDpmpDol48gdG9vbGJhclxuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgaWYgKCRjdXJyZW50VGFibGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjdXJyZW50VGFibGUucmVtb3ZlQ2xhc3MoJ2NsaWNrZWQnKTtcbiAgICAgICAgICAgICRjdXJyZW50VGFibGUgPSBudWxsO1xuICAgICAgICAgICAgJHRvb2xiYXIuaGlkZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2xpY2sgdGFibGUg5LqL5Lu2XG4gICAgICAgICRjdXJyZW50VHh0Lm9uKCdjbGljaycsICd0YWJsZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgJHRhYmxlID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuXG4gICAgICAgICAgICAvLyDmuLLmn5NcbiAgICAgICAgICAgIHJlbmRlcigpO1xuXG4gICAgICAgICAgICBpZiAoJGN1cnJlbnRUYWJsZSAmJiAoJGN1cnJlbnRUYWJsZS5nZXQoMCkgPT09ICR0YWJsZS5nZXQoMCkpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChoaWRlLCAxMDApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5pi+56S6IHRvb2xiYXJcbiAgICAgICAgICAgICRjdXJyZW50VGFibGUgPSAkdGFibGU7XG4gICAgICAgICAgICBzaG93KCk7XG5cbiAgICAgICAgICAgIC8vIOmYu+atouWGkuazoVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9KS5vbignY2xpY2sga2V5ZG93biBzY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChoaWRlLCAxMDApO1xuICAgICAgICB9KTtcbiAgICAgICAgRS4kYm9keS5vbignY2xpY2sga2V5ZG93biBzY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChoaWRlLCAxMDApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSk7XG4vLyDnvJbovpHlmajljLrln58gaW1nIHRvb2xiYXJcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG5cbiAgICBpZiAoRS51c2VyQWdlbnQuaW5kZXhPZignTVNJRSA4JykgPiAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgRS5wbHVnaW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcbiAgICAgICAgdmFyIGxhbmcgPSBlZGl0b3IuY29uZmlnLmxhbmc7XG4gICAgICAgIHZhciB0eHQgPSBlZGl0b3IudHh0O1xuICAgICAgICB2YXIgJHR4dCA9IHR4dC4kdHh0O1xuICAgICAgICB2YXIgaHRtbCA9ICcnO1xuICAgICAgICAvLyDor7TmmI7vvJrorr7nva7kuoYgbWF4LWhlaWdodCDkuYvlkI7vvIwkdHh0LnBhcmVudCgpIOi0n+i0o+a7muWKqOWkhOeQhlxuICAgICAgICB2YXIgJGN1cnJlbnRUeHQgPSBlZGl0b3IudXNlTWF4SGVpZ2h0ID8gJHR4dC5wYXJlbnQoKSA6ICR0eHQ7XG4gICAgICAgIHZhciAkZWRpdG9yQ29udGFpbmVyID0gZWRpdG9yLiRlZGl0b3JDb250YWluZXI7XG4gICAgICAgIHZhciAkY3VycmVudEltZztcbiAgICAgICAgdmFyIGN1cnJlbnRMaW5rID0gJyc7XG5cbiAgICAgICAgLy8g55So5Yiw55qEZG9t6IqC54K5XG4gICAgICAgIHZhciBpc1JlbmRlcmVkID0gZmFsc2U7XG4gICAgICAgIHZhciAkZHJhZ1BvaW50ID0gJCgnPGRpdiBjbGFzcz1cImltZy1kcmFnLXBvaW50XCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgdmFyICR0b29sYmFyID0gJCgnPGRpdiBjbGFzcz1cInR4dC10b29sYmFyXCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkdHJpYW5nbGUgPSAkKCc8ZGl2IGNsYXNzPVwidGlwLXRyaWFuZ2xlXCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgdmFyICRtZW51Q29udGFpbmVyID0gJCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRkZWxldGUgPSAkKCc8YSBocmVmPVwiI1wiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy10cmFzaC1vXCI+PC9pPjwvYT4nKTtcbiAgICAgICAgdmFyICR6b29tU21hbGwgPSAkKCc8YSBocmVmPVwiI1wiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1zZWFyY2gtbWludXNcIj48L2k+PC9hPicpO1xuICAgICAgICB2YXIgJHpvb21CaWcgPSAkKCc8YSBocmVmPVwiI1wiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1zZWFyY2gtcGx1c1wiPjwvaT48L2E+Jyk7XG4gICAgICAgIC8vIHZhciAkZmxvYXRMZWZ0ID0gJCgnPGEgaHJlZj1cIiNcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctYWxpZ24tbGVmdFwiPjwvaT48L2E+Jyk7XG4gICAgICAgIC8vIHZhciAkbm9GbG9hdCA9ICQoJzxhIGhyZWY9XCIjXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWFsaWduLWp1c3RpZnlcIj48L2k+PC9hPicpO1xuICAgICAgICAvLyB2YXIgJGZsb2F0UmlnaHQgPSAkKCc8YSBocmVmPVwiI1wiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1hbGlnbi1yaWdodFwiPjwvaT48L2E+Jyk7XG4gICAgICAgIHZhciAkYWxpZ25MZWZ0ID0gJCgnPGEgaHJlZj1cIiNcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctYWxpZ24tbGVmdFwiPjwvaT48L2E+Jyk7XG4gICAgICAgIHZhciAkYWxpZ25DZW50ZXIgPSAkKCc8YSBocmVmPVwiI1wiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1hbGlnbi1jZW50ZXJcIj48L2k+PC9hPicpO1xuICAgICAgICB2YXIgJGFsaWduUmlnaHQgPSAkKCc8YSBocmVmPVwiI1wiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1hbGlnbi1yaWdodFwiPjwvaT48L2E+Jyk7XG4gICAgICAgIHZhciAkbGluayA9ICQoJzxhIGhyZWY9XCIjXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWxpbmtcIj48L2k+PC9hPicpO1xuICAgICAgICB2YXIgJHVuTGluayA9ICQoJzxhIGhyZWY9XCIjXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLXVubGlua1wiPjwvaT48L2E+Jyk7XG5cbiAgICAgICAgdmFyICRsaW5rSW5wdXRDb250YWluZXIgPSAkKCc8ZGl2IHN0eWxlPVwiZGlzcGxheTpub25lO1wiPjwvZGl2PicpO1xuICAgICAgICB2YXIgJGxpbmtJbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIHN0eWxlPVwiaGVpZ2h0OjI2cHg7IG1hcmdpbi1sZWZ0OjEwcHg7IHdpZHRoOjIwMHB4O1wiLz4nKTtcbiAgICAgICAgdmFyICRsaW5rQnRuU3VibWl0ID0gJCgnPGJ1dHRvbiBjbGFzcz1cInJpZ2h0XCI+JyArIGxhbmcuc3VibWl0ICsgJzwvYnV0dG9uPicpO1xuICAgICAgICB2YXIgJGxpbmtCdG5DYW5jZWwgPSAkKCc8YnV0dG9uIGNsYXNzPVwicmlnaHQgZ3JheVwiPicgKyBsYW5nLmNhbmNlbCArICc8L2J1dHRvbj4nKTtcblxuICAgICAgICAvLyDorrDlvZXmmK/lkKbmraPlnKjmi5bmi71cbiAgICAgICAgdmFyIGlzT25EcmFnID0gZmFsc2U7XG5cbiAgICAgICAgLy8g6I635Y+WIC8g6K6+572uIOmTvuaOpVxuICAgICAgICBmdW5jdGlvbiBpbWdMaW5rKGUsIHVybCkge1xuICAgICAgICAgICAgaWYgKCEkY3VycmVudEltZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb21tYW5kRm47XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8g5Y+K5pe25L+d5a2YY3VycmVudExpbmtcbiAgICAgICAgICAgICAgICBpZiAodXJsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExpbmsgPSB1cmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChodG1sICE9PSAkdHh0Lmh0bWwoKSkge1xuICAgICAgICAgICAgICAgICAgICAkdHh0LmNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgJGxpbms7XG4gICAgICAgICAgICB2YXIgaW5MaW5rID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgJHBhcmVudCA9ICRjdXJyZW50SW1nLnBhcmVudCgpO1xuICAgICAgICAgICAgaWYgKCRwYXJlbnQuZ2V0KDApLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJykge1xuICAgICAgICAgICAgICAgIC8vIOeItuWFg+e0oOWwseaYr+WbvueJh+mTvuaOpVxuICAgICAgICAgICAgICAgICRsaW5rID0gJHBhcmVudDtcbiAgICAgICAgICAgICAgICBpbkxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDniLblhYPntKDkuI3mmK/lm77niYfpk77mjqXvvIzliJnph43mlrDliJvlu7rkuIDkuKrpk77mjqVcbiAgICAgICAgICAgICAgICAkbGluayA9ICQoJzxhIHRhcmdldD1cIl9ibGFua1wiPjwvYT4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHVybCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gdXJsIOaXoOWAvO+8jOaYr+iOt+WPlumTvuaOpVxuICAgICAgICAgICAgICAgIHJldHVybiAkbGluay5hdHRyKCdocmVmJykgfHwgJyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVybCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAvLyB1cmwg5piv56m65a2X56ym5Liy77yM5piv5Y+W5raI6ZO+5o6lXG4gICAgICAgICAgICAgICAgaWYgKGluTGluaykge1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudEltZy51bndyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHVybCDmnInlgLzvvIzmmK/orr7nva7pk77mjqVcbiAgICAgICAgICAgICAgICBpZiAodXJsID09PSBjdXJyZW50TGluaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbW1hbmRGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGxpbmsuYXR0cignaHJlZicsIHVybCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbkxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW9k+WJjeWbvueJh+acquWMheWQq+WcqOmTvuaOpeS4re+8jOWImeWMheWQq+i/m+adpVxuICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRJbWcud3JhcCgkbGluayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDmiafooYzlkb3ku6RcbiAgICAgICAgICAgIGlmIChjb21tYW5kRm4pIHtcbiAgICAgICAgICAgICAgICAvLyDorrDlvZXkuIvmiafooYzlkb3ku6TkuYvliY3nmoRodG1s5YaF5a65XG4gICAgICAgICAgICAgICAgaHRtbCA9ICR0eHQuaHRtbCgpO1xuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOWRveS7pFxuICAgICAgICAgICAgICAgIGVkaXRvci5jdXN0b21Db21tYW5kKGUsIGNvbW1hbmRGbiwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5riy5p+T5Yiw6aG16Z2iXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIGlmIChpc1JlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDnu5Hlrprkuovku7ZcbiAgICAgICAgICAgIGJpbmRUb29sYmFyRXZlbnQoKTtcbiAgICAgICAgICAgIGJpbmREcmFnRXZlbnQoKTtcblxuICAgICAgICAgICAgLy8g6I+c5Y2V5pS+5YWlIGNvbnRhaW5lclxuICAgICAgICAgICAgJG1lbnVDb250YWluZXIuYXBwZW5kKCRkZWxldGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkem9vbVNtYWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJHpvb21CaWcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLmFwcGVuZCgkZmxvYXRMZWZ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC5hcHBlbmQoJG5vRmxvYXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLmFwcGVuZCgkZmxvYXRSaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYWxpZ25MZWZ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGFsaWduQ2VudGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGFsaWduUmlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGluaylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCR1bkxpbmspO1xuXG4gICAgICAgICAgICAvLyDpk77mjqVpbnB1dOaUvuWFpWNvbnRhaW5lclxuICAgICAgICAgICAgJGxpbmtJbnB1dENvbnRhaW5lci5hcHBlbmQoJGxpbmtJbnB1dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaW5rQnRuQ2FuY2VsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJGxpbmtCdG5TdWJtaXQpO1xuXG4gICAgICAgICAgICAvLyDmi7zmjqUg5riy5p+T5Yiw6aG16Z2i5LiKXG4gICAgICAgICAgICAkdG9vbGJhci5hcHBlbmQoJHRyaWFuZ2xlKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRtZW51Q29udGFpbmVyKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaW5rSW5wdXRDb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGVkaXRvci4kZWRpdG9yQ29udGFpbmVyLmFwcGVuZCgkdG9vbGJhcikuYXBwZW5kKCRkcmFnUG9pbnQpO1xuICAgICAgICAgICAgaXNSZW5kZXJlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDnu5Hlrpp0b29sYmFy5LqL5Lu2XG4gICAgICAgIGZ1bmN0aW9uIGJpbmRUb29sYmFyRXZlbnQoKSB7XG4gICAgICAgICAgICAvLyDnu5/kuIDmiafooYzlkb3ku6TnmoTmlrnms5VcbiAgICAgICAgICAgIHZhciBjb21tYW5kRm47XG4gICAgICAgICAgICBmdW5jdGlvbiBjdXN0b21Db21tYW5kKGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNiO1xuICAgICAgICAgICAgICAgIC8vIOiusOW9leS4i+aJp+ihjOWRveS7pOS5i+WJjeeahGh0bWzlhoXlrrlcbiAgICAgICAgICAgICAgICBodG1sID0gJHR4dC5odG1sKCk7XG4gICAgICAgICAgICAgICAgY2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaHRtbCAhPT0gJHR4dC5odG1sKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0eHQuY2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOWRveS7pFxuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kRm4pIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmN1c3RvbUNvbW1hbmQoZSwgY29tbWFuZEZuLCBjYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDliKDpmaRcbiAgICAgICAgICAgICRkZWxldGUuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyDliKDpmaTkuYvliY3lhYh1bmxpbmtcbiAgICAgICAgICAgICAgICBpbWdMaW5rKGUsICcnKTtcblxuICAgICAgICAgICAgICAgIC8vIOWIoOmZpOWbvueJh1xuICAgICAgICAgICAgICAgIGNvbW1hbmRGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRJbWcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjdXN0b21Db21tYW5kKGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChoaWRlLCAxMDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIOaUvuWkp1xuICAgICAgICAgICAgJHpvb21CaWcuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWcgPSAkY3VycmVudEltZy5nZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gd2lkdGggKiAxLjE7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGhlaWdodCAqIDEuMTtcblxuICAgICAgICAgICAgICAgICAgICAkY3VycmVudEltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICsgJ3B4J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGN1c3RvbUNvbW1hbmQoZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNob3cpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIOe8qeWwj1xuICAgICAgICAgICAgJHpvb21TbWFsbC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbW1hbmRGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9ICRjdXJyZW50SW1nLmdldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSB3aWR0aCAqIDAuOTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0ICogMC45O1xuXG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50SW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGggKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgKyAncHgnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY3VzdG9tQ29tbWFuZChlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoc2hvdyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gLy8g5bem5rWu5YqoXG4gICAgICAgICAgICAvLyAkZmxvYXRMZWZ0LmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyAgICAgY29tbWFuZEZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICAkY3VycmVudEltZy5jc3Moe1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgZmxvYXQ6ICdsZWZ0J1xuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vICAgICB9O1xuICAgICAgICAgICAgLy8gICAgIGN1c3RvbUNvbW1hbmQoZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDEwMCk7XG4gICAgICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgICAgICAvLyB9KTtcblxuICAgICAgICAgICAgLy8gYWxpZ25MZWZ0XG4gICAgICAgICAgICAkYWxpZ25MZWZ0LmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZEZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpwgaW1nIOWinuWKoOS6humTvuaOpe+8jOmCo+S5iCBpbWcucGFyZW50KCkg5bCx5pivIGEg5qCH562+77yM6K6+572uIGFsaWduIOayoeeUqOeahO+8jOWboOatpOW/hemhu+aJvuWIsCBQIOeItuiKgueCueadpeiuvue9riBhbGlnblxuICAgICAgICAgICAgICAgICAgICAkY3VycmVudEltZy5wYXJlbnRzKCdwJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0ZXh0LWFsaWduJzogJ2xlZnQnXG4gICAgICAgICAgICAgICAgICAgIH0pLmF0dHIoJ2FsaWduJywgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGN1c3RvbUNvbW1hbmQoZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDEwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gLy8g5Y+z5rWu5YqoXG4gICAgICAgICAgICAvLyAkZmxvYXRSaWdodC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gICAgIGNvbW1hbmRGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgJGN1cnJlbnRJbWcuY3NzKHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGZsb2F0OiAncmlnaHQnXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gICAgIH07XG4gICAgICAgICAgICAvLyAgICAgY3VzdG9tQ29tbWFuZChlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIHNldFRpbWVvdXQoaGlkZSwgMTAwKTtcbiAgICAgICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgICAgIC8vIH0pO1xuXG4gICAgICAgICAgICAvLyBhbGlnblJpZ2h0XG4gICAgICAgICAgICAkYWxpZ25SaWdodC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbW1hbmRGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6cIGltZyDlop7liqDkuobpk77mjqXvvIzpgqPkuYggaW1nLnBhcmVudCgpIOWwseaYryBhIOagh+etvu+8jOiuvue9riBhbGlnbiDmsqHnlKjnmoTvvIzlm6DmraTlv4Xpobvmib7liLAgUCDniLboioLngrnmnaXorr7nva4gYWxpZ25cbiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRJbWcucGFyZW50cygncCcpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAndGV4dC1hbGlnbic6ICdyaWdodCdcbiAgICAgICAgICAgICAgICAgICAgfSkuYXR0cignYWxpZ24nLCAncmlnaHQnKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGN1c3RvbUNvbW1hbmQoZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDEwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gLy8g5peg5rWu5YqoXG4gICAgICAgICAgICAvLyAkbm9GbG9hdC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gICAgIGNvbW1hbmRGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgJGN1cnJlbnRJbWcuY3NzKHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGZsb2F0OiAnbm9uZSdcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyAgICAgfTtcbiAgICAgICAgICAgIC8vICAgICBjdXN0b21Db21tYW5kKGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgc2V0VGltZW91dChoaWRlLCAxMDApO1xuICAgICAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgICAgIC8vIGFsaWduQ2VudGVyXG4gICAgICAgICAgICAkYWxpZ25DZW50ZXIuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kRm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenCBpbWcg5aKe5Yqg5LqG6ZO+5o6l77yM6YKj5LmIIGltZy5wYXJlbnQoKSDlsLHmmK8gYSDmoIfnrb7vvIzorr7nva4gYWxpZ24g5rKh55So55qE77yM5Zug5q2k5b+F6aG75om+5YiwIFAg54i26IqC54K55p2l6K6+572uIGFsaWduXG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50SW1nLnBhcmVudHMoJ3AnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RleHQtYWxpZ24nOiAnY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICB9KS5hdHRyKCdhbGlnbicsICdjZW50ZXInKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGN1c3RvbUNvbW1hbmQoZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDEwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gbGlua1xuICAgICAgICAgICAgLy8g5pi+56S66ZO+5o6laW5wdXRcbiAgICAgICAgICAgICRsaW5rLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgLy8g6I635Y+W5b2T5YmN6ZO+5o6l77yM5bm25pi+56S6XG4gICAgICAgICAgICAgICAgY3VycmVudExpbmsgPSBpbWdMaW5rKGUpO1xuICAgICAgICAgICAgICAgICRsaW5rSW5wdXQudmFsKGN1cnJlbnRMaW5rKTtcblxuICAgICAgICAgICAgICAgICRtZW51Q29udGFpbmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkbGlua0lucHV0Q29udGFpbmVyLnNob3coKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8g6K6+572u6ZO+5o6lXG4gICAgICAgICAgICAkbGlua0J0blN1Ym1pdC5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSAkLnRyaW0oJGxpbmtJbnB1dC52YWwoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAvLyDorr7nva7pk77mjqXvvIzlkIzml7bkvJroh6rliqjmm7TmlrAgY3VycmVudExpbmsg55qE5YC8XG4gICAgICAgICAgICAgICAgICAgIGltZ0xpbmsoZSwgdXJsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDpmpDol48gdG9vbGJhclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoaGlkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIOWPlua2iOiuvue9rumTvuaOpVxuICAgICAgICAgICAgJGxpbmtCdG5DYW5jZWwuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyDph43nva7pk77mjqUgaW5wdXRcbiAgICAgICAgICAgICAgICAkbGlua0lucHV0LnZhbChjdXJyZW50TGluayk7XG5cbiAgICAgICAgICAgICAgICAkbWVudUNvbnRhaW5lci5zaG93KCk7XG4gICAgICAgICAgICAgICAgJGxpbmtJbnB1dENvbnRhaW5lci5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gdW5saW5rXG4gICAgICAgICAgICAkdW5MaW5rLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgLy8g5omn6KGMIHVubGlua1xuICAgICAgICAgICAgICAgIGltZ0xpbmsoZSwgJycpO1xuXG4gICAgICAgICAgICAgICAgLy8g6ZqQ6JePIHRvb2xiYXJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhpZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDnu5HlrppkcmFn5LqL5Lu2XG4gICAgICAgIGZ1bmN0aW9uIGJpbmREcmFnRXZlbnQoKSB7XG4gICAgICAgICAgICB2YXIgX3gsIF95O1xuICAgICAgICAgICAgdmFyIGRyYWdNYXJnaW5MZWZ0LCBkcmFnTWFyZ2luVG9wO1xuICAgICAgICAgICAgdmFyIGltZ1dpZHRoLCBpbWdIZWlnaHQ7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1vdXNlbW92ZSAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBkaWZmWCwgZGlmZlk7XG5cbiAgICAgICAgICAgICAgICAvLyDorqHnrpflt67pop1cbiAgICAgICAgICAgICAgICBkaWZmWCA9IGUucGFnZVggLSBfeDtcbiAgICAgICAgICAgICAgICBkaWZmWSA9IGUucGFnZVkgLSBfeTtcblxuICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLSDorqHnrpfmi5bmi73ngrnnmoTkvY3nva4gLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREcmFnTWFyZ2luTGVmdCA9IGRyYWdNYXJnaW5MZWZ0ICsgZGlmZlg7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREcmFnTWFyZ2luVG9wID0gZHJhZ01hcmdpblRvcCArIGRpZmZZO1xuICAgICAgICAgICAgICAgICRkcmFnUG9pbnQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi1sZWZ0JzogY3VycmVudERyYWdNYXJnaW5MZWZ0LFxuICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLXRvcCc6IGN1cnJlbnREcmFnTWFyZ2luVG9wXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0g6K6h566X5Zu+54mH55qE5aSn5bCPIC0tLS0tLS0tLVxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SW1nV2lkdGggPSBpbWdXaWR0aCArIGRpZmZYO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SW1nZ0hlaWdodCA9IGltZ0hlaWdodCArIGRpZmZZO1xuICAgICAgICAgICAgICAgICRjdXJyZW50SW1nICYmICRjdXJyZW50SW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjdXJyZW50SW1nV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogY3VycmVudEltZ2dIZWlnaHRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGRyYWdQb2ludC5vbignbW91c2Vkb3duJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgaWYgKCEkY3VycmVudEltZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIOW9k+WJjem8oOagh+S9jee9rlxuICAgICAgICAgICAgICAgIF94ID0gZS5wYWdlWDtcbiAgICAgICAgICAgICAgICBfeSA9IGUucGFnZVk7XG5cbiAgICAgICAgICAgICAgICAvLyDlvZPliY3mi5bmi73ngrnnmoTkvY3nva5cbiAgICAgICAgICAgICAgICBkcmFnTWFyZ2luTGVmdCA9IHBhcnNlRmxvYXQoJGRyYWdQb2ludC5jc3MoJ21hcmdpbi1sZWZ0JyksIDEwKTtcbiAgICAgICAgICAgICAgICBkcmFnTWFyZ2luVG9wID0gcGFyc2VGbG9hdCgkZHJhZ1BvaW50LmNzcygnbWFyZ2luLXRvcCcpLCAxMCk7XG5cbiAgICAgICAgICAgICAgICAvLyDlvZPliY3lm77niYfnmoTlpKflsI9cbiAgICAgICAgICAgICAgICBpbWdXaWR0aCA9ICRjdXJyZW50SW1nLndpZHRoKCk7XG4gICAgICAgICAgICAgICAgaW1nSGVpZ2h0ID0gJGN1cnJlbnRJbWcuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyDpmpDol48gJHRvb2xiYXJcbiAgICAgICAgICAgICAgICAkdG9vbGJhci5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyDnu5HlrprorqHnrpfkuovku7ZcbiAgICAgICAgICAgICAgICBFLiRkb2N1bWVudC5vbignbW91c2Vtb3ZlLl9kcmFnUmVzaXplSW1nJywgbW91c2Vtb3ZlKTtcbiAgICAgICAgICAgICAgICBFLiRkb2N1bWVudC5vbignbW91c2V1cC5fZHJhZ1Jlc2l6ZUltZycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWPlua2iOe7keWumlxuICAgICAgICAgICAgICAgICAgICBFLiRkb2N1bWVudC5vZmYoJ21vdXNlbW92ZS5fZHJhZ1Jlc2l6ZUltZycpO1xuICAgICAgICAgICAgICAgICAgICBFLiRkb2N1bWVudC5vZmYoJ21vdXNldXAuX2RyYWdSZXNpemVJbWcnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDpmpDol4/vvIzlubbov5jljp/mi5bmi73ngrnnmoTkvY3nva5cbiAgICAgICAgICAgICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkZHJhZ1BvaW50LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLWxlZnQnOiBkcmFnTWFyZ2luTGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJzogZHJhZ01hcmdpblRvcFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDorrDlvZVcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRyYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIOiusOW9lVxuICAgICAgICAgICAgICAgIGlzT25EcmFnID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5pi+56S6IHRvb2xiYXJcbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgIGlmIChlZGl0b3IuX2Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgLy8g57yW6L6R5Zmo5bey57uP6KKr56aB55So77yM5YiZ5LiN6K6p5pi+56S6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRjdXJyZW50SW1nID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkY3VycmVudEltZy5hZGRDbGFzcygnY2xpY2tlZCcpO1xuICAgICAgICAgICAgdmFyIGltZ1Bvc2l0aW9uID0gJGN1cnJlbnRJbWcucG9zaXRpb24oKTtcbiAgICAgICAgICAgIHZhciBpbWdUb3AgPSBpbWdQb3NpdGlvbi50b3A7XG4gICAgICAgICAgICB2YXIgaW1nTGVmdCA9IGltZ1Bvc2l0aW9uLmxlZnQ7XG4gICAgICAgICAgICB2YXIgaW1nSGVpZ2h0ID0gJGN1cnJlbnRJbWcub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciBpbWdXaWR0aCA9ICRjdXJyZW50SW1nLm91dGVyV2lkdGgoKTtcblxuXG4gICAgICAgICAgICAvLyAtLS0g5a6a5L2NIGRyYWdwb2ludCAtLS1cbiAgICAgICAgICAgICRkcmFnUG9pbnQuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IGltZ1RvcCArIGltZ0hlaWdodCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBpbWdMZWZ0ICsgaW1nV2lkdGhcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyAtLS0g5a6a5L2NIHRvb2xiYXIgLS0tXG5cbiAgICAgICAgICAgIC8vIOiuoeeul+WIneatpee7k+aenFxuICAgICAgICAgICAgdmFyIHRvcCA9IGltZ1RvcCArIGltZ0hlaWdodDtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gaW1nTGVmdDtcbiAgICAgICAgICAgIHZhciBtYXJnaW5MZWZ0ID0gMDtcblxuICAgICAgICAgICAgdmFyIHR4dFRvcCA9ICRjdXJyZW50VHh0LnBvc2l0aW9uKCkudG9wO1xuICAgICAgICAgICAgdmFyIHR4dEhlaWdodCA9ICRjdXJyZW50VHh0Lm91dGVySGVpZ2h0KCk7XG4gICAgICAgICAgICBpZiAodG9wID4gKHR4dFRvcCArIHR4dEhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICAvLyB0b3Ag5LiN5b6X6LaF5Ye657yW6L6R6IyD5Zu0XG4gICAgICAgICAgICAgICAgdG9wID0gdHh0VG9wICsgdHh0SGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB0b3Ag6LaF5Ye657yW6L6R6IyD5Zu077yMZHJhZ1BvaW505bCx5LiN5pi+56S65LqGXG4gICAgICAgICAgICAgICAgJGRyYWdQb2ludC5zaG93KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOaYvuekuu+8iOaWueS+v+iuoeeulyBtYXJnaW7vvIlcbiAgICAgICAgICAgICR0b29sYmFyLnNob3coKTtcblxuICAgICAgICAgICAgLy8g6K6h566XIG1hcmdpblxuICAgICAgICAgICAgdmFyIHdpZHRoID0gJHRvb2xiYXIub3V0ZXJXaWR0aCgpO1xuICAgICAgICAgICAgbWFyZ2luTGVmdCA9IGltZ1dpZHRoIC8gMiAtIHdpZHRoIC8gMjtcblxuICAgICAgICAgICAgLy8g5a6a5L2NXG4gICAgICAgICAgICAkdG9vbGJhci5jc3Moe1xuICAgICAgICAgICAgICAgIHRvcDogdG9wICsgNSxcbiAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICAgICAgICAgICdtYXJnaW4tbGVmdCc6IG1hcmdpbkxlZnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8g5aaC5p6c5a6a5L2N5aSq6Z2g5bem5LqGXG4gICAgICAgICAgICBpZiAobWFyZ2luTGVmdCA8IDApIHtcbiAgICAgICAgICAgICAgICAvLyDlvpfliLDkuInop5LlvaLnmoRtYXJnaW4tbGVmdFxuICAgICAgICAgICAgICAgICR0b29sYmFyLmNzcygnbWFyZ2luLWxlZnQnLCAnMCcpO1xuICAgICAgICAgICAgICAgICR0cmlhbmdsZS5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICR0cmlhbmdsZS5zaG93KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRpc2FibGUg6I+c5Y2VXG4gICAgICAgICAgICBlZGl0b3IuZGlzYWJsZU1lbnVzRXhjZXB0KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOmakOiXjyB0b29sYmFyXG4gICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgICAgICAgICBpZiAoJGN1cnJlbnRJbWcgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjdXJyZW50SW1nLnJlbW92ZUNsYXNzKCdjbGlja2VkJyk7XG4gICAgICAgICAgICAkY3VycmVudEltZyA9IG51bGw7XG5cbiAgICAgICAgICAgICR0b29sYmFyLmhpZGUoKTtcbiAgICAgICAgICAgICRkcmFnUG9pbnQuaGlkZSgpO1xuXG4gICAgICAgICAgICAvLyBlbmFibGUg6I+c5Y2VXG4gICAgICAgICAgICBlZGl0b3IuZW5hYmxlTWVudXNFeGNlcHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWIpOaWrWltZ+aYr+WQpuaYr+S4gOS4quihqOaDhVxuICAgICAgICBmdW5jdGlvbiBpc0Vtb3Rpb24oaW1nU3JjKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWVkaXRvci5lbW90aW9uVXJscykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkLmVhY2goZWRpdG9yLmVtb3Rpb25VcmxzLCBmdW5jdGlvbiAoaW5kZXgsIHVybCkge1xuICAgICAgICAgICAgICAgIHZhciBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGltZ1NyYyA9PT0gdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmxhZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAvLyBicmVhayDlvqrnjq9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGljayBpbWcg5LqL5Lu2XG4gICAgICAgICRjdXJyZW50VHh0Lm9uKCdtb3VzZWRvd24nLCAnaW1nJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSkub24oJ2NsaWNrJywgJ2ltZycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgJGltZyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBzcmMgPSAkaW1nLmF0dHIoJ3NyYycpO1xuXG4gICAgICAgICAgICBpZiAoIXNyYyB8fCBpc0Vtb3Rpb24oc3JjKSkge1xuICAgICAgICAgICAgICAgIC8vIOaYr+S4gOS4quihqOaDheWbvuagh1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gLS0tLS0tLS0tLSDkuI3mmK/ooajmg4Xlm77moIcgLS0tLS0tLS0tLSBcblxuICAgICAgICAgICAgLy8g5riy5p+TXG4gICAgICAgICAgICByZW5kZXIoKTtcblxuICAgICAgICAgICAgaWYgKCRjdXJyZW50SW1nICYmICgkY3VycmVudEltZy5nZXQoMCkgPT09ICRpbWcuZ2V0KDApKSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoaGlkZSwgMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOaYvuekuiB0b29sYmFyXG4gICAgICAgICAgICAkY3VycmVudEltZyA9ICRpbWc7XG4gICAgICAgICAgICBzaG93KCk7XG5cbiAgICAgICAgICAgIC8vIOm7mOiupOaYvuekum1lbnVDb250YWluZXLvvIzlhbbku5bpu5jorqTpmpDol49cbiAgICAgICAgICAgICRtZW51Q29udGFpbmVyLnNob3coKTtcbiAgICAgICAgICAgICRsaW5rSW5wdXRDb250YWluZXIuaGlkZSgpO1xuXG4gICAgICAgICAgICAvLyDpmLvmraLlhpLms6FcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSkub24oJ2NsaWNrIGtleWRvd24gc2Nyb2xsJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghaXNPbkRyYWcpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn0pO1xuLy8g57yW6L6R5Yy65Z+fIGxpbmsgdG9vbGJhclxuX2UoZnVuY3Rpb24gKEUsICQpIHtcbiAgICBFLnBsdWdpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgbGFuZyA9IGVkaXRvci5jb25maWcubGFuZztcbiAgICAgICAgdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG5cbiAgICAgICAgLy8g5b2T5YmN5ZG95Lit55qE6ZO+5o6lXG4gICAgICAgIHZhciAkY3VycmVudExpbms7XG5cbiAgICAgICAgdmFyICR0b29sYmFyID0gJCgnPGRpdiBjbGFzcz1cInR4dC10b29sYmFyXCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkdHJpYW5nbGUgPSAkKCc8ZGl2IGNsYXNzPVwidGlwLXRyaWFuZ2xlXCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkdHJpZ2dlckxpbmsgPSAkKCc8YSBocmVmPVwiI1wiIHRhcmdldD1cIl9ibGFua1wiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1saW5rXCI+PC9pPiAnICsgbGFuZy5vcGVuTGluayArICc8L2E+Jyk7XG4gICAgICAgIHZhciBpc1JlbmRlcmVkO1xuXG4gICAgICAgIC8vIOiusOW9leW9k+WJjeeahOaYvuekui/pmpDol4/nirbmgIFcbiAgICAgICAgdmFyIGlzU2hvdyA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBzaG93VGltZW91dElkLCBoaWRlVGltZW91dElkO1xuICAgICAgICB2YXIgc2hvd1RpbWVvdXRJZEJ5VG9vbGJhciwgaGlkZVRpbWVvdXRJZEJ5VG9vbGJhcjtcblxuICAgICAgICAvLyDmuLLmn5MgZG9tXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIGlmIChpc1JlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkdG9vbGJhci5hcHBlbmQoJHRyaWFuZ2xlKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCR0cmlnZ2VyTGluayk7XG5cbiAgICAgICAgICAgIGVkaXRvci4kZWRpdG9yQ29udGFpbmVyLmFwcGVuZCgkdG9vbGJhcik7XG5cbiAgICAgICAgICAgIGlzUmVuZGVyZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5a6a5L2NXG4gICAgICAgIGZ1bmN0aW9uIHNldFBvc2l0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCEkY3VycmVudExpbmspIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9ICRjdXJyZW50TGluay5wb3NpdGlvbigpO1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBwb3NpdGlvbi5sZWZ0O1xuICAgICAgICAgICAgdmFyIHRvcCA9IHBvc2l0aW9uLnRvcDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkY3VycmVudExpbmsuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIC8vIOWIneatpeiuoeeul3RvcOWAvFxuICAgICAgICAgICAgdmFyIHRvcFJlc3VsdCA9IHRvcCArIGhlaWdodCArIDU7XG5cbiAgICAgICAgICAgIC8vIOWIpOaWrSB0b29sYmFyIOaYr+WQpui2hei/h+S6hue8lui+keWZqOWMuuWfn+eahOS4i+i+ueeVjFxuICAgICAgICAgICAgdmFyIG1lbnVIZWlnaHQgPSBlZGl0b3IubWVudUNvbnRhaW5lci5oZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciB0eHRIZWlnaHQgPSBlZGl0b3IudHh0LiR0eHQub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgIGlmICh0b3BSZXN1bHQgPiBtZW51SGVpZ2h0ICsgdHh0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdG9wUmVzdWx0ID0gbWVudUhlaWdodCArIHR4dEhlaWdodCArIDU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOacgOe7iOiuvue9rlxuICAgICAgICAgICAgJHRvb2xiYXIuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IHRvcFJlc3VsdCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOaYvuekuiB0b29sYmFyXG4gICAgICAgIGZ1bmN0aW9uIHNob3coKSB7XG4gICAgICAgICAgICBpZiAoaXNTaG93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoISRjdXJyZW50TGluaykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVuZGVyKCk7XG5cbiAgICAgICAgICAgICR0b29sYmFyLnNob3coKTtcblxuICAgICAgICAgICAgLy8g6K6+572u6ZO+5o6lXG4gICAgICAgICAgICB2YXIgaHJlZiA9ICRjdXJyZW50TGluay5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICAkdHJpZ2dlckxpbmsuYXR0cignaHJlZicsIGhyZWYpO1xuXG4gICAgICAgICAgICAvLyDlrprkvY1cbiAgICAgICAgICAgIHNldFBvc2l0aW9uKCk7XG5cbiAgICAgICAgICAgIGlzU2hvdyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDpmpDol48gdG9vbGJhclxuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgaWYgKCFpc1Nob3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghJGN1cnJlbnRMaW5rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkdG9vbGJhci5oaWRlKCk7XG4gICAgICAgICAgICBpc1Nob3cgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICR0eHQg57uR5a6a5LqL5Lu2XG4gICAgICAgICR0eHQub24oJ21vdXNlZW50ZXInLCAnYScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyDlu7bml7YgNTAwbXMg5pi+56S6dG9vbGJhclxuICAgICAgICAgICAgaWYgKHNob3dUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2hvd1RpbWVvdXRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaG93VGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyICRhID0gJChhKTtcbiAgICAgICAgICAgICAgICAkY3VycmVudExpbmsgPSAkYTtcblxuICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJGEuY2hpbGRyZW4oJ2ltZycpO1xuICAgICAgICAgICAgICAgIGlmICgkaW1nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvLyDor6Xpk77mjqXkuIvljIXlkKvkuIDkuKrlm77niYdcblxuICAgICAgICAgICAgICAgICAgICAvLyDlm77niYfngrnlh7vml7bvvIzpmpDol490b29sYmFyXG4gICAgICAgICAgICAgICAgICAgICRpbWcuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRpbWcuaGFzQ2xhc3MoJ2NsaWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Zu+54mH6L+Y5aSE5LqOY2xpY2tlZOeKtuaAge+8jOWImeS4jeaYvuekunRvb2xiYXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOaYvuekunRvb2xiYXJcbiAgICAgICAgICAgICAgICBzaG93KCk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsICdhJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIOW7tuaXtiA1MDBtcyDpmpDol490b29sYmFyXG4gICAgICAgICAgICBpZiAoaGlkZVRpbWVvdXRJZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoaWRlVGltZW91dElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhpZGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGhpZGUsIDUwMCk7XG4gICAgICAgIH0pLm9uKCdjbGljayBrZXlkb3duIHNjcm9sbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDEwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyAkdG9vbGJhciDnu5Hlrprkuovku7ZcbiAgICAgICAgJHRvb2xiYXIub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8g5YWI5Lit5pat5o6JICR0eHQubW91c2VsZWF2ZSDlr7zoh7TnmoTpmpDol49cbiAgICAgICAgICAgIGlmIChoaWRlVGltZW91dElkKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhpZGVUaW1lb3V0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyDlu7bml7YgNTAwbXMg5pi+56S6dG9vbGJhclxuICAgICAgICAgICAgaWYgKHNob3dUaW1lb3V0SWRCeVRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2hvd1RpbWVvdXRJZEJ5VG9vbGJhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaG93VGltZW91dElkQnlUb29sYmFyID0gc2V0VGltZW91dChoaWRlLCA1MDApO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuLy8gbWVudeWQuOmhtlxuX2UoZnVuY3Rpb24gKEUsICQpIHtcblxuICAgIEUucGx1Z2luKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIHZhciBtZW51Rml4ZWQgPSBlZGl0b3IuY29uZmlnLm1lbnVGaXhlZDtcbiAgICAgICAgaWYgKG1lbnVGaXhlZCA9PT0gZmFsc2UgfHwgdHlwZW9mIG1lbnVGaXhlZCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIOayoeaciemFjee9ruiPnOWNleWQuOmhtlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBib2R5TWFyZ2luVG9wID0gcGFyc2VGbG9hdChFLiRib2R5LmNzcygnbWFyZ2luLXRvcCcpLCAxMCk7XG4gICAgICAgIGlmIChpc05hTihib2R5TWFyZ2luVG9wKSkge1xuICAgICAgICAgICAgYm9keU1hcmdpblRvcCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJGVkaXRvckNvbnRhaW5lciA9IGVkaXRvci4kZWRpdG9yQ29udGFpbmVyO1xuICAgICAgICB2YXIgZWRpdG9yVG9wID0gJGVkaXRvckNvbnRhaW5lci5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBlZGl0b3JIZWlnaHQgPSAkZWRpdG9yQ29udGFpbmVyLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgdmFyICRtZW51Q29udGFpbmVyID0gZWRpdG9yLm1lbnVDb250YWluZXIuJG1lbnVDb250YWluZXI7XG4gICAgICAgIHZhciBtZW51Q3NzUG9zaXRpb24gPSAkbWVudUNvbnRhaW5lci5jc3MoJ3Bvc2l0aW9uJyk7XG4gICAgICAgIHZhciBtZW51Q3NzVG9wID0gJG1lbnVDb250YWluZXIuY3NzKCd0b3AnKTtcbiAgICAgICAgdmFyIG1lbnVUb3AgPSAkbWVudUNvbnRhaW5lci5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBtZW51SGVpZ2h0ID0gJG1lbnVDb250YWluZXIub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgdmFyIG1lbnVXaWR0aCA9ICRtZW51Q29udGFpbmVyLndpZHRoKCk7XG5cbiAgICAgICAgLy/ph43mlrDorqHnrpflrr3luqZcbiAgICAgICAgRS4kd2luZG93LnJlc2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtZW51V2lkdGggPSAkbWVudUNvbnRhaW5lci53aWR0aCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy/nvJbovpHljLrpq5jluqblj5jljJZcbiAgICAgICAgZWRpdG9yLm9uY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWRpdG9ySGVpZ2h0ID0gJGVkaXRvckNvbnRhaW5lci5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgbWVudVdpZHRoID0gJG1lbnVDb250YWluZXIud2lkdGgoKTsvL+WPr+iDveWHuueOsOa7muWKqOadoVxuICAgICAgICAgICAgbWVudUZpeGVkRnVuYygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8v6L+Z5Liq5Y+Y6YeP5pyq5L2/55So77yfXG4gICAgICAgIC8vdmFyICR0eHQgPSBlZGl0b3IudHh0LiR0eHQ7XG5cbiAgICAgICAgRS4kd2luZG93LnNjcm9sbChtZW51Rml4ZWRGdW5jKTtcblxuICAgICAgICBmdW5jdGlvbiBtZW51Rml4ZWRGdW5jICgpIHtcbiAgICAgICAgICAgIC8v5YWo5bGP5qih5byP5LiN5pSv5oyBXG4gICAgICAgICAgICBpZiAoZWRpdG9yLmlzRnVsbFNjcmVlbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHNUb3AgPSBFLiR3aW5kb3cuc2Nyb2xsVG9wKCk7XG5cblxuICAgICAgICAgICAgLy8g5aaC5p6cIG1lbnVUb3AgPT09IDAg6K+05piO5q2k5YmN57yW6L6R5Zmo5LiA55u06ZqQ6JeP77yM5ZCO5p2l5pi+56S65Ye65p2l5LqG77yM6KaB6YeN5paw6K6h566X55u45YWz5pWw5o2uXG4gICAgICAgICAgICBpZiAobWVudVRvcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG1lbnVUb3AgPSAkbWVudUNvbnRhaW5lci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgZWRpdG9yVG9wID0gJGVkaXRvckNvbnRhaW5lci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgZWRpdG9ySGVpZ2h0ID0gJGVkaXRvckNvbnRhaW5lci5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIG1lbnVIZWlnaHQgPSAkbWVudUNvbnRhaW5lci5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+iPnOWNlWZpeGVk5p2h5Lu255Sx56a75byA5bGP5bmV5ZCO77yIc1RvcCA+PSBtZW51VG9w77yJ6Kem5Y+R5pS55Li66L6+5YiwbWVudUZpeGVk6auY5bqm5pe277yIc1RvcCArIG1lbnVGaXhlZCA+PSBtZW51VG9w77yJ6Kem5Y+RXG4gICAgICAgICAgICBpZiAoc1RvcCArIG1lbnVGaXhlZCA+PSBtZW51VG9wICYmIHNUb3AgKyBtZW51Rml4ZWQgKyBtZW51SGVpZ2h0ICsgMzAgPCBlZGl0b3JUb3AgKyBlZGl0b3JIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAvLyDlkLjpobZcbiAgICAgICAgICAgICAgICAkbWVudUNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBtZW51Rml4ZWRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIOWbuuWumuWuveW6plxuICAgICAgICAgICAgICAgICRtZW51Q29udGFpbmVyLndpZHRoKG1lbnVXaWR0aCk7XG5cbiAgICAgICAgICAgICAgICAvLyDlop7liqBib2R5IG1hcmdpbi10b3BcbiAgICAgICAgICAgICAgICBFLiRib2R5LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdtYXJnaW4tdG9wJzogYm9keU1hcmdpblRvcCArIG1lbnVIZWlnaHRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIOiusOW9lVxuICAgICAgICAgICAgICAgIGlmICghZWRpdG9yLl9pc01lbnVmaXhlZCkge1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuX2lzTWVudWZpeGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOWPlua2iOWQuOmhtlxuICAgICAgICAgICAgICAgICRtZW51Q29udGFpbmVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBtZW51Q3NzUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRvcDogbWVudUNzc1RvcFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8g5Y+W5raI5a695bqm5Zu65a6aXG4gICAgICAgICAgICAgICAgJG1lbnVDb250YWluZXIuY3NzKCd3aWR0aCcsICcxMDAlJyk7XG5cbiAgICAgICAgICAgICAgICAvLyDov5jljp8gYm9keSBtYXJnaW4tdG9wXG4gICAgICAgICAgICAgICAgRS4kYm9keS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLXRvcCc6IGJvZHlNYXJnaW5Ub3BcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIOaSpOmUgOiusOW9lVxuICAgICAgICAgICAgICAgIGlmIChlZGl0b3IuX2lzTWVudWZpeGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5faXNNZW51Zml4ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxufSk7XG4vLyDnvKnov5sg6I+c5Y2V5o+S5Lu2XG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8g55SoIGNyZWF0ZU1lbnUg5pa55rOV5Yib5bu66I+c5Y2VXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuXG4gICAgICAgIC8vIOWumuS5ieiPnOWNlWlk77yM5LiN6KaB5ZKM5YW25LuW6I+c5Y2VaWTph43lpI3jgILnvJbovpHlmajoh6rluKbnmoTmiYDmnInoj5zljZVpZO+8jOWPr+mAmui/h+OAjuWPguaVsOmFjee9ri3oh6rlrprkuYnoj5zljZXjgI/kuIDoioLmn6XnnItcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdpbmRlbnQnO1xuXG4gICAgICAgIC8vIGNoZWNr5bCG5qOA5p+l6I+c5Y2V6YWN572u77yI44CO5Y+C5pWw6YWN572uLeiHquWumuS5ieiPnOWNleOAj+S4gOiKguaPj+i/sO+8ieS4reaYr+WQpuivpeiPnOWNlWlk77yM5aaC5p6c5rKh5pyJ77yM5YiZ5b+955Wl5LiL6Z2i55qE5Luj56CB44CCXG4gICAgICAgIGlmICghY2hlY2sobWVudUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcyDmjIflkJEgZWRpdG9yIOWvueixoeiHqui6q1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcztcblxuICAgICAgICAvLyDliJvlu7ogbWVudSDlr7nosaFcbiAgICAgICAgdmFyIG1lbnUgPSBuZXcgRS5NZW51KHtcbiAgICAgICAgICAgIGVkaXRvcjogZWRpdG9yLCAgLy8g57yW6L6R5Zmo5a+56LGhXG4gICAgICAgICAgICBpZDogbWVudUlkLCAgLy8g6I+c5Y2VaWRcbiAgICAgICAgICAgIHRpdGxlOiAn57yp6L+bJywgLy8g6I+c5Y2V5qCH6aKYXG5cbiAgICAgICAgICAgIC8vIOato+W4uOeKtuaAgeWSjOmAieS4reijheS4i+eahGRvbeWvueixoe+8jOagt+W8j+mcgOimgeiHquWumuS5iVxuICAgICAgICAgICAgJGRvbU5vcm1hbDogJCgnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLWluZGVudC1sZWZ0XCI+PC9pPjwvYT4nKSxcbiAgICAgICAgICAgICRkb21TZWxlY3RlZDogJCgnPGEgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJzZWxlY3RlZFwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1pbmRlbnQtbGVmdFwiPjwvaT48L2E+JylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g6I+c5Y2V5q2j5bi454q25oCB5LiL77yM54K55Ye75bCG6Kem5Y+R6K+l5LqL5Lu2XG4gICAgICAgIG1lbnUuY2xpY2tFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IGVkaXRvci5nZXRSYW5nZUVsZW0oKTtcbiAgICAgICAgICAgIHZhciBwID0gZWRpdG9yLmdldFNlbGZPclBhcmVudEJ5TmFtZShlbGVtLCAncCcpO1xuICAgICAgICAgICAgdmFyICRwO1xuXG4gICAgICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgICAgICAvLyDmnKrmib7liLAgcCDlhYPntKDvvIzliJnlv73nlaVcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHAgPSAkKHApO1xuXG4gICAgICAgICAgICAvLyDkvb/nlKjoh6rlrprkuYnlkb3ku6RcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbW1hbmRGbigpIHtcbiAgICAgICAgICAgICAgICAkcC5jc3MoJ3RleHQtaW5kZW50JywgJzJlbScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWRpdG9yLmN1c3RvbUNvbW1hbmQoZSwgY29tbWFuZEZuKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDoj5zljZXpgInkuK3nirbmgIHkuIvvvIzngrnlh7vlsIbop6blj5Hor6Xkuovku7ZcbiAgICAgICAgbWVudS5jbGlja0V2ZW50U2VsZWN0ZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICB2YXIgcCA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUoZWxlbSwgJ3AnKTtcbiAgICAgICAgICAgIHZhciAkcDtcblxuICAgICAgICAgICAgaWYgKCFwKSB7XG4gICAgICAgICAgICAgICAgLy8g5pyq5om+5YiwIHAg5YWD57Sg77yM5YiZ5b+955WlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwID0gJChwKTtcblxuICAgICAgICAgICAgLy8g5L2/55So6Ieq5a6a5LmJ5ZG95LukXG4gICAgICAgICAgICBmdW5jdGlvbiBjb21tYW5kRm4oKSB7XG4gICAgICAgICAgICAgICAgJHAuY3NzKCd0ZXh0LWluZGVudCcsICcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlZGl0b3IuY3VzdG9tQ29tbWFuZChlLCBjb21tYW5kRm4pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOagueaNruW9k+WJjemAieWMuu+8jOiHquWumuS5ieabtOaWsOiPnOWNleeahOmAieS4reeKtuaAgeaIluiAheato+W4uOeKtuaAgVxuICAgICAgICBtZW51LnVwZGF0ZVNlbGVjdGVkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyDojrflj5blvZPliY3pgInljLrmiYDlnKjnmoTniLblhYPntKBcbiAgICAgICAgICAgIHZhciBlbGVtID0gZWRpdG9yLmdldFJhbmdlRWxlbSgpO1xuICAgICAgICAgICAgdmFyIHAgPSBlZGl0b3IuZ2V0U2VsZk9yUGFyZW50QnlOYW1lKGVsZW0sICdwJyk7XG4gICAgICAgICAgICB2YXIgJHA7XG4gICAgICAgICAgICB2YXIgaW5kZW50O1xuXG4gICAgICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgICAgICAvLyDmnKrmib7liLAgcCDlhYPntKDvvIzliJnmoIforrDkuLrmnKrlpITkuo7pgInkuK3nirbmgIFcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkcCA9ICQocCk7XG4gICAgICAgICAgICBpbmRlbnQgPSAkcC5jc3MoJ3RleHQtaW5kZW50Jyk7XG5cbiAgICAgICAgICAgIGlmICghaW5kZW50IHx8IGluZGVudCA9PT0gJzBweCcpIHtcbiAgICAgICAgICAgICAgICAvLyDlvpfliLDnmoRw77yMdGV4dC1pbmRlbnQg5bGe5oCn5pivIDDvvIzliJnmoIforrDkuLrmnKrlpITkuo7pgInkuK3nirbmgIFcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOaJvuWIsCBwIOWFg+e0oO+8jOW5tuS4lCB0ZXh0LWluZGVudCDkuI3mmK8gMO+8jOWImeagh+iusOS4uumAieS4reeKtuaAgVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aKe5Yqg5YiwZWRpdG9y5a+56LGh5LitXG4gICAgICAgIGVkaXRvci5tZW51c1ttZW51SWRdID0gbWVudTtcbiAgICB9KTtcblxufSk7XG4vLyDooYzpq5gg6I+c5Y2V5o+S5Lu2XG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgLy8g55SoIGNyZWF0ZU1lbnUg5pa55rOV5Yib5bu66I+c5Y2VXG4gICAgRS5jcmVhdGVNZW51KGZ1bmN0aW9uIChjaGVjaykge1xuXG4gICAgICAgIC8vIOWumuS5ieiPnOWNlWlk77yM5LiN6KaB5ZKM5YW25LuW6I+c5Y2VaWTph43lpI3jgILnvJbovpHlmajoh6rluKbnmoTmiYDmnInoj5zljZVpZO+8jOWPr+mAmui/h+OAjuWPguaVsOmFjee9ri3oh6rlrprkuYnoj5zljZXjgI/kuIDoioLmn6XnnItcbiAgICAgICAgdmFyIG1lbnVJZCA9ICdsaW5laGVpZ2h0JztcblxuICAgICAgICAvLyBjaGVja+WwhuajgOafpeiPnOWNlemFjee9ru+8iOOAjuWPguaVsOmFjee9ri3oh6rlrprkuYnoj5zljZXjgI/kuIDoioLmj4/ov7DvvInkuK3mmK/lkKbor6Xoj5zljZVpZO+8jOWmguaenOayoeacie+8jOWImeW/veeVpeS4i+mdoueahOS7o+eggeOAglxuICAgICAgICBpZiAoIWNoZWNrKG1lbnVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMg5oyH5ZCRIGVkaXRvciDlr7nosaHoh6rouqtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG5cbiAgICAgICAgLy8g55Sx5LqO5rWP6KeI5Zmo6Ieq6Lqr5LiN5pSv5oyBIGxpbmVIZWlnaHQg5ZG95Luk77yM5Zug5q2k6KaB5YGa5LiA5LiqaG9va1xuICAgICAgICBlZGl0b3IuY29tbWFuZEhvb2tzLmxpbmVIZWlnaHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByYW5nZUVsZW0gPSBlZGl0b3IuZ2V0UmFuZ2VFbGVtKCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RWxlbSA9IGVkaXRvci5nZXRTZWxmT3JQYXJlbnRCeU5hbWUocmFuZ2VFbGVtLCAncCxoMSxoMixoMyxoNCxoNSxwcmUnKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0RWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQodGFyZ2V0RWxlbSkuY3NzKCdsaW5lLWhlaWdodCcsIHZhbHVlICsgJycpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOWIm+W7uiBtZW51IOWvueixoVxuICAgICAgICB2YXIgbWVudSA9IG5ldyBFLk1lbnUoe1xuICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsICAvLyDnvJbovpHlmajlr7nosaFcbiAgICAgICAgICAgIGlkOiBtZW51SWQsICAvLyDoj5zljZVpZFxuICAgICAgICAgICAgdGl0bGU6ICfooYzpq5gnLCAvLyDoj5zljZXmoIfpophcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbGluZUhlaWdodCcsIC8vIOWRveS7pOWQjeensFxuXG4gICAgICAgICAgICAvLyDmraPluLjnirbmgIHlkozpgInkuK3oo4XkuIvnmoRkb23lr7nosaHvvIzmoLflvI/pnIDopoHoh6rlrprkuYlcbiAgICAgICAgICAgICRkb21Ob3JtYWw6ICQoJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwid2FuZ2VkaXRvci1tZW51LWltZy1hcnJvd3MtdlwiPjwvaT48L2E+JyksXG4gICAgICAgICAgICAkZG9tU2VsZWN0ZWQ6ICQoJzxhIGhyZWY9XCIjXCIgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwic2VsZWN0ZWRcIj48aSBjbGFzcz1cIndhbmdlZGl0b3ItbWVudS1pbWctYXJyb3dzLXZcIj48L2k+PC9hPicpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOaVsOaNrua6kFxuICAgICAgICB2YXIgZGF0YSAgPSB7XG4gICAgICAgICAgICAvLyDmoLzlvI/vvJogJ3ZhbHVlJyA6ICd0aXRsZSdcbiAgICAgICAgICAgICcxLjAnOiAnMS4w5YCNJyxcbiAgICAgICAgICAgICcxLjUnOiAnMS415YCNJyxcbiAgICAgICAgICAgICcxLjgnOiAnMS445YCNJyxcbiAgICAgICAgICAgICcyLjAnOiAnMi4w5YCNJyxcbiAgICAgICAgICAgICcyLjUnOiAnMi415YCNJyxcbiAgICAgICAgICAgICczLjAnOiAnMy4w5YCNJ1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOS4um1lbnXliJvlu7pkcm9wbGlzdOWvueixoVxuICAgICAgICB2YXIgdHBsID0gJzxzcGFuIHN0eWxlPVwibGluZS1oZWlnaHQ6eyNjb21tYW5kVmFsdWV9XCI+eyN0aXRsZX08L3NwYW4+JztcbiAgICAgICAgbWVudS5kcm9wTGlzdCA9IG5ldyBFLkRyb3BMaXN0KGVkaXRvciwgbWVudSwge1xuICAgICAgICAgICAgZGF0YTogZGF0YSwgIC8vIOS8oOWFpeaVsOaNrua6kFxuICAgICAgICAgICAgdHBsOiB0cGwgIC8vIOS8oOWFpeaooeadv1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDlop7liqDliLBlZGl0b3Llr7nosaHkuK1cbiAgICAgICAgZWRpdG9yLm1lbnVzW21lbnVJZF0gPSBtZW51O1xuXG4gICAgfSk7XG5cbn0pO1xuLy8g6Ieq5a6a5LmJ5LiK5LygXG5fZShmdW5jdGlvbiAoRSwgJCkge1xuXG4gICAgRS5wbHVnaW4oZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzO1xuICAgICAgICB2YXIgY3VzdG9tVXBsb2FkID0gZWRpdG9yLmNvbmZpZy5jdXN0b21VcGxvYWQ7XG4gICAgICAgIGlmICghY3VzdG9tVXBsb2FkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoZWRpdG9yLmNvbmZpZy51cGxvYWRJbWdVcmwpIHtcbiAgICAgICAgICAgIGFsZXJ0KCfoh6rlrprkuYnkuIrkvKDml6DmlYjvvIzor6bnnIvmtY/op4jlmajml6Xlv5djb25zb2xlLmxvZycpO1xuICAgICAgICAgICAgRS5lcnJvcign5bey57uP6YWN572u5LqGIHVwbG9hZEltZ1VybCDvvIzlsLHkuI3og73lho3phY3nva4gY3VzdG9tVXBsb2FkIO+8jOS4pOiAheWGsueqgeOAguWwhuWvvOiHtOiHquWumuS5ieS4iuS8oOaXoOaViOOAgicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyICR1cGxvYWRDb250ZW50ID0gZWRpdG9yLiR1cGxvYWRDb250ZW50O1xuICAgICAgICBpZiAoISR1cGxvYWRDb250ZW50KSB7XG4gICAgICAgICAgICBFLmVycm9yKCfoh6rlrprkuYnkuIrkvKDvvIzml6Dms5Xojrflj5YgZWRpdG9yLiR1cGxvYWRDb250ZW50Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVSVxuICAgICAgICB2YXIgJHVwbG9hZEljb24gPSAkKCc8ZGl2IGNsYXNzPVwidXBsb2FkLWljb24tY29udGFpbmVyXCI+PGkgY2xhc3M9XCJ3YW5nZWRpdG9yLW1lbnUtaW1nLXVwbG9hZFwiPjwvaT48L2Rpdj4nKTtcbiAgICAgICAgJHVwbG9hZENvbnRlbnQuYXBwZW5kKCR1cGxvYWRJY29uKTtcblxuICAgICAgICAvLyDorr7nva5pZO+8jOW5tuaatOmcslxuICAgICAgICB2YXIgYnRuSWQgPSAndXBsb2FkJyArIEUucmFuZG9tKCk7XG4gICAgICAgIHZhciBjb250YWluZXJJZCA9ICd1cGxvYWQnICsgRS5yYW5kb20oKTtcbiAgICAgICAgJHVwbG9hZEljb24uYXR0cignaWQnLCBidG5JZCk7XG4gICAgICAgICR1cGxvYWRDb250ZW50LmF0dHIoJ2lkJywgY29udGFpbmVySWQpO1xuXG4gICAgICAgIGVkaXRvci5jdXN0b21VcGxvYWRCdG5JZCA9IGJ0bklkO1xuICAgICAgICBlZGl0b3IuY3VzdG9tVXBsb2FkQ29udGFpbmVySWQgPSBjb250YWluZXJJZDtcbiAgICB9KTtcblxufSk7XG4vLyDniYjmnYPmj5DnpLpcbl9lKGZ1bmN0aW9uIChFLCAkKSB7XG4gICAgRS5pbmZvKCfmnKzpobXpnaLlr4zmlofmnKznvJbovpHlmajnlLEgd2FuZ0VkaXRvciDmj5DkvpsgaHR0cDovL3dhbmdlZGl0b3IuZ2l0aHViLmlvLyAnKTtcbn0pO1xuICAgIFxuICAgIC8vIOacgOe7iOi/lOWbnndhbmdFZGl0b3LmnoTpgKDlh73mlbBcbiAgICByZXR1cm4gd2luZG93LndhbmdFZGl0b3I7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL2NvbW1vbnMvd2FuZ0VkaXRvci9qcy93YW5nRWRpdG9yLmpzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpDQTtBQUNBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekNBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW1DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQUNBO0FBbUJBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBdkRBO0FBTEE7QUFDQTtBQW1FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBbEhBO0FBd0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3QkE7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 2:
/* unknown exports provided */
/* all exports used */
/*!**********************************************!*\
  !*** multi bootstrapCss wangEditorDirective ***!
  \**********************************************/
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! bootstrapCss */"N8WR");
module.exports = __webpack_require__(/*! wangEditorDirective */"eZkf");


/***/ }),

/***/ "3IRH":
/* unknown exports provided */
/* all exports used */
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/***/ (function(module, exports) {

eval("module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiM0lSSC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanM/YzNjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRpZighbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcclxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDNJUkhcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ "DuR2":
/* unknown exports provided */
/* all exports used */
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/***/ (function(module, exports) {

eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRHVSMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/MzY5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IER1UjJcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ "EKta":
/* unknown exports provided */
/* all exports used */
/*!******************************!*\
  !*** ./~/base64-js/index.js ***!
  \******************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return b64.length * 3 / 4 - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRUt0YS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vYmFzZTY0LWpzL2luZGV4LmpzPzJhZGQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gcGxhY2VIb2xkZXJzQ291bnQgKGI2NCkge1xuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICB9XG5cbiAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcbiAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuICAvLyByZXByZXNlbnQgb25lIGJ5dGVcbiAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG4gIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2VcbiAgcmV0dXJuIGI2NFtsZW4gLSAyXSA9PT0gJz0nID8gMiA6IGI2NFtsZW4gLSAxXSA9PT0gJz0nID8gMSA6IDBcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuICByZXR1cm4gYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KVxufVxuXG5mdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG4gIHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG4gIHBsYWNlSG9sZGVycyA9IHBsYWNlSG9sZGVyc0NvdW50KGI2NClcblxuICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuXG5cbiAgdmFyIEwgPSAwXG5cbiAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGXG4gIH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltMKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgb3V0cHV0ID0gJydcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpKSlcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDJdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gJz09J1xuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pXG4gICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMTBdXG4gICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl1cbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXVxuICAgIG91dHB1dCArPSAnPSdcbiAgfVxuXG4gIHBhcnRzLnB1c2gob3V0cHV0KVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Jhc2U2NC1qcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gRUt0YVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ "EuP9":
/* unknown exports provided */
/* all exports used */
/*!***************************!*\
  !*** ./~/buffer/index.js ***!
  \***************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(/*! base64-js */ \"EKta\")\nvar ieee754 = __webpack_require__(/*! ieee754 */ \"ujcs\")\nvar isArray = __webpack_require__(/*! isarray */ \"sOR5\")\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"DuR2\")))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXVQOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vYnVmZmVyL2luZGV4LmpzPzFhNTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpXG4gIH1cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgaWYgKHRoYXQgPT09IG51bGwpIHtcbiAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgICB9XG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbi8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLlxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xuICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgJiZcbiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZW5jb2RpbmdcIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgdGhhdCA9IHRoYXQuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXJcblxuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnb2Zmc2V0XFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IGFycmF5XG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcblxuICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoYXRcbiAgICB9XG5cbiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIHRoYXRcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCAwKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKVxuICAgIH1cblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aCgpYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxuLy8gQnVmZmVyIGluc3RhbmNlcy5cbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIHZhciB5ID0gZW5kIC0gc3RhcnRcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG5cbiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpXG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiZcbiAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyArK2kpIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG4gICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG4gIHZhciBpXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoY29kZSA8IDI1Nikge1xuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2J1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gRXVQOVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ "FFq0":
/* unknown exports provided */
/* all exports used */
/*!****************************************************!*\
  !*** ./app/commons/wangEditor/css/wangEditor.less ***!
  \****************************************************/
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRkZxMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9jb21tb25zL3dhbmdFZGl0b3IvY3NzL3dhbmdFZGl0b3IubGVzcz82ZjcyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvY29tbW9ucy93YW5nRWRpdG9yL2Nzcy93YW5nRWRpdG9yLmxlc3Ncbi8vIG1vZHVsZSBpZCA9IEZGcTBcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ "FZ+f":
/* unknown exports provided */
/* all exports used */
/*!**************************************!*\
  !*** ./~/css-loader/lib/css-base.js ***!
  \**************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap) {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n  var base64 = new Buffer(JSON.stringify(sourceMap)).toString('base64');\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n  return '/*# ' + data + ' */';\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../../buffer/index.js */ \"EuP9\").Buffer))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRlorZi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanM/ZGEwNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCkge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgdmFyIGJhc2U2NCA9IG5ldyBCdWZmZXIoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG4gIHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IEZaK2Zcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ "N8WR":
/* unknown exports provided */
/* all exports used */
/*!**************************************************!*\
  !*** ./app/commons/bootstrapLoad/bootstrap.less ***!
  \**************************************************/
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTjhXUi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9jb21tb25zL2Jvb3RzdHJhcExvYWQvYm9vdHN0cmFwLmxlc3M/MDJlNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYXBwL2NvbW1vbnMvYm9vdHN0cmFwTG9hZC9ib290c3RyYXAubGVzc1xuLy8gbW9kdWxlIGlkID0gTjhXUlxuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ "eZkf":
/* unknown exports provided */
/* all exports used */
/*!*******************************************************!*\
  !*** ./app/commons/wangEditor/wangEditorDirective.ts ***!
  \*******************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/**\r\n * Created by 米饭 on 2017-03-15.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar angular = __webpack_require__(/*! angular */ 0);\r\nvar wangEditor = __webpack_require__(/*! ./js/wangEditor */ \"1Ufw\");\r\nexports.default = angular.module(\"wangEditorDirective\", [])\r\n    .directive(\"editor\", contentEditable)\r\n    .name;\r\nfunction contentEditable() {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"?ngModel\",\r\n        replace: false,\r\n        link: function (scope, element, attrs, ngModel) {\r\n            // 初始化 编辑器内容\r\n            if (!ngModel) {\r\n                return;\r\n            }\r\n            ngModel.$render = function () {\r\n                element.html(ngModel.$viewValue || \"\");\r\n            };\r\n            element.on(\"blur keyup change\", function () {\r\n                scope.$apply(readViewText);\r\n            });\r\n            function readViewText() {\r\n                var html = element.html();\r\n                if (attrs.stripBr && html === \"<br>\") {\r\n                    html = \"\";\r\n                }\r\n                ngModel.$setViewValue(html);\r\n            }\r\n            // 创建编辑器\r\n            var editor = new wangEditor(element);\r\n            editor.config.menus = [\r\n                \"bold\", \"italic\", \"strikethrough\", \"head\", \"|\",\r\n                \"quote\", \"unorderlist\", \"orderlist\", \"alignleft\", \"aligncenter\", \"alignright\", \"|\",\r\n                \"link\", \"table\", \"img\", \"insertcode\", \"|\",\r\n                \"undo\", \"redo\", \"eraser\", \"|\",\r\n                \"source\"\r\n            ];\r\n            editor.config.menuFixed = 50;\r\n            editor.create();\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZVprZi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29tbW9ucy93YW5nRWRpdG9yL3dhbmdFZGl0b3JEaXJlY3RpdmUudHM/YzAzNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSDnsbPppa0gb24gMjAxNy0wMy0xNS5cclxuICovXHJcblxyXG5cclxuXHJcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSBcImFuZ3VsYXJcIjtcclxuXHJcbmltcG9ydCB3YW5nRWRpdG9yID0gcmVxdWlyZShcIi4vanMvd2FuZ0VkaXRvclwiKTtcclxuaW1wb3J0IHtJQXR0cmlidXRlcywgSU5nTW9kZWxDb250cm9sbGVyLCBJU2NvcGV9IGZyb20gXCJhbmd1bGFyXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoXCJ3YW5nRWRpdG9yRGlyZWN0aXZlXCIsIFtdKVxyXG4gICAgLmRpcmVjdGl2ZShcImVkaXRvclwiLCBjb250ZW50RWRpdGFibGUpXHJcbiAgICAubmFtZTtcclxuXHJcbmZ1bmN0aW9uIGNvbnRlbnRFZGl0YWJsZSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxyXG4gICAgICAgIHJlcXVpcmU6IFwiP25nTW9kZWxcIixcclxuICAgICAgICByZXBsYWNlOiBmYWxzZSxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGU6IElTY29wZSwgZWxlbWVudDogSlF1ZXJ5LCBhdHRyczogSUF0dHJpYnV0ZXMsIG5nTW9kZWw6IElOZ01vZGVsQ29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAvLyDliJ3lp4vljJYg57yW6L6R5Zmo5YaF5a65XHJcbiAgICAgICAgICAgIGlmICghbmdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbChuZ01vZGVsLiR2aWV3VmFsdWUgfHwgXCJcIik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGVsZW1lbnQub24oXCJibHVyIGtleXVwIGNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkocmVhZFZpZXdUZXh0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlYWRWaWV3VGV4dCgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBodG1sID0gZWxlbWVudC5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnMuc3RyaXBCciAmJiBodG1sID09PSBcIjxicj5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGh0bWwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDliJvlu7rnvJbovpHlmahcclxuICAgICAgICAgICAgbGV0IGVkaXRvciA9IG5ldyB3YW5nRWRpdG9yKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICBlZGl0b3IuY29uZmlnLm1lbnVzID0gW1xyXG4gICAgICAgICAgICAgICAgXCJib2xkXCIsIFwiaXRhbGljXCIsIFwic3RyaWtldGhyb3VnaFwiLCBcImhlYWRcIiwgXCJ8XCIsXHJcbiAgICAgICAgICAgICAgICBcInF1b3RlXCIsIFwidW5vcmRlcmxpc3RcIiwgXCJvcmRlcmxpc3RcIiwgXCJhbGlnbmxlZnRcIiwgXCJhbGlnbmNlbnRlclwiLCBcImFsaWducmlnaHRcIiwgXCJ8XCIsXHJcbiAgICAgICAgICAgICAgICBcImxpbmtcIiwgXCJ0YWJsZVwiLCBcImltZ1wiLCBcImluc2VydGNvZGVcIiwgXCJ8XCIsXHJcbiAgICAgICAgICAgICAgICBcInVuZG9cIiwgXCJyZWRvXCIsIFwiZXJhc2VyXCIsIFwifFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzb3VyY2VcIlxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBlZGl0b3IuY29uZmlnLm1lbnVGaXhlZCA9IDUwO1xyXG4gICAgICAgICAgICBlZGl0b3IuY3JlYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL2NvbW1vbnMvd2FuZ0VkaXRvci93YW5nRWRpdG9yRGlyZWN0aXZlLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTs7O0FBSUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ "fjbf":
/* unknown exports provided */
/* all exports used */
/*!*************************************!*\
  !*** ./~/style-loader/addStyles.js ***!
  \*************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = __webpack_require__(/*! ./fixUrls */ \"quY5\");\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmpiZi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qcz9iOTgwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG52YXIgc3R5bGVzSW5Eb20gPSB7fSxcblx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XG5cdFx0dmFyIG1lbW87XG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRyZXR1cm4gbWVtbztcblx0XHR9O1xuXHR9LFxuXHRpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbigpIHtcblx0XHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHRcdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0XHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyIFxuXHRcdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHRcdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRcdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcblx0fSksXG5cdGdldEVsZW1lbnQgPSAoZnVuY3Rpb24oZm4pIHtcblx0XHR2YXIgbWVtbyA9IHt9O1xuXHRcdHJldHVybiBmdW5jdGlvbihzZWxlY3Rvcikge1xuXHRcdFx0aWYgKHR5cGVvZiBtZW1vW3NlbGVjdG9yXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRtZW1vW3NlbGVjdG9yXSA9IGZuLmNhbGwodGhpcywgc2VsZWN0b3IpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1lbW9bc2VsZWN0b3JdXG5cdFx0fTtcblx0fSkoZnVuY3Rpb24gKHN0eWxlVGFyZ2V0KSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3R5bGVUYXJnZXQpXG5cdH0pLFxuXHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wID0gW10sXG5cdGZpeFVybHMgPSByZXF1aXJlKFwiLi9maXhVcmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRJbnRvID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxuXHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblx0aWYgKCFzdHlsZVRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0c3R5bGVUYXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgc3R5bGVUYXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRzdHlsZVRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlVGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cdFx0fVxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0c3R5bGVUYXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblxuXHRhdHRhY2hUYWdBdHRycyhzdHlsZUVsZW1lbnQsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0cmV0dXJuIHN0eWxlRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucykge1xuXHR2YXIgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGF0dGFjaFRhZ0F0dHJzKGxpbmtFbGVtZW50LCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcblx0cmV0dXJuIGxpbmtFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBhdHRhY2hUYWdBdHRycyhlbGVtZW50LCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVFbGVtZW50LCB1cGRhdGUsIHJlbW92ZTtcblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cdH0gZWxzZSBpZihvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG5cdFx0XHRpZihzdHlsZUVsZW1lbnQuaHJlZilcblx0XHRcdFx0VVJMLnJldm9rZU9iamVjdFVSTChzdHlsZUVsZW1lbnQuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdGlmKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayhsaW5rRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKiBJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscyl7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGlua0VsZW1lbnQuaHJlZjtcblxuXHRsaW5rRWxlbWVudC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpXG5cdFx0VVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IGZqYmZcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ "quY5":
/* unknown exports provided */
/* all exports used */
/*!***********************************!*\
  !*** ./~/style-loader/fixUrls.js ***!
  \***********************************/
/***/ (function(module, exports) {

eval("\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVZNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vc3R5bGUtbG9hZGVyL2ZpeFVybHMuanM/NGUyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcLykvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zdHlsZS1sb2FkZXIvZml4VXJscy5qc1xuLy8gbW9kdWxlIGlkID0gcXVZNVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ "sOR5":
/* unknown exports provided */
/* all exports used */
/*!****************************!*\
  !*** ./~/isarray/index.js ***!
  \****************************/
/***/ (function(module, exports) {

eval("var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic09SNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vaXNhcnJheS9pbmRleC5qcz9lYWJjIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IHNPUjVcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ "ujcs":
/* unknown exports provided */
/* all exports used */
/*!****************************!*\
  !*** ./~/ieee754/index.js ***!
  \****************************/
/***/ (function(module, exports) {

eval("exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWpjcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vaWVlZTc1NC9pbmRleC5qcz83MGZlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2llZWU3NTQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IHVqY3Ncbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ })

/******/ });